var s0=Object.defineProperty;var a0=(he,xn,nr)=>xn in he?s0(he,xn,{enumerable:!0,configurable:!0,writable:!0,value:nr}):he[xn]=nr;var Qs=(he,xn,nr)=>a0(he,typeof xn!="symbol"?xn+"":xn,nr);(function(he,xn){"use strict";function nr(s){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const A in s)if(A!=="default"){const L=Object.getOwnPropertyDescriptor(s,A);Object.defineProperty(f,A,L.get?L:{enumerable:!0,get:()=>s[A]})}}return f.default=s,Object.freeze(f)}const kt=nr(he);var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Di(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Js={exports:{}},wr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao;function ic(){if(Ao)return wr;Ao=1;var s=he,f=Symbol.for("react.element"),A=Symbol.for("react.fragment"),L=Object.prototype.hasOwnProperty,M=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function o(c,m,y){var w,P={},S=null,p=null;y!==void 0&&(S=""+y),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(p=m.ref);for(w in m)L.call(m,w)&&!_.hasOwnProperty(w)&&(P[w]=m[w]);if(c&&c.defaultProps)for(w in m=c.defaultProps,m)P[w]===void 0&&(P[w]=m[w]);return{$$typeof:f,type:c,key:S,ref:p,props:P,_owner:M.current}}return wr.Fragment=A,wr.jsx=o,wr.jsxs=o,wr}var Lo;function sc(){return Lo||(Lo=1,Js.exports=ic()),Js.exports}var J=sc(),Oi={},Io;function ac(){if(Io)return Oi;Io=1;var s=xn;return Oi.createRoot=s.createRoot,Oi.hydrateRoot=s.hydrateRoot,Oi}var oc=ac();const lc=Di(oc);var zi={exports:{}},Sr={},Zs={},$s={},Do;function Te(){return Do||(Do=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s._registerNode=s.Konva=s.glob=void 0;const f=Math.PI/180;function A(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}s.glob=typeof Mo<"u"?Mo:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},s.Konva={_global:s.glob,version:"9.3.20",isBrowser:A(),isUnminified:/param/.test((function(M){}).toString()),dblClickWindow:400,getAngle(M){return s.Konva.angleDeg?M*f:M},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return s.Konva.DD.isDragging},isTransforming(){var M;return(M=s.Konva.Transformer)===null||M===void 0?void 0:M.isTransforming()},isDragReady(){return!!s.Konva.DD.node},releaseCanvasOnDestroy:!0,document:s.glob.document,_injectGlobal(M){s.glob.Konva=M}};const L=M=>{s.Konva[M.prototype.getClassName()]=M};s._registerNode=L,s.Konva._injectGlobal(s.Konva)}($s)),$s}var ea={},Oo;function Xe(){return Oo||(Oo=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Util=s.Transform=void 0;const f=Te();class A{constructor(g=[1,0,0,1,0,0]){this.dirty=!1,this.m=g&&g.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new A(this.m)}copyInto(g){g.m[0]=this.m[0],g.m[1]=this.m[1],g.m[2]=this.m[2],g.m[3]=this.m[3],g.m[4]=this.m[4],g.m[5]=this.m[5]}point(g){const T=this.m;return{x:T[0]*g.x+T[2]*g.y+T[4],y:T[1]*g.x+T[3]*g.y+T[5]}}translate(g,T){return this.m[4]+=this.m[0]*g+this.m[2]*T,this.m[5]+=this.m[1]*g+this.m[3]*T,this}scale(g,T){return this.m[0]*=g,this.m[1]*=g,this.m[2]*=T,this.m[3]*=T,this}rotate(g){const T=Math.cos(g),F=Math.sin(g),O=this.m[0]*T+this.m[2]*F,v=this.m[1]*T+this.m[3]*F,N=this.m[0]*-F+this.m[2]*T,E=this.m[1]*-F+this.m[3]*T;return this.m[0]=O,this.m[1]=v,this.m[2]=N,this.m[3]=E,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(g,T){const F=this.m[0]+this.m[2]*T,O=this.m[1]+this.m[3]*T,v=this.m[2]+this.m[0]*g,N=this.m[3]+this.m[1]*g;return this.m[0]=F,this.m[1]=O,this.m[2]=v,this.m[3]=N,this}multiply(g){const T=this.m[0]*g.m[0]+this.m[2]*g.m[1],F=this.m[1]*g.m[0]+this.m[3]*g.m[1],O=this.m[0]*g.m[2]+this.m[2]*g.m[3],v=this.m[1]*g.m[2]+this.m[3]*g.m[3],N=this.m[0]*g.m[4]+this.m[2]*g.m[5]+this.m[4],E=this.m[1]*g.m[4]+this.m[3]*g.m[5]+this.m[5];return this.m[0]=T,this.m[1]=F,this.m[2]=O,this.m[3]=v,this.m[4]=N,this.m[5]=E,this}invert(){const g=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),T=this.m[3]*g,F=-this.m[1]*g,O=-this.m[2]*g,v=this.m[0]*g,N=g*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),E=g*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=T,this.m[1]=F,this.m[2]=O,this.m[3]=v,this.m[4]=N,this.m[5]=E,this}getMatrix(){return this.m}decompose(){const g=this.m[0],T=this.m[1],F=this.m[2],O=this.m[3],v=this.m[4],N=this.m[5],E=g*O-T*F,z={x:v,y:N,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(g!=0||T!=0){const V=Math.sqrt(g*g+T*T);z.rotation=T>0?Math.acos(g/V):-Math.acos(g/V),z.scaleX=V,z.scaleY=E/V,z.skewX=(g*F+T*O)/E,z.skewY=0}else if(F!=0||O!=0){const V=Math.sqrt(F*F+O*O);z.rotation=Math.PI/2-(O>0?Math.acos(-F/V):-Math.acos(F/V)),z.scaleX=E/V,z.scaleY=V,z.skewX=0,z.skewY=(g*F+T*O)/E}return z.rotation=s.Util._getRotation(z.rotation),z}}s.Transform=A;const L="[object Array]",M="[object Number]",_="[object String]",o="[object Boolean]",c=Math.PI/180,m=180/Math.PI,y="#",w="",P="0",S="Konva warning: ",p="Konva error: ",d="rgb(",C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let I=[];const u=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(a){setTimeout(a,60)};s.Util={_isElement(a){return!!(a&&a.nodeType==1)},_isFunction(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isPlainObject(a){return!!a&&a.constructor===Object},_isArray(a){return Object.prototype.toString.call(a)===L},_isNumber(a){return Object.prototype.toString.call(a)===M&&!isNaN(a)&&isFinite(a)},_isString(a){return Object.prototype.toString.call(a)===_},_isBoolean(a){return Object.prototype.toString.call(a)===o},isObject(a){return a instanceof Object},isValidSelector(a){if(typeof a!="string")return!1;const g=a[0];return g==="#"||g==="."||g===g.toUpperCase()},_sign(a){return a===0||a>0?1:-1},requestAnimFrame(a){I.push(a),I.length===1&&u(function(){const g=I;I=[],g.forEach(function(T){T()})})},createCanvasElement(){const a=document.createElement("canvas");try{a.style=a.style||{}}catch{}return a},createImageElement(){return document.createElement("img")},_isInDocument(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},_urlToImage(a,g){const T=s.Util.createImageElement();T.onload=function(){g(T)},T.src=a},_rgbToHex(a,g,T){return((1<<24)+(a<<16)+(g<<8)+T).toString(16).slice(1)},_hexToRgb(a){a=a.replace(y,w);const g=parseInt(a,16);return{r:g>>16&255,g:g>>8&255,b:g&255}},getRandomColor(){let a=(Math.random()*16777215<<0).toString(16);for(;a.length<6;)a=P+a;return y+a},getRGB(a){let g;return a in C?(g=C[a],{r:g[0],g:g[1],b:g[2]}):a[0]===y?this._hexToRgb(a.substring(1)):a.substr(0,4)===d?(g=b.exec(a.replace(/ /g,"")),{r:parseInt(g[1],10),g:parseInt(g[2],10),b:parseInt(g[3],10)}):{r:0,g:0,b:0}},colorToRGBA(a){return a=a||"black",s.Util._namedColorToRBA(a)||s.Util._hex3ColorToRGBA(a)||s.Util._hex4ColorToRGBA(a)||s.Util._hex6ColorToRGBA(a)||s.Util._hex8ColorToRGBA(a)||s.Util._rgbColorToRGBA(a)||s.Util._rgbaColorToRGBA(a)||s.Util._hslColorToRGBA(a)},_namedColorToRBA(a){const g=C[a.toLowerCase()];return g?{r:g[0],g:g[1],b:g[2],a:1}:null},_rgbColorToRGBA(a){if(a.indexOf("rgb(")===0){a=a.match(/rgb\(([^)]+)\)/)[1];const g=a.split(/ *, */).map(Number);return{r:g[0],g:g[1],b:g[2],a:1}}},_rgbaColorToRGBA(a){if(a.indexOf("rgba(")===0){a=a.match(/rgba\(([^)]+)\)/)[1];const g=a.split(/ *, */).map((T,F)=>T.slice(-1)==="%"?F===3?parseInt(T)/100:parseInt(T)/100*255:Number(T));return{r:g[0],g:g[1],b:g[2],a:g[3]}}},_hex8ColorToRGBA(a){if(a[0]==="#"&&a.length===9)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:parseInt(a.slice(7,9),16)/255}},_hex6ColorToRGBA(a){if(a[0]==="#"&&a.length===7)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:1}},_hex4ColorToRGBA(a){if(a[0]==="#"&&a.length===5)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:parseInt(a[4]+a[4],16)/255}},_hex3ColorToRGBA(a){if(a[0]==="#"&&a.length===4)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:1}},_hslColorToRGBA(a){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(a)){const[g,...T]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a),F=Number(T[0])/360,O=Number(T[1])/100,v=Number(T[2])/100;let N,E,z;if(O===0)return z=v*255,{r:Math.round(z),g:Math.round(z),b:Math.round(z),a:1};v<.5?N=v*(1+O):N=v+O-v*O;const V=2*v-N,l=[0,0,0];for(let R=0;R<3;R++)E=F+1/3*-(R-1),E<0&&E++,E>1&&E--,6*E<1?z=V+(N-V)*6*E:2*E<1?z=N:3*E<2?z=V+(N-V)*(2/3-E)*6:z=V,l[R]=z*255;return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection(a,g){return!(g.x>a.x+a.width||g.x+g.width<a.x||g.y>a.y+a.height||g.y+g.height<a.y)},cloneObject(a){const g={};for(const T in a)this._isPlainObject(a[T])?g[T]=this.cloneObject(a[T]):this._isArray(a[T])?g[T]=this.cloneArray(a[T]):g[T]=a[T];return g},cloneArray(a){return a.slice(0)},degToRad(a){return a*c},radToDeg(a){return a*m},_degToRad(a){return s.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),s.Util.degToRad(a)},_radToDeg(a){return s.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),s.Util.radToDeg(a)},_getRotation(a){return f.Konva.angleDeg?s.Util.radToDeg(a):a},_capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)},throw(a){throw new Error(p+a)},error(a){console.error(p+a)},warn(a){f.Konva.showWarnings&&console.warn(S+a)},each(a,g){for(const T in a)g(T,a[T])},_inRange(a,g,T){return g<=a&&a<T},_getProjectionToSegment(a,g,T,F,O,v){let N,E,z;const V=(a-T)*(a-T)+(g-F)*(g-F);if(V==0)N=a,E=g,z=(O-T)*(O-T)+(v-F)*(v-F);else{const l=((O-a)*(T-a)+(v-g)*(F-g))/V;l<0?(N=a,E=g,z=(a-O)*(a-O)+(g-v)*(g-v)):l>1?(N=T,E=F,z=(T-O)*(T-O)+(F-v)*(F-v)):(N=a+l*(T-a),E=g+l*(F-g),z=(N-O)*(N-O)+(E-v)*(E-v))}return[N,E,z]},_getProjectionToLine(a,g,T){const F=s.Util.cloneObject(a);let O=Number.MAX_VALUE;return g.forEach(function(v,N){if(!T&&N===g.length-1)return;const E=g[(N+1)%g.length],z=s.Util._getProjectionToSegment(v.x,v.y,E.x,E.y,a.x,a.y),V=z[0],l=z[1],R=z[2];R<O&&(F.x=V,F.y=l,O=R)}),F},_prepareArrayForTween(a,g,T){const F=[],O=[];if(a.length>g.length){const N=g;g=a,a=N}for(let N=0;N<a.length;N+=2)F.push({x:a[N],y:a[N+1]});for(let N=0;N<g.length;N+=2)O.push({x:g[N],y:g[N+1]});const v=[];return O.forEach(function(N){const E=s.Util._getProjectionToLine(N,F,T);v.push(E.x),v.push(E.y)}),v},_prepareToStringify(a){let g;a.visitedByCircularReferenceRemoval=!0;for(const T in a)if(a.hasOwnProperty(T)&&a[T]&&typeof a[T]=="object"){if(g=Object.getOwnPropertyDescriptor(a,T),a[T].visitedByCircularReferenceRemoval||s.Util._isElement(a[T]))if(g.configurable)delete a[T];else return null;else if(s.Util._prepareToStringify(a[T])===null)if(g.configurable)delete a[T];else return null}return delete a.visitedByCircularReferenceRemoval,a},_assign(a,g){for(const T in g)a[T]=g[T];return a},_getFirstPointerId(a){return a.touches?a.changedTouches[0].identifier:a.pointerId||999},releaseCanvas(...a){f.Konva.releaseCanvasOnDestroy&&a.forEach(g=>{g.width=0,g.height=0})},drawRoundedRectPath(a,g,T,F){let O=0,v=0,N=0,E=0;typeof F=="number"?O=v=N=E=Math.min(F,g/2,T/2):(O=Math.min(F[0]||0,g/2,T/2),v=Math.min(F[1]||0,g/2,T/2),E=Math.min(F[2]||0,g/2,T/2),N=Math.min(F[3]||0,g/2,T/2)),a.moveTo(O,0),a.lineTo(g-v,0),a.arc(g-v,v,v,Math.PI*3/2,0,!1),a.lineTo(g,T-E),a.arc(g-E,T-E,E,0,Math.PI/2,!1),a.lineTo(N,T),a.arc(N,T-N,N,Math.PI/2,Math.PI,!1),a.lineTo(0,O),a.arc(O,O,O,Math.PI,Math.PI*3/2,!1)}}}(ea)),ea}var Cr={},ta={},Pt={},zo;function Fe(){if(zo)return Pt;zo=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.RGBComponent=L,Pt.alphaComponent=M,Pt.getNumberValidator=_,Pt.getNumberOrArrayOfNumbersValidator=o,Pt.getNumberOrAutoValidator=c,Pt.getStringValidator=m,Pt.getStringOrGradientValidator=y,Pt.getFunctionValidator=w,Pt.getNumberArrayValidator=P,Pt.getBooleanValidator=S,Pt.getComponentValidator=p;const s=Te(),f=Xe();function A(d){return f.Util._isString(d)?'"'+d+'"':Object.prototype.toString.call(d)==="[object Number]"||f.Util._isBoolean(d)?d:Object.prototype.toString.call(d)}function L(d){return d>255?255:d<0?0:Math.round(d)}function M(d){return d>1?1:d<1e-4?1e-4:d}function _(){if(s.Konva.isUnminified)return function(d,C){return f.Util._isNumber(d)||f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a number.'),d}}function o(d){if(s.Konva.isUnminified)return function(C,b){let I=f.Util._isNumber(C),u=f.Util._isArray(C)&&C.length==d;return!I&&!u&&f.Util.warn(A(C)+' is a not valid value for "'+b+'" attribute. The value should be a number or Array<number>('+d+")"),C}}function c(){if(s.Konva.isUnminified)return function(d,C){var b=f.Util._isNumber(d),I=d==="auto";return b||I||f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a number or "auto".'),d}}function m(){if(s.Konva.isUnminified)return function(d,C){return f.Util._isString(d)||f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a string.'),d}}function y(){if(s.Konva.isUnminified)return function(d,C){const b=f.Util._isString(d),I=Object.prototype.toString.call(d)==="[object CanvasGradient]"||d&&d.addColorStop;return b||I||f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a string or a native gradient.'),d}}function w(){if(s.Konva.isUnminified)return function(d,C){return f.Util._isFunction(d)||f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a function.'),d}}function P(){if(s.Konva.isUnminified)return function(d,C){const b=Int8Array?Object.getPrototypeOf(Int8Array):null;return b&&d instanceof b||(f.Util._isArray(d)?d.forEach(function(I){f.Util._isNumber(I)||f.Util.warn('"'+C+'" attribute has non numeric element '+I+". Make sure that all elements are numbers.")}):f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a array of numbers.')),d}}function S(){if(s.Konva.isUnminified)return function(d,C){var b=d===!0||d===!1;return b||f.Util.warn(A(d)+' is a not valid value for "'+C+'" attribute. The value should be a boolean.'),d}}function p(d){if(s.Konva.isUnminified)return function(C,b){return C==null||f.Util.isObject(C)||f.Util.warn(A(C)+' is a not valid value for "'+b+'" attribute. The value should be an object with properties '+d),C}}return Pt}var Go;function Re(){return Go||(Go=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Factory=void 0;const f=Xe(),A=Fe(),L="get",M="set";s.Factory={addGetterSetter(_,o,c,m,y){s.Factory.addGetter(_,o,c),s.Factory.addSetter(_,o,m,y),s.Factory.addOverloadedGetterSetter(_,o)},addGetter(_,o,c){var m=L+f.Util._capitalize(o);_.prototype[m]=_.prototype[m]||function(){const y=this.attrs[o];return y===void 0?c:y}},addSetter(_,o,c,m){var y=M+f.Util._capitalize(o);_.prototype[y]||s.Factory.overWriteSetter(_,o,c,m)},overWriteSetter(_,o,c,m){var y=M+f.Util._capitalize(o);_.prototype[y]=function(w){return c&&w!==void 0&&w!==null&&(w=c.call(this,w,o)),this._setAttr(o,w),m&&m.call(this),this}},addComponentsGetterSetter(_,o,c,m,y){const w=c.length,P=f.Util._capitalize,S=L+P(o),p=M+P(o);_.prototype[S]=function(){const C={};for(let b=0;b<w;b++){const I=c[b];C[I]=this.getAttr(o+P(I))}return C};const d=(0,A.getComponentValidator)(c);_.prototype[p]=function(C){const b=this.attrs[o];m&&(C=m.call(this,C,o)),d&&d.call(this,C,o);for(const I in C)C.hasOwnProperty(I)&&this._setAttr(o+P(I),C[I]);return C||c.forEach(I=>{this._setAttr(o+P(I),void 0)}),this._fireChangeEvent(o,b,C),y&&y.call(this),this},s.Factory.addOverloadedGetterSetter(_,o)},addOverloadedGetterSetter(_,o){var c=f.Util._capitalize(o),m=M+c,y=L+c;_.prototype[o]=function(){return arguments.length?(this[m](arguments[0]),this):this[y]()}},addDeprecatedGetterSetter(_,o,c,m){f.Util.error("Adding deprecated "+o);const y=L+f.Util._capitalize(o),w=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";_.prototype[y]=function(){f.Util.error(w);const P=this.attrs[o];return P===void 0?c:P},s.Factory.addSetter(_,o,m,function(){f.Util.error(w)}),s.Factory.addOverloadedGetterSetter(_,o)},backCompat(_,o){f.Util.each(o,function(c,m){const y=_.prototype[m],w=L+f.Util._capitalize(c),P=M+f.Util._capitalize(c);function S(){y.apply(this,arguments),f.Util.error('"'+c+'" method is deprecated and will be removed soon. Use ""'+m+'" instead.')}_.prototype[c]=S,_.prototype[w]=S,_.prototype[P]=S})},afterSetFilter(){this._filterUpToDate=!1}}}(ta)),ta}var wn={},Sn={},Bo;function Uo(){if(Bo)return Sn;Bo=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.HitContext=Sn.SceneContext=Sn.Context=void 0;const s=Xe(),f=Te();function A(I){const u=[],a=I.length,g=s.Util;for(let T=0;T<a;T++){let F=I[T];g._isNumber(F)?F=Math.round(F*1e3)/1e3:g._isString(F)||(F=F+""),u.push(F)}return u}const L=",",M="(",_=")",o="([",c="])",m=";",y="()",w="=",P=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],S=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],p=100;let d=class{constructor(u){this.canvas=u,f.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(u){u.fillEnabled()&&this._fill(u)}_fill(u){}strokeShape(u){u.hasStroke()&&this._stroke(u)}_stroke(u){}fillStrokeShape(u){u.attrs.fillAfterStrokeEnabled?(this.strokeShape(u),this.fillShape(u)):(this.fillShape(u),this.strokeShape(u))}getTrace(u,a){let g=this.traceArr,T=g.length,F="",O,v,N,E;for(O=0;O<T;O++)v=g[O],N=v.method,N?(E=v.args,F+=N,u?F+=y:s.Util._isArray(E[0])?F+=o+E.join(L)+c:(a&&(E=E.map(z=>typeof z=="number"?Math.floor(z):z)),F+=M+E.join(L)+_)):(F+=v.property,u||(F+=w+v.val)),F+=m;return F}clearTrace(){this.traceArr=[]}_trace(u){let a=this.traceArr,g;a.push(u),g=a.length,g>=p&&a.shift()}reset(){const u=this.getCanvas().getPixelRatio();this.setTransform(1*u,0,0,1*u,0,0)}getCanvas(){return this.canvas}clear(u){const a=this.getCanvas();u?this.clearRect(u.x||0,u.y||0,u.width||0,u.height||0):this.clearRect(0,0,a.getWidth()/a.pixelRatio,a.getHeight()/a.pixelRatio)}_applyLineCap(u){const a=u.attrs.lineCap;a&&this.setAttr("lineCap",a)}_applyOpacity(u){const a=u.getAbsoluteOpacity();a!==1&&this.setAttr("globalAlpha",a)}_applyLineJoin(u){const a=u.attrs.lineJoin;a&&this.setAttr("lineJoin",a)}setAttr(u,a){this._context[u]=a}arc(u,a,g,T,F,O){this._context.arc(u,a,g,T,F,O)}arcTo(u,a,g,T,F){this._context.arcTo(u,a,g,T,F)}beginPath(){this._context.beginPath()}bezierCurveTo(u,a,g,T,F,O){this._context.bezierCurveTo(u,a,g,T,F,O)}clearRect(u,a,g,T){this._context.clearRect(u,a,g,T)}clip(...u){this._context.clip.apply(this._context,u)}closePath(){this._context.closePath()}createImageData(u,a){const g=arguments;if(g.length===2)return this._context.createImageData(u,a);if(g.length===1)return this._context.createImageData(u)}createLinearGradient(u,a,g,T){return this._context.createLinearGradient(u,a,g,T)}createPattern(u,a){return this._context.createPattern(u,a)}createRadialGradient(u,a,g,T,F,O){return this._context.createRadialGradient(u,a,g,T,F,O)}drawImage(u,a,g,T,F,O,v,N,E){const z=arguments,V=this._context;z.length===3?V.drawImage(u,a,g):z.length===5?V.drawImage(u,a,g,T,F):z.length===9&&V.drawImage(u,a,g,T,F,O,v,N,E)}ellipse(u,a,g,T,F,O,v,N){this._context.ellipse(u,a,g,T,F,O,v,N)}isPointInPath(u,a,g,T){return g?this._context.isPointInPath(g,u,a,T):this._context.isPointInPath(u,a,T)}fill(...u){this._context.fill.apply(this._context,u)}fillRect(u,a,g,T){this._context.fillRect(u,a,g,T)}strokeRect(u,a,g,T){this._context.strokeRect(u,a,g,T)}fillText(u,a,g,T){T?this._context.fillText(u,a,g,T):this._context.fillText(u,a,g)}measureText(u){return this._context.measureText(u)}getImageData(u,a,g,T){return this._context.getImageData(u,a,g,T)}lineTo(u,a){this._context.lineTo(u,a)}moveTo(u,a){this._context.moveTo(u,a)}rect(u,a,g,T){this._context.rect(u,a,g,T)}roundRect(u,a,g,T,F){this._context.roundRect(u,a,g,T,F)}putImageData(u,a,g){this._context.putImageData(u,a,g)}quadraticCurveTo(u,a,g,T){this._context.quadraticCurveTo(u,a,g,T)}restore(){this._context.restore()}rotate(u){this._context.rotate(u)}save(){this._context.save()}scale(u,a){this._context.scale(u,a)}setLineDash(u){this._context.setLineDash?this._context.setLineDash(u):"mozDash"in this._context?this._context.mozDash=u:"webkitLineDash"in this._context&&(this._context.webkitLineDash=u)}getLineDash(){return this._context.getLineDash()}setTransform(u,a,g,T,F,O){this._context.setTransform(u,a,g,T,F,O)}stroke(u){u?this._context.stroke(u):this._context.stroke()}strokeText(u,a,g,T){this._context.strokeText(u,a,g,T)}transform(u,a,g,T,F,O){this._context.transform(u,a,g,T,F,O)}translate(u,a){this._context.translate(u,a)}_enableTrace(){let u=this,a=P.length,g=this.setAttr,T,F;const O=function(v){let N=u[v],E;u[v]=function(){return F=A(Array.prototype.slice.call(arguments,0)),E=N.apply(u,arguments),u._trace({method:v,args:F}),E}};for(T=0;T<a;T++)O(P[T]);u.setAttr=function(){g.apply(u,arguments);const v=arguments[0];let N=arguments[1];(v==="shadowOffsetX"||v==="shadowOffsetY"||v==="shadowBlur")&&(N=N/this.canvas.getPixelRatio()),u._trace({property:v,val:N})}}_applyGlobalCompositeOperation(u){const a=u.attrs.globalCompositeOperation;!a||a==="source-over"||this.setAttr("globalCompositeOperation",a)}};Sn.Context=d,S.forEach(function(I){Object.defineProperty(d.prototype,I,{get(){return this._context[I]},set(u){this._context[I]=u}})});class C extends d{constructor(u,{willReadFrequently:a=!1}={}){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:a})}_fillColor(u){const a=u.fill();this.setAttr("fillStyle",a),u._fillFunc(this)}_fillPattern(u){this.setAttr("fillStyle",u._getFillPattern()),u._fillFunc(this)}_fillLinearGradient(u){const a=u._getLinearGradient();a&&(this.setAttr("fillStyle",a),u._fillFunc(this))}_fillRadialGradient(u){const a=u._getRadialGradient();a&&(this.setAttr("fillStyle",a),u._fillFunc(this))}_fill(u){const a=u.fill(),g=u.getFillPriority();if(a&&g==="color"){this._fillColor(u);return}const T=u.getFillPatternImage();if(T&&g==="pattern"){this._fillPattern(u);return}const F=u.getFillLinearGradientColorStops();if(F&&g==="linear-gradient"){this._fillLinearGradient(u);return}const O=u.getFillRadialGradientColorStops();if(O&&g==="radial-gradient"){this._fillRadialGradient(u);return}a?this._fillColor(u):T?this._fillPattern(u):F?this._fillLinearGradient(u):O&&this._fillRadialGradient(u)}_strokeLinearGradient(u){const a=u.getStrokeLinearGradientStartPoint(),g=u.getStrokeLinearGradientEndPoint(),T=u.getStrokeLinearGradientColorStops(),F=this.createLinearGradient(a.x,a.y,g.x,g.y);if(T){for(let O=0;O<T.length;O+=2)F.addColorStop(T[O],T[O+1]);this.setAttr("strokeStyle",F)}}_stroke(u){const a=u.dash(),g=u.getStrokeScaleEnabled();if(u.hasStroke()){if(!g){this.save();const F=this.getCanvas().getPixelRatio();this.setTransform(F,0,0,F,0,0)}this._applyLineCap(u),a&&u.dashEnabled()&&(this.setLineDash(a),this.setAttr("lineDashOffset",u.dashOffset())),this.setAttr("lineWidth",u.strokeWidth()),u.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),u.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(u):this.setAttr("strokeStyle",u.stroke()),u._strokeFunc(this),g||this.restore()}}_applyShadow(u){var a,g,T;const F=(a=u.getShadowRGBA())!==null&&a!==void 0?a:"black",O=(g=u.getShadowBlur())!==null&&g!==void 0?g:5,v=(T=u.getShadowOffset())!==null&&T!==void 0?T:{x:0,y:0},N=u.getAbsoluteScale(),E=this.canvas.getPixelRatio(),z=N.x*E,V=N.y*E;this.setAttr("shadowColor",F),this.setAttr("shadowBlur",O*Math.min(Math.abs(z),Math.abs(V))),this.setAttr("shadowOffsetX",v.x*z),this.setAttr("shadowOffsetY",v.y*V)}}Sn.SceneContext=C;class b extends d{constructor(u){super(u),this._context=u._canvas.getContext("2d",{willReadFrequently:!0})}_fill(u){this.save(),this.setAttr("fillStyle",u.colorKey),u._fillFuncHit(this),this.restore()}strokeShape(u){u.hasHitStroke()&&this._stroke(u)}_stroke(u){if(u.hasHitStroke()){const a=u.getStrokeScaleEnabled();if(!a){this.save();const F=this.getCanvas().getPixelRatio();this.setTransform(F,0,0,F,0,0)}this._applyLineCap(u);const g=u.hitStrokeWidth(),T=g==="auto"?u.strokeWidth():g;this.setAttr("lineWidth",T),this.setAttr("strokeStyle",u.colorKey),u._strokeFuncHit(this),a||this.restore()}}}return Sn.HitContext=b,Sn}var jo;function Gi(){if(jo)return wn;jo=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.HitCanvas=wn.SceneCanvas=wn.Canvas=void 0;const s=Xe(),f=Uo(),A=Te();let L;function M(){if(L)return L;const m=s.Util.createCanvasElement(),y=m.getContext("2d");return L=function(){const w=A.Konva._global.devicePixelRatio||1,P=y.webkitBackingStorePixelRatio||y.mozBackingStorePixelRatio||y.msBackingStorePixelRatio||y.oBackingStorePixelRatio||y.backingStorePixelRatio||1;return w/P}(),s.Util.releaseCanvas(m),L}let _=class{constructor(y){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const P=(y||{}).pixelRatio||A.Konva.pixelRatio||M();this.pixelRatio=P,this._canvas=s.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(y){const w=this.pixelRatio;this.pixelRatio=y,this.setSize(this.getWidth()/w,this.getHeight()/w)}setWidth(y){this.width=this._canvas.width=y*this.pixelRatio,this._canvas.style.width=y+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}setHeight(y){this.height=this._canvas.height=y*this.pixelRatio,this._canvas.style.height=y+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}getWidth(){return this.width}getHeight(){return this.height}setSize(y,w){this.setWidth(y||0),this.setHeight(w||0)}toDataURL(y,w){try{return this._canvas.toDataURL(y,w)}catch{try{return this._canvas.toDataURL()}catch(S){return s.Util.error("Unable to get data URL. "+S.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};wn.Canvas=_;class o extends _{constructor(y={width:0,height:0,willReadFrequently:!1}){super(y),this.context=new f.SceneContext(this,{willReadFrequently:y.willReadFrequently}),this.setSize(y.width,y.height)}}wn.SceneCanvas=o;class c extends _{constructor(y={width:0,height:0}){super(y),this.hitCanvas=!0,this.context=new f.HitContext(this),this.setSize(y.width,y.height)}}return wn.HitCanvas=c,wn}var na={},Ho;function ra(){return Ho||(Ho=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.DD=void 0;const f=Te(),A=Xe();s.DD={get isDragging(){let L=!1;return s.DD._dragElements.forEach(M=>{M.dragStatus==="dragging"&&(L=!0)}),L},justDragged:!1,get node(){let L;return s.DD._dragElements.forEach(M=>{L=M.node}),L},_dragElements:new Map,_drag(L){const M=[];s.DD._dragElements.forEach((_,o)=>{const{node:c}=_,m=c.getStage();m.setPointersPositions(L),_.pointerId===void 0&&(_.pointerId=A.Util._getFirstPointerId(L));const y=m._changedPointerPositions.find(w=>w.id===_.pointerId);if(y){if(_.dragStatus!=="dragging"){const w=c.dragDistance();if(Math.max(Math.abs(y.x-_.startPointerPos.x),Math.abs(y.y-_.startPointerPos.y))<w||(c.startDrag({evt:L}),!c.isDragging()))return}c._setDragPosition(L,_),M.push(c)}}),M.forEach(_=>{_.fire("dragmove",{type:"dragmove",target:_,evt:L},!0)})},_endDragBefore(L){const M=[];s.DD._dragElements.forEach(_=>{const{node:o}=_,c=o.getStage();if(L&&c.setPointersPositions(L),!c._changedPointerPositions.find(w=>w.id===_.pointerId))return;(_.dragStatus==="dragging"||_.dragStatus==="stopped")&&(s.DD.justDragged=!0,f.Konva._mouseListenClick=!1,f.Konva._touchListenClick=!1,f.Konva._pointerListenClick=!1,_.dragStatus="stopped");const y=_.node.getLayer()||_.node instanceof f.Konva.Stage&&_.node;y&&M.indexOf(y)===-1&&M.push(y)}),M.forEach(_=>{_.draw()})},_endDragAfter(L){s.DD._dragElements.forEach((M,_)=>{M.dragStatus==="stopped"&&M.node.fire("dragend",{type:"dragend",target:M.node,evt:L},!0),M.dragStatus!=="dragging"&&s.DD._dragElements.delete(_)})}},f.Konva.isBrowser&&(window.addEventListener("mouseup",s.DD._endDragBefore,!0),window.addEventListener("touchend",s.DD._endDragBefore,!0),window.addEventListener("touchcancel",s.DD._endDragBefore,!0),window.addEventListener("mousemove",s.DD._drag),window.addEventListener("touchmove",s.DD._drag),window.addEventListener("mouseup",s.DD._endDragAfter,!1),window.addEventListener("touchend",s.DD._endDragAfter,!1),window.addEventListener("touchcancel",s.DD._endDragAfter,!1))}(na)),na}var Vo;function Ke(){if(Vo)return Cr;Vo=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Node=void 0;const s=Xe(),f=Re(),A=Gi(),L=Te(),M=ra(),_=Fe(),o="absoluteOpacity",c="allEventListeners",m="absoluteTransform",y="absoluteScale",w="canvas",P="Change",S="children",p="konva",d="listening",C="mouseenter",b="mouseleave",I="set",u="Shape",a=" ",g="stage",T="transform",F="Stage",O="visible",v=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(a);let N=1,E=class No{constructor(l){this._id=N++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(l),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(l){(l===T||l===m)&&this._cache.get(l)?this._cache.get(l).dirty=!0:l?this._cache.delete(l):this._cache.clear()}_getCache(l,R){let k=this._cache.get(l);return(k===void 0||(l===T||l===m)&&k.dirty===!0)&&(k=R.call(this),this._cache.set(l,k)),k}_calculate(l,R,k){if(!this._attachedDepsListeners.get(l)){const G=R.map(B=>B+"Change.konva").join(a);this.on(G,()=>{this._clearCache(l)}),this._attachedDepsListeners.set(l,!0)}return this._getCache(l,k)}_getCanvasCache(){return this._cache.get(w)}_clearSelfAndDescendantCache(l){this._clearCache(l),l===m&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(w)){const{scene:l,filter:R,hit:k}=this._cache.get(w);s.Util.releaseCanvas(l,R,k),this._cache.delete(w)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(l){const R=l||{};let k={};(R.x===void 0||R.y===void 0||R.width===void 0||R.height===void 0)&&(k=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let G=Math.ceil(R.width||k.width),B=Math.ceil(R.height||k.height),j=R.pixelRatio,Q=R.x===void 0?Math.floor(k.x):R.x,H=R.y===void 0?Math.floor(k.y):R.y,ne=R.offset||0,ae=R.drawBorder||!1,re=R.hitCanvasPixelRatio||1;if(!G||!B){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const se=Math.abs(Math.round(k.x)-Q)>.5?1:0,de=Math.abs(Math.round(k.y)-H)>.5?1:0;G+=ne*2+se,B+=ne*2+de,Q-=ne,H-=ne;const ge=new A.SceneCanvas({pixelRatio:j,width:G,height:B}),U=new A.SceneCanvas({pixelRatio:j,width:0,height:0,willReadFrequently:!0}),ee=new A.HitCanvas({pixelRatio:re,width:G,height:B}),oe=ge.getContext(),le=ee.getContext();return ee.isCache=!0,ge.isCache=!0,this._cache.delete(w),this._filterUpToDate=!1,R.imageSmoothingEnabled===!1&&(ge.getContext()._context.imageSmoothingEnabled=!1,U.getContext()._context.imageSmoothingEnabled=!1),oe.save(),le.save(),oe.translate(-Q,-H),le.translate(-Q,-H),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(y),this.drawScene(ge,this),this.drawHit(ee,this),this._isUnderCache=!1,oe.restore(),le.restore(),ae&&(oe.save(),oe.beginPath(),oe.rect(0,0,G,B),oe.closePath(),oe.setAttr("strokeStyle","red"),oe.setAttr("lineWidth",5),oe.stroke(),oe.restore()),this._cache.set(w,{scene:ge,filter:U,hit:ee,x:Q,y:H}),this._requestDraw(),this}isCached(){return this._cache.has(w)}getClientRect(l){throw new Error('abstract "getClientRect" method call')}_transformedRect(l,R){const k=[{x:l.x,y:l.y},{x:l.x+l.width,y:l.y},{x:l.x+l.width,y:l.y+l.height},{x:l.x,y:l.y+l.height}];let G=1/0,B=1/0,j=-1/0,Q=-1/0;const H=this.getAbsoluteTransform(R);return k.forEach(function(ne){const ae=H.point(ne);G===void 0&&(G=j=ae.x,B=Q=ae.y),G=Math.min(G,ae.x),B=Math.min(B,ae.y),j=Math.max(j,ae.x),Q=Math.max(Q,ae.y)}),{x:G,y:B,width:j-G,height:Q-B}}_drawCachedSceneCanvas(l){l.save(),l._applyOpacity(this),l._applyGlobalCompositeOperation(this);const R=this._getCanvasCache();l.translate(R.x,R.y);const k=this._getCachedSceneCanvas(),G=k.pixelRatio;l.drawImage(k._canvas,0,0,k.width/G,k.height/G),l.restore()}_drawCachedHitCanvas(l){const R=this._getCanvasCache(),k=R.hit;l.save(),l.translate(R.x,R.y),l.drawImage(k._canvas,0,0,k.width/k.pixelRatio,k.height/k.pixelRatio),l.restore()}_getCachedSceneCanvas(){let l=this.filters(),R=this._getCanvasCache(),k=R.scene,G=R.filter,B=G.getContext(),j,Q,H,ne;if(l){if(!this._filterUpToDate){const ae=k.pixelRatio;G.setSize(k.width/k.pixelRatio,k.height/k.pixelRatio);try{for(j=l.length,B.clear(),B.drawImage(k._canvas,0,0,k.getWidth()/ae,k.getHeight()/ae),Q=B.getImageData(0,0,G.getWidth(),G.getHeight()),H=0;H<j;H++){if(ne=l[H],typeof ne!="function"){s.Util.error("Filter should be type of function, but got "+typeof ne+" instead. Please check correct filters");continue}ne.call(this,Q),B.putImageData(Q,0,0)}}catch(re){s.Util.error("Unable to apply filter. "+re.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return G}return k}on(l,R){if(this._cache&&this._cache.delete(c),arguments.length===3)return this._delegate.apply(this,arguments);let k=l.split(a),G=k.length,B,j,Q,H,ne;for(B=0;B<G;B++)j=k[B],Q=j.split("."),H=Q[0],ne=Q[1]||"",this.eventListeners[H]||(this.eventListeners[H]=[]),this.eventListeners[H].push({name:ne,handler:R});return this}off(l,R){let k=(l||"").split(a),G=k.length,B,j,Q,H,ne,ae;if(this._cache&&this._cache.delete(c),!l)for(j in this.eventListeners)this._off(j);for(B=0;B<G;B++)if(Q=k[B],H=Q.split("."),ne=H[0],ae=H[1],ne)this.eventListeners[ne]&&this._off(ne,ae,R);else for(j in this.eventListeners)this._off(j,ae,R);return this}dispatchEvent(l){const R={target:this,type:l.type,evt:l};return this.fire(l.type,R),this}addEventListener(l,R){return this.on(l,function(k){R.call(this,k.evt)}),this}removeEventListener(l){return this.off(l),this}_delegate(l,R,k){const G=this;this.on(l,function(B){const j=B.target.findAncestors(R,!0,G);for(let Q=0;Q<j.length;Q++)B=s.Util.cloneObject(B),B.currentTarget=j[Q],k.call(j[Q],B)})}remove(){return this.isDragging()&&this.stopDrag(),M.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(O),this._clearSelfAndDescendantCache(d)}_remove(){this._clearCaches();const l=this.getParent();l&&l.children&&(l.children.splice(this.index,1),l._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(l){const R="get"+s.Util._capitalize(l);return s.Util._isFunction(this[R])?this[R]():this.attrs[l]}getAncestors(){let l=this.getParent(),R=[];for(;l;)R.push(l),l=l.getParent();return R}getAttrs(){return this.attrs||{}}setAttrs(l){return this._batchTransformChanges(()=>{let R,k;if(!l)return this;for(R in l)R!==S&&(k=I+s.Util._capitalize(R),s.Util._isFunction(this[k])?this[k](l[R]):this._setAttr(R,l[R]))}),this}isListening(){return this._getCache(d,this._isListening)}_isListening(l){if(!this.listening())return!1;const k=this.getParent();return k&&k!==l&&this!==l?k._isListening(l):!0}isVisible(){return this._getCache(O,this._isVisible)}_isVisible(l){if(!this.visible())return!1;const k=this.getParent();return k&&k!==l&&this!==l?k._isVisible(l):!0}shouldDrawHit(l,R=!1){if(l)return this._isVisible(l)&&this._isListening(l);const k=this.getLayer();let G=!1;M.DD._dragElements.forEach(j=>{j.dragStatus==="dragging"&&(j.node.nodeType==="Stage"||j.node.getLayer()===k)&&(G=!0)});const B=!R&&!L.Konva.hitOnDragEnabled&&(G||L.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!B}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let l=this.getDepth(),R=this,k=0,G,B,j,Q;function H(ae){for(G=[],B=ae.length,j=0;j<B;j++)Q=ae[j],k++,Q.nodeType!==u&&(G=G.concat(Q.getChildren().slice())),Q._id===R._id&&(j=B);G.length>0&&G[0].getDepth()<=l&&H(G)}const ne=this.getStage();return R.nodeType!==F&&ne&&H(ne.getChildren()),k}getDepth(){let l=0,R=this.parent;for(;R;)l++,R=R.parent;return l}_batchTransformChanges(l){this._batchingTransformChange=!0,l(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(T),this._clearSelfAndDescendantCache(m)),this._needClearTransformCache=!1}setPosition(l){return this._batchTransformChanges(()=>{this.x(l.x),this.y(l.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const l=this.getStage();if(!l)return null;const R=l.getPointerPosition();if(!R)return null;const k=this.getAbsoluteTransform().copy();return k.invert(),k.point(R)}getAbsolutePosition(l){let R=!1,k=this.parent;for(;k;){if(k.isCached()){R=!0;break}k=k.parent}R&&!l&&(l=!0);const G=this.getAbsoluteTransform(l).getMatrix(),B=new s.Transform,j=this.offset();return B.m=G.slice(),B.translate(j.x,j.y),B.getTranslation()}setAbsolutePosition(l){const{x:R,y:k,...G}=this._clearTransform();this.attrs.x=R,this.attrs.y=k,this._clearCache(T);const B=this._getAbsoluteTransform().copy();return B.invert(),B.translate(l.x,l.y),l={x:this.attrs.x+B.getTranslation().x,y:this.attrs.y+B.getTranslation().y},this._setTransform(G),this.setPosition({x:l.x,y:l.y}),this._clearCache(T),this._clearSelfAndDescendantCache(m),this}_setTransform(l){let R;for(R in l)this.attrs[R]=l[R]}_clearTransform(){const l={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,l}move(l){let R=l.x,k=l.y,G=this.x(),B=this.y();return R!==void 0&&(G+=R),k!==void 0&&(B+=k),this.setPosition({x:G,y:B}),this}_eachAncestorReverse(l,R){let k=[],G=this.getParent(),B,j;if(!(R&&R._id===this._id)){for(k.unshift(this);G&&(!R||G._id!==R._id);)k.unshift(G),G=G.parent;for(B=k.length,j=0;j<B;j++)l(k[j])}}rotate(l){return this.rotation(this.rotation()+l),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const l=this.index,R=this.parent.getChildren().length;return l<R-1?(this.parent.children.splice(l,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const l=this.index,R=this.parent.getChildren().length;return l<R-1?(this.parent.children.splice(l,1),this.parent.children.splice(l+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.splice(l-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(l){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(l<0||l>=this.parent.children.length)&&s.Util.warn("Unexpected value "+l+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const R=this.index;return this.parent.children.splice(R,1),this.parent.children.splice(l,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let l=this.opacity();const R=this.getParent();return R&&!R._isUnderCache&&(l*=R.getAbsoluteOpacity()),l}moveTo(l){return this.getParent()!==l&&(this._remove(),l.add(this)),this}toObject(){let l=this.getAttrs(),R,k,G,B,j;const Q={attrs:{},className:this.getClassName()};for(R in l)k=l[R],j=s.Util.isObject(k)&&!s.Util._isPlainObject(k)&&!s.Util._isArray(k),!j&&(G=typeof this[R]=="function"&&this[R],delete l[R],B=G?G.call(this):null,l[R]=k,B!==k&&(Q.attrs[R]=k));return s.Util._prepareToStringify(Q)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(l,R,k){const G=[];R&&this._isMatch(l)&&G.push(this);let B=this.parent;for(;B;){if(B===k)return G;B._isMatch(l)&&G.push(B),B=B.parent}return G}isAncestorOf(l){return!1}findAncestor(l,R,k){return this.findAncestors(l,R,k)[0]}_isMatch(l){if(!l)return!1;if(typeof l=="function")return l(this);let R=l.replace(/ /g,"").split(","),k=R.length,G,B;for(G=0;G<k;G++)if(B=R[G],s.Util.isValidSelector(B)||(s.Util.warn('Selector "'+B+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),B.charAt(0)==="#"){if(this.id()===B.slice(1))return!0}else if(B.charAt(0)==="."){if(this.hasName(B.slice(1)))return!0}else if(this.className===B||this.nodeType===B)return!0;return!1}getLayer(){const l=this.getParent();return l?l.getLayer():null}getStage(){return this._getCache(g,this._getStage)}_getStage(){const l=this.getParent();return l?l.getStage():null}fire(l,R={},k){return R.target=R.target||this,k?this._fireAndBubble(l,R):this._fire(l,R),this}getAbsoluteTransform(l){return l?this._getAbsoluteTransform(l):this._getCache(m,this._getAbsoluteTransform)}_getAbsoluteTransform(l){let R;if(l)return R=new s.Transform,this._eachAncestorReverse(function(k){const G=k.transformsEnabled();G==="all"?R.multiply(k.getTransform()):G==="position"&&R.translate(k.x()-k.offsetX(),k.y()-k.offsetY())},l),R;{R=this._cache.get(m)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(R):R.reset();const k=this.transformsEnabled();if(k==="all")R.multiply(this.getTransform());else if(k==="position"){const G=this.attrs.x||0,B=this.attrs.y||0,j=this.attrs.offsetX||0,Q=this.attrs.offsetY||0;R.translate(G-j,B-Q)}return R.dirty=!1,R}}getAbsoluteScale(l){let R=this;for(;R;)R._isUnderCache&&(l=R),R=R.getParent();const G=this.getAbsoluteTransform(l).decompose();return{x:G.scaleX,y:G.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(T,this._getTransform)}_getTransform(){var l,R;const k=this._cache.get(T)||new s.Transform;k.reset();const G=this.x(),B=this.y(),j=L.Konva.getAngle(this.rotation()),Q=(l=this.attrs.scaleX)!==null&&l!==void 0?l:1,H=(R=this.attrs.scaleY)!==null&&R!==void 0?R:1,ne=this.attrs.skewX||0,ae=this.attrs.skewY||0,re=this.attrs.offsetX||0,se=this.attrs.offsetY||0;return(G!==0||B!==0)&&k.translate(G,B),j!==0&&k.rotate(j),(ne!==0||ae!==0)&&k.skew(ne,ae),(Q!==1||H!==1)&&k.scale(Q,H),(re!==0||se!==0)&&k.translate(-1*re,-1*se),k.dirty=!1,k}clone(l){let R=s.Util.cloneObject(this.attrs),k,G,B,j,Q;for(k in l)R[k]=l[k];const H=new this.constructor(R);for(k in this.eventListeners)for(G=this.eventListeners[k],B=G.length,j=0;j<B;j++)Q=G[j],Q.name.indexOf(p)<0&&(H.eventListeners[k]||(H.eventListeners[k]=[]),H.eventListeners[k].push(Q));return H}_toKonvaCanvas(l){l=l||{};const R=this.getClientRect(),k=this.getStage(),G=l.x!==void 0?l.x:Math.floor(R.x),B=l.y!==void 0?l.y:Math.floor(R.y),j=l.pixelRatio||1,Q=new A.SceneCanvas({width:l.width||Math.ceil(R.width)||(k?k.width():0),height:l.height||Math.ceil(R.height)||(k?k.height():0),pixelRatio:j}),H=Q.getContext(),ne=new A.SceneCanvas({width:Q.width/Q.pixelRatio+Math.abs(G),height:Q.height/Q.pixelRatio+Math.abs(B),pixelRatio:Q.pixelRatio});return l.imageSmoothingEnabled===!1&&(H._context.imageSmoothingEnabled=!1),H.save(),(G||B)&&H.translate(-1*G,-1*B),this.drawScene(Q,void 0,ne),H.restore(),Q}toCanvas(l){return this._toKonvaCanvas(l)._canvas}toDataURL(l){l=l||{};const R=l.mimeType||null,k=l.quality||null,G=this._toKonvaCanvas(l).toDataURL(R,k);return l.callback&&l.callback(G),G}toImage(l){return new Promise((R,k)=>{try{const G=l==null?void 0:l.callback;G&&delete l.callback,s.Util._urlToImage(this.toDataURL(l),function(B){R(B),G==null||G(B)})}catch(G){k(G)}})}toBlob(l){return new Promise((R,k)=>{try{const G=l==null?void 0:l.callback;G&&delete l.callback,this.toCanvas(l).toBlob(B=>{R(B),G==null||G(B)},l==null?void 0:l.mimeType,l==null?void 0:l.quality)}catch(G){k(G)}})}setSize(l){return this.width(l.width),this.height(l.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():L.Konva.dragDistance}_off(l,R,k){let G=this.eventListeners[l],B,j,Q;for(B=0;B<G.length;B++)if(j=G[B].name,Q=G[B].handler,(j!=="konva"||R==="konva")&&(!R||j===R)&&(!k||k===Q)){if(G.splice(B,1),G.length===0){delete this.eventListeners[l];break}B--}}_fireChangeEvent(l,R,k){this._fire(l+P,{oldVal:R,newVal:k})}addName(l){if(!this.hasName(l)){const R=this.name(),k=R?R+" "+l:l;this.name(k)}return this}hasName(l){if(!l)return!1;const R=this.name();return R?(R||"").split(/\s/g).indexOf(l)!==-1:!1}removeName(l){const R=(this.name()||"").split(/\s/g),k=R.indexOf(l);return k!==-1&&(R.splice(k,1),this.name(R.join(" "))),this}setAttr(l,R){const k=this[I+s.Util._capitalize(l)];return s.Util._isFunction(k)?k.call(this,R):this._setAttr(l,R),this}_requestDraw(){if(L.Konva.autoDrawEnabled){const l=this.getLayer()||this.getStage();l==null||l.batchDraw()}}_setAttr(l,R){const k=this.attrs[l];k===R&&!s.Util.isObject(R)||(R==null?delete this.attrs[l]:this.attrs[l]=R,this._shouldFireChangeEvents&&this._fireChangeEvent(l,k,R),this._requestDraw())}_setComponentAttr(l,R,k){let G;k!==void 0&&(G=this.attrs[l],G||(this.attrs[l]=this.getAttr(l)),this.attrs[l][R]=k,this._fireChangeEvent(l,G,k))}_fireAndBubble(l,R,k){if(R&&this.nodeType===u&&(R.target=this),!((l===C||l===b)&&(k&&(this===k||this.isAncestorOf&&this.isAncestorOf(k))||this.nodeType==="Stage"&&!k))){this._fire(l,R);const B=(l===C||l===b)&&k&&k.isAncestorOf&&k.isAncestorOf(this)&&!k.isAncestorOf(this.parent);(R&&!R.cancelBubble||!R)&&this.parent&&this.parent.isListening()&&!B&&(k&&k.parent?this._fireAndBubble.call(this.parent,l,R,k):this._fireAndBubble.call(this.parent,l,R))}}_getProtoListeners(l){var R,k,G;const B=(R=this._cache.get(c))!==null&&R!==void 0?R:{};let j=B==null?void 0:B[l];if(j===void 0){j=[];let Q=Object.getPrototypeOf(this);for(;Q;){const H=(G=(k=Q.eventListeners)===null||k===void 0?void 0:k[l])!==null&&G!==void 0?G:[];j.push(...H),Q=Object.getPrototypeOf(Q)}B[l]=j,this._cache.set(c,B)}return j}_fire(l,R){R=R||{},R.currentTarget=this,R.type=l;const k=this._getProtoListeners(l);if(k)for(var G=0;G<k.length;G++)k[G].handler.call(this,R);const B=this.eventListeners[l];if(B)for(var G=0;G<B.length;G++)B[G].handler.call(this,R)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(l){const R=l?l.pointerId:void 0,k=this.getStage(),G=this.getAbsolutePosition();if(!k)return;const B=k._getPointerById(R)||k._changedPointerPositions[0]||G;M.DD._dragElements.set(this._id,{node:this,startPointerPos:B,offset:{x:B.x-G.x,y:B.y-G.y},dragStatus:"ready",pointerId:R})}startDrag(l,R=!0){M.DD._dragElements.has(this._id)||this._createDragElement(l);const k=M.DD._dragElements.get(this._id);k.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:l&&l.evt},R)}_setDragPosition(l,R){const k=this.getStage()._getPointerById(R.pointerId);if(!k)return;let G={x:k.x-R.offset.x,y:k.y-R.offset.y};const B=this.dragBoundFunc();if(B!==void 0){const j=B.call(this,G,l);j?G=j:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==G.x||this._lastPos.y!==G.y)&&(this.setAbsolutePosition(G),this._requestDraw()),this._lastPos=G}stopDrag(l){const R=M.DD._dragElements.get(this._id);R&&(R.dragStatus="stopped"),M.DD._endDragBefore(l),M.DD._endDragAfter(l)}setDraggable(l){this._setAttr("draggable",l),this._dragChange()}isDragging(){const l=M.DD._dragElements.get(this._id);return l?l.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(l){if(!(!(l.evt.button!==void 0)||L.Konva.dragButtons.indexOf(l.evt.button)>=0)||this.isDragging())return;let G=!1;M.DD._dragElements.forEach(B=>{this.isAncestorOf(B.node)&&(G=!0)}),G||this._createDragElement(l)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const R=M.DD._dragElements.get(this._id),k=R&&R.dragStatus==="dragging",G=R&&R.dragStatus==="ready";k?this.stopDrag():G&&M.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(l={x:0,y:0}){const R=this.getStage();if(!R)return!1;const k={x:-l.x,y:-l.y,width:R.width()+2*l.x,height:R.height()+2*l.y};return s.Util.haveIntersection(k,this.getClientRect())}static create(l,R){return s.Util._isString(l)&&(l=JSON.parse(l)),this._createNode(l,R)}static _createNode(l,R){let k=No.prototype.getClassName.call(l),G=l.children,B,j,Q;R&&(l.attrs.container=R),L.Konva[k]||(s.Util.warn('Can not find a node with class name "'+k+'". Fallback to "Shape".'),k="Shape");const H=L.Konva[k];if(B=new H(l.attrs),G)for(j=G.length,Q=0;Q<j;Q++)B.add(No._createNode(G[Q]));return B}};Cr.Node=E,E.prototype.nodeType="Node",E.prototype._attrsAffectingSize=[],E.prototype.eventListeners={},E.prototype.on.call(E.prototype,v,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(T),this._clearSelfAndDescendantCache(m)}),E.prototype.on.call(E.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(O)}),E.prototype.on.call(E.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(d)}),E.prototype.on.call(E.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const z=f.Factory.addGetterSetter;return z(E,"zIndex"),z(E,"absolutePosition"),z(E,"position"),z(E,"x",0,(0,_.getNumberValidator)()),z(E,"y",0,(0,_.getNumberValidator)()),z(E,"globalCompositeOperation","source-over",(0,_.getStringValidator)()),z(E,"opacity",1,(0,_.getNumberValidator)()),z(E,"name","",(0,_.getStringValidator)()),z(E,"id","",(0,_.getStringValidator)()),z(E,"rotation",0,(0,_.getNumberValidator)()),f.Factory.addComponentsGetterSetter(E,"scale",["x","y"]),z(E,"scaleX",1,(0,_.getNumberValidator)()),z(E,"scaleY",1,(0,_.getNumberValidator)()),f.Factory.addComponentsGetterSetter(E,"skew",["x","y"]),z(E,"skewX",0,(0,_.getNumberValidator)()),z(E,"skewY",0,(0,_.getNumberValidator)()),f.Factory.addComponentsGetterSetter(E,"offset",["x","y"]),z(E,"offsetX",0,(0,_.getNumberValidator)()),z(E,"offsetY",0,(0,_.getNumberValidator)()),z(E,"dragDistance",void 0,(0,_.getNumberValidator)()),z(E,"width",0,(0,_.getNumberValidator)()),z(E,"height",0,(0,_.getNumberValidator)()),z(E,"listening",!0,(0,_.getBooleanValidator)()),z(E,"preventDefault",!0,(0,_.getBooleanValidator)()),z(E,"filters",void 0,function(V){return this._filterUpToDate=!1,V}),z(E,"visible",!0,(0,_.getBooleanValidator)()),z(E,"transformsEnabled","all",(0,_.getStringValidator)()),z(E,"size"),z(E,"dragBoundFunc"),z(E,"draggable",!1,(0,_.getBooleanValidator)()),f.Factory.backCompat(E,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Cr}var br={},Wo;function Bi(){if(Wo)return br;Wo=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Container=void 0;const s=Re(),f=Ke(),A=Fe();let L=class extends f.Node{constructor(){super(...arguments),this.children=[]}getChildren(_){if(!_)return this.children||[];const o=this.children||[],c=[];return o.forEach(function(m){_(m)&&c.push(m)}),c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.destroy()}),this.children=[],this._requestDraw(),this}add(..._){if(_.length===0)return this;if(_.length>1){for(let c=0;c<_.length;c++)this.add(_[c]);return this}const o=_[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(_){return this._generalFind(_,!1)}findOne(_){const o=this._generalFind(_,!0);return o.length>0?o[0]:void 0}_generalFind(_,o){const c=[];return this._descendants(m=>{const y=m._isMatch(_);return y&&c.push(m),!!(y&&o)}),c}_descendants(_){let o=!1;const c=this.getChildren();for(const m of c){if(o=_(m),o)return!0;if(m.hasChildren()&&(o=m._descendants(_),o))return!0}return!1}toObject(){const _=f.Node.prototype.toObject.call(this);return _.children=[],this.getChildren().forEach(o=>{_.children.push(o.toObject())}),_}isAncestorOf(_){let o=_.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(_){const o=f.Node.prototype.clone.call(this,_);return this.getChildren().forEach(function(c){o.add(c.clone())}),o}getAllIntersections(_){const o=[];return this.find("Shape").forEach(c=>{c.isVisible()&&c.intersects(_)&&o.push(c)}),o}_clearSelfAndDescendantCache(_){var o;super._clearSelfAndDescendantCache(_),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(c){c._clearSelfAndDescendantCache(_)}))}_setChildrenIndices(){var _;(_=this.children)===null||_===void 0||_.forEach(function(o,c){o.index=c}),this._requestDraw()}drawScene(_,o,c){const m=this.getLayer(),y=_||m&&m.getCanvas(),w=y&&y.getContext(),P=this._getCanvasCache(),S=P&&P.scene,p=y&&y.isCache;if(!this.isVisible()&&!p)return this;if(S){w.save();const d=this.getAbsoluteTransform(o).getMatrix();w.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(w),w.restore()}else this._drawChildren("drawScene",y,o,c);return this}drawHit(_,o){if(!this.shouldDrawHit(o))return this;const c=this.getLayer(),m=_||c&&c.hitCanvas,y=m&&m.getContext(),w=this._getCanvasCache();if(w&&w.hit){y.save();const S=this.getAbsoluteTransform(o).getMatrix();y.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(y),y.restore()}else this._drawChildren("drawHit",m,o);return this}_drawChildren(_,o,c,m){var y;const w=o&&o.getContext(),P=this.clipWidth(),S=this.clipHeight(),p=this.clipFunc(),d=typeof P=="number"&&typeof S=="number"||p,C=c===this;if(d){w.save();const I=this.getAbsoluteTransform(c);let u=I.getMatrix();w.transform(u[0],u[1],u[2],u[3],u[4],u[5]),w.beginPath();let a;if(p)a=p.call(this,w,this);else{const g=this.clipX(),T=this.clipY();w.rect(g||0,T||0,P,S)}w.clip.apply(w,a),u=I.copy().invert().getMatrix(),w.transform(u[0],u[1],u[2],u[3],u[4],u[5])}const b=!C&&this.globalCompositeOperation()!=="source-over"&&_==="drawScene";b&&(w.save(),w._applyGlobalCompositeOperation(this)),(y=this.children)===null||y===void 0||y.forEach(function(I){I[_](o,c,m)}),b&&w.restore(),d&&w.restore()}getClientRect(_={}){var o;const c=_.skipTransform,m=_.relativeTo;let y,w,P,S,p={x:1/0,y:1/0,width:0,height:0};const d=this;(o=this.children)===null||o===void 0||o.forEach(function(I){if(!I.visible())return;const u=I.getClientRect({relativeTo:d,skipShadow:_.skipShadow,skipStroke:_.skipStroke});u.width===0&&u.height===0||(y===void 0?(y=u.x,w=u.y,P=u.x+u.width,S=u.y+u.height):(y=Math.min(y,u.x),w=Math.min(w,u.y),P=Math.max(P,u.x+u.width),S=Math.max(S,u.y+u.height)))});const C=this.find("Shape");let b=!1;for(let I=0;I<C.length;I++)if(C[I]._isVisible(this)){b=!0;break}return b&&y!==void 0?p={x:y,y:w,width:P-y,height:S-w}:p={x:0,y:0,width:0,height:0},c?p:this._transformedRect(p,m)}};return br.Container=L,s.Factory.addComponentsGetterSetter(L,"clip",["x","y","width","height"]),s.Factory.addGetterSetter(L,"clipX",void 0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(L,"clipY",void 0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(L,"clipWidth",void 0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(L,"clipHeight",void 0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(L,"clipFunc"),br}var ia={},Fn={},qo;function Yo(){if(qo)return Fn;qo=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.getCapturedShape=L,Fn.createEvent=M,Fn.hasPointerCapture=_,Fn.setPointerCapture=o,Fn.releaseCapture=c;const s=Te(),f=new Map,A=s.Konva._global.PointerEvent!==void 0;function L(m){return f.get(m)}function M(m){return{evt:m,pointerId:m.pointerId}}function _(m,y){return f.get(m)===y}function o(m,y){c(m),y.getStage()&&(f.set(m,y),A&&y._fire("gotpointercapture",M(new PointerEvent("gotpointercapture"))))}function c(m,y){const w=f.get(m);if(!w)return;const P=w.getStage();P&&P.content,f.delete(m),A&&w._fire("lostpointercapture",M(new PointerEvent("lostpointercapture")))}return Fn}var Xo;function uc(){return Xo||(Xo=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Stage=s.stages=void 0;const f=Xe(),A=Re(),L=Bi(),M=Te(),_=Gi(),o=ra(),c=Te(),m=Yo(),y="Stage",w="string",P="px",S="mouseout",p="mouseleave",d="mouseover",C="mouseenter",b="mousemove",I="mousedown",u="mouseup",a="pointermove",g="pointerdown",T="pointerup",F="pointercancel",O="lostpointercapture",v="pointerout",N="pointerleave",E="pointerover",z="pointerenter",V="contextmenu",l="touchstart",R="touchend",k="touchmove",G="touchcancel",B="wheel",j=5,Q=[[C,"_pointerenter"],[I,"_pointerdown"],[b,"_pointermove"],[u,"_pointerup"],[p,"_pointerleave"],[l,"_pointerdown"],[k,"_pointermove"],[R,"_pointerup"],[G,"_pointercancel"],[d,"_pointerover"],[B,"_wheel"],[V,"_contextmenu"],[g,"_pointerdown"],[a,"_pointermove"],[T,"_pointerup"],[F,"_pointercancel"],[O,"_lostpointercapture"]],H={mouse:{[v]:S,[N]:p,[E]:d,[z]:C,[a]:b,[g]:I,[T]:u,[F]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[v]:"touchout",[N]:"touchleave",[E]:"touchover",[z]:"touchenter",[a]:k,[g]:l,[T]:R,[F]:G,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[v]:v,[N]:N,[E]:E,[z]:z,[a]:a,[g]:g,[T]:T,[F]:F,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=ge=>ge.indexOf("pointer")>=0?"pointer":ge.indexOf("touch")>=0?"touch":"mouse",ae=ge=>{const U=ne(ge);if(U==="pointer")return M.Konva.pointerEventsEnabled&&H.pointer;if(U==="touch")return H.touch;if(U==="mouse")return H.mouse};function re(ge={}){return(ge.clipFunc||ge.clipWidth||ge.clipHeight)&&f.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ge}const se="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";s.stages=[];class de extends L.Container{constructor(U){super(re(U)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),s.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{re(this.attrs)}),this._checkVisibility()}_validateAdd(U){const ee=U.getType()==="Layer",oe=U.getType()==="FastLayer";ee||oe||f.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const U=this.visible()?"":"none";this.content.style.display=U}setContainer(U){if(typeof U===w){if(U.charAt(0)==="."){const oe=U.slice(1);U=document.getElementsByClassName(oe)[0]}else{var ee;U.charAt(0)!=="#"?ee=U:ee=U.slice(1),U=document.getElementById(ee)}if(!U)throw"Can not find container in document with id "+ee}return this._setAttr("container",U),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),U.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const U=this.children,ee=U.length;for(let oe=0;oe<ee;oe++)U[oe].clear();return this}clone(U){return U||(U={}),U.container=typeof document<"u"&&document.createElement("div"),L.Container.prototype.clone.call(this,U)}destroy(){super.destroy();const U=this.content;U&&f.Util._isInDocument(U)&&this.container().removeChild(U);const ee=s.stages.indexOf(this);return ee>-1&&s.stages.splice(ee,1),f.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const U=this._pointerPositions[0]||this._changedPointerPositions[0];return U?{x:U.x,y:U.y}:(f.Util.warn(se),null)}_getPointerById(U){return this._pointerPositions.find(ee=>ee.id===U)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(U){U=U||{},U.x=U.x||0,U.y=U.y||0,U.width=U.width||this.width(),U.height=U.height||this.height();const ee=new _.SceneCanvas({width:U.width,height:U.height,pixelRatio:U.pixelRatio||1}),oe=ee.getContext()._context,le=this.children;return(U.x||U.y)&&oe.translate(-1*U.x,-1*U.y),le.forEach(function(ce){if(!ce.isVisible())return;const ve=ce._toKonvaCanvas(U);oe.drawImage(ve._canvas,U.x,U.y,ve.getWidth()/ve.getPixelRatio(),ve.getHeight()/ve.getPixelRatio())}),ee}getIntersection(U){if(!U)return null;const ee=this.children,oe=ee.length,le=oe-1;for(let ce=le;ce>=0;ce--){const ve=ee[ce].getIntersection(U);if(ve)return ve}return null}_resizeDOM(){const U=this.width(),ee=this.height();this.content&&(this.content.style.width=U+P,this.content.style.height=ee+P),this.bufferCanvas.setSize(U,ee),this.bufferHitCanvas.setSize(U,ee),this.children.forEach(oe=>{oe.setSize({width:U,height:ee}),oe.draw()})}add(U,...ee){if(arguments.length>1){for(let le=0;le<arguments.length;le++)this.add(arguments[le]);return this}super.add(U);const oe=this.children.length;return oe>j&&f.Util.warn("The stage has "+oe+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),U.setSize({width:this.width(),height:this.height()}),U.draw(),M.Konva.isBrowser&&this.content.appendChild(U.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(U){return m.hasPointerCapture(U,this)}setPointerCapture(U){m.setPointerCapture(U,this)}releaseCapture(U){m.releaseCapture(U,this)}getLayers(){return this.children}_bindContentEvents(){M.Konva.isBrowser&&Q.forEach(([U,ee])=>{this.content.addEventListener(U,oe=>{this[ee](oe)},{passive:!1})})}_pointerenter(U){this.setPointersPositions(U);const ee=ae(U.type);ee&&this._fire(ee.pointerenter,{evt:U,target:this,currentTarget:this})}_pointerover(U){this.setPointersPositions(U);const ee=ae(U.type);ee&&this._fire(ee.pointerover,{evt:U,target:this,currentTarget:this})}_getTargetShape(U){let ee=this[U+"targetShape"];return ee&&!ee.getStage()&&(ee=null),ee}_pointerleave(U){const ee=ae(U.type),oe=ne(U.type);if(!ee)return;this.setPointersPositions(U);const le=this._getTargetShape(oe),ce=!(M.Konva.isDragging()||M.Konva.isTransforming())||M.Konva.hitOnDragEnabled;le&&ce?(le._fireAndBubble(ee.pointerout,{evt:U}),le._fireAndBubble(ee.pointerleave,{evt:U}),this._fire(ee.pointerleave,{evt:U,target:this,currentTarget:this}),this[oe+"targetShape"]=null):ce&&(this._fire(ee.pointerleave,{evt:U,target:this,currentTarget:this}),this._fire(ee.pointerout,{evt:U,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(U){const ee=ae(U.type),oe=ne(U.type);if(!ee)return;this.setPointersPositions(U);let le=!1;this._changedPointerPositions.forEach(ce=>{const ve=this.getIntersection(ce);if(o.DD.justDragged=!1,M.Konva["_"+oe+"ListenClick"]=!0,!ve||!ve.isListening()){this[oe+"ClickStartShape"]=void 0;return}M.Konva.capturePointerEventsEnabled&&ve.setPointerCapture(ce.id),this[oe+"ClickStartShape"]=ve,ve._fireAndBubble(ee.pointerdown,{evt:U,pointerId:ce.id}),le=!0;const we=U.type.indexOf("touch")>=0;ve.preventDefault()&&U.cancelable&&we&&U.preventDefault()}),le||this._fire(ee.pointerdown,{evt:U,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(U){const ee=ae(U.type),oe=ne(U.type);if(!ee||(M.Konva.isDragging()&&o.DD.node.preventDefault()&&U.cancelable&&U.preventDefault(),this.setPointersPositions(U),!(!(M.Konva.isDragging()||M.Konva.isTransforming())||M.Konva.hitOnDragEnabled)))return;const ce={};let ve=!1;const we=this._getTargetShape(oe);this._changedPointerPositions.forEach(Me=>{const Se=m.getCapturedShape(Me.id)||this.getIntersection(Me),Ne=Me.id,Oe={evt:U,pointerId:Ne},je=we!==Se;if(je&&we&&(we._fireAndBubble(ee.pointerout,{...Oe},Se),we._fireAndBubble(ee.pointerleave,{...Oe},Se)),Se){if(ce[Se._id])return;ce[Se._id]=!0}Se&&Se.isListening()?(ve=!0,je&&(Se._fireAndBubble(ee.pointerover,{...Oe},we),Se._fireAndBubble(ee.pointerenter,{...Oe},we),this[oe+"targetShape"]=Se),Se._fireAndBubble(ee.pointermove,{...Oe})):we&&(this._fire(ee.pointerover,{evt:U,target:this,currentTarget:this,pointerId:Ne}),this[oe+"targetShape"]=null)}),ve||this._fire(ee.pointermove,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(U){const ee=ae(U.type),oe=ne(U.type);if(!ee)return;this.setPointersPositions(U);const le=this[oe+"ClickStartShape"],ce=this[oe+"ClickEndShape"],ve={};let we=!1;this._changedPointerPositions.forEach(Me=>{const Se=m.getCapturedShape(Me.id)||this.getIntersection(Me);if(Se){if(Se.releaseCapture(Me.id),ve[Se._id])return;ve[Se._id]=!0}const Ne=Me.id,Oe={evt:U,pointerId:Ne};let je=!1;M.Konva["_"+oe+"InDblClickWindow"]?(je=!0,clearTimeout(this[oe+"DblTimeout"])):o.DD.justDragged||(M.Konva["_"+oe+"InDblClickWindow"]=!0,clearTimeout(this[oe+"DblTimeout"])),this[oe+"DblTimeout"]=setTimeout(function(){M.Konva["_"+oe+"InDblClickWindow"]=!1},M.Konva.dblClickWindow),Se&&Se.isListening()?(we=!0,this[oe+"ClickEndShape"]=Se,Se._fireAndBubble(ee.pointerup,{...Oe}),M.Konva["_"+oe+"ListenClick"]&&le&&le===Se&&(Se._fireAndBubble(ee.pointerclick,{...Oe}),je&&ce&&ce===Se&&Se._fireAndBubble(ee.pointerdblclick,{...Oe}))):(this[oe+"ClickEndShape"]=null,M.Konva["_"+oe+"ListenClick"]&&this._fire(ee.pointerclick,{evt:U,target:this,currentTarget:this,pointerId:Ne}),je&&this._fire(ee.pointerdblclick,{evt:U,target:this,currentTarget:this,pointerId:Ne}))}),we||this._fire(ee.pointerup,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),M.Konva["_"+oe+"ListenClick"]=!1,U.cancelable&&oe!=="touch"&&oe!=="pointer"&&U.preventDefault()}_contextmenu(U){this.setPointersPositions(U);const ee=this.getIntersection(this.getPointerPosition());ee&&ee.isListening()?ee._fireAndBubble(V,{evt:U}):this._fire(V,{evt:U,target:this,currentTarget:this})}_wheel(U){this.setPointersPositions(U);const ee=this.getIntersection(this.getPointerPosition());ee&&ee.isListening()?ee._fireAndBubble(B,{evt:U}):this._fire(B,{evt:U,target:this,currentTarget:this})}_pointercancel(U){this.setPointersPositions(U);const ee=m.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());ee&&ee._fireAndBubble(T,m.createEvent(U)),m.releaseCapture(U.pointerId)}_lostpointercapture(U){m.releaseCapture(U.pointerId)}setPointersPositions(U){const ee=this._getContentPosition();let oe=null,le=null;U=U||window.event,U.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(U.touches,ce=>{this._pointerPositions.push({id:ce.identifier,x:(ce.clientX-ee.left)/ee.scaleX,y:(ce.clientY-ee.top)/ee.scaleY})}),Array.prototype.forEach.call(U.changedTouches||U.touches,ce=>{this._changedPointerPositions.push({id:ce.identifier,x:(ce.clientX-ee.left)/ee.scaleX,y:(ce.clientY-ee.top)/ee.scaleY})})):(oe=(U.clientX-ee.left)/ee.scaleX,le=(U.clientY-ee.top)/ee.scaleY,this.pointerPos={x:oe,y:le},this._pointerPositions=[{x:oe,y:le,id:f.Util._getFirstPointerId(U)}],this._changedPointerPositions=[{x:oe,y:le,id:f.Util._getFirstPointerId(U)}])}_setPointerPosition(U){f.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(U)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const U=this.content.getBoundingClientRect();return{top:U.top,left:U.left,scaleX:U.width/this.content.clientWidth||1,scaleY:U.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new _.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new _.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!M.Konva.isBrowser)return;const U=this.container();if(!U)throw"Stage has no container. A container is required.";U.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),U.appendChild(this.content),this._resizeDOM()}cache(){return f.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(U){U.batchDraw()}),this}}s.Stage=de,de.prototype.nodeType=y,(0,c._registerNode)(de),A.Factory.addGetterSetter(de,"container"),M.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{s.stages.forEach(ge=>{ge.batchDraw()})})}(ia)),ia}var kr={},sa={},Ko;function it(){return Ko||(Ko=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Shape=s.shapes=void 0;const f=Te(),A=Xe(),L=Re(),M=Ke(),_=Fe(),o=Te(),c=Yo(),m="hasShadow",y="shadowRGBA",w="patternImage",P="linearGradient",S="radialGradient";let p;function d(){return p||(p=A.Util.createCanvasElement().getContext("2d"),p)}s.shapes={};function C(N){const E=this.attrs.fillRule;E?N.fill(E):N.fill()}function b(N){N.stroke()}function I(N){const E=this.attrs.fillRule;E?N.fill(E):N.fill()}function u(N){N.stroke()}function a(){this._clearCache(m)}function g(){this._clearCache(y)}function T(){this._clearCache(w)}function F(){this._clearCache(P)}function O(){this._clearCache(S)}class v extends M.Node{constructor(E){super(E);let z;for(;z=A.Util.getRandomColor(),!(z&&!(z in s.shapes)););this.colorKey=z,s.shapes[z]=this}getContext(){return A.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return A.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(m,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(w,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const z=d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(z&&z.setTransform){const V=new A.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(f.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const l=V.getMatrix(),R=typeof DOMMatrix>"u"?{a:l[0],b:l[1],c:l[2],d:l[3],e:l[4],f:l[5]}:new DOMMatrix(l);z.setTransform(R)}return z}}_getLinearGradient(){return this._getCache(P,this.__getLinearGradient)}__getLinearGradient(){const E=this.fillLinearGradientColorStops();if(E){const z=d(),V=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),R=z.createLinearGradient(V.x,V.y,l.x,l.y);for(let k=0;k<E.length;k+=2)R.addColorStop(E[k],E[k+1]);return R}}_getRadialGradient(){return this._getCache(S,this.__getRadialGradient)}__getRadialGradient(){const E=this.fillRadialGradientColorStops();if(E){const z=d(),V=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),R=z.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius());for(let k=0;k<E.length;k+=2)R.addColorStop(E[k],E[k+1]);return R}}getShadowRGBA(){return this._getCache(y,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const E=A.Util.colorToRGBA(this.shadowColor());if(E)return"rgba("+E.r+","+E.g+","+E.b+","+E.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const E=this.hitStrokeWidth();return E==="auto"?this.hasStroke():this.strokeEnabled()&&!!E}intersects(E){const z=this.getStage();if(!z)return!1;const V=z.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(E.x),Math.round(E.y),1,1).data[3]>0}destroy(){return M.Node.prototype.destroy.call(this),delete s.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(E){var z;if(!((z=this.attrs.perfectDrawEnabled)!==null&&z!==void 0?z:!0))return!1;const l=E||this.hasFill(),R=this.hasStroke(),k=this.getAbsoluteOpacity()!==1;if(l&&R&&k)return!0;const G=this.hasShadow(),B=this.shadowForStrokeEnabled();return!!(l&&R&&G&&B)}setStrokeHitEnabled(E){A.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),E?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const E=this.size();return{x:this._centroid?-E.width/2:0,y:this._centroid?-E.height/2:0,width:E.width,height:E.height}}getClientRect(E={}){let z=!1,V=this.getParent();for(;V;){if(V.isCached()){z=!0;break}V=V.getParent()}const l=E.skipTransform,R=E.relativeTo||z&&this.getStage()||void 0,k=this.getSelfRect(),B=!E.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,j=k.width+B,Q=k.height+B,H=!E.skipShadow&&this.hasShadow(),ne=H?this.shadowOffsetX():0,ae=H?this.shadowOffsetY():0,re=j+Math.abs(ne),se=Q+Math.abs(ae),de=H&&this.shadowBlur()||0,ge=re+de*2,U=se+de*2,ee={width:ge,height:U,x:-(B/2+de)+Math.min(ne,0)+k.x,y:-(B/2+de)+Math.min(ae,0)+k.y};return l?ee:this._transformedRect(ee,R)}drawScene(E,z,V){const l=this.getLayer();let R=E||l.getCanvas(),k=R.getContext(),G=this._getCanvasCache(),B=this.getSceneFunc(),j=this.hasShadow(),Q,H;const ne=R.isCache,ae=z===this;if(!this.isVisible()&&!ae)return this;if(G){k.save();const se=this.getAbsoluteTransform(z).getMatrix();return k.transform(se[0],se[1],se[2],se[3],se[4],se[5]),this._drawCachedSceneCanvas(k),k.restore(),this}if(!B)return this;if(k.save(),this._useBufferCanvas()&&!ne){Q=this.getStage();const se=V||Q.bufferCanvas;H=se.getContext(),H.clear(),H.save(),H._applyLineJoin(this);var re=this.getAbsoluteTransform(z).getMatrix();H.transform(re[0],re[1],re[2],re[3],re[4],re[5]),B.call(this,H,this),H.restore();const de=se.pixelRatio;j&&k._applyShadow(this),k._applyOpacity(this),k._applyGlobalCompositeOperation(this),k.drawImage(se._canvas,0,0,se.width/de,se.height/de)}else{if(k._applyLineJoin(this),!ae){var re=this.getAbsoluteTransform(z).getMatrix();k.transform(re[0],re[1],re[2],re[3],re[4],re[5]),k._applyOpacity(this),k._applyGlobalCompositeOperation(this)}j&&k._applyShadow(this),B.call(this,k,this)}return k.restore(),this}drawHit(E,z,V=!1){if(!this.shouldDrawHit(z,V))return this;const l=this.getLayer(),R=E||l.hitCanvas,k=R&&R.getContext(),G=this.hitFunc()||this.sceneFunc(),B=this._getCanvasCache(),j=B&&B.hit;if(this.colorKey||A.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),j){k.save();const H=this.getAbsoluteTransform(z).getMatrix();return k.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedHitCanvas(k),k.restore(),this}if(!G)return this;if(k.save(),k._applyLineJoin(this),!(this===z)){const H=this.getAbsoluteTransform(z).getMatrix();k.transform(H[0],H[1],H[2],H[3],H[4],H[5])}return G.call(this,k,this),k.restore(),this}drawHitFromCache(E=0){const z=this._getCanvasCache(),V=this._getCachedSceneCanvas(),l=z.hit,R=l.getContext(),k=l.getWidth(),G=l.getHeight();R.clear(),R.drawImage(V._canvas,0,0,k,G);try{const B=R.getImageData(0,0,k,G),j=B.data,Q=j.length,H=A.Util._hexToRgb(this.colorKey);for(let ne=0;ne<Q;ne+=4)j[ne+3]>E?(j[ne]=H.r,j[ne+1]=H.g,j[ne+2]=H.b,j[ne+3]=255):j[ne+3]=0;R.putImageData(B,0,0)}catch(B){A.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(E){return c.hasPointerCapture(E,this)}setPointerCapture(E){c.setPointerCapture(E,this)}releaseCapture(E){c.releaseCapture(E,this)}}s.Shape=v,v.prototype._fillFunc=C,v.prototype._strokeFunc=b,v.prototype._fillFuncHit=I,v.prototype._strokeFuncHit=u,v.prototype._centroid=!1,v.prototype.nodeType="Shape",(0,o._registerNode)(v),v.prototype.eventListeners={},v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",a),v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",T),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",F),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",O),L.Factory.addGetterSetter(v,"stroke",void 0,(0,_.getStringOrGradientValidator)()),L.Factory.addGetterSetter(v,"strokeWidth",2,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"fillAfterStrokeEnabled",!1),L.Factory.addGetterSetter(v,"hitStrokeWidth","auto",(0,_.getNumberOrAutoValidator)()),L.Factory.addGetterSetter(v,"strokeHitEnabled",!0,(0,_.getBooleanValidator)()),L.Factory.addGetterSetter(v,"perfectDrawEnabled",!0,(0,_.getBooleanValidator)()),L.Factory.addGetterSetter(v,"shadowForStrokeEnabled",!0,(0,_.getBooleanValidator)()),L.Factory.addGetterSetter(v,"lineJoin"),L.Factory.addGetterSetter(v,"lineCap"),L.Factory.addGetterSetter(v,"sceneFunc"),L.Factory.addGetterSetter(v,"hitFunc"),L.Factory.addGetterSetter(v,"dash"),L.Factory.addGetterSetter(v,"dashOffset",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"shadowColor",void 0,(0,_.getStringValidator)()),L.Factory.addGetterSetter(v,"shadowBlur",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"shadowOpacity",1,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(v,"shadowOffset",["x","y"]),L.Factory.addGetterSetter(v,"shadowOffsetX",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"shadowOffsetY",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"fillPatternImage"),L.Factory.addGetterSetter(v,"fill",void 0,(0,_.getStringOrGradientValidator)()),L.Factory.addGetterSetter(v,"fillPatternX",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"fillPatternY",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"fillLinearGradientColorStops"),L.Factory.addGetterSetter(v,"strokeLinearGradientColorStops"),L.Factory.addGetterSetter(v,"fillRadialGradientStartRadius",0),L.Factory.addGetterSetter(v,"fillRadialGradientEndRadius",0),L.Factory.addGetterSetter(v,"fillRadialGradientColorStops"),L.Factory.addGetterSetter(v,"fillPatternRepeat","repeat"),L.Factory.addGetterSetter(v,"fillEnabled",!0),L.Factory.addGetterSetter(v,"strokeEnabled",!0),L.Factory.addGetterSetter(v,"shadowEnabled",!0),L.Factory.addGetterSetter(v,"dashEnabled",!0),L.Factory.addGetterSetter(v,"strokeScaleEnabled",!0),L.Factory.addGetterSetter(v,"fillPriority","color"),L.Factory.addComponentsGetterSetter(v,"fillPatternOffset",["x","y"]),L.Factory.addGetterSetter(v,"fillPatternOffsetX",0,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"fillPatternOffsetY",0,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(v,"fillPatternScale",["x","y"]),L.Factory.addGetterSetter(v,"fillPatternScaleX",1,(0,_.getNumberValidator)()),L.Factory.addGetterSetter(v,"fillPatternScaleY",1,(0,_.getNumberValidator)()),L.Factory.addComponentsGetterSetter(v,"fillLinearGradientStartPoint",["x","y"]),L.Factory.addComponentsGetterSetter(v,"strokeLinearGradientStartPoint",["x","y"]),L.Factory.addGetterSetter(v,"fillLinearGradientStartPointX",0),L.Factory.addGetterSetter(v,"strokeLinearGradientStartPointX",0),L.Factory.addGetterSetter(v,"fillLinearGradientStartPointY",0),L.Factory.addGetterSetter(v,"strokeLinearGradientStartPointY",0),L.Factory.addComponentsGetterSetter(v,"fillLinearGradientEndPoint",["x","y"]),L.Factory.addComponentsGetterSetter(v,"strokeLinearGradientEndPoint",["x","y"]),L.Factory.addGetterSetter(v,"fillLinearGradientEndPointX",0),L.Factory.addGetterSetter(v,"strokeLinearGradientEndPointX",0),L.Factory.addGetterSetter(v,"fillLinearGradientEndPointY",0),L.Factory.addGetterSetter(v,"strokeLinearGradientEndPointY",0),L.Factory.addComponentsGetterSetter(v,"fillRadialGradientStartPoint",["x","y"]),L.Factory.addGetterSetter(v,"fillRadialGradientStartPointX",0),L.Factory.addGetterSetter(v,"fillRadialGradientStartPointY",0),L.Factory.addComponentsGetterSetter(v,"fillRadialGradientEndPoint",["x","y"]),L.Factory.addGetterSetter(v,"fillRadialGradientEndPointX",0),L.Factory.addGetterSetter(v,"fillRadialGradientEndPointY",0),L.Factory.addGetterSetter(v,"fillPatternRotation",0),L.Factory.addGetterSetter(v,"fillRule",void 0,(0,_.getStringValidator)()),L.Factory.backCompat(v,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(sa)),sa}var Qo;function Jo(){if(Qo)return kr;Qo=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.Layer=void 0;const s=Xe(),f=Bi(),A=Ke(),L=Re(),M=Gi(),_=Fe(),o=it(),c=Te(),m="#",y="beforeDraw",w="draw",P=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],S=P.length;class p extends f.Container{constructor(C){super(C),this.canvas=new M.SceneCanvas,this.hitCanvas=new M.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(C){return this.getContext().clear(C),this.getHitCanvas().getContext().clear(C),this}setZIndex(C){super.setZIndex(C);const b=this.getStage();return b&&b.content&&(b.content.removeChild(this.getNativeCanvasElement()),C<b.children.length-1?b.content.insertBefore(this.getNativeCanvasElement(),b.children[C+1].getCanvas()._canvas):b.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){A.Node.prototype.moveToTop.call(this);const C=this.getStage();return C&&C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!A.Node.prototype.moveUp.call(this))return!1;const b=this.getStage();return!b||!b.content?!1:(b.content.removeChild(this.getNativeCanvasElement()),this.index<b.children.length-1?b.content.insertBefore(this.getNativeCanvasElement(),b.children[this.index+1].getCanvas()._canvas):b.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(A.Node.prototype.moveDown.call(this)){const C=this.getStage();if(C){const b=C.children;C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.insertBefore(this.getNativeCanvasElement(),b[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(A.Node.prototype.moveToBottom.call(this)){const C=this.getStage();if(C){const b=C.children;C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.insertBefore(this.getNativeCanvasElement(),b[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const C=this.getNativeCanvasElement();return A.Node.prototype.remove.call(this),C&&C.parentNode&&s.Util._isInDocument(C)&&C.parentNode.removeChild(C),this}getStage(){return this.parent}setSize({width:C,height:b}){return this.canvas.setSize(C,b),this.hitCanvas.setSize(C,b),this._setSmoothEnabled(),this}_validateAdd(C){const b=C.getType();b!=="Group"&&b!=="Shape"&&s.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(C){return C=C||{},C.width=C.width||this.getWidth(),C.height=C.height||this.getHeight(),C.x=C.x!==void 0?C.x:this.x(),C.y=C.y!==void 0?C.y:this.y(),A.Node.prototype._toKonvaCanvas.call(this,C)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){s.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){s.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,s.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(C){if(!this.isListening()||!this.isVisible())return null;let b=1,I=!1;for(;;){for(let u=0;u<S;u++){const a=P[u],g=this._getIntersection({x:C.x+a.x*b,y:C.y+a.y*b}),T=g.shape;if(T)return T;if(I=!!g.antialiased,!g.antialiased)break}if(I)b+=1;else return null}}_getIntersection(C){const b=this.hitCanvas.pixelRatio,I=this.hitCanvas.context.getImageData(Math.round(C.x*b),Math.round(C.y*b),1,1).data,u=I[3];if(u===255){const a=s.Util._rgbToHex(I[0],I[1],I[2]),g=o.shapes[m+a];return g?{shape:g}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(C,b){const I=this.getLayer(),u=C||I&&I.getCanvas();return this._fire(y,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),f.Container.prototype.drawScene.call(this,u,b),this._fire(w,{node:this}),this}drawHit(C,b){const I=this.getLayer(),u=C||I&&I.hitCanvas;return I&&I.clearBeforeDraw()&&I.getHitCanvas().getContext().clear(),f.Container.prototype.drawHit.call(this,u,b),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(C){s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(C)}getHitGraphEnabled(C){return s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const C=this.parent;!!this.hitCanvas._canvas.parentNode?C.content.removeChild(this.hitCanvas._canvas):C.content.appendChild(this.hitCanvas._canvas)}destroy(){return s.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return kr.Layer=p,p.prototype.nodeType="Layer",(0,c._registerNode)(p),L.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),L.Factory.addGetterSetter(p,"clearBeforeDraw",!0),L.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,_.getBooleanValidator)()),kr}var Pr={},Zo;function dc(){if(Zo)return Pr;Zo=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.FastLayer=void 0;const s=Xe(),f=Jo(),A=Te();let L=class extends f.Layer{constructor(_){super(_),this.listening(!1),s.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Pr.FastLayer=L,L.prototype.nodeType="FastLayer",(0,A._registerNode)(L),Pr}var Tr={},$o;function aa(){if($o)return Tr;$o=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Group=void 0;const s=Xe(),f=Bi(),A=Te();class L extends f.Container{_validateAdd(_){const o=_.getType();o!=="Group"&&o!=="Shape"&&s.Util.throw("You may only add groups and shapes to groups.")}}return Tr.Group=L,L.prototype.nodeType="Group",(0,A._registerNode)(L),Tr}var Er={},el;function oa(){if(el)return Er;el=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Animation=void 0;const s=Te(),f=Xe(),A=function(){return s.glob.performance&&s.glob.performance.now?function(){return s.glob.performance.now()}:function(){return new Date().getTime()}}();let L=class xr{constructor(_,o){this.id=xr.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:A(),frameRate:0},this.func=_,this.setLayers(o)}setLayers(_){let o=[];return _&&(o=Array.isArray(_)?_:[_]),this.layers=o,this}getLayers(){return this.layers}addLayer(_){const o=this.layers,c=o.length;for(let m=0;m<c;m++)if(o[m]._id===_._id)return!1;return this.layers.push(_),!0}isRunning(){const o=xr.animations,c=o.length;for(let m=0;m<c;m++)if(o[m].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=A(),xr._addAnimation(this),this}stop(){return xr._removeAnimation(this),this}_updateFrameObject(_){this.frame.timeDiff=_-this.frame.lastTime,this.frame.lastTime=_,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(_){this.animations.push(_),this._handleAnimation()}static _removeAnimation(_){const o=_.id,c=this.animations,m=c.length;for(let y=0;y<m;y++)if(c[y].id===o){this.animations.splice(y,1);break}}static _runFrames(){const _={},o=this.animations;for(let c=0;c<o.length;c++){const m=o[c],y=m.layers,w=m.func;m._updateFrameObject(A());const P=y.length;let S;if(w?S=w.call(m,m.frame)!==!1:S=!0,!!S)for(let p=0;p<P;p++){const d=y[p];d._id!==void 0&&(_[d._id]=d)}}for(const c in _)_.hasOwnProperty(c)&&_[c].batchDraw()}static _animationLoop(){const _=xr;_.animations.length?(_._runFrames(),f.Util.requestAnimFrame(_._animationLoop)):_.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,f.Util.requestAnimFrame(this._animationLoop))}};return Er.Animation=L,L.animations=[],L.animIdCounter=0,L.animRunning=!1,Er}var la={},tl;function cc(){return tl||(tl=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Easings=s.Tween=void 0;const f=Xe(),A=oa(),L=Ke(),M=Te(),_={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,c=2,m=3,y=["fill","stroke","shadowColor"];let w=0;class P{constructor(d,C,b,I,u,a,g){this.prop=d,this.propFunc=C,this.begin=I,this._pos=I,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=b,this._change=u-this.begin,this.pause()}fire(d){const C=this[d];C&&C()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=m,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const d=this.getTimer()-this._startTime;this.state===c?this.setTime(d):this.state===m&&this.setTime(this.duration-d)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class S{constructor(d){const C=this,b=d.node,I=b._id,u=d.easing||s.Easings.Linear,a=!!d.yoyo;let g,T;typeof d.duration>"u"?g=.3:d.duration===0?g=.001:g=d.duration,this.node=b,this._id=w++;const F=b.getLayer()||(b instanceof M.Konva.Stage?b.getLayers():null);F||f.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new A.Animation(function(){C.tween.onEnterFrame()},F),this.tween=new P(T,function(O){C._tweenFunc(O)},u,0,1,g*1e3,a),this._addListeners(),S.attrs[I]||(S.attrs[I]={}),S.attrs[I][this._id]||(S.attrs[I][this._id]={}),S.tweens[I]||(S.tweens[I]={});for(T in d)_[T]===void 0&&this._addAttr(T,d[T]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,C){const b=this.node,I=b._id;let u,a,g,T,F;const O=S.tweens[I][d];O&&delete S.attrs[I][O][d];let v=b.getAttr(d);if(f.Util._isArray(C))if(u=[],a=Math.max(C.length,v.length),d==="points"&&C.length!==v.length&&(C.length>v.length?(T=v,v=f.Util._prepareArrayForTween(v,C,b.closed())):(g=C,C=f.Util._prepareArrayForTween(C,v,b.closed()))),d.indexOf("fill")===0)for(let N=0;N<a;N++)if(N%2===0)u.push(C[N]-v[N]);else{const E=f.Util.colorToRGBA(v[N]);F=f.Util.colorToRGBA(C[N]),v[N]=E,u.push({r:F.r-E.r,g:F.g-E.g,b:F.b-E.b,a:F.a-E.a})}else for(let N=0;N<a;N++)u.push(C[N]-v[N]);else y.indexOf(d)!==-1?(v=f.Util.colorToRGBA(v),F=f.Util.colorToRGBA(C),u={r:F.r-v.r,g:F.g-v.g,b:F.b-v.b,a:F.a-v.a}):u=C-v;S.attrs[I][this._id][d]={start:v,diff:u,end:C,trueEnd:g,trueStart:T},S.tweens[I][d]=this._id}_tweenFunc(d){const C=this.node,b=S.attrs[C._id][this._id];let I,u,a,g,T,F,O,v;for(I in b){if(u=b[I],a=u.start,g=u.diff,v=u.end,f.Util._isArray(a))if(T=[],O=Math.max(a.length,v.length),I.indexOf("fill")===0)for(F=0;F<O;F++)F%2===0?T.push((a[F]||0)+g[F]*d):T.push("rgba("+Math.round(a[F].r+g[F].r*d)+","+Math.round(a[F].g+g[F].g*d)+","+Math.round(a[F].b+g[F].b*d)+","+(a[F].a+g[F].a*d)+")");else for(F=0;F<O;F++)T.push((a[F]||0)+g[F]*d);else y.indexOf(I)!==-1?T="rgba("+Math.round(a.r+g.r*d)+","+Math.round(a.g+g.g*d)+","+Math.round(a.b+g.b*d)+","+(a.a+g.a*d)+")":T=a+g*d;C.setAttr(I,T)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const d=this.node,C=S.attrs[d._id][this._id];C.points&&C.points.trueEnd&&d.setAttr("points",C.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const d=this.node,C=S.attrs[d._id][this._id];C.points&&C.points.trueStart&&d.points(C.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(d*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const d=this.node._id,C=this._id,b=S.tweens[d];this.pause();for(const I in b)delete S.tweens[d][I];delete S.attrs[d][C]}}s.Tween=S,S.attrs={},S.tweens={},L.Node.prototype.to=function(p){const d=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),d&&d()},new S(p).play()},s.Easings={BackEaseIn(p,d,C,b){return C*(p/=b)*p*((1.70158+1)*p-1.70158)+d},BackEaseOut(p,d,C,b){return C*((p=p/b-1)*p*((1.70158+1)*p+1.70158)+1)+d},BackEaseInOut(p,d,C,b){let I=1.70158;return(p/=b/2)<1?C/2*(p*p*(((I*=1.525)+1)*p-I))+d:C/2*((p-=2)*p*(((I*=1.525)+1)*p+I)+2)+d},ElasticEaseIn(p,d,C,b,I,u){let a=0;return p===0?d:(p/=b)===1?d+C:(u||(u=b*.3),!I||I<Math.abs(C)?(I=C,a=u/4):a=u/(2*Math.PI)*Math.asin(C/I),-(I*Math.pow(2,10*(p-=1))*Math.sin((p*b-a)*(2*Math.PI)/u))+d)},ElasticEaseOut(p,d,C,b,I,u){let a=0;return p===0?d:(p/=b)===1?d+C:(u||(u=b*.3),!I||I<Math.abs(C)?(I=C,a=u/4):a=u/(2*Math.PI)*Math.asin(C/I),I*Math.pow(2,-10*p)*Math.sin((p*b-a)*(2*Math.PI)/u)+C+d)},ElasticEaseInOut(p,d,C,b,I,u){let a=0;return p===0?d:(p/=b/2)===2?d+C:(u||(u=b*(.3*1.5)),!I||I<Math.abs(C)?(I=C,a=u/4):a=u/(2*Math.PI)*Math.asin(C/I),p<1?-.5*(I*Math.pow(2,10*(p-=1))*Math.sin((p*b-a)*(2*Math.PI)/u))+d:I*Math.pow(2,-10*(p-=1))*Math.sin((p*b-a)*(2*Math.PI)/u)*.5+C+d)},BounceEaseOut(p,d,C,b){return(p/=b)<1/2.75?C*(7.5625*p*p)+d:p<2/2.75?C*(7.5625*(p-=1.5/2.75)*p+.75)+d:p<2.5/2.75?C*(7.5625*(p-=2.25/2.75)*p+.9375)+d:C*(7.5625*(p-=2.625/2.75)*p+.984375)+d},BounceEaseIn(p,d,C,b){return C-s.Easings.BounceEaseOut(b-p,0,C,b)+d},BounceEaseInOut(p,d,C,b){return p<b/2?s.Easings.BounceEaseIn(p*2,0,C,b)*.5+d:s.Easings.BounceEaseOut(p*2-b,0,C,b)*.5+C*.5+d},EaseIn(p,d,C,b){return C*(p/=b)*p+d},EaseOut(p,d,C,b){return-C*(p/=b)*(p-2)+d},EaseInOut(p,d,C,b){return(p/=b/2)<1?C/2*p*p+d:-C/2*(--p*(p-2)-1)+d},StrongEaseIn(p,d,C,b){return C*(p/=b)*p*p*p*p+d},StrongEaseOut(p,d,C,b){return C*((p=p/b-1)*p*p*p*p+1)+d},StrongEaseInOut(p,d,C,b){return(p/=b/2)<1?C/2*p*p*p*p*p+d:C/2*((p-=2)*p*p*p*p+2)+d},Linear(p,d,C,b){return C*p/b+d}}}(la)),la}var nl;function ua(){return nl||(nl=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Konva=void 0;const f=Te(),A=Xe(),L=Ke(),M=Bi(),_=uc(),o=Jo(),c=dc(),m=aa(),y=ra(),w=it(),P=oa(),S=cc(),p=Uo(),d=Gi();s.Konva=A.Util._assign(f.Konva,{Util:A.Util,Transform:A.Transform,Node:L.Node,Container:M.Container,Stage:_.Stage,stages:_.stages,Layer:o.Layer,FastLayer:c.FastLayer,Group:m.Group,DD:y.DD,Shape:w.Shape,shapes:w.shapes,Animation:P.Animation,Tween:S.Tween,Easings:S.Easings,Context:p.Context,Canvas:d.Canvas}),s.default=s.Konva}(Zs)),Zs}var Rr={},rl;function hc(){if(rl)return Rr;rl=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Arc=void 0;const s=Re(),f=it(),A=Te(),L=Fe(),M=Te();let _=class extends f.Shape{_sceneFunc(c){const m=A.Konva.getAngle(this.angle()),y=this.clockwise();c.beginPath(),c.arc(0,0,this.outerRadius(),0,m,y),c.arc(0,0,this.innerRadius(),m,0,!y),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}getSelfRect(){const c=this.innerRadius(),m=this.outerRadius(),y=this.clockwise(),w=A.Konva.getAngle(y?360-this.angle():this.angle()),P=Math.cos(Math.min(w,Math.PI)),S=1,p=Math.sin(Math.min(Math.max(Math.PI,w),3*Math.PI/2)),d=Math.sin(Math.min(w,Math.PI/2)),C=P*(P>0?c:m),b=S*m,I=p*(p>0?c:m),u=d*(d>0?m:c);return{x:C,y:y?-1*u:I,width:b-C,height:u-I}}};return Rr.Arc=_,_.prototype._centroid=!0,_.prototype.className="Arc",_.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,M._registerNode)(_),s.Factory.addGetterSetter(_,"innerRadius",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"outerRadius",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"angle",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"clockwise",!1,(0,L.getBooleanValidator)()),Rr}var Fr={},Nr={},il;function sl(){if(il)return Nr;il=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Line=void 0;const s=Re(),f=Te(),A=it(),L=Fe();function M(c,m,y,w,P,S,p){const d=Math.sqrt(Math.pow(y-c,2)+Math.pow(w-m,2)),C=Math.sqrt(Math.pow(P-y,2)+Math.pow(S-w,2)),b=p*d/(d+C),I=p*C/(d+C),u=y-b*(P-c),a=w-b*(S-m),g=y+I*(P-c),T=w+I*(S-m);return[u,a,g,T]}function _(c,m){const y=c.length,w=[];for(let P=2;P<y-2;P+=2){const S=M(c[P-2],c[P-1],c[P],c[P+1],c[P+2],c[P+3],m);isNaN(S[0])||(w.push(S[0]),w.push(S[1]),w.push(c[P]),w.push(c[P+1]),w.push(S[2]),w.push(S[3]))}return w}let o=class extends A.Shape{constructor(m){super(m),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(m){let y=this.points(),w=y.length,P=this.tension(),S=this.closed(),p=this.bezier(),d,C,b;if(w){if(m.beginPath(),m.moveTo(y[0],y[1]),P!==0&&w>4){for(d=this.getTensionPoints(),C=d.length,b=S?0:4,S||m.quadraticCurveTo(d[0],d[1],d[2],d[3]);b<C-2;)m.bezierCurveTo(d[b++],d[b++],d[b++],d[b++],d[b++],d[b++]);S||m.quadraticCurveTo(d[C-2],d[C-1],y[w-2],y[w-1])}else if(p)for(b=2;b<w;)m.bezierCurveTo(y[b++],y[b++],y[b++],y[b++],y[b++],y[b++]);else for(b=2;b<w;b+=2)m.lineTo(y[b],y[b+1]);S?(m.closePath(),m.fillStrokeShape(this)):m.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_(this.points(),this.tension())}_getTensionPointsClosed(){const m=this.points(),y=m.length,w=this.tension(),P=M(m[y-2],m[y-1],m[0],m[1],m[2],m[3],w),S=M(m[y-4],m[y-3],m[y-2],m[y-1],m[0],m[1],w),p=_(m,w);return[P[2],P[3]].concat(p).concat([S[0],S[1],m[y-2],m[y-1],S[2],S[3],P[0],P[1],m[0],m[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let m=this.points();if(m.length<4)return{x:m[0]||0,y:m[1]||0,width:0,height:0};this.tension()!==0?m=[m[0],m[1],...this._getTensionPoints(),m[m.length-2],m[m.length-1]]:m=this.points();let y=m[0],w=m[0],P=m[1],S=m[1],p,d;for(let C=0;C<m.length/2;C++)p=m[C*2],d=m[C*2+1],y=Math.min(y,p),w=Math.max(w,p),P=Math.min(P,d),S=Math.max(S,d);return{x:y,y:P,width:w-y,height:S-P}}};return Nr.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,f._registerNode)(o),s.Factory.addGetterSetter(o,"closed",!1),s.Factory.addGetterSetter(o,"bezier",!1),s.Factory.addGetterSetter(o,"tension",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(o,"points",[],(0,L.getNumberArrayValidator)()),Nr}var Mr={},da={},al;function fc(){return al||(al=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.t2length=s.getQuadraticArcLength=s.getCubicArcLength=s.binomialCoefficients=s.cValues=s.tValues=void 0,s.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],s.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],s.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const f=(o,c,m)=>{let y,w;const S=m/2;y=0;for(let p=0;p<20;p++)w=S*s.tValues[20][p]+S,y+=s.cValues[20][p]*L(o,c,w);return S*y};s.getCubicArcLength=f;const A=(o,c,m)=>{m===void 0&&(m=1);const y=o[0]-2*o[1]+o[2],w=c[0]-2*c[1]+c[2],P=2*o[1]-2*o[0],S=2*c[1]-2*c[0],p=4*(y*y+w*w),d=4*(y*P+w*S),C=P*P+S*S;if(p===0)return m*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(c[2]-c[0],2));const b=d/(2*p),I=C/p,u=m+b,a=I-b*b,g=u*u+a>0?Math.sqrt(u*u+a):0,T=b*b+a>0?Math.sqrt(b*b+a):0,F=b+Math.sqrt(b*b+a)!==0?a*Math.log(Math.abs((u+g)/(b+T))):0;return Math.sqrt(p)/2*(u*g-b*T+F)};s.getQuadraticArcLength=A;function L(o,c,m){const y=M(1,m,o),w=M(1,m,c),P=y*y+w*w;return Math.sqrt(P)}const M=(o,c,m)=>{const y=m.length-1;let w,P;if(y===0)return 0;if(o===0){P=0;for(let S=0;S<=y;S++)P+=s.binomialCoefficients[y][S]*Math.pow(1-c,y-S)*Math.pow(c,S)*m[S];return P}else{w=new Array(y);for(let S=0;S<y;S++)w[S]=y*(m[S+1]-m[S]);return M(o-1,c,w)}},_=(o,c,m)=>{let y=1,w=o/c,P=(o-m(w))/c,S=0;for(;y>.001;){const p=m(w+P),d=Math.abs(o-p)/c;if(d<y)y=d,w+=P;else{const C=m(w-P),b=Math.abs(o-C)/c;b<y?(y=b,w-=P):P/=2}if(S++,S>500)break}return w};s.t2length=_}(da)),da}var ol;function ca(){if(ol)return Mr;ol=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.Path=void 0;const s=Re(),f=it(),A=Te(),L=fc();let M=class At extends f.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=At.parsePathData(this.data()),this.pathLength=At.getPathLength(this.dataArray)}_sceneFunc(o){const c=this.dataArray;o.beginPath();let m=!1;for(let g=0;g<c.length;g++){const T=c[g].command,F=c[g].points;switch(T){case"L":o.lineTo(F[0],F[1]);break;case"M":o.moveTo(F[0],F[1]);break;case"C":o.bezierCurveTo(F[0],F[1],F[2],F[3],F[4],F[5]);break;case"Q":o.quadraticCurveTo(F[0],F[1],F[2],F[3]);break;case"A":var y=F[0],w=F[1],P=F[2],S=F[3],p=F[4],d=F[5],C=F[6],b=F[7],I=P>S?P:S,u=P>S?1:P/S,a=P>S?S/P:1;o.translate(y,w),o.rotate(C),o.scale(u,a),o.arc(0,0,I,p,p+d,1-b),o.scale(1/u,1/a),o.rotate(-C),o.translate(-y,-w);break;case"z":m=!0,o.closePath();break}}!m&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(p){if(p.command==="A"){const d=p.points[4],C=p.points[5],b=p.points[4]+C;let I=Math.PI/180;if(Math.abs(d-b)<I&&(I=Math.abs(d-b)),C<0)for(let u=d-I;u>b;u-=I){const a=At.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],u,0);o.push(a.x,a.y)}else for(let u=d+I;u<b;u+=I){const a=At.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],u,0);o.push(a.x,a.y)}}else if(p.command==="C")for(let d=0;d<=1;d+=.01){const C=At.getPointOnCubicBezier(d,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);o.push(C.x,C.y)}else o=o.concat(p.points)});let c=o[0],m=o[0],y=o[1],w=o[1],P,S;for(let p=0;p<o.length/2;p++)P=o[p*2],S=o[p*2+1],isNaN(P)||(c=Math.min(c,P),m=Math.max(m,P)),isNaN(S)||(y=Math.min(y,S),w=Math.max(w,S));return{x:c,y,width:m-c,height:w-y}}getLength(){return this.pathLength}getPointAtLength(o){return At.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,c,m,y){return Math.sqrt((m-o)*(m-o)+(y-c)*(y-c))}static getPathLength(o){let c=0;for(let m=0;m<o.length;++m)c+=o[m].pathLength;return c}static getPointAtLengthOfDataArray(o,c){let m,y=0,w=c.length;if(!w)return null;for(;y<w&&o>c[y].pathLength;)o-=c[y].pathLength,++y;if(y===w)return m=c[y-1].points.slice(-2),{x:m[0],y:m[1]};if(o<.01)return m=c[y].points.slice(0,2),{x:m[0],y:m[1]};const P=c[y],S=P.points;switch(P.command){case"L":return At.getPointOnLine(o,P.start.x,P.start.y,S[0],S[1]);case"C":return At.getPointOnCubicBezier((0,L.t2length)(o,At.getPathLength(c),g=>(0,L.getCubicArcLength)([P.start.x,S[0],S[2],S[4]],[P.start.y,S[1],S[3],S[5]],g)),P.start.x,P.start.y,S[0],S[1],S[2],S[3],S[4],S[5]);case"Q":return At.getPointOnQuadraticBezier((0,L.t2length)(o,At.getPathLength(c),g=>(0,L.getQuadraticArcLength)([P.start.x,S[0],S[2]],[P.start.y,S[1],S[3]],g)),P.start.x,P.start.y,S[0],S[1],S[2],S[3]);case"A":var p=S[0],d=S[1],C=S[2],b=S[3],I=S[4],u=S[5],a=S[6];return I+=u*o/P.pathLength,At.getPointOnEllipticalArc(p,d,C,b,I,a)}return null}static getPointOnLine(o,c,m,y,w,P,S){P=P??c,S=S??m;const p=this.getLineLength(c,m,y,w);if(p<1e-10)return{x:c,y:m};if(y===c)return{x:P,y:S+(w>m?o:-o)};const d=(w-m)/(y-c),C=Math.sqrt(o*o/(1+d*d))*(y<c?-1:1),b=d*C;if(Math.abs(S-m-d*(P-c))<1e-10)return{x:P+C,y:S+b};const I=((P-c)*(y-c)+(S-m)*(w-m))/(p*p),u=c+I*(y-c),a=m+I*(w-m),g=this.getLineLength(P,S,u,a),T=Math.sqrt(o*o-g*g),F=Math.sqrt(T*T/(1+d*d))*(y<c?-1:1),O=d*F;return{x:u+F,y:a+O}}static getPointOnCubicBezier(o,c,m,y,w,P,S,p,d){function C(T){return T*T*T}function b(T){return 3*T*T*(1-T)}function I(T){return 3*T*(1-T)*(1-T)}function u(T){return(1-T)*(1-T)*(1-T)}const a=p*C(o)+P*b(o)+y*I(o)+c*u(o),g=d*C(o)+S*b(o)+w*I(o)+m*u(o);return{x:a,y:g}}static getPointOnQuadraticBezier(o,c,m,y,w,P,S){function p(u){return u*u}function d(u){return 2*u*(1-u)}function C(u){return(1-u)*(1-u)}const b=P*p(o)+y*d(o)+c*C(o),I=S*p(o)+w*d(o)+m*C(o);return{x:b,y:I}}static getPointOnEllipticalArc(o,c,m,y,w,P){const S=Math.cos(P),p=Math.sin(P),d={x:m*Math.cos(w),y:y*Math.sin(w)};return{x:o+(d.x*S-d.y*p),y:c+(d.x*p+d.y*S)}}static parsePathData(o){if(!o)return[];let c=o;const m=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(new RegExp(" ","g"),",");for(var y=0;y<m.length;y++)c=c.replace(new RegExp(m[y],"g"),"|"+m[y]);const w=c.split("|"),P=[],S=[];let p=0,d=0;const C=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let b;for(y=1;y<w.length;y++){let l=w[y],R=l.charAt(0);for(l=l.slice(1),S.length=0;b=C.exec(l);)S.push(b[0]);const k=[];for(let G=0,B=S.length;G<B;G++){if(S[G]==="00"){k.push(0,0);continue}const j=parseFloat(S[G]);isNaN(j)?k.push(0):k.push(j)}for(;k.length>0&&!isNaN(k[0]);){let G="",B=[];const j=p,Q=d;var I,u,a,g,T,F,O,v,N,E;switch(R){case"l":p+=k.shift(),d+=k.shift(),G="L",B.push(p,d);break;case"L":p=k.shift(),d=k.shift(),B.push(p,d);break;case"m":var z=k.shift(),V=k.shift();if(p+=z,d+=V,G="M",P.length>2&&P[P.length-1].command==="z"){for(let H=P.length-2;H>=0;H--)if(P[H].command==="M"){p=P[H].points[0]+z,d=P[H].points[1]+V;break}}B.push(p,d),R="l";break;case"M":p=k.shift(),d=k.shift(),G="M",B.push(p,d),R="L";break;case"h":p+=k.shift(),G="L",B.push(p,d);break;case"H":p=k.shift(),G="L",B.push(p,d);break;case"v":d+=k.shift(),G="L",B.push(p,d);break;case"V":d=k.shift(),G="L",B.push(p,d);break;case"C":B.push(k.shift(),k.shift(),k.shift(),k.shift()),p=k.shift(),d=k.shift(),B.push(p,d);break;case"c":B.push(p+k.shift(),d+k.shift(),p+k.shift(),d+k.shift()),p+=k.shift(),d+=k.shift(),G="C",B.push(p,d);break;case"S":u=p,a=d,I=P[P.length-1],I.command==="C"&&(u=p+(p-I.points[2]),a=d+(d-I.points[3])),B.push(u,a,k.shift(),k.shift()),p=k.shift(),d=k.shift(),G="C",B.push(p,d);break;case"s":u=p,a=d,I=P[P.length-1],I.command==="C"&&(u=p+(p-I.points[2]),a=d+(d-I.points[3])),B.push(u,a,p+k.shift(),d+k.shift()),p+=k.shift(),d+=k.shift(),G="C",B.push(p,d);break;case"Q":B.push(k.shift(),k.shift()),p=k.shift(),d=k.shift(),B.push(p,d);break;case"q":B.push(p+k.shift(),d+k.shift()),p+=k.shift(),d+=k.shift(),G="Q",B.push(p,d);break;case"T":u=p,a=d,I=P[P.length-1],I.command==="Q"&&(u=p+(p-I.points[0]),a=d+(d-I.points[1])),p=k.shift(),d=k.shift(),G="Q",B.push(u,a,p,d);break;case"t":u=p,a=d,I=P[P.length-1],I.command==="Q"&&(u=p+(p-I.points[0]),a=d+(d-I.points[1])),p+=k.shift(),d+=k.shift(),G="Q",B.push(u,a,p,d);break;case"A":g=k.shift(),T=k.shift(),F=k.shift(),O=k.shift(),v=k.shift(),N=p,E=d,p=k.shift(),d=k.shift(),G="A",B=this.convertEndpointToCenterParameterization(N,E,p,d,O,v,g,T,F);break;case"a":g=k.shift(),T=k.shift(),F=k.shift(),O=k.shift(),v=k.shift(),N=p,E=d,p+=k.shift(),d+=k.shift(),G="A",B=this.convertEndpointToCenterParameterization(N,E,p,d,O,v,g,T,F);break}P.push({command:G||R,points:B,start:{x:j,y:Q},pathLength:this.calcLength(j,Q,G||R,B)})}(R==="z"||R==="Z")&&P.push({command:"z",points:[],start:void 0,pathLength:0})}return P}static calcLength(o,c,m,y){let w,P,S,p;const d=At;switch(m){case"L":return d.getLineLength(o,c,y[0],y[1]);case"C":return(0,L.getCubicArcLength)([o,y[0],y[2],y[4]],[c,y[1],y[3],y[5]],1);case"Q":return(0,L.getQuadraticArcLength)([o,y[0],y[2]],[c,y[1],y[3]],1);case"A":w=0;var C=y[4],b=y[5],I=y[4]+b,u=Math.PI/180;if(Math.abs(C-I)<u&&(u=Math.abs(C-I)),P=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],C,0),b<0)for(p=C-u;p>I;p-=u)S=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],p,0),w+=d.getLineLength(P.x,P.y,S.x,S.y),P=S;else for(p=C+u;p<I;p+=u)S=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],p,0),w+=d.getLineLength(P.x,P.y,S.x,S.y),P=S;return S=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],I,0),w+=d.getLineLength(P.x,P.y,S.x,S.y),w}return 0}static convertEndpointToCenterParameterization(o,c,m,y,w,P,S,p,d){const C=d*(Math.PI/180),b=Math.cos(C)*(o-m)/2+Math.sin(C)*(c-y)/2,I=-1*Math.sin(C)*(o-m)/2+Math.cos(C)*(c-y)/2,u=b*b/(S*S)+I*I/(p*p);u>1&&(S*=Math.sqrt(u),p*=Math.sqrt(u));let a=Math.sqrt((S*S*(p*p)-S*S*(I*I)-p*p*(b*b))/(S*S*(I*I)+p*p*(b*b)));w===P&&(a*=-1),isNaN(a)&&(a=0);const g=a*S*I/p,T=a*-p*b/S,F=(o+m)/2+Math.cos(C)*g-Math.sin(C)*T,O=(c+y)/2+Math.sin(C)*g+Math.cos(C)*T,v=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},N=function(k,G){return(k[0]*G[0]+k[1]*G[1])/(v(k)*v(G))},E=function(k,G){return(k[0]*G[1]<k[1]*G[0]?-1:1)*Math.acos(N(k,G))},z=E([1,0],[(b-g)/S,(I-T)/p]),V=[(b-g)/S,(I-T)/p],l=[(-1*b-g)/S,(-1*I-T)/p];let R=E(V,l);return N(V,l)<=-1&&(R=Math.PI),N(V,l)>=1&&(R=0),P===0&&R>0&&(R=R-2*Math.PI),P===1&&R<0&&(R=R+2*Math.PI),[F,O,S,p,z,R,C,P]}};return Mr.Path=M,M.prototype.className="Path",M.prototype._attrsAffectingSize=["data"],(0,A._registerNode)(M),s.Factory.addGetterSetter(M,"data"),Mr}var ll;function gc(){if(ll)return Fr;ll=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Arrow=void 0;const s=Re(),f=sl(),A=Fe(),L=Te(),M=ca();let _=class extends f.Line{_sceneFunc(c){super._sceneFunc(c);const m=Math.PI*2,y=this.points();let w=y;const P=this.tension()!==0&&y.length>4;P&&(w=this.getTensionPoints());const S=this.pointerLength(),p=y.length;let d,C;if(P){const u=[w[w.length-4],w[w.length-3],w[w.length-2],w[w.length-1],y[p-2],y[p-1]],a=M.Path.calcLength(w[w.length-4],w[w.length-3],"C",u),g=M.Path.getPointOnQuadraticBezier(Math.min(1,1-S/a),u[0],u[1],u[2],u[3],u[4],u[5]);d=y[p-2]-g.x,C=y[p-1]-g.y}else d=y[p-2]-y[p-4],C=y[p-1]-y[p-3];const b=(Math.atan2(C,d)+m)%m,I=this.pointerWidth();this.pointerAtEnding()&&(c.save(),c.beginPath(),c.translate(y[p-2],y[p-1]),c.rotate(b),c.moveTo(0,0),c.lineTo(-S,I/2),c.lineTo(-S,-I/2),c.closePath(),c.restore(),this.__fillStroke(c)),this.pointerAtBeginning()&&(c.save(),c.beginPath(),c.translate(y[0],y[1]),P?(d=(w[0]+w[2])/2-y[0],C=(w[1]+w[3])/2-y[1]):(d=y[2]-y[0],C=y[3]-y[1]),c.rotate((Math.atan2(-C,-d)+m)%m),c.moveTo(0,0),c.lineTo(-S,I/2),c.lineTo(-S,-I/2),c.closePath(),c.restore(),this.__fillStroke(c))}__fillStroke(c){const m=this.dashEnabled();m&&(this.attrs.dashEnabled=!1,c.setLineDash([])),c.fillStrokeShape(this),m&&(this.attrs.dashEnabled=!0)}getSelfRect(){const c=super.getSelfRect(),m=this.pointerWidth()/2;return{x:c.x,y:c.y-m,width:c.width,height:c.height+m*2}}};return Fr.Arrow=_,_.prototype.className="Arrow",(0,L._registerNode)(_),s.Factory.addGetterSetter(_,"pointerLength",10,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(_,"pointerWidth",10,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(_,"pointerAtBeginning",!1),s.Factory.addGetterSetter(_,"pointerAtEnding",!0),Fr}var Ar={},ul;function pc(){if(ul)return Ar;ul=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Circle=void 0;const s=Re(),f=it(),A=Fe(),L=Te();let M=class extends f.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}};return Ar.Circle=M,M.prototype._centroid=!0,M.prototype.className="Circle",M.prototype._attrsAffectingSize=["radius"],(0,L._registerNode)(M),s.Factory.addGetterSetter(M,"radius",0,(0,A.getNumberValidator)()),Ar}var Lr={},dl;function mc(){if(dl)return Lr;dl=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Ellipse=void 0;const s=Re(),f=it(),A=Fe(),L=Te();let M=class extends f.Shape{_sceneFunc(o){const c=this.radiusX(),m=this.radiusY();o.beginPath(),o.save(),c!==m&&o.scale(1,m/c),o.arc(0,0,c,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return Lr.Ellipse=M,M.prototype.className="Ellipse",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,L._registerNode)(M),s.Factory.addComponentsGetterSetter(M,"radius",["x","y"]),s.Factory.addGetterSetter(M,"radiusX",0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(M,"radiusY",0,(0,A.getNumberValidator)()),Lr}var Ir={},cl;function yc(){if(cl)return Ir;cl=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Image=void 0;const s=Xe(),f=Re(),A=it(),L=Te(),M=Fe();class _ extends A.Shape{constructor(c){super(c),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",m=>{this._removeImageLoad(m.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const c=this.image();c&&c.complete||c&&c.readyState===4||c&&c.addEventListener&&c.addEventListener("load",this._loadListener)}_removeImageLoad(c){c&&c.removeEventListener&&c.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const c=!!this.cornerRadius(),m=this.hasShadow();return c&&m?!0:super._useBufferCanvas(!0)}_sceneFunc(c){const m=this.getWidth(),y=this.getHeight(),w=this.cornerRadius(),P=this.attrs.image;let S;if(P){const p=this.attrs.cropWidth,d=this.attrs.cropHeight;p&&d?S=[P,this.cropX(),this.cropY(),p,d,0,0,m,y]:S=[P,0,0,m,y]}(this.hasFill()||this.hasStroke()||w)&&(c.beginPath(),w?s.Util.drawRoundedRectPath(c,m,y,w):c.rect(0,0,m,y),c.closePath(),c.fillStrokeShape(this)),P&&(w&&c.clip(),c.drawImage.apply(c,S))}_hitFunc(c){const m=this.width(),y=this.height(),w=this.cornerRadius();c.beginPath(),w?s.Util.drawRoundedRectPath(c,m,y,w):c.rect(0,0,m,y),c.closePath(),c.fillStrokeShape(this)}getWidth(){var c,m;return(c=this.attrs.width)!==null&&c!==void 0?c:(m=this.image())===null||m===void 0?void 0:m.width}getHeight(){var c,m;return(c=this.attrs.height)!==null&&c!==void 0?c:(m=this.image())===null||m===void 0?void 0:m.height}static fromURL(c,m,y=null){const w=s.Util.createImageElement();w.onload=function(){const P=new _({image:w});m(P)},w.onerror=y,w.crossOrigin="Anonymous",w.src=c}}return Ir.Image=_,_.prototype.className="Image",(0,L._registerNode)(_),f.Factory.addGetterSetter(_,"cornerRadius",0,(0,M.getNumberOrArrayOfNumbersValidator)(4)),f.Factory.addGetterSetter(_,"image"),f.Factory.addComponentsGetterSetter(_,"crop",["x","y","width","height"]),f.Factory.addGetterSetter(_,"cropX",0,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(_,"cropY",0,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(_,"cropWidth",0,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(_,"cropHeight",0,(0,M.getNumberValidator)()),Ir}var Hn={},hl;function vc(){if(hl)return Hn;hl=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.Tag=Hn.Label=void 0;const s=Re(),f=it(),A=aa(),L=Fe(),M=Te(),_=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",c="none",m="up",y="right",w="down",P="left",S=_.length;let p=class extends A.Group{constructor(b){super(b),this.on("add.konva",function(I){this._addListeners(I.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(b){let I=this,u;const a=function(){I._sync()};for(u=0;u<S;u++)b.on(_[u]+o,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let b=this.getText(),I=this.getTag(),u,a,g,T,F,O,v;if(b&&I){switch(u=b.width(),a=b.height(),g=I.pointerDirection(),T=I.pointerWidth(),v=I.pointerHeight(),F=0,O=0,g){case m:F=u/2,O=-1*v;break;case y:F=u+T,O=a/2;break;case w:F=u/2,O=a+v;break;case P:F=-1*T,O=a/2;break}I.setAttrs({x:-1*F,y:-1*O,width:u,height:a}),b.setAttrs({x:-1*F,y:-1*O})}}};Hn.Label=p,p.prototype.className="Label",(0,M._registerNode)(p);class d extends f.Shape{_sceneFunc(b){const I=this.width(),u=this.height(),a=this.pointerDirection(),g=this.pointerWidth(),T=this.pointerHeight(),F=this.cornerRadius();let O=0,v=0,N=0,E=0;typeof F=="number"?O=v=N=E=Math.min(F,I/2,u/2):(O=Math.min(F[0]||0,I/2,u/2),v=Math.min(F[1]||0,I/2,u/2),E=Math.min(F[2]||0,I/2,u/2),N=Math.min(F[3]||0,I/2,u/2)),b.beginPath(),b.moveTo(O,0),a===m&&(b.lineTo((I-g)/2,0),b.lineTo(I/2,-1*T),b.lineTo((I+g)/2,0)),b.lineTo(I-v,0),b.arc(I-v,v,v,Math.PI*3/2,0,!1),a===y&&(b.lineTo(I,(u-T)/2),b.lineTo(I+g,u/2),b.lineTo(I,(u+T)/2)),b.lineTo(I,u-E),b.arc(I-E,u-E,E,0,Math.PI/2,!1),a===w&&(b.lineTo((I+g)/2,u),b.lineTo(I/2,u+T),b.lineTo((I-g)/2,u)),b.lineTo(N,u),b.arc(N,u-N,N,Math.PI/2,Math.PI,!1),a===P&&(b.lineTo(0,(u+T)/2),b.lineTo(-1*g,u/2),b.lineTo(0,(u-T)/2)),b.lineTo(0,O),b.arc(O,O,O,Math.PI,Math.PI*3/2,!1),b.closePath(),b.fillStrokeShape(this)}getSelfRect(){let b=0,I=0,u=this.pointerWidth(),a=this.pointerHeight(),g=this.pointerDirection(),T=this.width(),F=this.height();return g===m?(I-=a,F+=a):g===w?F+=a:g===P?(b-=u*1.5,T+=u):g===y&&(T+=u*1.5),{x:b,y:I,width:T,height:F}}}return Hn.Tag=d,d.prototype.className="Tag",(0,M._registerNode)(d),s.Factory.addGetterSetter(d,"pointerDirection",c),s.Factory.addGetterSetter(d,"pointerWidth",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(d,"pointerHeight",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(d,"cornerRadius",0,(0,L.getNumberOrArrayOfNumbersValidator)(4)),Hn}var Dr={},fl;function gl(){if(fl)return Dr;fl=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Rect=void 0;const s=Re(),f=it(),A=Te(),L=Xe(),M=Fe();class _ extends f.Shape{_sceneFunc(c){const m=this.cornerRadius(),y=this.width(),w=this.height();c.beginPath(),m?L.Util.drawRoundedRectPath(c,y,w,m):c.rect(0,0,y,w),c.closePath(),c.fillStrokeShape(this)}}return Dr.Rect=_,_.prototype.className="Rect",(0,A._registerNode)(_),s.Factory.addGetterSetter(_,"cornerRadius",0,(0,M.getNumberOrArrayOfNumbersValidator)(4)),Dr}var Or={},pl;function _c(){if(pl)return Or;pl=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.RegularPolygon=void 0;const s=Re(),f=it(),A=Fe(),L=Te();let M=class extends f.Shape{_sceneFunc(o){const c=this._getPoints();o.beginPath(),o.moveTo(c[0].x,c[0].y);for(let m=1;m<c.length;m++)o.lineTo(c[m].x,c[m].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,c=this.attrs.radius||0,m=[];for(let y=0;y<o;y++)m.push({x:c*Math.sin(y*2*Math.PI/o),y:-1*c*Math.cos(y*2*Math.PI/o)});return m}getSelfRect(){const o=this._getPoints();let c=o[0].x,m=o[0].y,y=o[0].x,w=o[0].y;return o.forEach(P=>{c=Math.min(c,P.x),m=Math.max(m,P.x),y=Math.min(y,P.y),w=Math.max(w,P.y)}),{x:c,y,width:m-c,height:w-y}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return Or.RegularPolygon=M,M.prototype.className="RegularPolygon",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["radius"],(0,L._registerNode)(M),s.Factory.addGetterSetter(M,"radius",0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(M,"sides",0,(0,A.getNumberValidator)()),Or}var zr={},ml;function xc(){if(ml)return zr;ml=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.Ring=void 0;const s=Re(),f=it(),A=Fe(),L=Te(),M=Math.PI*2;let _=class extends f.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.innerRadius(),0,M,!1),c.moveTo(this.outerRadius(),0),c.arc(0,0,this.outerRadius(),M,0,!0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}};return zr.Ring=_,_.prototype.className="Ring",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,L._registerNode)(_),s.Factory.addGetterSetter(_,"innerRadius",0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(_,"outerRadius",0,(0,A.getNumberValidator)()),zr}var Gr={},yl;function wc(){if(yl)return Gr;yl=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Sprite=void 0;const s=Re(),f=it(),A=oa(),L=Fe(),M=Te();let _=class extends f.Shape{constructor(c){super(c),this._updated=!0,this.anim=new A.Animation(()=>{const m=this._updated;return this._updated=!1,m}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(c){const m=this.animation(),y=this.frameIndex(),w=y*4,P=this.animations()[m],S=this.frameOffsets(),p=P[w+0],d=P[w+1],C=P[w+2],b=P[w+3],I=this.image();if((this.hasFill()||this.hasStroke())&&(c.beginPath(),c.rect(0,0,C,b),c.closePath(),c.fillStrokeShape(this)),I)if(S){const u=S[m],a=y*2;c.drawImage(I,p,d,C,b,u[a+0],u[a+1],C,b)}else c.drawImage(I,p,d,C,b,0,0,C,b)}_hitFunc(c){const m=this.animation(),y=this.frameIndex(),w=y*4,P=this.animations()[m],S=this.frameOffsets(),p=P[w+2],d=P[w+3];if(c.beginPath(),S){const C=S[m],b=y*2;c.rect(C[b+0],C[b+1],p,d)}else c.rect(0,0,p,d);c.closePath(),c.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const c=this;this.interval=setInterval(function(){c._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const c=this.getLayer();this.anim.setLayers(c),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const c=this.frameIndex(),m=this.animation(),y=this.animations(),w=y[m],P=w.length/4;c<P-1?this.frameIndex(c+1):this.frameIndex(0)}};return Gr.Sprite=_,_.prototype.className="Sprite",(0,M._registerNode)(_),s.Factory.addGetterSetter(_,"animation"),s.Factory.addGetterSetter(_,"animations"),s.Factory.addGetterSetter(_,"frameOffsets"),s.Factory.addGetterSetter(_,"image"),s.Factory.addGetterSetter(_,"frameIndex",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"frameRate",17,(0,L.getNumberValidator)()),s.Factory.backCompat(_,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Gr}var Br={},vl;function Sc(){if(vl)return Br;vl=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.Star=void 0;const s=Re(),f=it(),A=Fe(),L=Te();let M=class extends f.Shape{_sceneFunc(o){const c=this.innerRadius(),m=this.outerRadius(),y=this.numPoints();o.beginPath(),o.moveTo(0,0-m);for(let w=1;w<y*2;w++){const P=w%2===0?m:c,S=P*Math.sin(w*Math.PI/y),p=-1*P*Math.cos(w*Math.PI/y);o.lineTo(S,p)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return Br.Star=M,M.prototype.className="Star",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,L._registerNode)(M),s.Factory.addGetterSetter(M,"numPoints",5,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(M,"innerRadius",0,(0,A.getNumberValidator)()),s.Factory.addGetterSetter(M,"outerRadius",0,(0,A.getNumberValidator)()),Br}var rr={},_l;function xl(){if(_l)return rr;_l=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.Text=void 0,rr.stringToArray=o;const s=Xe(),f=Re(),A=it(),L=Te(),M=Fe(),_=Te();function o(ae){return[...ae].reduce((re,se,de,ge)=>{if(new RegExp("\\p{Emoji}","u").test(se)){const U=ge[de+1];U&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(U)?(re.push(se+U),ge[de+1]=""):re.push(se)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(se+(ge[de+1]||""))?re.push(se+ge[de+1]):de>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(se)?re[re.length-1]+=se:se&&re.push(se);return re},[])}const c="auto",m="center",y="inherit",w="justify",P="Change.konva",S="2d",p="-",d="left",C="text",b="Text",I="top",u="bottom",a="middle",g="normal",T="px ",F=" ",O="right",v="rtl",N="word",E="char",z="none",V="",l=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],R=l.length;function k(ae){return ae.split(",").map(re=>{re=re.trim();const se=re.indexOf(" ")>=0,de=re.indexOf('"')>=0||re.indexOf("'")>=0;return se&&!de&&(re=`"${re}"`),re}).join(", ")}let G;function B(){return G||(G=s.Util.createCanvasElement().getContext(S),G)}function j(ae){ae.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Q(ae){ae.setAttr("miterLimit",2),ae.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H(ae){return ae=ae||{},!ae.fillLinearGradientColorStops&&!ae.fillRadialGradientColorStops&&!ae.fillPatternImage&&(ae.fill=ae.fill||"black"),ae}class ne extends A.Shape{constructor(re){super(H(re)),this._partialTextX=0,this._partialTextY=0;for(let se=0;se<R;se++)this.on(l[se]+P,this._setTextData);this._setTextData()}_sceneFunc(re){const se=this.textArr,de=se.length;if(!this.text())return;let ge=this.padding(),U=this.fontSize(),ee=this.lineHeight()*U,oe=this.verticalAlign(),le=this.direction(),ce=0,ve=this.align(),we=this.getWidth(),Me=this.letterSpacing(),Se=this.fill(),Ne=this.textDecoration(),Oe=Ne.indexOf("underline")!==-1,je=Ne.indexOf("line-through")!==-1,Lt;le=le===y?re.direction:le;let Qe=ee/2,ft=a;if(L.Konva._fixTextRendering){const Vt=this.measureSize("M");ft="alphabetic",Qe=(Vt.fontBoundingBoxAscent-Vt.fontBoundingBoxDescent)/2+ee/2}var Be=0,gt=0;for(le===v&&re.setAttr("direction",le),re.setAttr("font",this._getContextFont()),re.setAttr("textBaseline",ft),re.setAttr("textAlign",d),oe===a?ce=(this.getHeight()-de*ee-ge*2)/2:oe===u&&(ce=this.getHeight()-de*ee-ge*2),re.translate(ge,ce+ge),Lt=0;Lt<de;Lt++){var Be=0,gt=0,et=se[Lt],It=et.text,tt=et.width,Dt=et.lastInParagraph,Ot,Ht;if(re.save(),ve===O?Be+=we-tt-ge*2:ve===m&&(Be+=(we-tt-ge*2)/2),Oe){re.save(),re.beginPath();const wt=L.Konva._fixTextRendering?Math.round(U/4):Math.round(U/2),pt=Be,St=Qe+gt+wt;re.moveTo(pt,St),Ot=It.split(" ").length-1,Ht=ve===w&&!Dt?we-ge*2:tt,re.lineTo(pt+Math.round(Ht),St),re.lineWidth=U/15;const An=this._getLinearGradient();re.strokeStyle=An||Se,re.stroke(),re.restore()}if(je){re.save(),re.beginPath();const wt=L.Konva._fixTextRendering?-Math.round(U/4):0;re.moveTo(Be,Qe+gt+wt),Ot=It.split(" ").length-1,Ht=ve===w&&!Dt?we-ge*2:tt,re.lineTo(Be+Math.round(Ht),Qe+gt+wt),re.lineWidth=U/15;const pt=this._getLinearGradient();re.strokeStyle=pt||Se,re.stroke(),re.restore()}if(le!==v&&(Me!==0||ve===w)){Ot=It.split(" ").length-1;const wt=o(It);for(let pt=0;pt<wt.length;pt++){const St=wt[pt];St===" "&&!Dt&&ve===w&&(Be+=(we-ge*2-tt)/Ot),this._partialTextX=Be,this._partialTextY=Qe+gt,this._partialText=St,re.fillStrokeShape(this),Be+=this.measureSize(St).width+Me}}else Me!==0&&re.setAttr("letterSpacing",`${Me}px`),this._partialTextX=Be,this._partialTextY=Qe+gt,this._partialText=It,re.fillStrokeShape(this);re.restore(),de>1&&(Qe+=ee)}}_hitFunc(re){const se=this.getWidth(),de=this.getHeight();re.beginPath(),re.rect(0,0,se,de),re.closePath(),re.fillStrokeShape(this)}setText(re){const se=s.Util._isString(re)?re:re==null?"":re+"";return this._setAttr(C,se),this}getWidth(){return this.attrs.width===c||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===c||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(re){var se,de,ge,U,ee,oe,le,ce,ve,we,Me;let Se=B(),Ne=this.fontSize(),Oe;Se.save(),Se.font=this._getContextFont(),Oe=Se.measureText(re),Se.restore();const je=Ne/100;return{actualBoundingBoxAscent:(se=Oe.actualBoundingBoxAscent)!==null&&se!==void 0?se:71.58203125*je,actualBoundingBoxDescent:(de=Oe.actualBoundingBoxDescent)!==null&&de!==void 0?de:0,actualBoundingBoxLeft:(ge=Oe.actualBoundingBoxLeft)!==null&&ge!==void 0?ge:-7.421875*je,actualBoundingBoxRight:(U=Oe.actualBoundingBoxRight)!==null&&U!==void 0?U:75.732421875*je,alphabeticBaseline:(ee=Oe.alphabeticBaseline)!==null&&ee!==void 0?ee:0,emHeightAscent:(oe=Oe.emHeightAscent)!==null&&oe!==void 0?oe:100*je,emHeightDescent:(le=Oe.emHeightDescent)!==null&&le!==void 0?le:-20*je,fontBoundingBoxAscent:(ce=Oe.fontBoundingBoxAscent)!==null&&ce!==void 0?ce:91*je,fontBoundingBoxDescent:(ve=Oe.fontBoundingBoxDescent)!==null&&ve!==void 0?ve:21*je,hangingBaseline:(we=Oe.hangingBaseline)!==null&&we!==void 0?we:72.80000305175781*je,ideographicBaseline:(Me=Oe.ideographicBaseline)!==null&&Me!==void 0?Me:-21*je,width:Oe.width,height:Ne}}_getContextFont(){return this.fontStyle()+F+this.fontVariant()+F+(this.fontSize()+T)+k(this.fontFamily())}_addTextLine(re){this.align()===w&&(re=re.trim());const de=this._getTextWidth(re);return this.textArr.push({text:re,width:de,lastInParagraph:!1})}_getTextWidth(re){const se=this.letterSpacing(),de=re.length;return B().measureText(re).width+se*de}_setTextData(){let re=this.text().split(`
`),se=+this.fontSize(),de=0,ge=this.lineHeight()*se,U=this.attrs.width,ee=this.attrs.height,oe=U!==c&&U!==void 0,le=ee!==c&&ee!==void 0,ce=this.padding(),ve=U-ce*2,we=ee-ce*2,Me=0,Se=this.wrap(),Ne=Se!==z,Oe=Se!==E&&Ne,je=this.ellipsis();this.textArr=[],B().font=this._getContextFont();const Lt=je?this._getTextWidth(V):0;for(let Qe=0,ft=re.length;Qe<ft;++Qe){let Be=re[Qe],gt=this._getTextWidth(Be);if(oe&&gt>ve)for(;Be.length>0;){let et=0,It=o(Be).length,tt="",Dt=0;for(;et<It;){const Ot=et+It>>>1,Ht=o(Be),Vt=Ht.slice(0,Ot+1).join(""),zt=this._getTextWidth(Vt);(je&&le&&Me+ge>we?zt+Lt:zt)<=ve?(et=Ot+1,tt=Vt,Dt=zt):It=Ot}if(tt){if(Oe){const Vt=o(Be),zt=o(tt),wt=Vt[zt.length],pt=wt===F||wt===p;let St;if(pt&&Dt<=ve)St=zt.length;else{const An=zt.lastIndexOf(F),ir=zt.lastIndexOf(p);St=Math.max(An,ir)+1}St>0&&(et=St,tt=Vt.slice(0,et).join(""),Dt=this._getTextWidth(tt))}if(tt=tt.trimRight(),this._addTextLine(tt),de=Math.max(de,Dt),Me+=ge,this._shouldHandleEllipsis(Me)){this._tryToAddEllipsisToLastLine();break}if(Be=o(Be).slice(et).join("").trimLeft(),Be.length>0&&(gt=this._getTextWidth(Be),gt<=ve)){this._addTextLine(Be),Me+=ge,de=Math.max(de,gt);break}}else break}else this._addTextLine(Be),Me+=ge,de=Math.max(de,gt),this._shouldHandleEllipsis(Me)&&Qe<ft-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),le&&Me+ge>we)break}this.textHeight=se,this.textWidth=de}_shouldHandleEllipsis(re){const se=+this.fontSize(),de=this.lineHeight()*se,ge=this.attrs.height,U=ge!==c&&ge!==void 0,ee=this.padding(),oe=ge-ee*2;return!(this.wrap()!==z)||U&&re+de>oe}_tryToAddEllipsisToLastLine(){const re=this.attrs.width,se=re!==c&&re!==void 0,de=this.padding(),ge=re-de*2,U=this.ellipsis(),ee=this.textArr[this.textArr.length-1];!ee||!U||(se&&(this._getTextWidth(ee.text+V)<ge||(ee.text=ee.text.slice(0,ee.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ee.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const re=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,se=this.hasShadow();return re&&se?!0:super._useBufferCanvas()}}return rr.Text=ne,ne.prototype._fillFunc=j,ne.prototype._strokeFunc=Q,ne.prototype.className=b,ne.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,_._registerNode)(ne),f.Factory.overWriteSetter(ne,"width",(0,M.getNumberOrAutoValidator)()),f.Factory.overWriteSetter(ne,"height",(0,M.getNumberOrAutoValidator)()),f.Factory.addGetterSetter(ne,"direction",y),f.Factory.addGetterSetter(ne,"fontFamily","Arial"),f.Factory.addGetterSetter(ne,"fontSize",12,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(ne,"fontStyle",g),f.Factory.addGetterSetter(ne,"fontVariant",g),f.Factory.addGetterSetter(ne,"padding",0,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(ne,"align",d),f.Factory.addGetterSetter(ne,"verticalAlign",I),f.Factory.addGetterSetter(ne,"lineHeight",1,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(ne,"wrap",N),f.Factory.addGetterSetter(ne,"ellipsis",!1,(0,M.getBooleanValidator)()),f.Factory.addGetterSetter(ne,"letterSpacing",0,(0,M.getNumberValidator)()),f.Factory.addGetterSetter(ne,"text","",(0,M.getStringValidator)()),f.Factory.addGetterSetter(ne,"textDecoration",""),rr}var Ur={},wl;function Cc(){if(wl)return Ur;wl=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.TextPath=void 0;const s=Xe(),f=Re(),A=it(),L=ca(),M=xl(),_=Fe(),o=Te(),c="",m="normal";function y(S){S.fillText(this.partialText,0,0)}function w(S){S.strokeText(this.partialText,0,0)}class P extends A.Shape{constructor(p){super(p),this.dummyCanvas=s.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return L.Path.getPathLength(this.dataArray)}_getPointAtLength(p){if(!this.attrs.data)return null;const d=this.pathLength;return p-1>d?null:L.Path.getPointAtLengthOfDataArray(p,this.dataArray)}_readDataAttribute(){this.dataArray=L.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(p){p.setAttr("font",this._getContextFont()),p.setAttr("textBaseline",this.textBaseline()),p.setAttr("textAlign","left"),p.save();const d=this.textDecoration(),C=this.fill(),b=this.fontSize(),I=this.glyphInfo;d==="underline"&&p.beginPath();for(let u=0;u<I.length;u++){p.save();const a=I[u].p0;p.translate(a.x,a.y),p.rotate(I[u].rotation),this.partialText=I[u].text,p.fillStrokeShape(this),d==="underline"&&(u===0&&p.moveTo(0,b/2+1),p.lineTo(b,b/2+1)),p.restore()}d==="underline"&&(p.strokeStyle=C,p.lineWidth=b/20,p.stroke()),p.restore()}_hitFunc(p){p.beginPath();const d=this.glyphInfo;if(d.length>=1){const C=d[0].p0;p.moveTo(C.x,C.y)}for(let C=0;C<d.length;C++){const b=d[C].p1;p.lineTo(b.x,b.y)}p.setAttr("lineWidth",this.fontSize()),p.setAttr("strokeStyle",this.colorKey),p.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(p){return M.Text.prototype.setText.call(this,p)}_getContextFont(){return M.Text.prototype._getContextFont.call(this)}_getTextSize(p){const C=this.dummyCanvas.getContext("2d");C.save(),C.font=this._getContextFont();const b=C.measureText(p);return C.restore(),{width:b.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:p,height:d}=this._getTextSize(this.attrs.text);if(this.textWidth=p,this.textHeight=d,this.glyphInfo=[],!this.attrs.data)return null;const C=this.letterSpacing(),b=this.align(),I=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*C,0);let a=0;b==="center"&&(a=Math.max(0,this.pathLength/2-u/2)),b==="right"&&(a=Math.max(0,this.pathLength-u));const g=(0,M.stringToArray)(this.text());let T=a;for(let F=0;F<g.length;F++){const O=this._getPointAtLength(T);if(!O)return;let v=this._getTextSize(g[F]).width+C;if(g[F]===" "&&b==="justify"){const R=this.text().split(" ").length-1;v+=(this.pathLength-u)/R}const N=this._getPointAtLength(T+v);if(!N)return;const E=L.Path.getLineLength(O.x,O.y,N.x,N.y);let z=0;if(I)try{z=I(g[F-1],g[F])*this.fontSize()}catch{z=0}O.x+=z,N.x+=z,this.textWidth+=z;const V=L.Path.getPointOnLine(z+E/2,O.x,O.y,N.x,N.y),l=Math.atan2(N.y-O.y,N.x-O.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:g[F],rotation:l,p0:O,p1:N}),T+=v}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const p=[];this.glyphInfo.forEach(function(T){p.push(T.p0.x),p.push(T.p0.y),p.push(T.p1.x),p.push(T.p1.y)});let d=p[0]||0,C=p[0]||0,b=p[1]||0,I=p[1]||0,u,a;for(let T=0;T<p.length/2;T++)u=p[T*2],a=p[T*2+1],d=Math.min(d,u),C=Math.max(C,u),b=Math.min(b,a),I=Math.max(I,a);const g=this.fontSize();return{x:d-g/2,y:b-g/2,width:C-d+g,height:I-b+g}}destroy(){return s.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Ur.TextPath=P,P.prototype._fillFunc=y,P.prototype._strokeFunc=w,P.prototype._fillFuncHit=y,P.prototype._strokeFuncHit=w,P.prototype.className="TextPath",P.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(P),f.Factory.addGetterSetter(P,"data"),f.Factory.addGetterSetter(P,"fontFamily","Arial"),f.Factory.addGetterSetter(P,"fontSize",12,(0,_.getNumberValidator)()),f.Factory.addGetterSetter(P,"fontStyle",m),f.Factory.addGetterSetter(P,"align","left"),f.Factory.addGetterSetter(P,"letterSpacing",0,(0,_.getNumberValidator)()),f.Factory.addGetterSetter(P,"textBaseline","middle"),f.Factory.addGetterSetter(P,"fontVariant",m),f.Factory.addGetterSetter(P,"text",c),f.Factory.addGetterSetter(P,"textDecoration",""),f.Factory.addGetterSetter(P,"kerningFunc",void 0),Ur}var jr={},Sl;function bc(){if(Sl)return jr;Sl=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Transformer=void 0;const s=Xe(),f=Re(),A=Ke(),L=it(),M=gl(),_=aa(),o=Te(),c=Fe(),m=Te(),y="tr-konva",w=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(v=>v+`.${y}`).join(" "),P="nodesRect",S=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],p={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},d="ontouchstart"in o.Konva._global;function C(v,N,E){if(v==="rotater")return E;N+=s.Util.degToRad(p[v]||0);const z=(s.Util.radToDeg(N)%360+360)%360;return s.Util._inRange(z,315+22.5,360)||s.Util._inRange(z,0,22.5)?"ns-resize":s.Util._inRange(z,45-22.5,45+22.5)?"nesw-resize":s.Util._inRange(z,90-22.5,90+22.5)?"ew-resize":s.Util._inRange(z,135-22.5,135+22.5)?"nwse-resize":s.Util._inRange(z,180-22.5,180+22.5)?"ns-resize":s.Util._inRange(z,225-22.5,225+22.5)?"nesw-resize":s.Util._inRange(z,270-22.5,270+22.5)?"ew-resize":s.Util._inRange(z,315-22.5,315+22.5)?"nwse-resize":(s.Util.error("Transformer has unknown angle for cursor detection: "+z),"pointer")}const b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function I(v){return{x:v.x+v.width/2*Math.cos(v.rotation)+v.height/2*Math.sin(-v.rotation),y:v.y+v.height/2*Math.cos(v.rotation)+v.width/2*Math.sin(v.rotation)}}function u(v,N,E){const z=E.x+(v.x-E.x)*Math.cos(N)-(v.y-E.y)*Math.sin(N),V=E.y+(v.x-E.x)*Math.sin(N)+(v.y-E.y)*Math.cos(N);return{...v,rotation:v.rotation+N,x:z,y:V}}function a(v,N){const E=I(v);return u(v,N,E)}function g(v,N,E){let z=N;for(let V=0;V<v.length;V++){const l=o.Konva.getAngle(v[V]),R=Math.abs(l-N)%(Math.PI*2);Math.min(R,Math.PI*2-R)<E&&(z=l)}return z}let T=0;class F extends _.Group{constructor(N){super(N),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(w,this.update),this.getNode()&&this.update()}attachTo(N){return this.setNode(N),this}setNode(N){return s.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([N])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return y+this._id}setNodes(N=[]){this._nodes&&this._nodes.length&&this.detach();const E=N.filter(V=>V.isAncestorOf(this)?(s.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=N=E,N.length===1&&this.useSingleNodeRotation()?this.rotation(N[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(V._attrsAffectingSize.length){const R=V._attrsAffectingSize.map(k=>k+"Change."+this._getEventNamespace()).join(" ");V.on(R,l)}V.on(S.map(R=>R+`.${this._getEventNamespace()}`).join(" "),l),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(N){let E;N.on(`dragstart.${this._getEventNamespace()}`,z=>{E=N.getAbsolutePosition(),!this.isDragging()&&N!==this.findOne(".back")&&this.startDrag(z,!1)}),N.on(`dragmove.${this._getEventNamespace()}`,z=>{if(!E)return;const V=N.getAbsolutePosition(),l=V.x-E.x,R=V.y-E.y;this.nodes().forEach(k=>{if(k===N||k.isDragging())return;const G=k.getAbsolutePosition();k.setAbsolutePosition({x:G.x+l,y:G.y+R}),k.startDrag(z)}),E=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(N=>{N.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(P),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(P,this.__getNodeRect)}__getNodeShape(N,E=this.rotation(),z){const V=N.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=N.getAbsoluteScale(z),R=N.getAbsolutePosition(z),k=V.x*l.x-N.offsetX()*l.x,G=V.y*l.y-N.offsetY()*l.y,B=(o.Konva.getAngle(N.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),j={x:R.x+k*Math.cos(B)+G*Math.sin(-B),y:R.y+G*Math.cos(B)+k*Math.sin(B),width:V.width*l.x,height:V.height*l.y,rotation:B};return u(j,-o.Konva.getAngle(E),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const E=[];this.nodes().map(B=>{const j=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Q=[{x:j.x,y:j.y},{x:j.x+j.width,y:j.y},{x:j.x+j.width,y:j.y+j.height},{x:j.x,y:j.y+j.height}],H=B.getAbsoluteTransform();Q.forEach(function(ne){const ae=H.point(ne);E.push(ae)})});const z=new s.Transform;z.rotate(-o.Konva.getAngle(this.rotation()));let V=1/0,l=1/0,R=-1/0,k=-1/0;E.forEach(function(B){const j=z.point(B);V===void 0&&(V=R=j.x,l=k=j.y),V=Math.min(V,j.x),l=Math.min(l,j.y),R=Math.max(R,j.x),k=Math.max(k,j.y)}),z.invert();const G=z.point({x:V,y:l});return{x:G.x,y:G.y,width:R-V,height:k-l,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),b.forEach(N=>{this._createAnchor(N)}),this._createAnchor("rotater")}_createAnchor(N){const E=new M.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:N+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:d?10:"auto"}),z=this;E.on("mousedown touchstart",function(V){z._handleMouseDown(V)}),E.on("dragstart",V=>{E.stopDrag(),V.cancelBubble=!0}),E.on("dragend",V=>{V.cancelBubble=!0}),E.on("mouseenter",()=>{const V=o.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),R=C(N,V,l);E.getStage().content&&(E.getStage().content.style.cursor=R),this._cursorChange=!0}),E.on("mouseout",()=>{E.getStage().content&&(E.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(E)}_createBack(){const N=new L.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(E,z){const V=z.getParent(),l=V.padding();E.beginPath(),E.rect(-l,-l,z.width()+l*2,z.height()+l*2),E.moveTo(z.width()/2,-l),V.rotateEnabled()&&V.rotateLineVisible()&&E.lineTo(z.width()/2,-V.rotateAnchorOffset()*s.Util._sign(z.height())-l),E.fillStrokeShape(z)},hitFunc:(E,z)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();E.beginPath(),E.rect(-V,-V,z.width()+V*2,z.height()+V*2),E.fillStrokeShape(z)}});this.add(N),this._proxyDrag(N),N.on("dragstart",E=>{E.cancelBubble=!0}),N.on("dragmove",E=>{E.cancelBubble=!0}),N.on("dragend",E=>{E.cancelBubble=!0}),this.on("dragmove",E=>{this.update()})}_handleMouseDown(N){if(this._transforming)return;this._movingAnchorName=N.target.name().split(" ")[0];const E=this._getNodeRect(),z=E.width,V=E.height,l=Math.sqrt(Math.pow(z,2)+Math.pow(V,2));this.sin=Math.abs(V/l),this.cos=Math.abs(z/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const R=N.target.getAbsolutePosition(),k=N.target.getStage().getPointerPosition();this._anchorDragOffset={x:k.x-R.x,y:k.y-R.y},T++,this._fire("transformstart",{evt:N.evt,target:this.getNode()}),this._nodes.forEach(G=>{G._fire("transformstart",{evt:N.evt,target:G})})}_handleMouseMove(N){let E,z,V;const l=this.findOne("."+this._movingAnchorName),R=l.getStage();R.setPointersPositions(N);const k=R.getPointerPosition();let G={x:k.x-this._anchorDragOffset.x,y:k.y-this._anchorDragOffset.y};const B=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(G=this.anchorDragBoundFunc()(B,G,N)),l.setAbsolutePosition(G);const j=l.getAbsolutePosition();if(B.x===j.x&&B.y===j.y)return;if(this._movingAnchorName==="rotater"){const oe=this._getNodeRect();E=l.x()-oe.width/2,z=-l.y()+oe.height/2;let le=Math.atan2(-z,E)+Math.PI/2;oe.height<0&&(le-=Math.PI);const ve=o.Konva.getAngle(this.rotation())+le,we=o.Konva.getAngle(this.rotationSnapTolerance()),Se=g(this.rotationSnaps(),ve,we)-oe.rotation,Ne=a(oe,Se);this._fitNodesInto(Ne,N);return}const Q=this.shiftBehavior();let H;Q==="inverted"?H=this.keepRatio()&&!N.shiftKey:Q==="none"?H=this.keepRatio():H=this.keepRatio()||N.shiftKey;var de=this.centeredScaling()||N.altKey;if(this._movingAnchorName==="top-left"){if(H){var ne=de?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(ne.x-l.x(),2)+Math.pow(ne.y-l.y(),2));var ae=this.findOne(".top-left").x()>ne.x?-1:1,re=this.findOne(".top-left").y()>ne.y?-1:1;E=V*this.cos*ae,z=V*this.sin*re,this.findOne(".top-left").x(ne.x-E),this.findOne(".top-left").y(ne.y-z)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(H){var ne=de?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(l.x()-ne.x,2)+Math.pow(ne.y-l.y(),2));var ae=this.findOne(".top-right").x()<ne.x?-1:1,re=this.findOne(".top-right").y()>ne.y?-1:1;E=V*this.cos*ae,z=V*this.sin*re,this.findOne(".top-right").x(ne.x+E),this.findOne(".top-right").y(ne.y-z)}var se=l.position();this.findOne(".top-left").y(se.y),this.findOne(".bottom-right").x(se.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(H){var ne=de?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(ne.x-l.x(),2)+Math.pow(l.y()-ne.y,2));var ae=ne.x<l.x()?-1:1,re=l.y()<ne.y?-1:1;E=V*this.cos*ae,z=V*this.sin*re,l.x(ne.x-E),l.y(ne.y+z)}se=l.position(),this.findOne(".top-left").x(se.x),this.findOne(".bottom-right").y(se.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(H){var ne=de?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(l.x()-ne.x,2)+Math.pow(l.y()-ne.y,2));var ae=this.findOne(".bottom-right").x()<ne.x?-1:1,re=this.findOne(".bottom-right").y()<ne.y?-1:1;E=V*this.cos*ae,z=V*this.sin*re,this.findOne(".bottom-right").x(ne.x+E),this.findOne(".bottom-right").y(ne.y+z)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var de=this.centeredScaling()||N.altKey;if(de){const oe=this.findOne(".top-left"),le=this.findOne(".bottom-right"),ce=oe.x(),ve=oe.y(),we=this.getWidth()-le.x(),Me=this.getHeight()-le.y();le.move({x:-ce,y:-ve}),oe.move({x:we,y:Me})}const ge=this.findOne(".top-left").getAbsolutePosition();E=ge.x,z=ge.y;const U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ee=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:E,y:z,width:U,height:ee,rotation:o.Konva.getAngle(this.rotation())},N)}_handleMouseUp(N){this._removeEvents(N)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(N){var E;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const z=this.getNode();T--,this._fire("transformend",{evt:N,target:z}),(E=this.getLayer())===null||E===void 0||E.batchDraw(),z&&this._nodes.forEach(V=>{var l;V._fire("transformend",{evt:N,target:V}),(l=V.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(N,E){const z=this._getNodeRect(),V=1;if(s.Util._inRange(N.width,-this.padding()*2-V,V)){this.update();return}if(s.Util._inRange(N.height,-this.padding()*2-V,V)){this.update();return}const l=new s.Transform;if(l.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&N.width<0&&this._movingAnchorName.indexOf("left")>=0){const H=l.point({x:-this.padding()*2,y:0});N.x+=H.x,N.y+=H.y,N.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y}else if(this._movingAnchorName&&N.width<0&&this._movingAnchorName.indexOf("right")>=0){const H=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,N.width+=this.padding()*2}if(this._movingAnchorName&&N.height<0&&this._movingAnchorName.indexOf("top")>=0){const H=l.point({x:0,y:-this.padding()*2});N.x+=H.x,N.y+=H.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,N.height+=this.padding()*2}else if(this._movingAnchorName&&N.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const H=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,N.height+=this.padding()*2}if(this.boundBoxFunc()){const H=this.boundBoxFunc()(z,N);H?N=H:s.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const R=1e7,k=new s.Transform;k.translate(z.x,z.y),k.rotate(z.rotation),k.scale(z.width/R,z.height/R);const G=new s.Transform,B=N.width/R,j=N.height/R;this.flipEnabled()===!1?(G.translate(N.x,N.y),G.rotate(N.rotation),G.translate(N.width<0?N.width:0,N.height<0?N.height:0),G.scale(Math.abs(B),Math.abs(j))):(G.translate(N.x,N.y),G.rotate(N.rotation),G.scale(B,j));const Q=G.multiply(k.invert());this._nodes.forEach(H=>{var ne;const ae=H.getParent().getAbsoluteTransform(),re=H.getTransform().copy();re.translate(H.offsetX(),H.offsetY());const se=new s.Transform;se.multiply(ae.copy().invert()).multiply(Q).multiply(ae).multiply(re);const de=se.decompose();H.setAttrs(de),(ne=H.getLayer())===null||ne===void 0||ne.batchDraw()}),this.rotation(s.Util._getRotation(N.rotation)),this._nodes.forEach(H=>{this._fire("transform",{evt:E,target:H}),H._fire("transform",{evt:E,target:H})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(N,E){this.findOne(N).setAttrs(E)}update(){var N;const E=this._getNodeRect();this.rotation(s.Util._getRotation(E.rotation));const z=E.width,V=E.height,l=this.enabledAnchors(),R=this.resizeEnabled(),k=this.padding(),G=this.anchorSize(),B=this.find("._anchor");B.forEach(Q=>{Q.setAttrs({width:G,height:G,offsetX:G/2,offsetY:G/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:G/2+k,offsetY:G/2+k,visible:R&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:z/2,y:0,offsetY:G/2+k,visible:R&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:z,y:0,offsetX:G/2-k,offsetY:G/2+k,visible:R&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:G/2+k,visible:R&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:z,y:V/2,offsetX:G/2-k,visible:R&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:G/2+k,offsetY:G/2-k,visible:R&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:z/2,y:V,offsetY:G/2-k,visible:R&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:z,y:V,offsetX:G/2-k,offsetY:G/2-k,visible:R&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:z/2,y:-this.rotateAnchorOffset()*s.Util._sign(V)-k,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:z,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const j=this.anchorStyleFunc();j&&B.forEach(Q=>{j(Q)}),(N=this.getLayer())===null||N===void 0||N.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const N=this.findOne("."+this._movingAnchorName);N&&N.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),_.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return A.Node.prototype.toObject.call(this)}clone(N){return A.Node.prototype.clone.call(this,N)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}jr.Transformer=F,F.isTransforming=()=>T>0;function O(v){return v instanceof Array||s.Util.warn("enabledAnchors value should be an array"),v instanceof Array&&v.forEach(function(N){b.indexOf(N)===-1&&s.Util.warn("Unknown anchor name: "+N+". Available names are: "+b.join(", "))}),v||[]}return F.prototype.className="Transformer",(0,m._registerNode)(F),f.Factory.addGetterSetter(F,"enabledAnchors",b,O),f.Factory.addGetterSetter(F,"flipEnabled",!0,(0,c.getBooleanValidator)()),f.Factory.addGetterSetter(F,"resizeEnabled",!0),f.Factory.addGetterSetter(F,"anchorSize",10,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"rotateEnabled",!0),f.Factory.addGetterSetter(F,"rotateLineVisible",!0),f.Factory.addGetterSetter(F,"rotationSnaps",[]),f.Factory.addGetterSetter(F,"rotateAnchorOffset",50,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"rotateAnchorCursor","crosshair"),f.Factory.addGetterSetter(F,"rotationSnapTolerance",5,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"borderEnabled",!0),f.Factory.addGetterSetter(F,"anchorStroke","rgb(0, 161, 255)"),f.Factory.addGetterSetter(F,"anchorStrokeWidth",1,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"anchorFill","white"),f.Factory.addGetterSetter(F,"anchorCornerRadius",0,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"borderStroke","rgb(0, 161, 255)"),f.Factory.addGetterSetter(F,"borderStrokeWidth",1,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"borderDash"),f.Factory.addGetterSetter(F,"keepRatio",!0),f.Factory.addGetterSetter(F,"shiftBehavior","default"),f.Factory.addGetterSetter(F,"centeredScaling",!1),f.Factory.addGetterSetter(F,"ignoreStroke",!1),f.Factory.addGetterSetter(F,"padding",0,(0,c.getNumberValidator)()),f.Factory.addGetterSetter(F,"nodes"),f.Factory.addGetterSetter(F,"node"),f.Factory.addGetterSetter(F,"boundBoxFunc"),f.Factory.addGetterSetter(F,"anchorDragBoundFunc"),f.Factory.addGetterSetter(F,"anchorStyleFunc"),f.Factory.addGetterSetter(F,"shouldOverdrawWholeArea",!1),f.Factory.addGetterSetter(F,"useSingleNodeRotation",!0),f.Factory.backCompat(F,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),jr}var Hr={},Cl;function kc(){if(Cl)return Hr;Cl=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.Wedge=void 0;const s=Re(),f=it(),A=Te(),L=Fe(),M=Te();let _=class extends f.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.radius(),0,A.Konva.getAngle(this.angle()),this.clockwise()),c.lineTo(0,0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius(c/2)}setHeight(c){this.radius(c/2)}};return Hr.Wedge=_,_.prototype.className="Wedge",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["radius"],(0,M._registerNode)(_),s.Factory.addGetterSetter(_,"radius",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"angle",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"clockwise",!1),s.Factory.backCompat(_,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Hr}var Vr={},bl;function Pc(){if(bl)return Vr;bl=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Blur=void 0;const s=Re(),f=Ke(),A=Fe();function L(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const M=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(m,y){const w=m.data,P=m.width,S=m.height;let p,d,C,b,I,u,a,g,T,F,O,v,N,E,z,V,l,R,k,G,B,j,Q,H;const ne=y+y+1,ae=P-1,re=S-1,se=y+1,de=se*(se+1)/2,ge=new L,U=M[y],ee=_[y];let oe=null,le=ge,ce=null,ve=null;for(C=1;C<ne;C++)le=le.next=new L,C===se&&(oe=le);for(le.next=ge,a=u=0,d=0;d<S;d++){for(V=l=R=k=g=T=F=O=0,v=se*(G=w[u]),N=se*(B=w[u+1]),E=se*(j=w[u+2]),z=se*(Q=w[u+3]),g+=de*G,T+=de*B,F+=de*j,O+=de*Q,le=ge,C=0;C<se;C++)le.r=G,le.g=B,le.b=j,le.a=Q,le=le.next;for(C=1;C<se;C++)b=u+((ae<C?ae:C)<<2),g+=(le.r=G=w[b])*(H=se-C),T+=(le.g=B=w[b+1])*H,F+=(le.b=j=w[b+2])*H,O+=(le.a=Q=w[b+3])*H,V+=G,l+=B,R+=j,k+=Q,le=le.next;for(ce=ge,ve=oe,p=0;p<P;p++)w[u+3]=Q=O*U>>ee,Q!==0?(Q=255/Q,w[u]=(g*U>>ee)*Q,w[u+1]=(T*U>>ee)*Q,w[u+2]=(F*U>>ee)*Q):w[u]=w[u+1]=w[u+2]=0,g-=v,T-=N,F-=E,O-=z,v-=ce.r,N-=ce.g,E-=ce.b,z-=ce.a,b=a+((b=p+y+1)<ae?b:ae)<<2,V+=ce.r=w[b],l+=ce.g=w[b+1],R+=ce.b=w[b+2],k+=ce.a=w[b+3],g+=V,T+=l,F+=R,O+=k,ce=ce.next,v+=G=ve.r,N+=B=ve.g,E+=j=ve.b,z+=Q=ve.a,V-=G,l-=B,R-=j,k-=Q,ve=ve.next,u+=4;a+=P}for(p=0;p<P;p++){for(l=R=k=V=T=F=O=g=0,u=p<<2,v=se*(G=w[u]),N=se*(B=w[u+1]),E=se*(j=w[u+2]),z=se*(Q=w[u+3]),g+=de*G,T+=de*B,F+=de*j,O+=de*Q,le=ge,C=0;C<se;C++)le.r=G,le.g=B,le.b=j,le.a=Q,le=le.next;for(I=P,C=1;C<=y;C++)u=I+p<<2,g+=(le.r=G=w[u])*(H=se-C),T+=(le.g=B=w[u+1])*H,F+=(le.b=j=w[u+2])*H,O+=(le.a=Q=w[u+3])*H,V+=G,l+=B,R+=j,k+=Q,le=le.next,C<re&&(I+=P);for(u=p,ce=ge,ve=oe,d=0;d<S;d++)b=u<<2,w[b+3]=Q=O*U>>ee,Q>0?(Q=255/Q,w[b]=(g*U>>ee)*Q,w[b+1]=(T*U>>ee)*Q,w[b+2]=(F*U>>ee)*Q):w[b]=w[b+1]=w[b+2]=0,g-=v,T-=N,F-=E,O-=z,v-=ce.r,N-=ce.g,E-=ce.b,z-=ce.a,b=p+((b=d+se)<re?b:re)*P<<2,g+=V+=ce.r=w[b],T+=l+=ce.g=w[b+1],F+=R+=ce.b=w[b+2],O+=k+=ce.a=w[b+3],ce=ce.next,v+=G=ve.r,N+=B=ve.g,E+=j=ve.b,z+=Q=ve.a,V-=G,l-=B,R-=j,k-=Q,ve=ve.next,u+=P}}const c=function(y){const w=Math.round(this.blurRadius());w>0&&o(y,w)};return Vr.Blur=c,s.Factory.addGetterSetter(f.Node,"blurRadius",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),Vr}var Wr={},kl;function Tc(){if(kl)return Wr;kl=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Brighten=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=this.brightness()*255,o=M.data,c=o.length;for(let m=0;m<c;m+=4)o[m]+=_,o[m+1]+=_,o[m+2]+=_};return Wr.Brighten=L,s.Factory.addGetterSetter(f.Node,"brightness",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),Wr}var qr={},Pl;function Ec(){if(Pl)return qr;Pl=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Contrast=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=Math.pow((this.contrast()+100)/100,2),o=M.data,c=o.length;let m=150,y=150,w=150;for(let P=0;P<c;P+=4)m=o[P],y=o[P+1],w=o[P+2],m/=255,m-=.5,m*=_,m+=.5,m*=255,y/=255,y-=.5,y*=_,y+=.5,y*=255,w/=255,w-=.5,w*=_,w+=.5,w*=255,m=m<0?0:m>255?255:m,y=y<0?0:y>255?255:y,w=w<0?0:w>255?255:w,o[P]=m,o[P+1]=y,o[P+2]=w};return qr.Contrast=L,s.Factory.addGetterSetter(f.Node,"contrast",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),qr}var Yr={},Tl;function Rc(){if(Tl)return Yr;Tl=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.Emboss=void 0;const s=Re(),f=Ke(),A=Xe(),L=Fe(),M=function(_){const o=this.embossStrength()*10,c=this.embossWhiteLevel()*255,m=this.embossDirection(),y=this.embossBlend(),w=_.data,P=_.width,S=_.height,p=P*4;let d=0,C=0,b=S;switch(m){case"top-left":d=-1,C=-1;break;case"top":d=-1,C=0;break;case"top-right":d=-1,C=1;break;case"right":d=0,C=1;break;case"bottom-right":d=1,C=1;break;case"bottom":d=1,C=0;break;case"bottom-left":d=1,C=-1;break;case"left":d=0,C=-1;break;default:A.Util.error("Unknown emboss direction: "+m)}do{const I=(b-1)*p;let u=d;b+u<1&&(u=0),b+u>S&&(u=0);const a=(b-1+u)*P*4;let g=P;do{const T=I+(g-1)*4;let F=C;g+F<1&&(F=0),g+F>P&&(F=0);const O=a+(g-1+F)*4,v=w[T]-w[O],N=w[T+1]-w[O+1],E=w[T+2]-w[O+2];let z=v;const V=z>0?z:-z,l=N>0?N:-N,R=E>0?E:-E;if(l>V&&(z=N),R>V&&(z=E),z*=o,y){const k=w[T]+z,G=w[T+1]+z,B=w[T+2]+z;w[T]=k>255?255:k<0?0:k,w[T+1]=G>255?255:G<0?0:G,w[T+2]=B>255?255:B<0?0:B}else{let k=c-z;k<0?k=0:k>255&&(k=255),w[T]=w[T+1]=w[T+2]=k}}while(--g)}while(--b)};return Yr.Emboss=M,s.Factory.addGetterSetter(f.Node,"embossStrength",.5,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"embossWhiteLevel",.5,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"embossDirection","top-left",void 0,s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"embossBlend",!1,void 0,s.Factory.afterSetFilter),Yr}var Xr={},El;function Fc(){if(El)return Xr;El=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Enhance=void 0;const s=Re(),f=Ke(),A=Fe();function L(_,o,c,m,y){const w=c-o,P=y-m;if(w===0)return m+P/2;if(P===0)return m;let S=(_-o)/w;return S=P*S+m,S}const M=function(_){const o=_.data,c=o.length;let m=o[0],y=m,w,P=o[1],S=P,p,d=o[2],C=d,b;const I=this.enhance();if(I===0)return;for(let z=0;z<c;z+=4)w=o[z+0],w<m?m=w:w>y&&(y=w),p=o[z+1],p<P?P=p:p>S&&(S=p),b=o[z+2],b<d?d=b:b>C&&(C=b);y===m&&(y=255,m=0),S===P&&(S=255,P=0),C===d&&(C=255,d=0);let u,a,g,T,F,O,v,N,E;I>0?(a=y+I*(255-y),g=m-I*(m-0),F=S+I*(255-S),O=P-I*(P-0),N=C+I*(255-C),E=d-I*(d-0)):(u=(y+m)*.5,a=y+I*(y-u),g=m+I*(m-u),T=(S+P)*.5,F=S+I*(S-T),O=P+I*(P-T),v=(C+d)*.5,N=C+I*(C-v),E=d+I*(d-v));for(let z=0;z<c;z+=4)o[z+0]=L(o[z+0],m,y,g,a),o[z+1]=L(o[z+1],P,S,O,F),o[z+2]=L(o[z+2],d,C,E,N)};return Xr.Enhance=M,s.Factory.addGetterSetter(f.Node,"enhance",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),Xr}var Kr={},Rl;function Nc(){if(Rl)return Kr;Rl=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Grayscale=void 0;const s=function(f){const A=f.data,L=A.length;for(let M=0;M<L;M+=4){const _=.34*A[M]+.5*A[M+1]+.16*A[M+2];A[M]=_,A[M+1]=_,A[M+2]=_}};return Kr.Grayscale=s,Kr}var Qr={},Fl;function Mc(){if(Fl)return Qr;Fl=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.HSL=void 0;const s=Re(),f=Ke(),A=Fe();s.Factory.addGetterSetter(f.Node,"hue",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"saturation",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"luminance",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter);const L=function(M){const _=M.data,o=_.length,c=1,m=Math.pow(2,this.saturation()),y=Math.abs(this.hue()+360)%360,w=this.luminance()*127,P=c*m*Math.cos(y*Math.PI/180),S=c*m*Math.sin(y*Math.PI/180),p=.299*c+.701*P+.167*S,d=.587*c-.587*P+.33*S,C=.114*c-.114*P-.497*S,b=.299*c-.299*P-.328*S,I=.587*c+.413*P+.035*S,u=.114*c-.114*P+.293*S,a=.299*c-.3*P+1.25*S,g=.587*c-.586*P-1.05*S,T=.114*c+.886*P-.2*S;let F,O,v,N;for(let E=0;E<o;E+=4)F=_[E+0],O=_[E+1],v=_[E+2],N=_[E+3],_[E+0]=p*F+d*O+C*v+w,_[E+1]=b*F+I*O+u*v+w,_[E+2]=a*F+g*O+T*v+w,_[E+3]=N};return Qr.HSL=L,Qr}var Jr={},Nl;function Ac(){if(Nl)return Jr;Nl=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.HSV=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=M.data,o=_.length,c=Math.pow(2,this.value()),m=Math.pow(2,this.saturation()),y=Math.abs(this.hue()+360)%360,w=c*m*Math.cos(y*Math.PI/180),P=c*m*Math.sin(y*Math.PI/180),S=.299*c+.701*w+.167*P,p=.587*c-.587*w+.33*P,d=.114*c-.114*w-.497*P,C=.299*c-.299*w-.328*P,b=.587*c+.413*w+.035*P,I=.114*c-.114*w+.293*P,u=.299*c-.3*w+1.25*P,a=.587*c-.586*w-1.05*P,g=.114*c+.886*w-.2*P;let T,F,O,v;for(let N=0;N<o;N+=4)T=_[N+0],F=_[N+1],O=_[N+2],v=_[N+3],_[N+0]=S*T+p*F+d*O,_[N+1]=C*T+b*F+I*O,_[N+2]=u*T+a*F+g*O,_[N+3]=v};return Jr.HSV=L,s.Factory.addGetterSetter(f.Node,"hue",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"saturation",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"value",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),Jr}var Zr={},Ml;function Lc(){if(Ml)return Zr;Ml=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Invert=void 0;const s=function(f){const A=f.data,L=A.length;for(let M=0;M<L;M+=4)A[M]=255-A[M],A[M+1]=255-A[M+1],A[M+2]=255-A[M+2]};return Zr.Invert=s,Zr}var $r={},Al;function Ic(){if(Al)return $r;Al=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Kaleidoscope=void 0;const s=Re(),f=Ke(),A=Xe(),L=Fe(),M=function(c,m,y){const w=c.data,P=m.data,S=c.width,p=c.height,d=y.polarCenterX||S/2,C=y.polarCenterY||p/2;let b=Math.sqrt(d*d+C*C),I=S-d,u=p-C;const a=Math.sqrt(I*I+u*u);b=a>b?a:b;const g=p,T=S,F=360/T*Math.PI/180;for(let O=0;O<T;O+=1){const v=Math.sin(O*F),N=Math.cos(O*F);for(let E=0;E<g;E+=1){I=Math.floor(d+b*E/g*N),u=Math.floor(C+b*E/g*v);let z=(u*S+I)*4;const V=w[z+0],l=w[z+1],R=w[z+2],k=w[z+3];z=(O+E*S)*4,P[z+0]=V,P[z+1]=l,P[z+2]=R,P[z+3]=k}}},_=function(c,m,y){const w=c.data,P=m.data,S=c.width,p=c.height,d=y.polarCenterX||S/2,C=y.polarCenterY||p/2;let b=Math.sqrt(d*d+C*C),I=S-d,u=p-C;const a=Math.sqrt(I*I+u*u);b=a>b?a:b;const g=p,T=S,F=0;let O,v;for(I=0;I<S;I+=1)for(u=0;u<p;u+=1){const N=I-d,E=u-C,z=Math.sqrt(N*N+E*E)*g/b;let V=(Math.atan2(E,N)*180/Math.PI+360+F)%360;V=V*T/360,O=Math.floor(V),v=Math.floor(z);let l=(v*S+O)*4;const R=w[l+0],k=w[l+1],G=w[l+2],B=w[l+3];l=(u*S+I)*4,P[l+0]=R,P[l+1]=k,P[l+2]=G,P[l+3]=B}},o=function(c){const m=c.width,y=c.height;let w,P,S,p,d,C,b,I,u,a,g=Math.round(this.kaleidoscopePower());const T=Math.round(this.kaleidoscopeAngle()),F=Math.floor(m*(T%360)/360);if(g<1)return;const O=A.Util.createCanvasElement();O.width=m,O.height=y;const v=O.getContext("2d").getImageData(0,0,m,y);A.Util.releaseCanvas(O),M(c,v,{polarCenterX:m/2,polarCenterY:y/2});let N=m/Math.pow(2,g);for(;N<=8;)N=N*2,g-=1;N=Math.ceil(N);let E=N,z=0,V=E,l=1;for(F+N>m&&(z=E,V=0,l=-1),P=0;P<y;P+=1)for(w=z;w!==V;w+=l)S=Math.round(w+F)%m,u=(m*P+S)*4,d=v.data[u+0],C=v.data[u+1],b=v.data[u+2],I=v.data[u+3],a=(m*P+w)*4,v.data[a+0]=d,v.data[a+1]=C,v.data[a+2]=b,v.data[a+3]=I;for(P=0;P<y;P+=1)for(E=Math.floor(N),p=0;p<g;p+=1){for(w=0;w<E+1;w+=1)u=(m*P+w)*4,d=v.data[u+0],C=v.data[u+1],b=v.data[u+2],I=v.data[u+3],a=(m*P+E*2-w-1)*4,v.data[a+0]=d,v.data[a+1]=C,v.data[a+2]=b,v.data[a+3]=I;E*=2}_(v,c,{})};return $r.Kaleidoscope=o,s.Factory.addGetterSetter(f.Node,"kaleidoscopePower",2,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"kaleidoscopeAngle",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),$r}var ei={},Ll;function Dc(){if(Ll)return ei;Ll=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Mask=void 0;const s=Re(),f=Ke(),A=Fe();function L(S,p,d){let C=(d*S.width+p)*4;const b=[];return b.push(S.data[C++],S.data[C++],S.data[C++],S.data[C++]),b}function M(S,p){return Math.sqrt(Math.pow(S[0]-p[0],2)+Math.pow(S[1]-p[1],2)+Math.pow(S[2]-p[2],2))}function _(S){const p=[0,0,0];for(let d=0;d<S.length;d++)p[0]+=S[d][0],p[1]+=S[d][1],p[2]+=S[d][2];return p[0]/=S.length,p[1]/=S.length,p[2]/=S.length,p}function o(S,p){const d=L(S,0,0),C=L(S,S.width-1,0),b=L(S,0,S.height-1),I=L(S,S.width-1,S.height-1),u=p||10;if(M(d,C)<u&&M(C,I)<u&&M(I,b)<u&&M(b,d)<u){const a=_([C,d,I,b]),g=[];for(let T=0;T<S.width*S.height;T++){const F=M(a,[S.data[T*4],S.data[T*4+1],S.data[T*4+2]]);g[T]=F<u?0:255}return g}}function c(S,p){for(let d=0;d<S.width*S.height;d++)S.data[4*d+3]=p[d]}function m(S,p,d){const C=[1,1,1,1,0,1,1,1,1],b=Math.round(Math.sqrt(C.length)),I=Math.floor(b/2),u=[];for(let a=0;a<d;a++)for(let g=0;g<p;g++){const T=a*p+g;let F=0;for(let O=0;O<b;O++)for(let v=0;v<b;v++){const N=a+O-I,E=g+v-I;if(N>=0&&N<d&&E>=0&&E<p){const z=N*p+E,V=C[O*b+v];F+=S[z]*V}}u[T]=F===255*8?255:0}return u}function y(S,p,d){const C=[1,1,1,1,1,1,1,1,1],b=Math.round(Math.sqrt(C.length)),I=Math.floor(b/2),u=[];for(let a=0;a<d;a++)for(let g=0;g<p;g++){const T=a*p+g;let F=0;for(let O=0;O<b;O++)for(let v=0;v<b;v++){const N=a+O-I,E=g+v-I;if(N>=0&&N<d&&E>=0&&E<p){const z=N*p+E,V=C[O*b+v];F+=S[z]*V}}u[T]=F>=255*4?255:0}return u}function w(S,p,d){const C=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],b=Math.round(Math.sqrt(C.length)),I=Math.floor(b/2),u=[];for(let a=0;a<d;a++)for(let g=0;g<p;g++){const T=a*p+g;let F=0;for(let O=0;O<b;O++)for(let v=0;v<b;v++){const N=a+O-I,E=g+v-I;if(N>=0&&N<d&&E>=0&&E<p){const z=N*p+E,V=C[O*b+v];F+=S[z]*V}}u[T]=F}return u}const P=function(S){const p=this.threshold();let d=o(S,p);return d&&(d=m(d,S.width,S.height),d=y(d,S.width,S.height),d=w(d,S.width,S.height),c(S,d)),S};return ei.Mask=P,s.Factory.addGetterSetter(f.Node,"threshold",0,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),ei}var ti={},Il;function Oc(){if(Il)return ti;Il=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Noise=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=this.noise()*255,o=M.data,c=o.length,m=_/2;for(let y=0;y<c;y+=4)o[y+0]+=m-2*m*Math.random(),o[y+1]+=m-2*m*Math.random(),o[y+2]+=m-2*m*Math.random()};return ti.Noise=L,s.Factory.addGetterSetter(f.Node,"noise",.2,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),ti}var ni={},Dl;function zc(){if(Dl)return ni;Dl=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Pixelate=void 0;const s=Re(),f=Xe(),A=Ke(),L=Fe(),M=function(_){let o=Math.ceil(this.pixelSize()),c=_.width,m=_.height,y,w,P,S,p,d,C,b=Math.ceil(c/o),I=Math.ceil(m/o),u,a,g,T,F,O,v,N=_.data;if(o<=0){f.Util.error("pixelSize value can not be <= 0");return}for(F=0;F<b;F+=1)for(O=0;O<I;O+=1){for(S=0,p=0,d=0,C=0,u=F*o,a=u+o,g=O*o,T=g+o,v=0,y=u;y<a;y+=1)if(!(y>=c))for(w=g;w<T;w+=1)w>=m||(P=(c*w+y)*4,S+=N[P+0],p+=N[P+1],d+=N[P+2],C+=N[P+3],v+=1);for(S=S/v,p=p/v,d=d/v,C=C/v,y=u;y<a;y+=1)if(!(y>=c))for(w=g;w<T;w+=1)w>=m||(P=(c*w+y)*4,N[P+0]=S,N[P+1]=p,N[P+2]=d,N[P+3]=C)}};return ni.Pixelate=M,s.Factory.addGetterSetter(A.Node,"pixelSize",8,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),ni}var ri={},Ol;function Gc(){if(Ol)return ri;Ol=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Posterize=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=Math.round(this.levels()*254)+1,o=M.data,c=o.length,m=255/_;for(let y=0;y<c;y+=1)o[y]=Math.floor(o[y]/m)*m};return ri.Posterize=L,s.Factory.addGetterSetter(f.Node,"levels",.5,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),ri}var ii={},zl;function Bc(){if(zl)return ii;zl=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.RGB=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=M.data,o=_.length,c=this.red(),m=this.green(),y=this.blue();for(let w=0;w<o;w+=4){const P=(.34*_[w]+.5*_[w+1]+.16*_[w+2])/255;_[w]=P*c,_[w+1]=P*m,_[w+2]=P*y,_[w+3]=_[w+3]}};return ii.RGB=L,s.Factory.addGetterSetter(f.Node,"red",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(f.Node,"green",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(f.Node,"blue",0,A.RGBComponent,s.Factory.afterSetFilter),ii}var si={},Gl;function Uc(){if(Gl)return si;Gl=1,Object.defineProperty(si,"__esModule",{value:!0}),si.RGBA=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=M.data,o=_.length,c=this.red(),m=this.green(),y=this.blue(),w=this.alpha();for(let P=0;P<o;P+=4){const S=1-w;_[P]=c*w+_[P]*S,_[P+1]=m*w+_[P+1]*S,_[P+2]=y*w+_[P+2]*S}};return si.RGBA=L,s.Factory.addGetterSetter(f.Node,"red",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(f.Node,"green",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(f.Node,"blue",0,A.RGBComponent,s.Factory.afterSetFilter),s.Factory.addGetterSetter(f.Node,"alpha",1,function(M){return this._filterUpToDate=!1,M>1?1:M<0?0:M}),si}var ai={},Bl;function jc(){if(Bl)return ai;Bl=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Sepia=void 0;const s=function(f){const A=f.data,L=A.length;for(let M=0;M<L;M+=4){const _=A[M+0],o=A[M+1],c=A[M+2];A[M+0]=Math.min(255,_*.393+o*.769+c*.189),A[M+1]=Math.min(255,_*.349+o*.686+c*.168),A[M+2]=Math.min(255,_*.272+o*.534+c*.131)}};return ai.Sepia=s,ai}var oi={},Ul;function Hc(){if(Ul)return oi;Ul=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Solarize=void 0;const s=function(f){const A=f.data,L=f.width,M=f.height,_=L*4;let o=M;do{const c=(o-1)*_;let m=L;do{const y=c+(m-1)*4;let w=A[y],P=A[y+1],S=A[y+2];w>127&&(w=255-w),P>127&&(P=255-P),S>127&&(S=255-S),A[y]=w,A[y+1]=P,A[y+2]=S}while(--m)}while(--o)};return oi.Solarize=s,oi}var li={},jl;function Vc(){if(jl)return li;jl=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Threshold=void 0;const s=Re(),f=Ke(),A=Fe(),L=function(M){const _=this.threshold()*255,o=M.data,c=o.length;for(let m=0;m<c;m+=1)o[m]=o[m]<_?0:255};return li.Threshold=L,s.Factory.addGetterSetter(f.Node,"threshold",.5,(0,A.getNumberValidator)(),s.Factory.afterSetFilter),li}var Hl;function Wc(){if(Hl)return Sr;Hl=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Konva=void 0;const s=ua(),f=hc(),A=gc(),L=pc(),M=mc(),_=yc(),o=vc(),c=sl(),m=ca(),y=gl(),w=_c(),P=xc(),S=wc(),p=Sc(),d=xl(),C=Cc(),b=bc(),I=kc(),u=Pc(),a=Tc(),g=Ec(),T=Rc(),F=Fc(),O=Nc(),v=Mc(),N=Ac(),E=Lc(),z=Ic(),V=Dc(),l=Oc(),R=zc(),k=Gc(),G=Bc(),B=Uc(),j=jc(),Q=Hc(),H=Vc();return Sr.Konva=s.Konva.Util._assign(s.Konva,{Arc:f.Arc,Arrow:A.Arrow,Circle:L.Circle,Ellipse:M.Ellipse,Image:_.Image,Label:o.Label,Tag:o.Tag,Line:c.Line,Path:m.Path,Rect:y.Rect,RegularPolygon:w.RegularPolygon,Ring:P.Ring,Sprite:S.Sprite,Star:p.Star,Text:d.Text,TextPath:C.TextPath,Transformer:b.Transformer,Wedge:I.Wedge,Filters:{Blur:u.Blur,Brighten:a.Brighten,Contrast:g.Contrast,Emboss:T.Emboss,Enhance:F.Enhance,Grayscale:O.Grayscale,HSL:v.HSL,HSV:N.HSV,Invert:E.Invert,Kaleidoscope:z.Kaleidoscope,Mask:V.Mask,Noise:l.Noise,Pixelate:R.Pixelate,Posterize:k.Posterize,RGB:G.RGB,RGBA:B.RGBA,Sepia:j.Sepia,Solarize:Q.Solarize,Threshold:H.Threshold}}),Sr}var qc=zi.exports,Vl;function Yc(){if(Vl)return zi.exports;Vl=1,Object.defineProperty(qc,"__esModule",{value:!0});const s=Wc();return zi.exports=s.Konva,zi.exports}Yc();var Ui={exports:{}},Wl;function Xc(){return Wl||(Wl=1,function(s,f){Object.defineProperty(f,"__esModule",{value:!0}),f.Konva=void 0;var A=ua();Object.defineProperty(f,"Konva",{enumerable:!0,get:function(){return A.Konva}});const L=ua();s.exports=L.Konva}(Ui,Ui.exports)),Ui.exports}var Kc=Xc();const ui=Di(Kc);var ha={exports:{}},fa={exports:{}},ga={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql;function Qc(){return ql||(ql=1,function(s){function f(j,Q){var H=j.length;j.push(Q);e:for(;0<H;){var ne=H-1>>>1,ae=j[ne];if(0<M(ae,Q))j[ne]=Q,j[H]=ae,H=ne;else break e}}function A(j){return j.length===0?null:j[0]}function L(j){if(j.length===0)return null;var Q=j[0],H=j.pop();if(H!==Q){j[0]=H;e:for(var ne=0,ae=j.length,re=ae>>>1;ne<re;){var se=2*(ne+1)-1,de=j[se],ge=se+1,U=j[ge];if(0>M(de,H))ge<ae&&0>M(U,de)?(j[ne]=U,j[ge]=H,ne=ge):(j[ne]=de,j[se]=H,ne=se);else if(ge<ae&&0>M(U,H))j[ne]=U,j[ge]=H,ne=ge;else break e}}return Q}function M(j,Q){var H=j.sortIndex-Q.sortIndex;return H!==0?H:j.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;s.unstable_now=function(){return _.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var m=[],y=[],w=1,P=null,S=3,p=!1,d=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function a(j){for(var Q=A(y);Q!==null;){if(Q.callback===null)L(y);else if(Q.startTime<=j)L(y),Q.sortIndex=Q.expirationTime,f(m,Q);else break;Q=A(y)}}function g(j){if(C=!1,a(j),!d)if(A(m)!==null)d=!0,G(T);else{var Q=A(y);Q!==null&&B(g,Q.startTime-j)}}function T(j,Q){d=!1,C&&(C=!1,I(v),v=-1),p=!0;var H=S;try{for(a(Q),P=A(m);P!==null&&(!(P.expirationTime>Q)||j&&!z());){var ne=P.callback;if(typeof ne=="function"){P.callback=null,S=P.priorityLevel;var ae=ne(P.expirationTime<=Q);Q=s.unstable_now(),typeof ae=="function"?P.callback=ae:P===A(m)&&L(m),a(Q)}else L(m);P=A(m)}if(P!==null)var re=!0;else{var se=A(y);se!==null&&B(g,se.startTime-Q),re=!1}return re}finally{P=null,S=H,p=!1}}var F=!1,O=null,v=-1,N=5,E=-1;function z(){return!(s.unstable_now()-E<N)}function V(){if(O!==null){var j=s.unstable_now();E=j;var Q=!0;try{Q=O(!0,j)}finally{Q?l():(F=!1,O=null)}}else F=!1}var l;if(typeof u=="function")l=function(){u(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,k=R.port2;R.port1.onmessage=V,l=function(){k.postMessage(null)}}else l=function(){b(V,0)};function G(j){O=j,F||(F=!0,l())}function B(j,Q){v=b(function(){j(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(j){j.callback=null},s.unstable_continueExecution=function(){d||p||(d=!0,G(T))},s.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_getFirstCallbackNode=function(){return A(m)},s.unstable_next=function(j){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var H=S;S=Q;try{return j()}finally{S=H}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var H=S;S=j;try{return Q()}finally{S=H}},s.unstable_scheduleCallback=function(j,Q,H){var ne=s.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ne+H:ne):H=ne,j){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=H+ae,j={id:w++,callback:Q,priorityLevel:j,startTime:H,expirationTime:ae,sortIndex:-1},H>ne?(j.sortIndex=H,f(y,j),A(m)===null&&j===A(y)&&(C?(I(v),v=-1):C=!0,B(g,H-ne))):(j.sortIndex=ae,f(m,j),d||p||(d=!0,G(T))),j},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(j){var Q=S;return function(){var H=S;S=Q;try{return j.apply(this,arguments)}finally{S=H}}}}(ga)),ga}var Yl;function Xl(){return Yl||(Yl=1,fa.exports=Qc()),fa.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa,Kl;function Jc(){return Kl||(Kl=1,pa=function(f){var A={},L=he,M=Xl(),_=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,m=Symbol.for("react.element"),y=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),d=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),a=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),T=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}function O(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case y:return"Portal";case S:return"Profiler";case P:return"StrictMode";case b:return"Suspense";case I:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case d:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case u:return t=e.displayName||null,t!==null?t:O(e.type)||"Memo";case a:t=e._payload,e=e._init;try{return O(e(t))}catch{}}return null}function v(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function N(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function E(e){if(N(e)!==e)throw Error(o(188))}function z(e){var t=e.alternate;if(!t){if(t=N(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var h=i.alternate;if(h===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===h.child){for(h=i.child;h;){if(h===n)return E(i),e;if(h===r)return E(i),t;h=h.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=h;else{for(var D=!1,Y=i.child;Y;){if(Y===n){D=!0,n=i,r=h;break}if(Y===r){D=!0,r=i,n=h;break}Y=Y.sibling}if(!D){for(Y=h.child;Y;){if(Y===n){D=!0,n=h,r=i;break}if(Y===r){D=!0,r=h,n=i;break}Y=Y.sibling}if(!D)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function V(e){return e=z(e),e!==null?l(e):null}function l(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=l(e);if(t!==null)return t;e=e.sibling}return null}function R(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=R(e);if(t!==null)return t}e=e.sibling}return null}var k=Array.isArray,G=f.getPublicInstance,B=f.getRootHostContext,j=f.getChildHostContext,Q=f.prepareForCommit,H=f.resetAfterCommit,ne=f.createInstance,ae=f.appendInitialChild,re=f.finalizeInitialChildren,se=f.prepareUpdate,de=f.shouldSetTextContent,ge=f.createTextInstance,U=f.scheduleTimeout,ee=f.cancelTimeout,oe=f.noTimeout,le=f.isPrimaryRenderer,ce=f.supportsMutation,ve=f.supportsPersistence,we=f.supportsHydration,Me=f.getInstanceFromNode,Se=f.preparePortalMount,Ne=f.getCurrentEventPriority,Oe=f.detachDeletedInstance,je=f.supportsMicrotasks,Lt=f.scheduleMicrotask,Qe=f.supportsTestSelectors,ft=f.findFiberRoot,Be=f.getBoundingRect,gt=f.getTextContent,et=f.isHiddenSubtree,It=f.matchAccessibilityRole,tt=f.setFocusIfFocusable,Dt=f.setupIntersectionObserver,Ot=f.appendChild,Ht=f.appendChildToContainer,Vt=f.commitTextUpdate,zt=f.commitMount,wt=f.commitUpdate,pt=f.insertBefore,St=f.insertInContainerBefore,An=f.removeChild,ir=f.removeChildFromContainer,hi=f.resetTextContent,Vi=f.hideInstance,Wi=f.hideTextInstance,qi=f.unhideInstance,Yi=f.unhideTextInstance,Xi=f.clearContainer,Ki=f.cloneInstance,fi=f.createContainerChildSet,gi=f.appendChildToContainerChildSet,Qi=f.finalizeContainerChildren,sr=f.replaceContainerChildren,pi=f.cloneHiddenInstance,mi=f.cloneHiddenTextInstance,Ji=f.canHydrateInstance,Zi=f.canHydrateTextInstance,$i=f.canHydrateSuspenseInstance,yi=f.isSuspenseInstancePending,ar=f.isSuspenseInstanceFallback,es=f.getSuspenseInstanceFallbackErrorDetails,ts=f.registerSuspenseInstanceRetry,Wn=f.getNextHydratableSibling,ns=f.getFirstHydratableChild,rs=f.getFirstHydratableChildWithinContainer,is=f.getFirstHydratableChildWithinSuspenseInstance,x=f.hydrateInstance,W=f.hydrateTextInstance,q=f.hydrateSuspenseInstance,Z=f.getNextHydratableInstanceAfterSuspenseInstance,X=f.commitHydratedContainer,fe=f.commitHydratedSuspenseInstance,ke=f.clearSuspenseBoundary,Ae=f.clearSuspenseBoundaryFromContainer,Wt=f.shouldDeleteUnhydratedTailInstances,st=f.didNotMatchHydratedContainerTextInstance,dt=f.didNotMatchHydratedTextInstance,tn;function Gt(e){if(tn===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tn=t&&t[1]||""}return`
`+tn+e}var nn=!1;function Ze(e,t){if(!e||nn)return"";nn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(ue){var r=ue}Reflect.construct(e,[],t)}else{try{t.call()}catch(ue){r=ue}e.call(t.prototype)}else{try{throw Error()}catch(ue){r=ue}e()}}catch(ue){if(ue&&r&&typeof ue.stack=="string"){for(var i=ue.stack.split(`
`),h=r.stack.split(`
`),D=i.length-1,Y=h.length-1;1<=D&&0<=Y&&i[D]!==h[Y];)Y--;for(;1<=D&&0<=Y;D--,Y--)if(i[D]!==h[Y]){if(D!==1||Y!==1)do if(D--,Y--,0>Y||i[D]!==h[Y]){var te=`
`+i[D].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=D&&0<=Y);break}}}finally{nn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gt(e):""}var Ct=Object.prototype.hasOwnProperty,Bt=[],qt=-1;function cn(e){return{current:e}}function ze(e){0>qt||(e.current=Bt[qt],Bt[qt]=null,qt--)}function Ue(e,t){qt++,Bt[qt]=e.current,e.current=t}var Ln={},mt=cn(Ln),Tt=cn(!1),qn=Ln;function or(e,t){var n=e.type.contextTypes;if(!n)return Ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},h;for(h in n)i[h]=t[h];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Et(e){return e=e.childContextTypes,e!=null}function ss(){ze(Tt),ze(mt)}function Cu(e,t,n){if(mt.current!==Ln)throw Error(o(168));Ue(mt,t),Ue(Tt,n)}function bu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(o(108,v(e)||"Unknown",i));return _({},n,r)}function as(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ln,qn=mt.current,Ue(mt,e),Ue(Tt,Tt.current),!0}function ku(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bu(e,t,qn),r.__reactInternalMemoizedMergedChildContext=e,ze(Tt),ze(mt),Ue(mt,e)):ze(Tt),Ue(Tt,n)}var rn=Math.clz32?Math.clz32:mf,gf=Math.log,pf=Math.LN2;function mf(e){return e>>>=0,e===0?32:31-(gf(e)/pf|0)|0}var os=64,ls=4194304;function vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function us(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,h=e.pingedLanes,D=n&268435455;if(D!==0){var Y=D&~i;Y!==0?r=vi(Y):(h&=D,h!==0&&(r=vi(h)))}else D=n&~i,D!==0?r=vi(D):h!==0&&(r=vi(h));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,h=t&-t,i>=h||i===16&&(h&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rn(t),i=1<<n,r|=e[n],t&=~i;return r}function yf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,h=e.pendingLanes;0<h;){var D=31-rn(h),Y=1<<D,te=i[D];te===-1?((Y&n)===0||(Y&r)!==0)&&(i[D]=yf(Y,t)):te<=t&&(e.expiredLanes|=Y),h&=~Y}}function Sa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pu(){var e=os;return os<<=1,(os&4194240)===0&&(os=64),e}function Ca(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _i(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rn(t),e[t]=n}function _f(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rn(n),h=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~h}}function ba(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Le=0;function Tu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ka=M.unstable_scheduleCallback,Eu=M.unstable_cancelCallback,xf=M.unstable_shouldYield,wf=M.unstable_requestPaint,at=M.unstable_now,Pa=M.unstable_ImmediatePriority,Sf=M.unstable_UserBlockingPriority,Ta=M.unstable_NormalPriority,Cf=M.unstable_IdlePriority,ds=null,hn=null;function bf(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ds,e,void 0,(e.current.flags&128)===128)}catch{}}function kf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:kf,Cn=null,cs=!1,Ea=!1;function Ru(e){Cn===null?Cn=[e]:Cn.push(e)}function Pf(e){cs=!0,Ru(e)}function fn(){if(!Ea&&Cn!==null){Ea=!0;var e=0,t=Le;try{var n=Cn;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,cs=!1}catch(i){throw Cn!==null&&(Cn=Cn.slice(e+1)),ka(Pa,fn),i}finally{Le=t,Ea=!1}}return null}var lr=[],ur=0,hs=null,fs=0,Yt=[],Xt=0,Yn=null,bn=1,kn="";function Xn(e,t){lr[ur++]=fs,lr[ur++]=hs,hs=e,fs=t}function Fu(e,t,n){Yt[Xt++]=bn,Yt[Xt++]=kn,Yt[Xt++]=Yn,Yn=e;var r=bn;e=kn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var h=32-rn(t)+i;if(30<h){var D=i-i%5;h=(r&(1<<D)-1).toString(32),r>>=D,i-=D,bn=1<<32-rn(t)+i|n<<i|r,kn=h+e}else bn=1<<h|n<<i|r,kn=e}function Ra(e){e.return!==null&&(Xn(e,1),Fu(e,1,0))}function Fa(e){for(;e===hs;)hs=lr[--ur],lr[ur]=null,fs=lr[--ur],lr[ur]=null;for(;e===Yn;)Yn=Yt[--Xt],Yt[Xt]=null,kn=Yt[--Xt],Yt[Xt]=null,bn=Yt[--Xt],Yt[Xt]=null}var Ut=null,Kt=null,Ve=!1,xi=!1,an=null;function Nu(e,t){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mu(e,t){switch(e.tag){case 5:return t=Ji(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Ut=e,Kt=ns(t),!0):!1;case 6:return t=Zi(t,e.pendingProps),t!==null?(e.stateNode=t,Ut=e,Kt=null,!0):!1;case 13:if(t=$i(t),t!==null){var n=Yn!==null?{id:bn,overflow:kn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ut=e,Kt=null,!0}return!1;default:return!1}}function Na(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ma(e){if(Ve){var t=Kt;if(t){var n=t;if(!Mu(e,t)){if(Na(e))throw Error(o(418));t=Wn(n);var r=Ut;t&&Mu(e,t)?Nu(r,n):(e.flags=e.flags&-4097|2,Ve=!1,Ut=e)}}else{if(Na(e))throw Error(o(418));e.flags=e.flags&-4097|2,Ve=!1,Ut=e}}}function Au(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ut=e}function gs(e){if(!we||e!==Ut)return!1;if(!Ve)return Au(e),Ve=!0,!1;if(e.tag!==3&&(e.tag!==5||Wt(e.type)&&!de(e.type,e.memoizedProps))){var t=Kt;if(t){if(Na(e))throw Lu(),Error(o(418));for(;t;)Nu(e,t),t=Wn(t)}}if(Au(e),e.tag===13){if(!we)throw Error(o(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Kt=Z(e)}else Kt=Ut?Wn(e.stateNode):null;return!0}function Lu(){for(var e=Kt;e;)e=Wn(e)}function dr(){we&&(Kt=Ut=null,xi=Ve=!1)}function Aa(e){an===null?an=[e]:an.push(e)}var Tf=c.ReactCurrentBatchConfig;function ps(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ct.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function Ef(e){switch(e.tag){case 5:return Gt(e.type);case 16:return Gt("Lazy");case 13:return Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 2:case 15:return e=Ze(e.type,!1),e;case 11:return e=Ze(e.type.render,!1),e;case 1:return e=Ze(e.type,!0),e;default:return""}}function wi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(D){var Y=i.refs;D===null?delete Y[h]:Y[h]=D},t._stringRef=h,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ms(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iu(e){var t=e._init;return t(e._payload)}function Du(e){function t($,K){if(e){var ie=$.deletions;ie===null?($.deletions=[K],$.flags|=16):ie.push(K)}}function n($,K){if(!e)return null;for(;K!==null;)t($,K),K=K.sibling;return null}function r($,K){for($=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function i($,K){return $=Un($,K),$.index=0,$.sibling=null,$}function h($,K,ie){return $.index=ie,e?(ie=$.alternate,ie!==null?(ie=ie.index,ie<K?($.flags|=2,K):ie):($.flags|=2,K)):($.flags|=1048576,K)}function D($){return e&&$.alternate===null&&($.flags|=2),$}function Y($,K,ie,me){return K===null||K.tag!==6?(K=Ro(ie,$.mode,me),K.return=$,K):(K=i(K,ie),K.return=$,K)}function te($,K,ie,me){var xe=ie.type;return xe===w?_e($,K,ie.props.children,me,ie.key):K!==null&&(K.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===a&&Iu(xe)===K.type)?(me=i(K,ie.props),me.ref=wi($,K,ie),me.return=$,me):(me=Ys(ie.type,ie.key,ie.props,null,$.mode,me),me.ref=wi($,K,ie),me.return=$,me)}function ue($,K,ie,me){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=Fo(ie,$.mode,me),K.return=$,K):(K=i(K,ie.children||[]),K.return=$,K)}function _e($,K,ie,me,xe){return K===null||K.tag!==7?(K=tr(ie,$.mode,me,xe),K.return=$,K):(K=i(K,ie),K.return=$,K)}function Ce($,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Ro(""+K,$.mode,ie),K.return=$,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case m:return ie=Ys(K.type,K.key,K.props,null,$.mode,ie),ie.ref=wi($,null,K),ie.return=$,ie;case y:return K=Fo(K,$.mode,ie),K.return=$,K;case a:var me=K._init;return Ce($,me(K._payload),ie)}if(k(K)||F(K))return K=tr(K,$.mode,ie,null),K.return=$,K;ms($,K)}return null}function pe($,K,ie,me){var xe=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return xe!==null?null:Y($,K,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case m:return ie.key===xe?te($,K,ie,me):null;case y:return ie.key===xe?ue($,K,ie,me):null;case a:return xe=ie._init,pe($,K,xe(ie._payload),me)}if(k(ie)||F(ie))return xe!==null?null:_e($,K,ie,me,null);ms($,ie)}return null}function He($,K,ie,me,xe){if(typeof me=="string"&&me!==""||typeof me=="number")return $=$.get(ie)||null,Y(K,$,""+me,xe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case m:return $=$.get(me.key===null?ie:me.key)||null,te(K,$,me,xe);case y:return $=$.get(me.key===null?ie:me.key)||null,ue(K,$,me,xe);case a:var Pe=me._init;return He($,K,ie,Pe(me._payload),xe)}if(k(me)||F(me))return $=$.get(ie)||null,_e(K,$,me,xe,null);ms(K,me)}return null}function Ge($,K,ie,me){for(var xe=null,Pe=null,be=K,Ie=K=0,ut=null;be!==null&&Ie<ie.length;Ie++){be.index>Ie?(ut=be,be=null):ut=be.sibling;var De=pe($,be,ie[Ie],me);if(De===null){be===null&&(be=ut);break}e&&be&&De.alternate===null&&t($,be),K=h(De,K,Ie),Pe===null?xe=De:Pe.sibling=De,Pe=De,be=ut}if(Ie===ie.length)return n($,be),Ve&&Xn($,Ie),xe;if(be===null){for(;Ie<ie.length;Ie++)be=Ce($,ie[Ie],me),be!==null&&(K=h(be,K,Ie),Pe===null?xe=be:Pe.sibling=be,Pe=be);return Ve&&Xn($,Ie),xe}for(be=r($,be);Ie<ie.length;Ie++)ut=He(be,$,Ie,ie[Ie],me),ut!==null&&(e&&ut.alternate!==null&&be.delete(ut.key===null?Ie:ut.key),K=h(ut,K,Ie),Pe===null?xe=ut:Pe.sibling=ut,Pe=ut);return e&&be.forEach(function(jn){return t($,jn)}),Ve&&Xn($,Ie),xe}function Mt($,K,ie,me){var xe=F(ie);if(typeof xe!="function")throw Error(o(150));if(ie=xe.call(ie),ie==null)throw Error(o(151));for(var Pe=xe=null,be=K,Ie=K=0,ut=null,De=ie.next();be!==null&&!De.done;Ie++,De=ie.next()){be.index>Ie?(ut=be,be=null):ut=be.sibling;var jn=pe($,be,De.value,me);if(jn===null){be===null&&(be=ut);break}e&&be&&jn.alternate===null&&t($,be),K=h(jn,K,Ie),Pe===null?xe=jn:Pe.sibling=jn,Pe=jn,be=ut}if(De.done)return n($,be),Ve&&Xn($,Ie),xe;if(be===null){for(;!De.done;Ie++,De=ie.next())De=Ce($,De.value,me),De!==null&&(K=h(De,K,Ie),Pe===null?xe=De:Pe.sibling=De,Pe=De);return Ve&&Xn($,Ie),xe}for(be=r($,be);!De.done;Ie++,De=ie.next())De=He(be,$,Ie,De.value,me),De!==null&&(e&&De.alternate!==null&&be.delete(De.key===null?Ie:De.key),K=h(De,K,Ie),Pe===null?xe=De:Pe.sibling=De,Pe=De);return e&&be.forEach(function(i0){return t($,i0)}),Ve&&Xn($,Ie),xe}function Rn($,K,ie,me){if(typeof ie=="object"&&ie!==null&&ie.type===w&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case m:e:{for(var xe=ie.key,Pe=K;Pe!==null;){if(Pe.key===xe){if(xe=ie.type,xe===w){if(Pe.tag===7){n($,Pe.sibling),K=i(Pe,ie.props.children),K.return=$,$=K;break e}}else if(Pe.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===a&&Iu(xe)===Pe.type){n($,Pe.sibling),K=i(Pe,ie.props),K.ref=wi($,Pe,ie),K.return=$,$=K;break e}n($,Pe);break}else t($,Pe);Pe=Pe.sibling}ie.type===w?(K=tr(ie.props.children,$.mode,me,ie.key),K.return=$,$=K):(me=Ys(ie.type,ie.key,ie.props,null,$.mode,me),me.ref=wi($,K,ie),me.return=$,$=me)}return D($);case y:e:{for(Pe=ie.key;K!==null;){if(K.key===Pe)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){n($,K.sibling),K=i(K,ie.children||[]),K.return=$,$=K;break e}else{n($,K);break}else t($,K);K=K.sibling}K=Fo(ie,$.mode,me),K.return=$,$=K}return D($);case a:return Pe=ie._init,Rn($,K,Pe(ie._payload),me)}if(k(ie))return Ge($,K,ie,me);if(F(ie))return Mt($,K,ie,me);ms($,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,K!==null&&K.tag===6?(n($,K.sibling),K=i(K,ie),K.return=$,$=K):(n($,K),K=Ro(ie,$.mode,me),K.return=$,$=K),D($)):n($,K)}return Rn}var cr=Du(!0),Ou=Du(!1),ys=cn(null),vs=null,hr=null,La=null;function Ia(){La=hr=vs=null}function zu(e,t,n){le?(Ue(ys,t._currentValue),t._currentValue=n):(Ue(ys,t._currentValue2),t._currentValue2=n)}function Da(e){var t=ys.current;ze(ys),le?e._currentValue=t:e._currentValue2=t}function Oa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fr(e,t){vs=e,La=hr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Rt=!0),e.firstContext=null)}function Qt(e){var t=le?e._currentValue:e._currentValue2;if(La!==e)if(e={context:e,memoizedValue:t,next:null},hr===null){if(vs===null)throw Error(o(308));hr=e,vs.dependencies={lanes:0,firstContext:e}}else hr=hr.next=e;return t}var Kn=null;function za(e){Kn===null?Kn=[e]:Kn.push(e)}function Gu(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,za(t)):(n.next=i.next,i.next=n),t.interleaved=n,gn(e,r)}function gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var In=!1;function Ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ee&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,gn(e,n)}return i=r.interleaved,i===null?(t.next=t,za(r)):(t.next=i.next,i.next=t),r.interleaved=t,gn(e,n)}function _s(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ba(e,n)}}function Uu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var D={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?i=h=D:h=h.next=D,n=n.next}while(n!==null);h===null?i=h=t:h=h.next=t}else i=h=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:h,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xs(e,t,n,r){var i=e.updateQueue;In=!1;var h=i.firstBaseUpdate,D=i.lastBaseUpdate,Y=i.shared.pending;if(Y!==null){i.shared.pending=null;var te=Y,ue=te.next;te.next=null,D===null?h=ue:D.next=ue,D=te;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,Y=_e.lastBaseUpdate,Y!==D&&(Y===null?_e.firstBaseUpdate=ue:Y.next=ue,_e.lastBaseUpdate=te))}if(h!==null){var Ce=i.baseState;D=0,_e=ue=te=null,Y=h;do{var pe=Y.lane,He=Y.eventTime;if((r&pe)===pe){_e!==null&&(_e=_e.next={eventTime:He,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Ge=e,Mt=Y;switch(pe=t,He=n,Mt.tag){case 1:if(Ge=Mt.payload,typeof Ge=="function"){Ce=Ge.call(He,Ce,pe);break e}Ce=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Mt.payload,pe=typeof Ge=="function"?Ge.call(He,Ce,pe):Ge,pe==null)break e;Ce=_({},Ce,pe);break e;case 2:In=!0}}Y.callback!==null&&Y.lane!==0&&(e.flags|=64,pe=i.effects,pe===null?i.effects=[Y]:pe.push(Y))}else He={eventTime:He,lane:pe,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},_e===null?(ue=_e=He,te=Ce):_e=_e.next=He,D|=pe;if(Y=Y.next,Y===null){if(Y=i.shared.pending,Y===null)break;pe=Y,Y=pe.next,pe.next=null,i.lastBaseUpdate=pe,i.shared.pending=null}}while(!0);if(_e===null&&(te=Ce),i.baseState=te,i.firstBaseUpdate=ue,i.lastBaseUpdate=_e,t=i.shared.interleaved,t!==null){i=t;do D|=i.lane,i=i.next;while(i!==t)}else h===null&&(i.shared.lanes=0);Jn|=D,e.lanes=D,e.memoizedState=Ce}}function ju(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(o(191,i));i.call(r)}}}var Si={},Jt=cn(Si),Ci=cn(Si),gr=cn(Si);function pn(e){if(e===Si)throw Error(o(174));return e}function Ba(e,t){Ue(gr,t),Ue(Ci,e),Ue(Jt,Si),e=B(t),ze(Jt),Ue(Jt,e)}function pr(){ze(Jt),ze(Ci),ze(gr)}function Hu(e){var t=pn(gr.current),n=pn(Jt.current);t=j(n,e.type,t),n!==t&&(Ue(Ci,e),Ue(Jt,t))}function Ua(e){Ci.current===e&&(ze(Jt),ze(Ci))}var qe=cn(0);function ws(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||yi(n)||ar(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=[];function Ha(){for(var e=0;e<ja.length;e++){var t=ja[e];le?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}ja.length=0}var Ss=c.ReactCurrentDispatcher,Va=c.ReactCurrentBatchConfig,Qn=0,Ye=null,nt=null,ot=null,Cs=!1,bi=!1,ki=0,Rf=0;function yt(){throw Error(o(321))}function Wa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function qa(e,t,n,r,i,h){if(Qn=h,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ss.current=e===null||e.memoizedState===null?Af:Lf,e=n(r,i),bi){h=0;do{if(bi=!1,ki=0,25<=h)throw Error(o(301));h+=1,ot=nt=null,t.updateQueue=null,Ss.current=If,e=n(r,i)}while(bi)}if(Ss.current=Ps,t=nt!==null&&nt.next!==null,Qn=0,ot=nt=Ye=null,Cs=!1,t)throw Error(o(300));return e}function Ya(){var e=ki!==0;return ki=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ye.memoizedState=ot=e:ot=ot.next=e,ot}function Zt(){if(nt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=ot===null?Ye.memoizedState:ot.next;if(t!==null)ot=t,nt=e;else{if(e===null)throw Error(o(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Ye.memoizedState=ot=e:ot=ot.next=e}return ot}function Pi(e,t){return typeof t=="function"?t(e):t}function Xa(e){var t=Zt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=nt,i=r.baseQueue,h=n.pending;if(h!==null){if(i!==null){var D=i.next;i.next=h.next,h.next=D}r.baseQueue=i=h,n.pending=null}if(i!==null){h=i.next,r=r.baseState;var Y=D=null,te=null,ue=h;do{var _e=ue.lane;if((Qn&_e)===_e)te!==null&&(te=te.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),r=ue.hasEagerState?ue.eagerState:e(r,ue.action);else{var Ce={lane:_e,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};te===null?(Y=te=Ce,D=r):te=te.next=Ce,Ye.lanes|=_e,Jn|=_e}ue=ue.next}while(ue!==null&&ue!==h);te===null?D=r:te.next=Y,sn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=D,t.baseQueue=te,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do h=i.lane,Ye.lanes|=h,Jn|=h,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ka(e){var t=Zt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,h=t.memoizedState;if(i!==null){n.pending=null;var D=i=i.next;do h=e(h,D.action),D=D.next;while(D!==i);sn(h,t.memoizedState)||(Rt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,r]}function Vu(){}function Wu(e,t){var n=Ye,r=Zt(),i=t(),h=!sn(r.memoizedState,i);if(h&&(r.memoizedState=i,Rt=!0),r=r.queue,Qa(Xu.bind(null,n,r,e),[e]),r.getSnapshot!==t||h||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Ti(9,Yu.bind(null,n,r,i,t),void 0,null),lt===null)throw Error(o(349));(Qn&30)!==0||qu(n,t,i)}return i}function qu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Yu(e,t,n,r){t.value=n,t.getSnapshot=r,Ku(t)&&Qu(e)}function Xu(e,t,n){return n(function(){Ku(t)&&Qu(e)})}function Ku(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function Qu(e){var t=gn(e,1);t!==null&&$t(t,e,1,-1)}function Ju(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},t.queue=e,e=e.dispatch=Mf.bind(null,Ye,e),[t.memoizedState,e]}function Ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Zu(){return Zt().memoizedState}function bs(e,t,n,r){var i=mn();Ye.flags|=e,i.memoizedState=Ti(1|t,n,void 0,r===void 0?null:r)}function ks(e,t,n,r){var i=Zt();r=r===void 0?null:r;var h=void 0;if(nt!==null){var D=nt.memoizedState;if(h=D.destroy,r!==null&&Wa(r,D.deps)){i.memoizedState=Ti(t,n,h,r);return}}Ye.flags|=e,i.memoizedState=Ti(1|t,n,h,r)}function $u(e,t){return bs(8390656,8,e,t)}function Qa(e,t){return ks(2048,8,e,t)}function ed(e,t){return ks(4,2,e,t)}function td(e,t){return ks(4,4,e,t)}function nd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rd(e,t,n){return n=n!=null?n.concat([e]):null,ks(4,4,nd.bind(null,t,e),n)}function Ja(){}function id(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sd(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ad(e,t,n){return(Qn&21)===0?(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n):(sn(n,t)||(n=Pu(),Ye.lanes|=n,Jn|=n,e.baseState=!0),t)}function Ff(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=Va.transition;Va.transition={};try{e(!1),t()}finally{Le=n,Va.transition=r}}function od(){return Zt().memoizedState}function Nf(e,t,n){var r=Gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ld(e))ud(t,n);else if(n=Gu(e,t,n,r),n!==null){var i=xt();$t(n,e,r,i),dd(n,t,r)}}function Mf(e,t,n){var r=Gn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ld(e))ud(t,i);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var D=t.lastRenderedState,Y=h(D,n);if(i.hasEagerState=!0,i.eagerState=Y,sn(Y,D)){var te=t.interleaved;te===null?(i.next=i,za(t)):(i.next=te.next,te.next=i),t.interleaved=i;return}}catch{}finally{}n=Gu(e,t,i,r),n!==null&&(i=xt(),$t(n,e,r,i),dd(n,t,r))}}function ld(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function ud(e,t){bi=Cs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dd(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ba(e,n)}}var Ps={readContext:Qt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Af={readContext:Qt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:$u,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bs(4194308,4,nd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return bs(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Nf.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Ju,useDebugValue:Ja,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Ju(!1),t=e[0];return e=Ff.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,i=mn();if(Ve){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),lt===null)throw Error(o(349));(Qn&30)!==0||qu(r,t,n)}i.memoizedState=n;var h={value:n,getSnapshot:t};return i.queue=h,$u(Xu.bind(null,r,h,e),[e]),r.flags|=2048,Ti(9,Yu.bind(null,r,h,n,t),void 0,null),n},useId:function(){var e=mn(),t=lt.identifierPrefix;if(Ve){var n=kn,r=bn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ki++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Rf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Lf={readContext:Qt,useCallback:id,useContext:Qt,useEffect:Qa,useImperativeHandle:rd,useInsertionEffect:ed,useLayoutEffect:td,useMemo:sd,useReducer:Xa,useRef:Zu,useState:function(){return Xa(Pi)},useDebugValue:Ja,useDeferredValue:function(e){var t=Zt();return ad(t,nt.memoizedState,e)},useTransition:function(){var e=Xa(Pi)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:Vu,useSyncExternalStore:Wu,useId:od,unstable_isNewReconciler:!1},If={readContext:Qt,useCallback:id,useContext:Qt,useEffect:Qa,useImperativeHandle:rd,useInsertionEffect:ed,useLayoutEffect:td,useMemo:sd,useReducer:Ka,useRef:Zu,useState:function(){return Ka(Pi)},useDebugValue:Ja,useDeferredValue:function(e){var t=Zt();return nt===null?t.memoizedState=e:ad(t,nt.memoizedState,e)},useTransition:function(){var e=Ka(Pi)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:Vu,useSyncExternalStore:Wu,useId:od,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=_({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ts={isMounted:function(e){return(e=e._reactInternals)?N(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),i=Gn(e),h=Pn(r,i);h.payload=t,n!=null&&(h.callback=n),t=Dn(e,h,i),t!==null&&($t(t,e,i,r),_s(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),i=Gn(e),h=Pn(r,i);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=Dn(e,h,i),t!==null&&($t(t,e,i,r),_s(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=Gn(e),i=Pn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Dn(e,i,r),t!==null&&($t(t,e,r,n),_s(t,e,r))}};function cd(e,t,n,r,i,h,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,h,D):t.prototype&&t.prototype.isPureReactComponent?!ps(n,r)||!ps(i,h):!0}function hd(e,t,n){var r=!1,i=Ln,h=t.contextType;return typeof h=="object"&&h!==null?h=Qt(h):(i=Et(t)?qn:mt.current,r=t.contextTypes,h=(r=r!=null)?or(e,i):Ln),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ts,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=h),t}function fd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ts.enqueueReplaceState(t,t.state,null)}function $a(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ga(e);var h=t.contextType;typeof h=="object"&&h!==null?i.context=Qt(h):(h=Et(t)?qn:mt.current,i.context=or(e,h)),i.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Za(e,t,h,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ts.enqueueReplaceState(i,i.state,null),xs(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function mr(e,t){try{var n="",r=t;do n+=Ef(r),r=r.return;while(r);var i=n}catch(h){i=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:i,digest:null}}function eo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function to(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Df=typeof WeakMap=="function"?WeakMap:Map;function gd(e,t,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Us||(Us=!0,So=r),to(e,t)},n}function pd(e,t,n){n=Pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){to(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){to(e,t),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var D=t.stack;this.componentDidCatch(t.value,{componentStack:D!==null?D:""})}),n}function md(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Df;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Qf.bind(null,e,t,n),t.then(e,e))}function yd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vd(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pn(-1,1),t.tag=2,Dn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Of=c.ReactCurrentOwner,Rt=!1;function bt(e,t,n,r){t.child=e===null?Ou(t,null,n,r):cr(t,e.child,n,r)}function _d(e,t,n,r,i){n=n.render;var h=t.ref;return fr(t,i),r=qa(e,t,n,r,h,i),n=Ya(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Tn(e,t,i)):(Ve&&n&&Ra(t),t.flags|=1,bt(e,t,r,i),t.child)}function xd(e,t,n,r,i){if(e===null){var h=n.type;return typeof h=="function"&&!Eo(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,wd(e,t,h,r,i)):(e=Ys(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&i)===0){var D=h.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(D,r)&&e.ref===t.ref)return Tn(e,t,i)}return t.flags|=1,e=Un(h,r),e.ref=t.ref,e.return=t,t.child=e}function wd(e,t,n,r,i){if(e!==null){var h=e.memoizedProps;if(ps(h,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=h,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Rt=!0);else return t.lanes=e.lanes,Tn(e,t,i)}return no(e,t,n,r,i)}function Sd(e,t,n){var r=t.pendingProps,i=r.children,h=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(vr,jt),jt|=n;else{if((n&1073741824)===0)return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(vr,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=h!==null?h.baseLanes:n,Ue(vr,jt),jt|=r}else h!==null?(r=h.baseLanes|n,t.memoizedState=null):r=n,Ue(vr,jt),jt|=r;return bt(e,t,i,n),t.child}function Cd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function no(e,t,n,r,i){var h=Et(n)?qn:mt.current;return h=or(t,h),fr(t,i),n=qa(e,t,n,r,h,i),r=Ya(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Tn(e,t,i)):(Ve&&r&&Ra(t),t.flags|=1,bt(e,t,n,i),t.child)}function bd(e,t,n,r,i){if(Et(n)){var h=!0;as(t)}else h=!1;if(fr(t,i),t.stateNode===null)Rs(e,t),hd(t,n,r),$a(t,n,r,i),r=!0;else if(e===null){var D=t.stateNode,Y=t.memoizedProps;D.props=Y;var te=D.context,ue=n.contextType;typeof ue=="object"&&ue!==null?ue=Qt(ue):(ue=Et(n)?qn:mt.current,ue=or(t,ue));var _e=n.getDerivedStateFromProps,Ce=typeof _e=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ce||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==r||te!==ue)&&fd(t,D,r,ue),In=!1;var pe=t.memoizedState;D.state=pe,xs(t,r,D,i),te=t.memoizedState,Y!==r||pe!==te||Tt.current||In?(typeof _e=="function"&&(Za(t,n,_e,r),te=t.memoizedState),(Y=In||cd(t,n,Y,r,pe,te,ue))?(Ce||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(t.flags|=4194308)):(typeof D.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=te),D.props=r,D.state=te,D.context=ue,r=Y):(typeof D.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{D=t.stateNode,Bu(e,t),Y=t.memoizedProps,ue=t.type===t.elementType?Y:on(t.type,Y),D.props=ue,Ce=t.pendingProps,pe=D.context,te=n.contextType,typeof te=="object"&&te!==null?te=Qt(te):(te=Et(n)?qn:mt.current,te=or(t,te));var He=n.getDerivedStateFromProps;(_e=typeof He=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==Ce||pe!==te)&&fd(t,D,r,te),In=!1,pe=t.memoizedState,D.state=pe,xs(t,r,D,i);var Ge=t.memoizedState;Y!==Ce||pe!==Ge||Tt.current||In?(typeof He=="function"&&(Za(t,n,He,r),Ge=t.memoizedState),(ue=In||cd(t,n,ue,r,pe,Ge,te)||!1)?(_e||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(r,Ge,te),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(r,Ge,te)),typeof D.componentDidUpdate=="function"&&(t.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof D.componentDidUpdate!="function"||Y===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=Ge),D.props=r,D.state=Ge,D.context=te,r=ue):(typeof D.componentDidUpdate!="function"||Y===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),r=!1)}return ro(e,t,n,r,h,i)}function ro(e,t,n,r,i,h){Cd(e,t);var D=(t.flags&128)!==0;if(!r&&!D)return i&&ku(t,n,!1),Tn(e,t,h);r=t.stateNode,Of.current=t;var Y=D&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&D?(t.child=cr(t,e.child,null,h),t.child=cr(t,null,Y,h)):bt(e,t,Y,h),t.memoizedState=r.state,i&&ku(t,n,!0),t.child}function kd(e){var t=e.stateNode;t.pendingContext?Cu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cu(e,t.context,!1),Ba(e,t.containerInfo)}function Pd(e,t,n,r,i){return dr(),Aa(i),t.flags|=256,bt(e,t,n,r),t.child}var io={dehydrated:null,treeContext:null,retryLane:0};function so(e){return{baseLanes:e,cachePool:null,transitions:null}}function Td(e,t,n){var r=t.pendingProps,i=qe.current,h=!1,D=(t.flags&128)!==0,Y;if((Y=D)||(Y=e!==null&&e.memoizedState===null?!1:(i&2)!==0),Y?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ue(qe,i&1),e===null)return Ma(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:ar(e)?t.lanes=8:t.lanes=1073741824,null):(D=r.children,e=r.fallback,h?(r=t.mode,h=t.child,D={mode:"hidden",children:D},(r&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=D):h=Xs(D,r,0,null),e=tr(e,r,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=so(n),t.memoizedState=io,e):ao(t,D));if(i=e.memoizedState,i!==null&&(Y=i.dehydrated,Y!==null))return zf(e,t,D,r,Y,i,n);if(h){h=r.fallback,D=t.mode,i=e.child,Y=i.sibling;var te={mode:"hidden",children:r.children};return(D&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=te,t.deletions=null):(r=Un(i,te),r.subtreeFlags=i.subtreeFlags&14680064),Y!==null?h=Un(Y,h):(h=tr(h,D,n,null),h.flags|=2),h.return=t,r.return=t,r.sibling=h,t.child=r,r=h,h=t.child,D=e.child.memoizedState,D=D===null?so(n):{baseLanes:D.baseLanes|n,cachePool:null,transitions:D.transitions},h.memoizedState=D,h.childLanes=e.childLanes&~n,t.memoizedState=io,r}return h=e.child,e=h.sibling,r=Un(h,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ao(e,t){return t=Xs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,n,r){return r!==null&&Aa(r),cr(t,e.child,null,n),e=ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zf(e,t,n,r,i,h,D){if(n)return t.flags&256?(t.flags&=-257,r=eo(Error(o(422))),Es(e,t,D,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=r.fallback,i=t.mode,r=Xs({mode:"visible",children:r.children},i,0,null),h=tr(h,i,D,null),h.flags|=2,r.return=t,h.return=t,r.sibling=h,t.child=r,(t.mode&1)!==0&&cr(t,e.child,null,D),t.child.memoizedState=so(D),t.memoizedState=io,h);if((t.mode&1)===0)return Es(e,t,D,null);if(ar(i))return r=es(i).digest,h=Error(o(419)),r=eo(h,r,void 0),Es(e,t,D,r);if(n=(D&e.childLanes)!==0,Rt||n){if(r=lt,r!==null){switch(D&-D){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|D))!==0?0:i,i!==0&&i!==h.retryLane&&(h.retryLane=i,gn(e,i),$t(r,e,i,-1))}return To(),r=eo(Error(o(421))),Es(e,t,D,r)}return yi(i)?(t.flags|=128,t.child=e.child,t=Jf.bind(null,e),ts(i,t),null):(e=h.treeContext,we&&(Kt=is(i),Ut=t,Ve=!0,an=null,xi=!1,e!==null&&(Yt[Xt++]=bn,Yt[Xt++]=kn,Yt[Xt++]=Yn,bn=e.id,kn=e.overflow,Yn=t)),t=ao(t,r.children),t.flags|=4096,t)}function Ed(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Oa(e.return,t,n)}function oo(e,t,n,r,i){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=n,h.tailMode=i)}function Rd(e,t,n){var r=t.pendingProps,i=r.revealOrder,h=r.tail;if(bt(e,t,r.children,n),r=qe.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ed(e,n,t);else if(e.tag===19)Ed(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(qe,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ws(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),oo(t,!1,i,n,h);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ws(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}oo(t,!0,n,null,h);break;case"together":oo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Gf(e,t,n){switch(t.tag){case 3:kd(t),dr();break;case 5:Hu(t);break;case 1:Et(t.type)&&as(t);break;case 4:Ba(t,t.stateNode.containerInfo);break;case 10:zu(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Ue(qe,qe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Td(e,t,n):(Ue(qe,qe.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Ue(qe,qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Rd(e,t,n);t.flags|=128}var i=t.memoizedState;if(i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(qe,qe.current),r)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,n)}return Tn(e,t,n)}function yn(e){e.flags|=4}function Fd(e,t){if(e!==null&&e.child===t.child)return!0;if((t.flags&16)!==0)return!1;for(e=t.child;e!==null;){if((e.flags&12854)!==0||(e.subtreeFlags&12854)!==0)return!1;e=e.sibling}return!0}var Ei,Ri,Fs,Ns;if(ce)Ei=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)ae(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ri=function(){},Fs=function(e,t,n,r,i){if(e=e.memoizedProps,e!==r){var h=t.stateNode,D=pn(Jt.current);n=se(h,n,e,r,i,D),(t.updateQueue=n)&&yn(t)}},Ns=function(e,t,n,r){n!==r&&yn(t)};else if(ve){Ei=function(e,t,n,r){for(var i=t.child;i!==null;){if(i.tag===5){var h=i.stateNode;n&&r&&(h=pi(h,i.type,i.memoizedProps,i)),ae(e,h)}else if(i.tag===6)h=i.stateNode,n&&r&&(h=mi(h,i.memoizedProps,i)),ae(e,h);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)h=i.child,h!==null&&(h.return=i),Ei(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Nd=function(e,t,n,r){for(var i=t.child;i!==null;){if(i.tag===5){var h=i.stateNode;n&&r&&(h=pi(h,i.type,i.memoizedProps,i)),gi(e,h)}else if(i.tag===6)h=i.stateNode,n&&r&&(h=mi(h,i.memoizedProps,i)),gi(e,h);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)h=i.child,h!==null&&(h.return=i),Nd(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Ri=function(e,t){var n=t.stateNode;if(!Fd(e,t)){e=n.containerInfo;var r=fi(e);Nd(r,t,!1,!1),n.pendingChildren=r,yn(t),Qi(e,r)}},Fs=function(e,t,n,r,i){var h=e.stateNode,D=e.memoizedProps;if((e=Fd(e,t))&&D===r)t.stateNode=h;else{var Y=t.stateNode,te=pn(Jt.current),ue=null;D!==r&&(ue=se(Y,n,D,r,i,te)),e&&ue===null?t.stateNode=h:(h=Ki(h,ue,n,D,r,t,e,Y),re(h,n,r,i,te)&&yn(t),t.stateNode=h,e?yn(t):Ei(h,t,!1,!1))}},Ns=function(e,t,n,r){n!==r?(e=pn(gr.current),n=pn(Jt.current),t.stateNode=ge(r,e,n,t),yn(t)):t.stateNode=e.stateNode}}else Ri=function(){},Fs=function(){},Ns=function(){};function Fi(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Bf(e,t,n){var r=t.pendingProps;switch(Fa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Et(t.type)&&ss(),vt(t),null;case 3:return n=t.stateNode,pr(),ze(Tt),ze(mt),Ha(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gs(t)?yn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,an!==null&&(ko(an),an=null))),Ri(e,t),vt(t),null;case 5:Ua(t),n=pn(gr.current);var i=t.type;if(e!==null&&t.stateNode!=null)Fs(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(o(166));return vt(t),null}if(e=pn(Jt.current),gs(t)){if(!we)throw Error(o(175));e=x(t.stateNode,t.type,t.memoizedProps,n,e,t,!xi),t.updateQueue=e,e!==null&&yn(t)}else{var h=ne(i,r,n,e,t);Ei(h,t,!1,!1),t.stateNode=h,re(h,i,r,n,e)&&yn(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)Ns(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(e=pn(gr.current),n=pn(Jt.current),gs(t)){if(!we)throw Error(o(176));if(e=t.stateNode,n=t.memoizedProps,(r=W(e,n,t,!xi))&&(i=Ut,i!==null))switch(i.tag){case 3:st(i.stateNode.containerInfo,e,n,(i.mode&1)!==0);break;case 5:dt(i.type,i.memoizedProps,i.stateNode,e,n,(i.mode&1)!==0)}r&&yn(t)}else t.stateNode=ge(r,e,n,t)}return vt(t),null;case 13:if(ze(qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Kt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Lu(),dr(),t.flags|=98560,i=!1;else if(i=gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(!we)throw Error(o(344));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));q(i,t)}else dr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),i=!1}else an!==null&&(ko(an),an=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(n=r!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(qe.current&1)!==0?rt===0&&(rt=3):To())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return pr(),Ri(e,t),e===null&&Se(t.stateNode.containerInfo),vt(t),null;case 10:return Da(t.type._context),vt(t),null;case 17:return Et(t.type)&&ss(),vt(t),null;case 19:if(ze(qe),i=t.memoizedState,i===null)return vt(t),null;if(r=(t.flags&128)!==0,h=i.rendering,h===null)if(r)Fi(i,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=ws(e),h!==null){for(t.flags|=128,Fi(i,!1),e=h.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,n=t.child;n!==null;)r=n,i=e,r.flags&=14680066,h=r.alternate,h===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,i=h.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Ue(qe,qe.current&1|2),t.child}e=e.sibling}i.tail!==null&&at()>wo&&(t.flags|=128,r=!0,Fi(i,!1),t.lanes=4194304)}else{if(!r)if(e=ws(h),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Ve)return vt(t),null}else 2*at()-i.renderingStartTime>wo&&n!==1073741824&&(t.flags|=128,r=!0,Fi(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=at(),t.sibling=null,e=qe.current,Ue(qe,r?e&1|2:e&1),t):(vt(t),null);case 22:case 23:return Po(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(jt&1073741824)!==0&&(vt(t),ce&&t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function Uf(e,t){switch(Fa(t),t.tag){case 1:return Et(t.type)&&ss(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pr(),ze(Tt),ze(mt),Ha(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ua(t),null;case 13:if(ze(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));dr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(qe),null;case 4:return pr(),null;case 10:return Da(t.type._context),null;case 22:case 23:return Po(),null;case 24:return null;default:return null}}var Ms=!1,_t=!1,jf=typeof WeakSet=="function"?WeakSet:Set,ye=null;function yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function lo(e,t,n){try{n()}catch(r){We(e,t,r)}}var Md=!1;function Hf(e,t){for(Q(e.containerInfo),ye=t;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var n=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,i=n.memoizedState,h=e.stateNode,D=h.getSnapshotBeforeUpdate(e.elementType===e.type?r:on(e.type,r),i);h.__reactInternalSnapshotBeforeUpdate=D}break;case 3:ce&&Xi(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){We(e,e.return,Y)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return n=Md,Md=!1,n}function Ni(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var h=i.destroy;i.destroy=void 0,h!==void 0&&lo(t,n,h)}i=i.next}while(i!==r)}}function As(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function uo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=G(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ad(e){var t=e.alternate;t!==null&&(e.alternate=null,Ad(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Oe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ld(e){return e.tag===5||e.tag===3||e.tag===4}function Id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ld(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function co(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?St(n,e,t):Ht(n,e);else if(r!==4&&(e=e.child,e!==null))for(co(e,t,n),e=e.sibling;e!==null;)co(e,t,n),e=e.sibling}function ho(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?pt(n,e,t):Ot(n,e);else if(r!==4&&(e=e.child,e!==null))for(ho(e,t,n),e=e.sibling;e!==null;)ho(e,t,n),e=e.sibling}var ct=null,ln=!1;function vn(e,t,n){for(n=n.child;n!==null;)fo(e,t,n),n=n.sibling}function fo(e,t,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ds,n)}catch{}switch(n.tag){case 5:_t||yr(n,t);case 6:if(ce){var r=ct,i=ln;ct=null,vn(e,t,n),ct=r,ln=i,ct!==null&&(ln?ir(ct,n.stateNode):An(ct,n.stateNode))}else vn(e,t,n);break;case 18:ce&&ct!==null&&(ln?Ae(ct,n.stateNode):ke(ct,n.stateNode));break;case 4:ce?(r=ct,i=ln,ct=n.stateNode.containerInfo,ln=!0,vn(e,t,n),ct=r,ln=i):(ve&&(r=n.stateNode.containerInfo,i=fi(r),sr(r,i)),vn(e,t,n));break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var h=i,D=h.destroy;h=h.tag,D!==void 0&&((h&2)!==0||(h&4)!==0)&&lo(n,t,D),i=i.next}while(i!==r)}vn(e,t,n);break;case 1:if(!_t&&(yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Y){We(n,t,Y)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,vn(e,t,n),_t=r):vn(e,t,n);break;default:vn(e,t,n)}}function Dd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jf),t.forEach(function(r){var i=Zf.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var h=e,D=t;if(ce){var Y=D;e:for(;Y!==null;){switch(Y.tag){case 5:ct=Y.stateNode,ln=!1;break e;case 3:ct=Y.stateNode.containerInfo,ln=!0;break e;case 4:ct=Y.stateNode.containerInfo,ln=!0;break e}Y=Y.return}if(ct===null)throw Error(o(160));fo(h,D,i),ct=null,ln=!1}else fo(h,D,i);var te=i.alternate;te!==null&&(te.return=null),i.return=null}catch(ue){We(i,t,ue)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Od(t,e),t=t.sibling}function Od(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(un(t,e),_n(e),r&4){try{Ni(3,e,e.return),As(3,e)}catch(pe){We(e,e.return,pe)}try{Ni(5,e,e.return)}catch(pe){We(e,e.return,pe)}}break;case 1:un(t,e),_n(e),r&512&&n!==null&&yr(n,n.return);break;case 5:if(un(t,e),_n(e),r&512&&n!==null&&yr(n,n.return),ce){if(e.flags&32){var i=e.stateNode;try{hi(i)}catch(pe){We(e,e.return,pe)}}if(r&4&&(i=e.stateNode,i!=null)){var h=e.memoizedProps;if(n=n!==null?n.memoizedProps:h,r=e.type,t=e.updateQueue,e.updateQueue=null,t!==null)try{wt(i,t,r,n,h,e)}catch(pe){We(e,e.return,pe)}}}break;case 6:if(un(t,e),_n(e),r&4&&ce){if(e.stateNode===null)throw Error(o(162));i=e.stateNode,h=e.memoizedProps,n=n!==null?n.memoizedProps:h;try{Vt(i,n,h)}catch(pe){We(e,e.return,pe)}}break;case 3:if(un(t,e),_n(e),r&4){if(ce&&we&&n!==null&&n.memoizedState.isDehydrated)try{X(t.containerInfo)}catch(pe){We(e,e.return,pe)}if(ve){i=t.containerInfo,h=t.pendingChildren;try{sr(i,h)}catch(pe){We(e,e.return,pe)}}}break;case 4:if(un(t,e),_n(e),r&4&&ve){h=e.stateNode,i=h.containerInfo,h=h.pendingChildren;try{sr(i,h)}catch(pe){We(e,e.return,pe)}}break;case 13:un(t,e),_n(e),i=e.child,i.flags&8192&&(h=i.memoizedState!==null,i.stateNode.isHidden=h,!h||i.alternate!==null&&i.alternate.memoizedState!==null||(xo=at())),r&4&&Dd(e);break;case 22:var D=n!==null&&n.memoizedState!==null;if(e.mode&1?(_t=(n=_t)||D,un(t,e),_t=n):un(t,e),_n(e),r&8192){if(n=e.memoizedState!==null,(e.stateNode.isHidden=n)&&!D&&(e.mode&1)!==0)for(ye=e,r=e.child;r!==null;){for(t=ye=r;ye!==null;){D=ye;var Y=D.child;switch(D.tag){case 0:case 11:case 14:case 15:Ni(4,D,D.return);break;case 1:yr(D,D.return);var te=D.stateNode;if(typeof te.componentWillUnmount=="function"){var ue=D,_e=D.return;try{var Ce=ue;te.props=Ce.memoizedProps,te.state=Ce.memoizedState,te.componentWillUnmount()}catch(pe){We(ue,_e,pe)}}break;case 5:yr(D,D.return);break;case 22:if(D.memoizedState!==null){Bd(t);continue}}Y!==null?(Y.return=D,ye=Y):Bd(t)}r=r.sibling}if(ce){e:if(r=null,ce)for(t=e;;){if(t.tag===5){if(r===null){r=t;try{i=t.stateNode,n?Vi(i):qi(t.stateNode,t.memoizedProps)}catch(pe){We(e,e.return,pe)}}}else if(t.tag===6){if(r===null)try{h=t.stateNode,n?Wi(h):Yi(h,t.memoizedProps)}catch(pe){We(e,e.return,pe)}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}}}break;case 19:un(t,e),_n(e),r&4&&Dd(e);break;case 21:break;default:un(t,e),_n(e)}}function _n(e){var t=e.flags;if(t&2){try{if(ce){e:{for(var n=e.return;n!==null;){if(Ld(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hi(i),r.flags&=-33);var h=Id(e);ho(e,h,i);break;case 3:case 4:var D=r.stateNode.containerInfo,Y=Id(e);co(e,Y,D);break;default:throw Error(o(161))}}}catch(te){We(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vf(e,t,n){ye=e,zd(e)}function zd(e,t,n){for(var r=(e.mode&1)!==0;ye!==null;){var i=ye,h=i.child;if(i.tag===22&&r){var D=i.memoizedState!==null||Ms;if(!D){var Y=i.alternate,te=Y!==null&&Y.memoizedState!==null||_t;Y=Ms;var ue=_t;if(Ms=D,(_t=te)&&!ue)for(ye=i;ye!==null;)D=ye,te=D.child,D.tag===22&&D.memoizedState!==null?Ud(i):te!==null?(te.return=D,ye=te):Ud(i);for(;h!==null;)ye=h,zd(h),h=h.sibling;ye=i,Ms=Y,_t=ue}Gd(e)}else(i.subtreeFlags&8772)!==0&&h!==null?(h.return=i,ye=h):Gd(e)}}function Gd(e){for(;ye!==null;){var t=ye;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:_t||As(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_t)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&ju(t,h,r);break;case 3:var D=t.updateQueue;if(D!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=G(t.child.stateNode);break;case 1:n=t.child.stateNode}ju(t,D,n)}break;case 5:var Y=t.stateNode;n===null&&t.flags&4&&zt(Y,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(we&&t.memoizedState===null){var te=t.alternate;if(te!==null){var ue=te.memoizedState;if(ue!==null){var _e=ue.dehydrated;_e!==null&&fe(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}_t||t.flags&512&&uo(t)}catch(Ce){We(t,t.return,Ce)}}if(t===e){ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,ye=n;break}ye=t.return}}function Bd(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ye=n;break}ye=t.return}}function Ud(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{As(4,t)}catch(te){We(t,n,te)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(te){We(t,i,te)}}var h=t.return;try{uo(t)}catch(te){We(t,h,te)}break;case 5:var D=t.return;try{uo(t)}catch(te){We(t,D,te)}}}catch(te){We(t,t.return,te)}if(t===e){ye=null;break}var Y=t.sibling;if(Y!==null){Y.return=t.return,ye=Y;break}ye=t.return}}var Ls=0,Is=1,Ds=2,Os=3,zs=4;if(typeof Symbol=="function"&&Symbol.for){var Mi=Symbol.for;Ls=Mi("selector.component"),Is=Mi("selector.has_pseudo_class"),Ds=Mi("selector.role"),Os=Mi("selector.test_id"),zs=Mi("selector.text")}function go(e){var t=Me(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(o(364));return t}if(e=ft(e),e===null)throw Error(o(362));return e.stateNode.current}function po(e,t){switch(t.$$typeof){case Ls:if(e.type===t.value)return!0;break;case Is:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],h=t[i];if(r.tag!==5||!et(r)){for(;h!=null&&po(r,h);)i++,h=t[i];if(i===t.length){t=!0;break e}else for(r=r.child;r!==null;)e.push(r,i),r=r.sibling}}t=!1}return t;case Ds:if(e.tag===5&&It(e.stateNode,t.value))return!0;break;case zs:if((e.tag===5||e.tag===6)&&(e=gt(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Os:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function mo(e){switch(e.$$typeof){case Ls:return"<"+(O(e.value)||"Unknown")+">";case Is:return":has("+(mo(e)||"")+")";case Ds:return'[role="'+e.value+'"]';case zs:return'"'+e.value+'"';case Os:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function jd(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],h=e[r++],D=t[h];if(i.tag!==5||!et(i)){for(;D!=null&&po(i,D);)h++,D=t[h];if(h===t.length)n.push(i);else for(i=i.child;i!==null;)e.push(i,h),i=i.sibling}}return n}function yo(e,t){if(!Qe)throw Error(o(363));e=go(e),e=jd(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(r.tag===5)et(r)||t.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return t}var Wf=Math.ceil,Gs=c.ReactCurrentDispatcher,vo=c.ReactCurrentOwner,Je=c.ReactCurrentBatchConfig,Ee=0,lt=null,$e=null,ht=0,jt=0,vr=cn(0),rt=0,Ai=null,Jn=0,Bs=0,_o=0,Li=null,Ft=null,xo=0,wo=1/0,En=null;function _r(){wo=at()+500}var Us=!1,So=null,On=null,js=!1,zn=null,Hs=0,Ii=0,Co=null,Vs=-1,Ws=0;function xt(){return(Ee&6)!==0?at():Vs!==-1?Vs:Vs=at()}function Gn(e){return(e.mode&1)===0?1:(Ee&2)!==0&&ht!==0?ht&-ht:Tf.transition!==null?(Ws===0&&(Ws=Pu()),Ws):(e=Le,e!==0?e:Ne())}function $t(e,t,n,r){if(50<Ii)throw Ii=0,Co=null,Error(o(185));_i(e,n,r),((Ee&2)===0||e!==lt)&&(e===lt&&((Ee&2)===0&&(Bs|=n),rt===4&&Bn(e,ht)),Nt(e,r),n===1&&Ee===0&&(t.mode&1)===0&&(_r(),cs&&fn()))}function Nt(e,t){var n=e.callbackNode;vf(e,t);var r=us(e,e===lt?ht:0);if(r===0)n!==null&&Eu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Eu(n),t===1)e.tag===0?Pf(Vd.bind(null,e)):Ru(Vd.bind(null,e)),je?Lt(function(){(Ee&6)===0&&fn()}):ka(Pa,fn),n=null;else{switch(Tu(r)){case 1:n=Pa;break;case 4:n=Sf;break;case 16:n=Ta;break;case 536870912:n=Cf;break;default:n=Ta}n=$d(n,Hd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hd(e,t){if(Vs=-1,Ws=0,(Ee&6)!==0)throw Error(o(327));var n=e.callbackNode;if(er()&&e.callbackNode!==n)return null;var r=us(e,e===lt?ht:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=qs(e,r);else{t=r;var i=Ee;Ee|=2;var h=Yd();(lt!==e||ht!==t)&&(En=null,_r(),Zn(e,t));do try{Xf();break}catch(Y){qd(e,Y)}while(!0);Ia(),Gs.current=h,Ee=i,$e!==null?t=0:(lt=null,ht=0,t=rt)}if(t!==0){if(t===2&&(i=Sa(e),i!==0&&(r=i,t=bo(e,i))),t===1)throw n=Ai,Zn(e,0),Bn(e,r),Nt(e,at()),n;if(t===6)Bn(e,r);else{if(i=e.current.alternate,(r&30)===0&&!qf(i)&&(t=qs(e,r),t===2&&(h=Sa(e),h!==0&&(r=h,t=bo(e,h))),t===1))throw n=Ai,Zn(e,0),Bn(e,r),Nt(e,at()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:$n(e,Ft,En);break;case 3:if(Bn(e,r),(r&130023424)===r&&(t=xo+500-at(),10<t)){if(us(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=U($n.bind(null,e,Ft,En),t);break}$n(e,Ft,En);break;case 4:if(Bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var D=31-rn(r);h=1<<D,D=t[D],D>i&&(i=D),r&=~h}if(r=i,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wf(r/1960))-r,10<r){e.timeoutHandle=U($n.bind(null,e,Ft,En),r);break}$n(e,Ft,En);break;case 5:$n(e,Ft,En);break;default:throw Error(o(329))}}}return Nt(e,at()),e.callbackNode===n?Hd.bind(null,e):null}function bo(e,t){var n=Li;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=qs(e,t),e!==2&&(t=Ft,Ft=n,t!==null&&ko(t)),e}function ko(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function qf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],h=i.getSnapshot;i=i.value;try{if(!sn(h(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bn(e,t){for(t&=~_o,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rn(t),r=1<<n;e[n]=-1,t&=~r}}function Vd(e){if((Ee&6)!==0)throw Error(o(327));er();var t=us(e,0);if((t&1)===0)return Nt(e,at()),null;var n=qs(e,t);if(e.tag!==0&&n===2){var r=Sa(e);r!==0&&(t=r,n=bo(e,r))}if(n===1)throw n=Ai,Zn(e,0),Bn(e,t),Nt(e,at()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$n(e,Ft,En),Nt(e,at()),null}function Wd(e){zn!==null&&zn.tag===0&&(Ee&6)===0&&er();var t=Ee;Ee|=1;var n=Je.transition,r=Le;try{if(Je.transition=null,Le=1,e)return e()}finally{Le=r,Je.transition=n,Ee=t,(Ee&6)===0&&fn()}}function Po(){jt=vr.current,ze(vr)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==oe&&(e.timeoutHandle=oe,ee(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Fa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ss();break;case 3:pr(),ze(Tt),ze(mt),Ha();break;case 5:Ua(r);break;case 4:pr();break;case 13:ze(qe);break;case 19:ze(qe);break;case 10:Da(r.type._context);break;case 22:case 23:Po()}n=n.return}if(lt=e,$e=e=Un(e.current,null),ht=jt=t,rt=0,Ai=null,_o=Bs=Jn=0,Ft=Li=null,Kn!==null){for(t=0;t<Kn.length;t++)if(n=Kn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,h=n.pending;if(h!==null){var D=h.next;h.next=i,r.next=D}n.pending=r}Kn=null}return e}function qd(e,t){do{var n=$e;try{if(Ia(),Ss.current=Ps,Cs){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cs=!1}if(Qn=0,ot=nt=Ye=null,bi=!1,ki=0,vo.current=null,n===null||n.return===null){rt=1,Ai=t,$e=null;break}e:{var h=e,D=n.return,Y=n,te=t;if(t=ht,Y.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var ue=te,_e=Y,Ce=_e.tag;if((_e.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var pe=_e.alternate;pe?(_e.updateQueue=pe.updateQueue,_e.memoizedState=pe.memoizedState,_e.lanes=pe.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var He=yd(D);if(He!==null){He.flags&=-257,vd(He,D,Y,h,t),He.mode&1&&md(h,ue,t),t=He,te=ue;var Ge=t.updateQueue;if(Ge===null){var Mt=new Set;Mt.add(te),t.updateQueue=Mt}else Ge.add(te);break e}else{if((t&1)===0){md(h,ue,t),To();break e}te=Error(o(426))}}else if(Ve&&Y.mode&1){var Rn=yd(D);if(Rn!==null){(Rn.flags&65536)===0&&(Rn.flags|=256),vd(Rn,D,Y,h,t),Aa(mr(te,Y));break e}}h=te=mr(te,Y),rt!==4&&(rt=2),Li===null?Li=[h]:Li.push(h),h=D;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var $=gd(h,te,t);Uu(h,$);break e;case 1:Y=te;var K=h.type,ie=h.stateNode;if((h.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(On===null||!On.has(ie)))){h.flags|=65536,t&=-t,h.lanes|=t;var me=pd(h,Y,t);Uu(h,me);break e}}h=h.return}while(h!==null)}Kd(n)}catch(xe){t=xe,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function Yd(){var e=Gs.current;return Gs.current=Ps,e===null?Ps:e}function To(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||(Jn&268435455)===0&&(Bs&268435455)===0||Bn(lt,ht)}function qs(e,t){var n=Ee;Ee|=2;var r=Yd();(lt!==e||ht!==t)&&(En=null,Zn(e,t));do try{Yf();break}catch(i){qd(e,i)}while(!0);if(Ia(),Ee=n,Gs.current=r,$e!==null)throw Error(o(261));return lt=null,ht=0,rt}function Yf(){for(;$e!==null;)Xd($e)}function Xf(){for(;$e!==null&&!xf();)Xd($e)}function Xd(e){var t=Zd(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?Kd(e):$e=t,vo.current=null}function Kd(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Bf(n,t,jt),n!==null){$e=n;return}}else{if(n=Uf(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,$e=null;return}}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);rt===0&&(rt=5)}function $n(e,t,n){var r=Le,i=Je.transition;try{Je.transition=null,Le=1,Kf(e,t,n,r)}finally{Je.transition=i,Le=r}return null}function Kf(e,t,n,r){do er();while(zn!==null);if((Ee&6)!==0)throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(_f(e,h),e===lt&&($e=lt=null,ht=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||js||(js=!0,$d(Ta,function(){return er(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=Je.transition,Je.transition=null;var D=Le;Le=1;var Y=Ee;Ee|=4,vo.current=null,Hf(e,n),Od(n,e),H(e.containerInfo),e.current=n,Vf(n),wf(),Ee=Y,Le=D,Je.transition=h}else e.current=n;if(js&&(js=!1,zn=e,Hs=i),h=e.pendingLanes,h===0&&(On=null),bf(n.stateNode),Nt(e,at()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Us)throw Us=!1,e=So,So=null,e;return(Hs&1)!==0&&e.tag!==0&&er(),h=e.pendingLanes,(h&1)!==0?e===Co?Ii++:(Ii=0,Co=e):Ii=0,fn(),null}function er(){if(zn!==null){var e=Tu(Hs),t=Je.transition,n=Le;try{if(Je.transition=null,Le=16>e?16:e,zn===null)var r=!1;else{if(e=zn,zn=null,Hs=0,(Ee&6)!==0)throw Error(o(331));var i=Ee;for(Ee|=4,ye=e.current;ye!==null;){var h=ye,D=h.child;if((ye.flags&16)!==0){var Y=h.deletions;if(Y!==null){for(var te=0;te<Y.length;te++){var ue=Y[te];for(ye=ue;ye!==null;){var _e=ye;switch(_e.tag){case 0:case 11:case 15:Ni(8,_e,h)}var Ce=_e.child;if(Ce!==null)Ce.return=_e,ye=Ce;else for(;ye!==null;){_e=ye;var pe=_e.sibling,He=_e.return;if(Ad(_e),_e===ue){ye=null;break}if(pe!==null){pe.return=He,ye=pe;break}ye=He}}}var Ge=h.alternate;if(Ge!==null){var Mt=Ge.child;if(Mt!==null){Ge.child=null;do{var Rn=Mt.sibling;Mt.sibling=null,Mt=Rn}while(Mt!==null)}}ye=h}}if((h.subtreeFlags&2064)!==0&&D!==null)D.return=h,ye=D;else e:for(;ye!==null;){if(h=ye,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Ni(9,h,h.return)}var $=h.sibling;if($!==null){$.return=h.return,ye=$;break e}ye=h.return}}var K=e.current;for(ye=K;ye!==null;){D=ye;var ie=D.child;if((D.subtreeFlags&2064)!==0&&ie!==null)ie.return=D,ye=ie;else e:for(D=K;ye!==null;){if(Y=ye,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:As(9,Y)}}catch(xe){We(Y,Y.return,xe)}if(Y===D){ye=null;break e}var me=Y.sibling;if(me!==null){me.return=Y.return,ye=me;break e}ye=Y.return}}if(Ee=i,fn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ds,e)}catch{}r=!0}return r}finally{Le=n,Je.transition=t}}return!1}function Qd(e,t,n){t=mr(n,t),t=gd(e,t,1),e=Dn(e,t,1),t=xt(),e!==null&&(_i(e,1,t),Nt(e,t))}function We(e,t,n){if(e.tag===3)Qd(e,e,n);else for(;t!==null;){if(t.tag===3){Qd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){e=mr(n,e),e=pd(t,e,1),t=Dn(t,e,1),e=xt(),t!==null&&(_i(t,1,e),Nt(t,e));break}}t=t.return}}function Qf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(ht&n)===n&&(rt===4||rt===3&&(ht&130023424)===ht&&500>at()-xo?Zn(e,0):_o|=n),Nt(e,t)}function Jd(e,t){t===0&&((e.mode&1)===0?t=1:(t=ls,ls<<=1,(ls&130023424)===0&&(ls=4194304)));var n=xt();e=gn(e,t),e!==null&&(_i(e,t,n),Nt(e,n))}function Jf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Jd(e,n)}function Zf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}r!==null&&r.delete(t),Jd(e,n)}var Zd;Zd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)Rt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Rt=!1,Gf(e,t,n);Rt=(e.flags&131072)!==0}else Rt=!1,Ve&&(t.flags&1048576)!==0&&Fu(t,fs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Rs(e,t),e=t.pendingProps;var i=or(t,mt.current);fr(t,n),i=qa(null,t,r,e,i,n);var h=Ya();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(r)?(h=!0,as(t)):h=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ga(t),i.updater=Ts,t.stateNode=i,i._reactInternals=t,$a(t,r,e,n),t=ro(null,t,r,!0,h,n)):(t.tag=0,Ve&&h&&Ra(t),bt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Rs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=e0(r),e=on(r,e),i){case 0:t=no(null,t,r,e,n);break e;case 1:t=bd(null,t,r,e,n);break e;case 11:t=_d(null,t,r,e,n);break e;case 14:t=xd(null,t,r,on(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),no(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),bd(e,t,r,i,n);case 3:e:{if(kd(t),e===null)throw Error(o(387));r=t.pendingProps,h=t.memoizedState,i=h.element,Bu(e,t),xs(t,r,null,n);var D=t.memoizedState;if(r=D.element,we&&h.isDehydrated)if(h={element:r,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){i=mr(Error(o(423)),t),t=Pd(e,t,r,n,i);break e}else if(r!==i){i=mr(Error(o(424)),t),t=Pd(e,t,r,n,i);break e}else for(we&&(Kt=rs(t.stateNode.containerInfo),Ut=t,Ve=!0,an=null,xi=!1),n=Ou(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dr(),r===i){t=Tn(e,t,n);break e}bt(e,t,r,n)}t=t.child}return t;case 5:return Hu(t),e===null&&Ma(t),r=t.type,i=t.pendingProps,h=e!==null?e.memoizedProps:null,D=i.children,de(r,i)?D=null:h!==null&&de(r,h)&&(t.flags|=32),Cd(e,t),bt(e,t,D,n),t.child;case 6:return e===null&&Ma(t),null;case 13:return Td(e,t,n);case 4:return Ba(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cr(t,null,r,n):bt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),_d(e,t,r,i,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,h=t.memoizedProps,D=i.value,zu(t,r,D),h!==null)if(sn(h.value,D)){if(h.children===i.children&&!Tt.current){t=Tn(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var Y=h.dependencies;if(Y!==null){D=h.child;for(var te=Y.firstContext;te!==null;){if(te.context===r){if(h.tag===1){te=Pn(-1,n&-n),te.tag=2;var ue=h.updateQueue;if(ue!==null){ue=ue.shared;var _e=ue.pending;_e===null?te.next=te:(te.next=_e.next,_e.next=te),ue.pending=te}}h.lanes|=n,te=h.alternate,te!==null&&(te.lanes|=n),Oa(h.return,n,t),Y.lanes|=n;break}te=te.next}}else if(h.tag===10)D=h.type===t.type?null:h.child;else if(h.tag===18){if(D=h.return,D===null)throw Error(o(341));D.lanes|=n,Y=D.alternate,Y!==null&&(Y.lanes|=n),Oa(D,n,t),D=h.sibling}else D=h.child;if(D!==null)D.return=h;else for(D=h;D!==null;){if(D===t){D=null;break}if(h=D.sibling,h!==null){h.return=D.return,D=h;break}D=D.return}h=D}bt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fr(t,n),i=Qt(i),r=r(i),t.flags|=1,bt(e,t,r,n),t.child;case 14:return r=t.type,i=on(r,t.pendingProps),i=on(r.type,i),xd(e,t,r,i,n);case 15:return wd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),Rs(e,t),t.tag=1,Et(r)?(e=!0,as(t)):e=!1,fr(t,n),hd(t,r,i),$a(t,r,i,n),ro(null,t,r,!0,e,n);case 19:return Rd(e,t,n);case 22:return Sd(e,t,n)}throw Error(o(156,t.tag))};function $d(e,t){return ka(e,t)}function $f(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,r){return new $f(e,t,n,r)}function Eo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function e0(e){if(typeof e=="function")return Eo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===C)return 11;if(e===u)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ys(e,t,n,r,i,h){var D=2;if(r=e,typeof e=="function")Eo(e)&&(D=1);else if(typeof e=="string")D=5;else e:switch(e){case w:return tr(n.children,i,h,t);case P:D=8,i|=8;break;case S:return e=en(12,n,t,i|2),e.elementType=S,e.lanes=h,e;case b:return e=en(13,n,t,i),e.elementType=b,e.lanes=h,e;case I:return e=en(19,n,t,i),e.elementType=I,e.lanes=h,e;case g:return Xs(n,i,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p:D=10;break e;case d:D=9;break e;case C:D=11;break e;case u:D=14;break e;case a:D=16,r=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=en(D,n,t,i),t.elementType=e,t.type=r,t.lanes=h,t}function tr(e,t,n,r){return e=en(7,e,r,t),e.lanes=n,e}function Xs(e,t,n,r){return e=en(22,e,r,t),e.elementType=g,e.lanes=n,e.stateNode={isHidden:!1},e}function Ro(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function Fo(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function t0(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ca(0),this.expirationTimes=Ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ca(0),this.identifierPrefix=r,this.onRecoverableError=i,we&&(this.mutableSourceEagerHydrationData=null)}function ec(e,t,n,r,i,h,D,Y,te){return e=new t0(e,t,n,Y,te),t===1?(t=1,h===!0&&(t|=8)):t=0,h=en(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ga(h),e}function tc(e){if(!e)return Ln;e=e._reactInternals;e:{if(N(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if(Et(n))return bu(e,n,t)}return t}function nc(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=V(t),e===null?null:e.stateNode}function rc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ks(e,t){rc(e,t),(e=e.alternate)&&rc(e,t)}function n0(e){return e=V(e),e===null?null:e.stateNode}function r0(){return null}return A.attemptContinuousHydration=function(e){if(e.tag===13){var t=gn(e,134217728);if(t!==null){var n=xt();$t(t,e,134217728,n)}Ks(e,134217728)}},A.attemptDiscreteHydration=function(e){if(e.tag===13){var t=gn(e,1);if(t!==null){var n=xt();$t(t,e,1,n)}Ks(e,1)}},A.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=Gn(e),n=gn(e,t);if(n!==null){var r=xt();$t(n,e,t,r)}Ks(e,t)}},A.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vi(t.pendingLanes);n!==0&&(ba(t,n|1),Nt(t,at()),(Ee&6)===0&&(_r(),fn()))}break;case 13:Wd(function(){var r=gn(e,1);if(r!==null){var i=xt();$t(r,e,1,i)}}),Ks(e,1)}},A.batchedUpdates=function(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(_r(),cs&&fn())}},A.createComponentSelector=function(e){return{$$typeof:Ls,value:e}},A.createContainer=function(e,t,n,r,i,h,D){return ec(e,t,!1,null,n,r,i,h,D)},A.createHasPseudoClassSelector=function(e){return{$$typeof:Is,value:e}},A.createHydrationContainer=function(e,t,n,r,i,h,D,Y,te){return e=ec(n,r,!0,e,i,h,D,Y,te),e.context=tc(null),n=e.current,r=xt(),i=Gn(n),h=Pn(r,i),h.callback=t??null,Dn(n,h,i),e.current.lanes=i,_i(e,i,r),Nt(e,r),e},A.createPortal=function(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}},A.createRoleSelector=function(e){return{$$typeof:Ds,value:e}},A.createTestNameSelector=function(e){return{$$typeof:Os,value:e}},A.createTextSelector=function(e){return{$$typeof:zs,value:e}},A.deferredUpdates=function(e){var t=Le,n=Je.transition;try{return Je.transition=null,Le=16,e()}finally{Le=t,Je.transition=n}},A.discreteUpdates=function(e,t,n,r,i){var h=Le,D=Je.transition;try{return Je.transition=null,Le=1,e(t,n,r,i)}finally{Le=h,Je.transition=D,Ee===0&&_r()}},A.findAllNodes=yo,A.findBoundingRects=function(e,t){if(!Qe)throw Error(o(363));t=yo(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Be(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,i=r+n.width,h=n.y,D=h+n.height,Y=t-1;0<=Y;Y--)if(t!==Y){var te=e[Y],ue=te.x,_e=ue+te.width,Ce=te.y,pe=Ce+te.height;if(r>=ue&&h>=Ce&&i<=_e&&D<=pe){e.splice(t,1);break}else if(r!==ue||n.width!==te.width||pe<h||Ce>D){if(!(h!==Ce||n.height!==te.height||_e<r||ue>i)){ue>r&&(te.width+=ue-r,te.x=r),_e<i&&(te.width=i-ue),e.splice(t,1);break}}else{Ce>h&&(te.height+=Ce-h,te.y=h),pe<D&&(te.height=D-Ce),e.splice(t,1);break}}}return e},A.findHostInstance=nc,A.findHostInstanceWithNoPortals=function(e){return e=z(e),e=e!==null?R(e):null,e===null?null:e.stateNode},A.findHostInstanceWithWarning=function(e){return nc(e)},A.flushControlled=function(e){var t=Ee;Ee|=1;var n=Je.transition,r=Le;try{Je.transition=null,Le=1,e()}finally{Le=r,Je.transition=n,Ee=t,Ee===0&&(_r(),fn())}},A.flushPassiveEffects=er,A.flushSync=Wd,A.focusWithin=function(e,t){if(!Qe)throw Error(o(363));for(e=go(e),t=jd(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!et(n)){if(n.tag===5&&tt(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},A.getCurrentUpdatePriority=function(){return Le},A.getFindAllNodesFailureDescription=function(e,t){if(!Qe)throw Error(o(363));var n=0,r=[];e=[go(e),0];for(var i=0;i<e.length;){var h=e[i++],D=e[i++],Y=t[D];if((h.tag!==5||!et(h))&&(po(h,Y)&&(r.push(mo(Y)),D++,D>n&&(n=D)),D<t.length))for(h=h.child;h!==null;)e.push(h,D),h=h.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(mo(t[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},A.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return G(e.child.stateNode);default:return e.child.stateNode}},A.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:n0,findFiberByHostInstance:e.findFiberByHostInstance||r0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{ds=t.inject(e),hn=t}catch{}e=!!t.checkDCE}}return e},A.isAlreadyRendering=function(){return!1},A.observeVisibleRects=function(e,t,n,r){if(!Qe)throw Error(o(363));e=yo(e,t);var i=Dt(e,n,r).disconnect;return{disconnect:function(){i()}}},A.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},A.runWithPriority=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}},A.shouldError=function(){return null},A.shouldSuspend=function(){return!1},A.updateContainer=function(e,t,n,r){var i=t.current,h=xt(),D=Gn(i);return n=tc(n),t.context===null?t.context=n:t.pendingContext=n,t=Pn(h,D),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Dn(i,t,D),e!==null&&($t(e,i,D,h),_s(e,i,D)),D},A}),pa}var Ql;function Zc(){return Ql||(Ql=1,ha.exports=Jc()),ha.exports}var $c=Zc();const eh=Di($c);var ma={exports:{}},Nn={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl;function th(){return Jl||(Jl=1,Nn.ConcurrentRoot=1,Nn.ContinuousEventPriority=4,Nn.DefaultEventPriority=16,Nn.DiscreteEventPriority=1,Nn.IdleEventPriority=536870912,Nn.LegacyRoot=0),Nn}var Zl;function nh(){return Zl||(Zl=1,ma.exports=th()),ma.exports}var $l=nh(),rh=Te();const eu={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let tu=!1,nu=!1;const ya=".react-konva-event",ih=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,sh=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,ah={};function ji(s,f,A=ah){if(!tu&&"zIndex"in f&&(console.warn(sh),tu=!0),!nu&&f.draggable){var L=f.x!==void 0||f.y!==void 0,M=f.onDragEnd||f.onDragMove;L&&!M&&(console.warn(ih),nu=!0)}for(var _ in A)if(!eu[_]){var o=_.slice(0,2)==="on",c=A[_]!==f[_];if(o&&c){var m=_.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),s.off(m,A[_])}var y=!f.hasOwnProperty(_);y&&s.setAttr(_,void 0)}var w=f._useStrictMode,P={},S=!1;const p={};for(var _ in f)if(!eu[_]){var o=_.slice(0,2)==="on",d=A[_]!==f[_];if(o&&d){var m=_.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),f[_]&&(p[m]=f[_])}!o&&(f[_]!==A[_]||w&&f[_]!==s.getAttr(_))&&(S=!0,P[_]=f[_])}S&&(s.setAttrs(P),Mn(s));for(var m in p)s.on(m+ya,p[m])}function Mn(s){if(!rh.Konva.autoDrawEnabled){var f=s.getLayer()||s.getStage();f&&f.batchDraw()}}var va=Xl();const ru={},oh={};ui.Node.prototype._applyProps=ji;function lh(s,f){if(typeof f=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${f}`);return}s.add(f),Mn(s)}function uh(s,f,A){let L=ui[s];L||(console.error(`Konva has no node with the type ${s}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${s}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),L=ui.Group);const M={},_={};for(var o in f){var c=o.slice(0,2)==="on";c?_[o]=f[o]:M[o]=f[o]}const m=new L(M);return ji(m,_),m}function dh(s,f,A){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${s}"`)}function ch(s,f,A){return!1}function hh(s){return s}function fh(){return null}function gh(){return null}function ph(s,f,A,L){return oh}function mh(){}function yh(s){}function vh(s,f){return!1}function _h(){return ru}function xh(){return ru}const wh=setTimeout,Sh=clearTimeout,Ch=-1;function bh(s,f){return!1}const kh=!1,Ph=!0,Th=!0;function Eh(s,f){f.parent===s?f.moveToTop():s.add(f),Mn(s)}function Rh(s,f){f.parent===s?f.moveToTop():s.add(f),Mn(s)}function iu(s,f,A){f._remove(),s.add(f),f.setZIndex(A.getZIndex()),Mn(s)}function Fh(s,f,A){iu(s,f,A)}function Nh(s,f){f.destroy(),f.off(ya),Mn(s)}function Mh(s,f){f.destroy(),f.off(ya),Mn(s)}function Ah(s,f,A){console.error(`Text components are not yet supported in ReactKonva. You text is: "${A}"`)}function Lh(s,f,A){}function Ih(s,f,A,L,M){ji(s,M,L)}function Dh(s){s.hide(),Mn(s)}function Oh(s){}function zh(s,f){(f.visible==null||f.visible)&&s.show()}function Gh(s,f){}function Bh(s){}function Uh(){}const jh=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Eh,appendChildToContainer:Rh,appendInitialChild:lh,cancelTimeout:Sh,clearContainer:Bh,commitMount:Lh,commitTextUpdate:Ah,commitUpdate:Ih,createInstance:uh,createTextInstance:dh,detachDeletedInstance:Uh,finalizeInitialChildren:ch,getChildHostContext:xh,getCurrentEventPriority:()=>$l.DefaultEventPriority,getPublicInstance:hh,getRootHostContext:_h,hideInstance:Dh,hideTextInstance:Oh,idlePriority:va.unstable_IdlePriority,insertBefore:iu,insertInContainerBefore:Fh,isPrimaryRenderer:kh,noTimeout:Ch,now:va.unstable_now,prepareForCommit:fh,preparePortalMount:gh,prepareUpdate:ph,removeChild:Nh,removeChildFromContainer:Mh,resetAfterCommit:mh,resetTextContent:yh,run:va.unstable_runWithPriority,scheduleTimeout:wh,shouldDeprioritizeSubtree:vh,shouldSetTextContent:bh,supportsMutation:Th,unhideInstance:zh,unhideTextInstance:Gh,warnsIfNotActing:Ph},Symbol.toStringTag,{value:"Module"}));var Hh=Object.defineProperty,Vh=Object.defineProperties,Wh=Object.getOwnPropertyDescriptors,su=Object.getOwnPropertySymbols,qh=Object.prototype.hasOwnProperty,Yh=Object.prototype.propertyIsEnumerable,au=(s,f,A)=>f in s?Hh(s,f,{enumerable:!0,configurable:!0,writable:!0,value:A}):s[f]=A,ou=(s,f)=>{for(var A in f||(f={}))qh.call(f,A)&&au(s,A,f[A]);if(su)for(var A of su(f))Yh.call(f,A)&&au(s,A,f[A]);return s},Xh=(s,f)=>Vh(s,Wh(f)),lu,uu;typeof window<"u"&&((lu=window.document)!=null&&lu.createElement||((uu=window.navigator)==null?void 0:uu.product)==="ReactNative")?kt.useLayoutEffect:kt.useEffect;function du(s,f,A){if(!s)return;if(A(s)===!0)return s;let L=s.child;for(;L;){const M=du(L,f,A);if(M)return M;L=L.sibling}}function cu(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const hu=console.error;console.error=function(){const s=[...arguments].join("");if(s!=null&&s.startsWith("Warning:")&&s.includes("useContext")){console.error=hu;return}return hu.apply(this,arguments)};const _a=cu(kt.createContext(null));class fu extends kt.Component{render(){return kt.createElement(_a.Provider,{value:this._reactInternals},this.props.children)}}function Kh(){const s=kt.useContext(_a);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const f=kt.useId();return kt.useMemo(()=>{for(const L of[s,s==null?void 0:s.alternate]){if(!L)continue;const M=du(L,!1,_=>{let o=_.memoizedState;for(;o;){if(o.memoizedState===f)return!0;o=o.next}});if(M)return M}},[s,f])}function Qh(){const s=Kh(),[f]=kt.useState(()=>new Map);f.clear();let A=s;for(;A;){if(A.type&&typeof A.type=="object"){const M=A.type._context===void 0&&A.type.Provider===A.type?A.type:A.type._context;M&&M!==_a&&!f.has(M)&&f.set(M,kt.useContext(cu(M)))}A=A.return}return f}function Jh(){const s=Qh();return kt.useMemo(()=>Array.from(s.keys()).reduce((f,A)=>L=>kt.createElement(f,null,kt.createElement(A.Provider,Xh(ou({},L),{value:s.get(A)}))),f=>kt.createElement(fu,ou({},f))),[s])}function Zh(s){const f=he.useRef({});return he.useLayoutEffect(()=>{f.current=s}),he.useLayoutEffect(()=>()=>{f.current={}},[]),f.current}const $h=s=>{const f=he.useRef(),A=he.useRef(),L=he.useRef(),M=Zh(s),_=Jh(),o=c=>{const{forwardedRef:m}=s;m&&(typeof m=="function"?m(c):m.current=c)};return he.useLayoutEffect(()=>(A.current=new ui.Stage({width:s.width,height:s.height,container:f.current}),o(A.current),L.current=di.createContainer(A.current,$l.LegacyRoot,!1,null),di.updateContainer(he.createElement(_,{},s.children),L.current),()=>{ui.isBrowser&&(o(null),di.updateContainer(null,L.current,null),A.current.destroy())}),[]),he.useLayoutEffect(()=>{o(A.current),ji(A.current,s,M),di.updateContainer(he.createElement(_,{},s.children),L.current,null)}),he.createElement("div",{ref:f,id:s.id,accessKey:s.accessKey,className:s.className,role:s.role,style:s.style,tabIndex:s.tabIndex,title:s.title})},ef="Layer",gu="Group",pu="Rect",mu="Image",yu="Text",tf="TextPath",nf="Transformer",di=eh(jh);di.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:he.version,rendererPackageName:"react-konva"});const rf=he.forwardRef((s,f)=>he.createElement(fu,{},he.createElement($h,{...s,forwardedRef:f})));var xa,vu;function sf(){if(vu)return xa;vu=1;var s=he;return xa=function(A,L,M){const _=s.useRef("loading"),o=s.useRef(),[c,m]=s.useState(0),y=s.useRef(),w=s.useRef(),P=s.useRef();return(y.current!==A||w.current!==L||P.current!==M)&&(_.current="loading",o.current=void 0,y.current=A,w.current=L,P.current=M),s.useLayoutEffect(function(){if(!A)return;var S=document.createElement("img");function p(){S.decode().catch(()=>{}).finally(()=>{_.current="loaded",o.current=S,m(Math.random())})}function d(){_.current="failed",o.current=void 0,m(Math.random())}return S.addEventListener("load",p),S.addEventListener("error",d),L&&(S.crossOrigin=L),M&&(S.referrerPolicy=M),S.src=A,function(){S.removeEventListener("load",p),S.removeEventListener("error",d)}},[A,L,M]),[o.current,_.current]},xa}var af=sf();const _u=Di(af),dn=[{id:"arial",family:"Arial",displayName:"Arial",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/arial/arial-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/arial/arial-bold.woff2"}},fallback:"sans-serif"},{id:"roboto",family:"Roboto",displayName:"Roboto",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/roboto/roboto-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/roboto/roboto-bold.woff2"}},fallback:"sans-serif"},{id:"open-sans",family:"Open Sans",displayName:"Open Sans",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/open-sans/open-sans-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/open-sans/open-sans-bold.woff2"}},fallback:"sans-serif"},{id:"lato",family:"Lato",displayName:"Lato",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/lato/lato-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/lato/lato-bold.woff2"}},fallback:"sans-serif"},{id:"montserrat",family:"Montserrat",displayName:"Montserrat",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/montserrat/montserrat-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/montserrat/montserrat-bold.woff2"}},fallback:"sans-serif"},{id:"raleway",family:"Raleway",displayName:"Raleway",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/raleway/raleway-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/raleway/raleway-bold.woff2"}},fallback:"sans-serif"},{id:"poppins",family:"Poppins",displayName:"Poppins",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/poppins/poppins-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/poppins/poppins-bold.woff2"}},fallback:"sans-serif"},{id:"archivo",family:"Archivo",displayName:"Archivo",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/archivo/archivo-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/archivo/archivo-bold.woff2"}},fallback:"sans-serif"},{id:"archivo-narrow",family:"Archivo Narrow",displayName:"Archivo Narrow",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/archivo-narrow/archivo-narrow-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/archivo-narrow/archivo-narrow-bold.woff2"}},fallback:"sans-serif"},{id:"barlow-semi-condensed",family:"Barlow Semi Condensed",displayName:"Barlow Semi Condensed",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/barlow-semi-condensed/barlow-semi-condensed-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/barlow-semi-condensed/barlow-semi-condensed-bold.woff2"}},fallback:"sans-serif"},{id:"alumni-sans",family:"Alumni Sans",displayName:"Alumni Sans",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/alumni-sans/alumni-sans-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/alumni-sans/alumni-sans-bold.woff2"}},fallback:"sans-serif"},{id:"arimo",family:"Arimo",displayName:"Arimo",category:"sans-serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/arimo/arimo-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/arimo/arimo-bold.woff2"}},fallback:"sans-serif"},{id:"times-new-roman",family:"Times New Roman",displayName:"Times New Roman",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/times-new-roman/times-new-roman-regular.woff2"}},fallback:"serif"},{id:"georgia",family:"Georgia",displayName:"Georgia",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/georgia/georgia-regular.woff2"}},fallback:"serif"},{id:"playfair-display",family:"Playfair Display",displayName:"Playfair Display",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/playfair-display/playfair-display-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/playfair-display/playfair-display-bold.woff2"}},fallback:"serif"},{id:"merriweather",family:"Merriweather",displayName:"Merriweather",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/merriweather/merriweather-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/merriweather/merriweather-bold.woff2"}},fallback:"serif"},{id:"lora",family:"Lora",displayName:"Lora",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/lora/lora-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/lora/lora-bold.woff2"}},fallback:"serif"},{id:"abril-fatface",family:"Abril Fatface",displayName:"Abril Fatface",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/abril-fatface/abril-fatface-regular.woff2"}},fallback:"serif"},{id:"antic-slab",family:"Antic Slab",displayName:"Antic Slab",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/antic-slab/antic-slab-regular.woff2"}},fallback:"serif"},{id:"bellota",family:"Bellota",displayName:"Bellota",category:"serif",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/bellota/bellota-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/bellota/bellota-bold.woff2"}},fallback:"serif"},{id:"bebas-neue",family:"Bebas Neue",displayName:"Bebas Neue",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/bebas-neue/bebas-neue-regular.woff2"}},fallback:"sans-serif"},{id:"oswald",family:"Oswald",displayName:"Oswald",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/oswald/oswald-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/oswald/oswald-bold.woff2"}},fallback:"sans-serif"},{id:"anton",family:"Anton",displayName:"Anton",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/anton/anton-regular.woff2"}},fallback:"sans-serif"},{id:"righteous",family:"Righteous",displayName:"Righteous",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/righteous/righteous-regular.woff2"}},fallback:"sans-serif"},{id:"bowlby-one",family:"Bowlby One",displayName:"Bowlby One",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/bowlby-one/bowlby-one-regular.woff2"}},fallback:"sans-serif"},{id:"boogaloo",family:"Boogaloo",displayName:"Boogaloo",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/boogaloo/boogaloo-regular.woff2"}},fallback:"sans-serif"},{id:"fredoka-one",family:"Fredoka One",displayName:"Fredoka One",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/fredoka-one/fredoka-one-regular.woff2"}},fallback:"sans-serif"},{id:"pacifico",family:"Pacifico",displayName:"Pacifico",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/pacifico/pacifico-regular.woff2"}},fallback:"cursive"},{id:"lobster",family:"Lobster",displayName:"Lobster",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/lobster/lobster-regular.woff2"}},fallback:"cursive"},{id:"amaranth",family:"Amaranth",displayName:"Amaranth",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/amaranth/amaranth-regular.woff2"}},fallback:"sans-serif"},{id:"bevan",family:"Bevan",displayName:"Bevan",category:"display",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/bevan/bevan-regular.woff2"}},fallback:"serif"},{id:"alex-brush",family:"Alex Brush",displayName:"Alex Brush",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/alex-brush/alex-brush-regular.woff2"}},fallback:"cursive"},{id:"allison",family:"Allison",displayName:"Allison",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/allison/allison-regular.woff2"}},fallback:"cursive"},{id:"dancing-script",family:"Dancing Script",displayName:"Dancing Script",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/dancing-script/dancing-script-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/dancing-script/dancing-script-bold.woff2"}},fallback:"cursive"},{id:"great-vibes",family:"Great Vibes",displayName:"Great Vibes",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/great-vibes/great-vibes-regular.woff2"}},fallback:"cursive"},{id:"parisienne",family:"Parisienne",displayName:"Parisienne",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/parisienne/parisienne-regular.woff2"}},fallback:"cursive"},{id:"sacramento",family:"Sacramento",displayName:"Sacramento",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/sacramento/sacramento-regular.woff2"}},fallback:"cursive"},{id:"caveat",family:"Caveat",displayName:"Caveat",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/caveat/caveat-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/caveat/caveat-bold.woff2"}},fallback:"cursive"},{id:"kalam",family:"Kalam",displayName:"Kalam",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/kalam/kalam-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/kalam/kalam-bold.woff2"}},fallback:"cursive"},{id:"satisfy",family:"Satisfy",displayName:"Satisfy",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/satisfy/satisfy-regular.woff2"}},fallback:"cursive"},{id:"amatic-sc",family:"Amatic SC",displayName:"Amatic SC",category:"script",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/amatic-sc/amatic-sc-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/amatic-sc/amatic-sc-bold.woff2"}},fallback:"cursive"},{id:"courier-new",family:"Courier New",displayName:"Courier New",category:"monospace",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/courier-new/courier-new-regular.woff2"}},fallback:"monospace"},{id:"roboto-mono",family:"Roboto Mono",displayName:"Roboto Mono",category:"monospace",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/roboto-mono/roboto-mono-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/roboto-mono/roboto-mono-bold.woff2"}},fallback:"monospace"},{id:"source-code-pro",family:"Source Code Pro",displayName:"Source Code Pro",category:"monospace",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/source-code-pro/source-code-pro-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/source-code-pro/source-code-pro-bold.woff2"}},fallback:"monospace"},{id:"ibm-plex-mono",family:"IBM Plex Mono",displayName:"IBM Plex Mono",category:"monospace",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/ibm-plex-mono/ibm-plex-mono-regular.woff2"},700:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/ibm-plex-mono/ibm-plex-mono-bold.woff2"}},fallback:"monospace"},{id:"jetbrains-mono",family:"JetBrains Mono",displayName:"JetBrains Mono",category:"monospace",weights:{400:{style:"normal",url:"https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/jetbrains-mono/jetbrains-mono-regular.woff2"}},fallback:"monospace"}].map(s=>({...s,previewUrl:`https://shopify-designs.s3.us-west-1.amazonaws.com/fonts/${s.id}/preview.png?v=3`}));function of(s){return dn.filter(f=>f.category===s)}const xu=dn[0],Vn=class Vn{constructor(){Qs(this,"loadedFonts",new Set);Qs(this,"loadingFonts",new Map);["Arial","Times New Roman","Georgia","Courier New"].forEach(A=>{this.loadedFonts.add(`${A}-400`),this.loadedFonts.add(`${A}-700`)})}static getInstance(){return Vn.instance||(Vn.instance=new Vn),Vn.instance}async loadFont(f,A=400){const L=`${f.family}-${A}`;if(this.loadedFonts.has(L))return Promise.resolve();if(this.loadingFonts.has(L))return this.loadingFonts.get(L);if(["Arial","Times New Roman","Georgia","Courier New"].includes(f.family))return this.loadedFonts.add(L),Promise.resolve();const _=f.weights[A];if(!_)return console.warn(`Weight ${A} not available for ${f.family}`),Promise.resolve();const o=this.loadFontFace(f,A,_);this.loadingFonts.set(L,o);try{await o,this.loadedFonts.add(L)}finally{this.loadingFonts.delete(L)}}async loadFontFace(f,A,L){try{if(typeof FontFace>"u"){this.injectFontFace(f,A,L);return}const M=new FontFace(f.family,`url(${L.url})`,{weight:A.toString(),style:L.style,display:"swap"});await M.load(),document.fonts.add(M),await document.fonts.ready}catch(M){console.error(`Failed to load font ${f.family}:`,M),this.injectFontFace(f,A,L)}}injectFontFace(f,A,L){const M=`font-${f.id}-${A}`;if(document.getElementById(M))return;const _=document.createElement("style");_.id=M,_.textContent=`
      @font-face {
        font-family: '${f.family}';
        src: url('${L.url}') format('woff2');
        font-weight: ${A};
        font-style: ${L.style};
        font-display: swap;
      }
    `,document.head.appendChild(_)}async preloadFonts(f){const A=f.map(L=>{const M=dn.find(_=>_.id===L);if(M){const _=Object.keys(M.weights).map(o=>parseInt(o));return Promise.all(_.map(o=>this.loadFont(M,o)))}return Promise.resolve()});await Promise.all(A)}isFontLoaded(f,A=400){return this.loadedFonts.has(`${f}-${A}`)}getLoadedFonts(){return Array.from(this.loadedFonts)}async preloadAllFonts(){console.log("Preloading all fonts...");const f=dn.map(A=>{const L=Object.keys(A.weights).map(M=>parseInt(M));return Promise.all(L.map(M=>this.loadFont(A,M)))});await Promise.all(f),console.log(`All ${dn.length} fonts loaded!`)}async loadFontByFamily(f,A=400){const L=dn.find(M=>M.family===f);L?await this.loadFont(L,A):console.warn(`Font family "${f}" not found in curated fonts`)}};Qs(Vn,"instance");let Hi=Vn;const ci=Hi.getInstance(),wa=Hi.getInstance(),lf=[{id:"all",label:"All Fonts"},{id:"sans-serif",label:"Sans Serif"},{id:"serif",label:"Serif"},{id:"display",label:"Display"},{id:"script",label:"Script"},{id:"monospace",label:"Monospace"}],uf="The quick brown fox jumps over the lazy dog",wu="designer-recent-fonts",Su=8;function df({isOpen:s,onClose:f,onSelectFont:A,currentFont:L,previewText:M=uf}){const[_,o]=he.useState(""),[c,m]=he.useState("all"),[y,w]=he.useState([]),[P,S]=he.useState(new Set),[p,d]=he.useState(new Set),[C,b]=he.useState(new Set),I=he.useRef(null),u=he.useRef(new Map);he.useRef([]),he.useRef(!1),he.useEffect(()=>{const O=localStorage.getItem(wu);if(O)try{w(JSON.parse(O))}catch(v){console.error("Failed to load recent fonts:",v)}},[]),he.useEffect(()=>{if(!s)return;const O=new IntersectionObserver(v=>{v.forEach(N=>{if(N.isIntersecting){const E=N.target.getAttribute("data-font-id");E&&d(z=>z.has(E)?z:(console.log("Font becoming visible:",E),new Set(z).add(E)))}})},{root:null,rootMargin:"50px",threshold:.1});return I.current=O,setTimeout(()=>{let v=0;u.current.forEach((N,E)=>{if(v>=5)return;const z=N.getBoundingClientRect();z.top<window.innerHeight&&z.bottom>0&&(console.log("Font initially in viewport:",E),d(l=>new Set(l).add(E)),v++)})},100),()=>{O.disconnect(),u.current.clear(),d(new Set)}},[s]);const a=he.useMemo(()=>dn.filter(O=>{if(c!=="all"&&O.category!==c)return!1;if(_){const v=_.toLowerCase();return O.displayName.toLowerCase().includes(v)||O.family.toLowerCase().includes(v)}return!0}),[_,c]),g=he.useMemo(()=>y.map(O=>dn.find(v=>v.family===O)).filter(O=>O!==void 0).slice(0,Su),[y]),T=async O=>{S(v=>new Set(v).add(O.id));try{await wa.loadFont(O);const v=[O.family,...y.filter(N=>N!==O.family)].slice(0,Su);w(v),localStorage.setItem(wu,JSON.stringify(v)),A(O.family),f()}catch(v){console.error("Failed to load font:",v)}finally{S(v=>{const N=new Set(v);return N.delete(O.id),N})}},F=({font:O,isRecent:v=!1})=>{const N=v||p.has(O.id),E=P.has(O.id),z=O.family===L,V=C.has(O.id)||wa.isFontLoaded(O.family);return he.useEffect(()=>{N&&!V&&!E&&(console.log(`Loading font: ${O.family}`),S(l=>new Set(l).add(O.id)),wa.loadFont(O).then(()=>{console.log(`Font loaded: ${O.family}`),S(l=>{const R=new Set(l);return R.delete(O.id),R}),b(l=>new Set(l).add(O.id))}).catch(l=>{console.error(`Failed to load font ${O.family}:`,l),S(R=>{const k=new Set(R);return k.delete(O.id),k})}))},[N,V,E,O]),J.jsxs("div",{ref:l=>{if(l&&!v)u.current.has(O.id)||(u.current.set(O.id,l),I.current&&I.current.observe(l));else if(!l&&!v&&u.current.has(O.id)){const R=u.current.get(O.id);R&&I.current&&I.current.unobserve(R),u.current.delete(O.id)}},"data-font-id":O.id,onClick:()=>!E&&T(O),style:{padding:"12px 16px",borderRadius:"6px",cursor:E?"wait":"pointer",backgroundColor:z?"#e3f2fd":"transparent",border:z?"2px solid #0066ff":"1px solid #e0e0e0",transition:"all 0.2s",opacity:E?.6:1,minHeight:"60px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px"},onMouseEnter:l=>{!z&&!E&&(l.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:l=>{z||(l.currentTarget.style.backgroundColor="transparent")},children:[J.jsxs("div",{style:{flex:1,minWidth:0},children:[J.jsx("div",{style:{fontSize:"13px",color:"#666",marginBottom:"4px"},children:O.displayName}),N?J.jsx("div",{style:{fontFamily:V?O.family:O.fallback,fontSize:"18px",lineHeight:1.2,color:"#000",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M}):J.jsx("div",{style:{fontSize:"18px",color:"#ccc",fontStyle:"italic"},children:"Loading..."})]}),J.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[O.weights&&Object.keys(O.weights).length>1&&J.jsxs("span",{style:{fontSize:"12px",color:"#999"},children:[Object.keys(O.weights).length," weights"]}),V&&J.jsx("span",{style:{fontSize:"12px",color:"#4caf50"},children:""}),E&&J.jsx("span",{style:{fontSize:"12px",color:"#666",animation:"pulse 1.5s ease-in-out infinite"},children:""})]})]})};return s?J.jsxs(J.Fragment,{children:[J.jsx("div",{onClick:f,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,animation:"fadeIn 0.2s ease-out"}}),J.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",borderRadius:"12px",width:"90%",maxWidth:"900px",height:"80vh",maxHeight:"700px",display:"flex",flexDirection:"column",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:2001,animation:"slideIn 0.3s ease-out"},children:[J.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[J.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:600},children:"Choose a Font"}),J.jsx("button",{onClick:f,style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"#666",transition:"all 0.2s"},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="transparent"},children:""})]}),J.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid #e0e0e0",display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"center"},children:[J.jsx("input",{type:"text",placeholder:"Search fonts...",value:_,onChange:O=>o(O.target.value),style:{flex:"1",minWidth:"200px",padding:"8px 12px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"6px",outline:"none"},onFocus:O=>{O.currentTarget.style.borderColor="#0066ff"},onBlur:O=>{O.currentTarget.style.borderColor="#ddd"}}),J.jsx("div",{style:{display:"flex",gap:"8px"},children:lf.map(O=>J.jsx("button",{onClick:()=>m(O.id),style:{padding:"6px 12px",fontSize:"14px",border:"none",borderRadius:"20px",backgroundColor:c===O.id?"#0066ff":"#f0f0f0",color:c===O.id?"white":"#666",cursor:"pointer",transition:"all 0.2s",whiteSpace:"nowrap"},onMouseEnter:v=>{c!==O.id&&(v.currentTarget.style.backgroundColor="#e0e0e0")},onMouseLeave:v=>{c!==O.id&&(v.currentTarget.style.backgroundColor="#f0f0f0")},children:O.label},O.id))})]}),J.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[g.length>0&&c==="all"&&!_&&J.jsxs("div",{style:{marginBottom:"32px"},children:[J.jsx("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"#333"},children:"Recently Used"}),J.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:g.map(O=>J.jsx(F,{font:O,isRecent:!0},O.id))})]}),J.jsxs("div",{children:[c==="all"&&!_&&g.length>0&&J.jsx("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"#333"},children:"All Fonts"}),J.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.map(O=>J.jsx(F,{font:O},O.id))}),a.length===0&&J.jsxs("div",{style:{textAlign:"center",padding:"48px",color:"#666"},children:['No fonts found matching "',_,'"']})]})]})]}),J.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translate(-50%, -48%);
          }
          to {
            opacity: 1;
            transform: translate(-50%, -50%);
          }
        }
        
        @keyframes pulse {
          0% { opacity: 0.6; }
          50% { opacity: 1; }
          100% { opacity: 0.6; }
        }
      `}})]}):null}const cf=({imageElement:s,onSelect:f,onChange:A,onDragEnd:L,onTransformEnd:M})=>{const[_]=_u(s.url,"anonymous"),o=he.useRef(null);return J.jsx(mu,{ref:o,id:s.id,image:_,x:s.x+s.width/2,y:s.y+s.height/2,width:s.width,height:s.height,offsetX:s.width/2,offsetY:s.height/2,rotation:s.rotation||0,draggable:!0,onClick:f,onTap:f,onDragEnd:c=>{const m=c.target;A({x:m.x()-s.width/2,y:m.y()-s.height/2}),L&&L()},onTransformEnd:()=>{const c=o.current,m=c.scaleX(),y=c.scaleY(),w=Math.max(5,c.width()*m),P=Math.max(5,c.height()*y);c.scaleX(1),c.scaleY(1),c.offsetX(w/2),c.offsetY(P/2),A({x:c.x()-w/2,y:c.y()-P/2,width:w,height:P,rotation:c.rotation()}),M&&M()}})},hf=({initialTemplate:s,initialState:f})=>{var An,ir,hi,Vi,Wi,qi,Yi,Xi,Ki,fi,gi,Qi,sr,pi,mi,Ji,Zi,$i,yi,ar,es,ts,Wn,ns,rs,is;const A=he.useRef(null),L=he.useRef(null),M=he.useRef(null),[_,o]=he.useState({width:1e3,height:1e3}),[c,m]=he.useState({width:800,height:600}),[y,w]=he.useState("media/images/8-spot-red-base-image.png"),[P]=_u(y,y.startsWith("http")?"anonymous":void 0),[S,p]=he.useState([]),[d,C]=he.useState([]),[b,I]=he.useState([]),[u,a]=he.useState([]),[g,T]=he.useState({width:744,height:744,cornerRadius:372,x:1e3/2-372,y:1e3/2-372,visible:!0}),[F,O]=he.useState("transparent"),[v,N]=he.useState(null),[E,z]=he.useState(!1),[V,l]=he.useState(!1),[R,k]=he.useState([]),[G,B]=he.useState(null),[j,Q]=he.useState(null),H=he.useRef(null),[ne,ae]=he.useState(!1),[re,se]=he.useState(!1),[de,ge]=he.useState(!1),[U,ee]=he.useState(!1),[oe,le]=he.useState(!1),[ce,ve]=he.useState(!1),we=["arial","roboto","open-sans","montserrat","playfair-display"],Me=async x=>{try{await ci.loadFontByFamily(x)}catch(W){console.warn(`Failed to load font: ${x}`,W)}};he.useEffect(()=>{(async()=>{await ci.preloadFonts(we)})()},[]);const Se=20,Ne=Math.min((c.width-Se*2)/_.width,(c.height-Se*2)/_.height,1);he.useEffect(()=>{const x={width:1e3,height:1e3};o(x),T(W=>({...W,x:x.width/2-W.width/2,y:x.height/2-W.height/2})),console.log(A.current)},[]),he.useEffect(()=>{const x=()=>{if(M.current){const Z=M.current.getBoundingClientRect();m({width:Z.width,height:Z.height})}};setTimeout(x,100),window.addEventListener("resize",x);const W=new ResizeObserver(x);return M.current&&W.observe(M.current),()=>{window.removeEventListener("resize",x),W.disconnect()}},[]),he.useEffect(()=>{var x;if(v&&H.current){const W=H.current.getStage(),q=W.findOne("#"+v);if(q){H.current.nodes([q]),H.current.getLayer().batchDraw();const Z=H.current.getClientRect(),X=W.container().getBoundingClientRect();Q({x:X.left+(Z.x+Z.width/2)*Ne,y:X.top+(Z.y-50)*Ne})}}else Q(null),ae(!1),se(!1),ge(!1),ee(!1),H.current&&(H.current.nodes([]),(x=H.current.getLayer())==null||x.batchDraw())},[v,Ne]);const Oe=()=>{const x={id:`text-${Date.now()}`,text:"Hello World",x:g.x+g.width/2-50,y:g.y+g.height/2-12,fontFamily:xu.family,fontSize:24,fill:"black",rotation:0,scaleX:1,scaleY:1};p(W=>[...W,x])},je=()=>{const W=_.height/2-100,q={id:`curved-text-${Date.now()}`,text:"Some Text along a circle radius very big",x:_.width/2,topY:W,radius:100,flipped:!1,fontFamily:xu.family,fontSize:20,fill:"black",rotation:0,scaleX:1,scaleY:1};I(Z=>[...Z,q])},Lt=x=>{var Z;const W=x.target;(W===x.target.getStage()||W.getClassName()==="Layer"||W.getClassName()==="Rect"&&!W.draggable()||W.getClassName()==="Image"&&!W.draggable()||W.getClassName()==="Group"&&!W.draggable())&&(N(null),ae(!1),se(!1),ge(!1),ee(!1),H.current&&(H.current.nodes([]),(Z=H.current.getLayer())==null||Z.batchDraw()))},Qe=()=>{if(!v)return;const x=S.find(X=>X.id===v);if(x){const X={...x,id:`text-${Date.now()}`,x:x.x+20,y:x.y+20};p(fe=>[...fe,X]),N(X.id);return}const W=b.find(X=>X.id===v);if(W){const X={...W,id:`curved-text-${Date.now()}`,x:W.x+20,topY:W.topY+20};I(fe=>[...fe,X]),N(X.id);return}const q=d.find(X=>X.id===v);if(q){const X={...q,id:`gradient-text-${Date.now()}`,x:q.x+20,y:q.y+20};C(fe=>[...fe,X]),N(X.id);return}const Z=u.find(X=>X.id===v);if(Z){const X={...Z,id:`image-${Date.now()}`,x:Z.x+20,y:Z.y+20};a(fe=>[...fe,X]),N(X.id)}},ft=()=>{if(v&&H.current&&L.current){const x=L.current,W=H.current.getClientRect(),q=x.container().getBoundingClientRect();Q({x:q.left+(W.x+W.width/2)*Ne,y:q.top+(W.y-50)*Ne})}},Be=x=>{v&&I(W=>W.map(q=>{if(q.id===v)if(q.flipped){const Z=q.radius,X=q.topY+2*(x-Z);return{...q,radius:x,topY:X}}else return{...q,radius:x};return q}))},gt=()=>{v&&(I(x=>x.map(W=>W.id===v?{...W,flipped:!W.flipped}:W)),setTimeout(()=>{if(H.current){const W=H.current.getStage().findOne("#"+v);W&&(H.current.nodes([W]),H.current.forceUpdate())}},0))},et=async x=>{if(!v)return;await Me(x),b.find(X=>X.id===v)&&I(X=>X.map(fe=>fe.id===v?{...fe,fontFamily:x}:fe)),S.find(X=>X.id===v)&&p(X=>X.map(fe=>fe.id===v?{...fe,fontFamily:x}:fe)),d.find(X=>X.id===v)&&C(X=>X.map(fe=>fe.id===v?{...fe,fontFamily:x}:fe)),await document.fonts.ready,setTimeout(()=>{if(L.current&&(L.current.clear(),L.current.getLayers().forEach(X=>{X.clear(),X.batchDraw()})),H.current){const X=H.current.getStage(),fe=X==null?void 0:X.findOne("#"+v);fe&&(H.current.nodes([fe]),H.current.forceUpdate())}},100)},It=x=>{if(!v)return;b.find(X=>X.id===v)&&I(X=>X.map(fe=>fe.id===v?{...fe,fontSize:x}:fe)),S.find(X=>X.id===v)&&p(X=>X.map(fe=>fe.id===v?{...fe,fontSize:x}:fe)),d.find(X=>X.id===v)&&C(X=>X.map(fe=>fe.id===v?{...fe,fontSize:x}:fe)),setTimeout(()=>{var X,fe;if(H.current){const ke=H.current.getStage(),Ae=ke==null?void 0:ke.findOne("#"+v);Ae&&((X=Ae.getLayer())==null||X.batchDraw(),H.current.nodes([Ae]),H.current.forceUpdate(),(fe=H.current.getLayer())==null||fe.batchDraw())}},50)},tt=x=>{if(!v)return;b.find(Z=>Z.id===v)&&I(Z=>Z.map(X=>X.id===v?{...X,fill:x}:X)),S.find(Z=>Z.id===v)&&p(Z=>Z.map(X=>X.id===v?{...X,fill:x}:X))},Dt=x=>{if(!v)return;b.find(Z=>Z.id===v)&&I(Z=>Z.map(X=>X.id===v?{...X,stroke:x,strokeWidth:X.strokeWidth||2}:X)),S.find(Z=>Z.id===v)&&p(Z=>Z.map(X=>X.id===v?{...X,stroke:x,strokeWidth:X.strokeWidth||2}:X))},Ot=()=>({dimensions:_,backgroundColor:F,designableArea:g,elements:{textElements:S,curvedTextElements:b,gradientTextElements:d,imageElements:u},assets:{baseImage:y}}),Ht=async x=>{var W,q,Z;if(x){if(x.dimensions&&o(x.dimensions),x.backgroundColor&&O(x.backgroundColor),x.designableArea&&T(x.designableArea),x.elements){x.elements.textElements&&p(x.elements.textElements),x.elements.curvedTextElements&&I(x.elements.curvedTextElements),x.elements.gradientTextElements&&C(x.elements.gradientTextElements),x.elements.imageElements&&a(x.elements.imageElements);const X=new Set;(W=x.elements.textElements)==null||W.forEach(ke=>{ke.fontFamily&&X.add(ke.fontFamily)}),(q=x.elements.curvedTextElements)==null||q.forEach(ke=>{ke.fontFamily&&X.add(ke.fontFamily)}),(Z=x.elements.gradientTextElements)==null||Z.forEach(ke=>{ke.fontFamily&&X.add(ke.fontFamily)});const fe=Array.from(X).map(ke=>Me(ke));await Promise.all(fe)}x.assets&&x.assets.baseImage&&w(x.assets.baseImage)}},Vt=x=>{x&&(p(W=>W.map(q=>x[q.id]?{...q,text:x[q.id]}:q)),I(W=>W.map(q=>x[q.id]?{...q,text:x[q.id]}:q)),C(W=>W.map(q=>x[q.id]?{...q,text:x[q.id]}:q)))},zt=async()=>{var W,q,Z;const x=(s==null?void 0:s.name)||prompt("Enter template name:");if(x){z(!0);try{const X=Ot();N(null),H.current&&(H.current.nodes([]),(W=H.current.getLayer())==null||W.batchDraw()),await new Promise(dt=>setTimeout(dt,100));const fe=L.current;if(fe){const tn=fe.find("Image").map(Gt=>new Promise(nn=>{const Ze=Gt.image();if(!Ze){setTimeout(()=>nn(!0),500);return}if(Ze.complete)nn(!0);else{const Ct=()=>{Ze.removeEventListener("load",Ct),Ze.removeEventListener("error",Bt),nn(!0)},Bt=()=>{console.warn("Image failed to load for thumbnail:",Ze.src),Ze.removeEventListener("load",Ct),Ze.removeEventListener("error",Bt),nn(!0)};Ze.addEventListener("load",Ct),Ze.addEventListener("error",Bt),setTimeout(()=>{Ze.removeEventListener("load",Ct),Ze.removeEventListener("error",Bt),nn(!0)},5e3)}}));await Promise.all(tn),fe.batchDraw(),await new Promise(Gt=>setTimeout(Gt,200))}let ke;try{ke=(q=L.current)==null?void 0:q.toDataURL({x:0,y:0,width:_.width*Ne,height:_.height*Ne,pixelRatio:1/Ne,mimeType:"image/png"})}catch(dt){console.error("Error generating thumbnail:",dt);try{ke=(Z=L.current)==null?void 0:Z.toDataURL({x:0,y:0,width:_.width*Ne,height:_.height*Ne,pixelRatio:.6/Ne,mimeType:"image/png"})}catch(tn){console.error("Fallback thumbnail generation also failed:",tn)}}const Ae=new FormData;Ae.append("name",x),Ae.append("canvasData",JSON.stringify(X)),ke?Ae.append("thumbnail",ke):console.warn("No thumbnail generated for template"),s!=null&&s.id&&Ae.append("templateId",s.id);const st=await(await fetch("api/templates/save",{method:"POST",body:Ae})).json();if(st.success)st.warning?B({message:`Template saved but with warning: ${st.warning}`,type:"info"}):B({message:"Template saved and synced successfully!",type:"success"}),pt(),setTimeout(()=>B(null),3e3);else throw new Error(st.error||"Failed to save template")}catch(X){console.error("Error saving template:",X),B({message:"Failed to save template: "+(X instanceof Error?X.message:"Unknown error"),type:"error"}),setTimeout(()=>B(null),5e3)}finally{z(!1)}}},wt=async x=>{if(x){l(!0);try{const q=await(await fetch(`/api/templates/${x}`)).json();if(q.template){const Z=JSON.parse(q.template.canvasData);await Ht(Z),B({message:"Template loaded successfully!",type:"success"}),setTimeout(()=>B(null),3e3)}else throw new Error(q.error||"Failed to load template")}catch(W){console.error("Error loading template:",W),B({message:"Failed to load template: "+(W instanceof Error?W.message:"Unknown error"),type:"error"}),setTimeout(()=>B(null),5e3)}finally{l(!1)}}},pt=async()=>{try{const W=await(await fetch("api/templates")).json();W.templates&&k(W.templates)}catch(x){console.error("Error loading templates:",x)}};he.useEffect(()=>{pt()},[]),he.useEffect(()=>{(async()=>{if(s&&s.canvasData)try{const W=JSON.parse(s.canvasData);await Ht(W)}catch(W){console.error("Error loading initial template:",W)}})()},[s]),he.useEffect(()=>{f!=null&&f.textUpdates&&s&&setTimeout(()=>{Vt(f.textUpdates)},100)},[s,f]),he.useEffect(()=>{const x=W=>{var q;((q=W.detail)==null?void 0:q.source)==="fullDesigner"&&zt()};return window.addEventListener("saveDesign",x),()=>window.removeEventListener("saveDesign",x)},[]);const St=()=>{var x;v&&(p(W=>W.filter(q=>q.id!==v)),I(W=>W.filter(q=>q.id!==v)),C(W=>W.filter(q=>q.id!==v)),a(W=>W.filter(q=>q.id!==v)),N(null),H.current&&(H.current.nodes([]),(x=H.current.getLayer())==null||x.batchDraw()))};return he.useEffect(()=>{const x=W=>{W.key==="d"&&(W.ctrlKey||W.metaKey)&&v&&(W.preventDefault(),Qe())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[v]),he.useEffect(()=>{const x=W=>{const q=W.target,Z=q.closest("[data-color-picker]"),X=q.closest("[data-color-button]");!Z&&!X&&ne&&ae(!1)};if(ne)return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[ne]),he.useEffect(()=>{const x=W=>{const q=W.target,Z=q.closest("[data-bg-color-picker]"),X=q.closest("[data-bg-color-button]");!Z&&!X&&re&&se(!1)};if(re)return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[re]),he.useEffect(()=>{const x=W=>{const q=W.target,Z=q.closest("[data-font-picker]"),X=q.closest("[data-font-button]");!Z&&!X&&oe&&le(!1)};if(oe)return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[oe]),he.useEffect(()=>{const x=W=>{const q=W.target,Z=q.closest("[data-design-controls]"),X=q.closest("[data-design-button]");!Z&&!X&&de&&ge(!1)};if(de)return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[de]),he.useEffect(()=>{const x=W=>{const q=W.target,Z=q.closest("[data-stroke-color-picker]"),X=q.closest("[data-stroke-color-button]");!Z&&!X&&U&&ee(!1)};if(U)return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[U]),J.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[G&&J.jsxs("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:G.type==="success"?"#108043":G.type==="error"?"#d82c0d":"#005fb3",color:"white",padding:"12px 24px",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:2e3,fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",gap:"12px",animation:"slideDown 0.3s ease-out"},children:[J.jsx("span",{children:G.type==="success"?"":G.type==="error"?"":""}),G.message,J.jsx("button",{onClick:()=>B(null),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"4px",marginLeft:"8px",fontSize:"16px",opacity:.8,transition:"opacity 0.2s"},onMouseEnter:x=>x.currentTarget.style.opacity="1",onMouseLeave:x=>x.currentTarget.style.opacity="0.8",children:""})]}),J.jsxs("div",{style:{padding:"10px",flexShrink:0,backgroundColor:"#f7f8fa",borderBottom:"1px solid #ddd",maxHeight:"300px",overflowY:"auto"},children:[J.jsx("button",{onClick:Oe,style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px"},children:"Add Text"}),J.jsx("button",{onClick:je,style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px"},children:"Add Curved Text"}),J.jsxs("label",{style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRadius:"3px",cursor:"pointer",display:"inline-block"},children:["Add Image",J.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:async x=>{var q;const W=(q=x.target.files)==null?void 0:q[0];if(W){const Z=new FormData;Z.append("file",W),Z.append("assetType","userImage");try{const fe=await(await fetch("api/assets/upload",{method:"POST",body:Z})).json();if(fe.success){const ke=new window.Image;ke.crossOrigin="anonymous",ke.onload=()=>{const Wt=ke.width/ke.height;let st,dt;ke.width>ke.height?(st=Math.min(ke.width,400),dt=st/Wt):(dt=Math.min(ke.height,400),st=dt*Wt);const tn={id:`image-${Date.now()}`,url:fe.asset.url,x:g.x+g.width/2-st/2,y:g.y+g.height/2-dt/2,width:st,height:dt,rotation:0};a(Gt=>[...Gt,tn])},ke.onerror=()=>{console.error("Failed to load image for dimensions");const Ae={id:`image-${Date.now()}`,url:fe.asset.url,x:g.x+g.width/2-50,y:g.y+g.height/2-50,width:100,height:100,rotation:0};a(Wt=>[...Wt,Ae])},ke.src=fe.asset.url}else B({message:`Upload failed: ${fe.error}`,type:"error"}),setTimeout(()=>B(null),5e3)}catch(X){console.error("Upload error:",X),B({message:"Failed to upload image",type:"error"}),setTimeout(()=>B(null),5e3)}}}})]}),J.jsxs("button",{onClick:()=>T(x=>({...x,visible:!x.visible})),style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px",backgroundColor:g.visible?"#28a745":"#6c757d",color:"white",border:"none",borderRadius:"4px"},children:[g.visible?"Hide":"Show"," Design Area"]}),J.jsxs("div",{style:{display:"inline-block",marginLeft:"20px",borderLeft:"2px solid #ddd",paddingLeft:"20px"},children:[J.jsx("button",{onClick:zt,disabled:E,style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",opacity:E?.6:1,cursor:E?"not-allowed":"pointer"},children:E?"Saving...":s?"Update Template":"Save Template"}),J.jsxs("select",{onChange:x=>wt(x.target.value),disabled:V,style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px",borderRadius:"4px",border:"1px solid #ddd",cursor:V?"not-allowed":"pointer"},children:[J.jsx("option",{value:"",children:"Load Template..."}),R.map(x=>J.jsx("option",{value:x.id,children:x.name},x.id))]}),V&&J.jsx("span",{style:{fontSize:"14px",color:"#666"},children:"Loading..."})]}),J.jsxs("div",{style:{display:"inline-block",marginLeft:"20px",position:"relative"},children:[J.jsxs("button",{"data-bg-color-button":"true",onClick:()=>se(!re),style:{padding:"8px 16px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",background:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="white",children:[J.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Background:"}),J.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"3px",backgroundColor:F==="transparent"?"#f0f0f0":F,backgroundImage:F==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)":F==="linear-gradient"?"linear-gradient(135deg, #c8102e 0%, #ffaaaa 100%)":F==="radial-gradient"?"radial-gradient(circle at center, #c8102e 0%, #ffaaaa 100%)":void 0,backgroundSize:F==="transparent"?"6px 6px":void 0,backgroundPosition:F==="transparent"?"0 0, 3px 3px":void 0,border:"1px solid #ccc",boxShadow:F==="#ffffff"?"inset 0 0 0 1px #ddd":"none"}})]}),re&&J.jsxs("div",{"data-bg-color-picker":"true",style:{position:"absolute",top:"40px",left:0,background:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"8px",display:"flex",gap:"6px",flexWrap:"wrap",width:"280px",zIndex:1001},children:[J.jsx("button",{onClick:()=>{O("transparent"),se(!1)},style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#f0f0f0",backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)",backgroundSize:"10px 10px",backgroundPosition:"0 0, 5px 5px",border:F==="transparent"?"3px solid #0066ff":"2px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s"},title:"Transparent",onMouseEnter:x=>{F!=="transparent"&&(x.currentTarget.style.transform="scale(1.1)",x.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)")},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)",x.currentTarget.style.boxShadow="none"}}),[{name:"White",hex:"#ffffff"},{name:"Red",hex:"#c8102e"},{name:"Blue",hex:"#0057b8"},{name:"Green",hex:"#009639"},{name:"Black",hex:"#000000"},{name:"Purple",hex:"#5f259f"},{name:"Yellow",hex:"#fff110"},{name:"Grey",hex:"#a2aaad"},{name:"Orange",hex:"#ff8200"},{name:"Ivory",hex:"#f1e6b2"},{name:"Light Blue",hex:"#71c5e8"},{name:"Pink",hex:"#f8a3bc"},{name:"Brown",hex:"#9e652e"}].map(x=>J.jsx("button",{onClick:()=>{O(x.hex),se(!1)},style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:x.hex,border:F===x.hex?"3px solid #0066ff":"2px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s",boxShadow:x.hex==="#ffffff"?"inset 0 0 0 1px #ddd":"none"},title:x.name,onMouseEnter:W=>{F!==x.hex&&(W.currentTarget.style.transform="scale(1.1)",W.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)")},onMouseLeave:W=>{W.currentTarget.style.transform="scale(1)",W.currentTarget.style.boxShadow=x.hex==="#ffffff"?"inset 0 0 0 1px #ddd":"none"}},x.hex)),J.jsx("button",{onClick:()=>{O("linear-gradient"),se(!1)},style:{width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #c8102e 0%, #ffaaaa 100%)",border:F==="linear-gradient"?"3px solid #0066ff":"2px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s"},title:"Linear Gradient",onMouseEnter:x=>{F!=="linear-gradient"&&(x.currentTarget.style.transform="scale(1.1)",x.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)")},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)",x.currentTarget.style.boxShadow="none"}}),J.jsx("button",{onClick:()=>{O("radial-gradient"),se(!1)},style:{width:"28px",height:"28px",borderRadius:"50%",background:"radial-gradient(circle at center, #c8102e 0%, #ffaaaa 100%)",border:F==="radial-gradient"?"3px solid #0066ff":"2px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s"},title:"Radial Gradient",onMouseEnter:x=>{F!=="radial-gradient"&&(x.currentTarget.style.transform="scale(1.1)",x.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)")},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)",x.currentTarget.style.boxShadow="none"}})]})]}),J.jsxs("div",{style:{display:"inline-block",marginLeft:"20px",position:"relative"},children:[J.jsxs("button",{"data-design-button":"true",onClick:()=>ge(!de),style:{padding:"8px 16px",fontSize:"14px",borderRadius:"4px",border:"1px solid #ddd",background:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="white",children:[J.jsx("span",{style:{fontSize:"14px"},children:"Design Area"}),J.jsx("span",{style:{fontSize:"10px"},children:de?"":""})]}),de&&J.jsx("div",{"data-design-controls":"true",style:{position:"absolute",top:"40px",left:0,background:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"16px",zIndex:1001,minWidth:"300px"},children:J.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[J.jsxs("div",{children:[J.jsxs("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px"},children:["Center X: ",Math.round(g.x+g.width/2),"px"]}),J.jsx("input",{type:"range",min:"200",max:_.width-200,value:g.x+g.width/2,onChange:x=>{const W=parseInt(x.target.value);T(q=>({...q,x:W-q.width/2}))},style:{width:"100%",cursor:"pointer"}})]}),J.jsxs("div",{children:[J.jsxs("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px"},children:["Center Y: ",Math.round(g.y+g.height/2),"px"]}),J.jsx("input",{type:"range",min:"200",max:_.height-200,value:g.y+g.height/2,onChange:x=>{const W=parseInt(x.target.value);T(q=>({...q,y:W-q.height/2}))},style:{width:"100%",cursor:"pointer"}})]}),J.jsxs("div",{children:[J.jsxs("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px"},children:["Width: ",g.width,"px"]}),J.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[J.jsx("button",{onClick:()=>{const x=Math.max(100,g.width-10),W=g.x+g.width/2;T(q=>({...q,width:x,x:W-x/2,cornerRadius:Math.min(q.cornerRadius,x/2)}))},style:{padding:"2px 8px",fontSize:"14px",cursor:"pointer"},children:"-"}),J.jsx("input",{type:"range",min:"100",max:"1000",value:g.width,onChange:x=>{const W=parseInt(x.target.value),q=g.x+g.width/2;T(Z=>({...Z,width:W,x:q-W/2,cornerRadius:Math.min(Z.cornerRadius,W/2)}))},style:{flex:1,cursor:"pointer"}}),J.jsx("button",{onClick:()=>{const x=Math.min(1e3,g.width+10),W=g.x+g.width/2;T(q=>({...q,width:x,x:W-x/2,cornerRadius:Math.min(q.cornerRadius,x/2)}))},style:{padding:"2px 8px",fontSize:"14px",cursor:"pointer"},children:"+"})]})]}),J.jsxs("div",{children:[J.jsxs("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px"},children:["Height: ",g.height,"px"]}),J.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[J.jsx("button",{onClick:()=>{const x=Math.max(100,g.height-10),W=g.y+g.height/2;T(q=>({...q,height:x,y:W-x/2,cornerRadius:Math.min(q.cornerRadius,x/2)}))},style:{padding:"2px 8px",fontSize:"14px",cursor:"pointer"},children:"-"}),J.jsx("input",{type:"range",min:"100",max:"1000",value:g.height,onChange:x=>{const W=parseInt(x.target.value),q=g.y+g.height/2;T(Z=>({...Z,height:W,y:q-W/2,cornerRadius:Math.min(Z.cornerRadius,W/2)}))},style:{flex:1,cursor:"pointer"}}),J.jsx("button",{onClick:()=>{const x=Math.min(1e3,g.height+10),W=g.y+g.height/2;T(q=>({...q,height:x,y:W-x/2,cornerRadius:Math.min(q.cornerRadius,x/2)}))},style:{padding:"2px 8px",fontSize:"14px",cursor:"pointer"},children:"+"})]})]}),J.jsxs("div",{children:[J.jsxs("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px"},children:["Corner Radius: ",g.cornerRadius,"px",J.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"#999"},children:g.cornerRadius===Math.min(g.width,g.height)/2?"(Circle)":"(Rectangle)"})]}),J.jsx("input",{type:"range",min:"0",max:Math.min(g.width,g.height)/2,value:g.cornerRadius,onChange:x=>T(W=>({...W,cornerRadius:parseInt(x.target.value)})),style:{width:"100%",cursor:"pointer"}})]})]})})]}),J.jsxs("div",{style:{display:"inline-block",marginLeft:"20px"},children:[J.jsxs("select",{value:y,onChange:x=>w(x.target.value),style:{padding:"8px 16px",fontSize:"14px",marginRight:"10px",borderRadius:"4px",border:"1px solid #ddd",cursor:"pointer",background:"white"},children:[J.jsx("option",{value:"media/images/8-spot-red-base-image.png",children:"Red Base"}),J.jsx("option",{value:"media/images/8-spot-black-base.png",children:"Black Base"}),J.jsx("option",{value:"media/images/8-spot-blue-base.png",children:"Blue Base"}),J.jsx("option",{value:"https://shopify-designs.s3.us-west-1.amazonaws.com/assets/default/images/8-spot-red-base-image.png",children:"Red Base (S3)"}),J.jsx("option",{value:"https://shopify-designs.s3.us-west-1.amazonaws.com/assets/default/images/8-spot-black-base.png",children:"Black Base (S3)"}),J.jsx("option",{value:"https://shopify-designs.s3.us-west-1.amazonaws.com/assets/default/images/8-spot-blue-base.png",children:"Blue Base (S3)"})]}),J.jsxs("label",{style:{padding:"8px 16px",fontSize:"14px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",display:"inline-block",transition:"all 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#e8e8e8",onMouseLeave:x=>x.currentTarget.style.backgroundColor="#f0f0f0",children:["Upload Base Image",J.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:async x=>{var q;const W=(q=x.target.files)==null?void 0:q[0];if(W){const Z=new FormData;Z.append("file",W),Z.append("assetType","image");try{const fe=await(await fetch("api/assets/upload",{method:"POST",body:Z})).json();fe.success?(w(fe.asset.url),B({message:"Base image uploaded successfully!",type:"success"}),setTimeout(()=>B(null),3e3)):(console.error("Upload failed:",fe),B({message:`Upload failed: ${fe.error}`,type:"error"}),setTimeout(()=>B(null),5e3))}catch(X){console.error("Upload error:",X),B({message:"Failed to upload image: "+(X instanceof Error?X.message:"Unknown error"),type:"error"}),setTimeout(()=>B(null),5e3)}}}})]})]}),J.jsxs("div",{style:{marginTop:"10px",padding:"5px",fontSize:"12px",color:"#6c757d",fontFamily:"monospace"},children:["Canvas Size: ",_.width," px width  ",_.height," px height"]})]}),J.jsx("div",{ref:M,style:{width:"100%",height:"100%",flex:"1",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",position:"relative",minHeight:"400px",backgroundColor:"#ffffff"},children:J.jsx("div",{style:{width:_.width*Ne,height:_.height*Ne,border:"1px solid #ddd",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white",overflow:"hidden"},children:J.jsx(rf,{ref:L,width:_.width,height:_.height,scaleX:Ne,scaleY:Ne,onMouseDown:Lt,onTouchStart:Lt,children:J.jsxs(ef,{onMouseDown:Lt,onTouchStart:Lt,children:[P&&J.jsx(mu,{image:P,x:0,y:0,width:1e3,height:1e3}),J.jsxs(gu,{clipFunc:x=>{const W=g.x,q=g.y,Z=g.width,X=g.height,fe=g.cornerRadius;x.beginPath(),fe>0?(x.moveTo(W+fe,q),x.arcTo(W+Z,q,W+Z,q+X,fe),x.arcTo(W+Z,q+X,W,q+X,fe),x.arcTo(W,q+X,W,q,fe),x.arcTo(W,q,W+Z,q,fe)):x.rect(W,q,Z,X),x.closePath()},children:[F!=="transparent"&&J.jsx(pu,{x:g.x,y:g.y,width:g.width,height:g.height,cornerRadius:g.cornerRadius,fill:F==="linear-gradient"||F==="radial-gradient"?void 0:F,fillLinearGradientStartPoint:F==="linear-gradient"?{x:0,y:0}:void 0,fillLinearGradientEndPoint:F==="linear-gradient"?{x:g.width,y:0}:void 0,fillLinearGradientColorStops:F==="linear-gradient"?[0,"#c8102e",1,"#ffaaaa"]:void 0,fillRadialGradientStartPoint:F==="radial-gradient"?{x:g.width/2,y:g.height/2}:void 0,fillRadialGradientEndPoint:F==="radial-gradient"?{x:g.width/2,y:g.height/2}:void 0,fillRadialGradientStartRadius:F==="radial-gradient"?0:void 0,fillRadialGradientEndRadius:F==="radial-gradient"?Math.min(g.width,g.height)/2:void 0,fillRadialGradientColorStops:F==="radial-gradient"?[0,"#c8102e",1,"#ffaaaa"]:void 0,listening:!1}),u.map(x=>J.jsx(cf,{imageElement:x,isSelected:v===x.id,onSelect:()=>N(x.id),onChange:W=>{a(q=>q.map(Z=>Z.id===x.id?{...Z,...W}:Z))},onDragEnd:()=>setTimeout(ft,0),onTransformEnd:()=>setTimeout(ft,0)},x.id)),S.map(x=>J.jsx(yu,{id:x.id,text:x.text,x:x.x,y:x.y,fontSize:x.fontSize||24,fontFamily:x.fontFamily,fontStyle:x.fontWeight==="bold"?"bold":"normal",fill:x.fill==="gold-gradient"?void 0:x.fill||"black",fillLinearGradientStartPoint:x.fill==="gold-gradient"?{x:0,y:0}:void 0,fillLinearGradientEndPoint:x.fill==="gold-gradient"?{x:0,y:x.fontSize||24}:void 0,fillLinearGradientColorStops:x.fill==="gold-gradient"?[0,"#FFD700",.5,"#FFA500",1,"#B8860B"]:void 0,stroke:x.stroke&&x.stroke!=="transparent"?x.stroke:void 0,strokeWidth:x.stroke&&x.stroke!=="transparent"?x.strokeWidth||2:0,fillAfterStrokeEnabled:!0,rotation:x.rotation||0,scaleX:x.scaleX||1,scaleY:x.scaleY||1,draggable:!0,onClick:()=>N(x.id),onTap:()=>N(x.id),onDragEnd:W=>{const q=W.target.x(),Z=W.target.y();p(X=>X.map(fe=>fe.id===x.id?{...fe,x:q,y:Z}:fe)),setTimeout(ft,0)},onTransformEnd:W=>{const q=W.target;p(Z=>Z.map(X=>X.id===x.id?{...X,x:q.x(),y:q.y(),rotation:q.rotation(),scaleX:q.scaleX(),scaleY:q.scaleY()}:X)),setTimeout(ft,0)}},x.id)),d.map(x=>J.jsx(yu,{id:x.id,text:x.text,x:x.x,y:x.y,fontSize:x.fontSize||24,fontFamily:x.fontFamily,rotation:x.rotation||0,scaleX:x.scaleX||1,scaleY:x.scaleY||1,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:0,y:24},fillLinearGradientColorStops:[0,"#FFD700",.5,"#FFA500",1,"#B8860B"],draggable:!0,onClick:()=>N(x.id),onTap:()=>N(x.id),onDragEnd:W=>{const q=W.target.x(),Z=W.target.y();C(X=>X.map(fe=>fe.id===x.id?{...fe,x:q,y:Z}:fe)),setTimeout(ft,0)},onTransformEnd:W=>{const q=W.target;C(Z=>Z.map(X=>X.id===x.id?{...X,x:q.x(),y:q.y(),rotation:q.rotation(),scaleX:q.scaleX(),scaleY:q.scaleY()}:X)),setTimeout(ft,0)}},x.id)),b.map(x=>{const W=x.flipped?x.topY-x.radius:x.topY+x.radius,q=x.fontSize||20,Z=x.text.length*q*.6,X=Math.min(Z/x.radius,Math.PI*1.5);let fe,ke,Ae;x.flipped?(fe=Math.PI/2+X/2,ke=Math.PI/2-X/2,Ae=0):(fe=-Math.PI/2-X/2,ke=-Math.PI/2+X/2,Ae=1);const Wt=Math.cos(fe)*x.radius,st=Math.sin(fe)*x.radius,dt=Math.cos(ke)*x.radius,tn=Math.sin(ke)*x.radius,Gt=X>Math.PI?1:0,nn=`M ${Wt},${st} A ${x.radius},${x.radius} 0 ${Gt},${Ae} ${dt},${tn}`;return J.jsx(gu,{id:x.id,x:x.x,y:W,rotation:x.rotation||0,scaleX:x.scaleX||1,scaleY:x.scaleY||1,draggable:!0,onClick:()=>N(x.id),onTap:()=>N(x.id),onDragEnd:Ze=>{const Ct=Ze.target.x(),Bt=Ze.target.y(),qt=x.flipped?Bt+x.radius:Bt-x.radius;I(cn=>cn.map(ze=>ze.id===x.id?{...ze,x:Ct,topY:qt}:ze)),setTimeout(ft,0)},onTransformEnd:Ze=>{const Ct=Ze.target;I(Bt=>Bt.map(qt=>qt.id===x.id?{...qt,x:Ct.x(),topY:x.flipped?Ct.y()+x.radius:Ct.y()-x.radius,rotation:Ct.rotation(),scaleX:Ct.scaleX(),scaleY:Ct.scaleY()}:qt)),setTimeout(ft,0)},children:J.jsx(tf,{text:x.text,data:nn,fontSize:x.fontSize||20,fontFamily:x.fontFamily,fontStyle:x.fontWeight==="bold"?"bold":"normal",fill:x.fill==="gold-gradient"?void 0:x.fill||"black",fillLinearGradientStartPoint:x.fill==="gold-gradient"?{x:0,y:0}:void 0,fillLinearGradientEndPoint:x.fill==="gold-gradient"?{x:0,y:x.fontSize||20}:void 0,fillLinearGradientColorStops:x.fill==="gold-gradient"?[0,"#FFD700",.5,"#FFA500",1,"#B8860B"]:void 0,stroke:x.stroke&&x.stroke!=="transparent"?x.stroke:void 0,strokeWidth:x.stroke&&x.stroke!=="transparent"?x.strokeWidth||2:0,fillAfterStrokeEnabled:!0,align:"center"})},x.id)})]}),g.visible&&J.jsx(pu,{x:g.x,y:g.y,width:g.width,height:g.height,cornerRadius:g.cornerRadius,stroke:"#007bff",strokeWidth:2,dash:[5,5],fill:"rgba(0, 123, 255, 0.1)",listening:!1}),J.jsx(nf,{ref:H,centeredScaling:!0,boundBoxFunc:(x,W)=>W.width<5||W.height<5?x:W,anchorCornerRadius:5,anchorSize:8,borderStroke:"#0066ff",anchorStroke:"#0066ff",anchorFill:"white",keepRatio:!0,rotateEnabled:!0,rotateAnchorOffset:20,enabledAnchors:["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"]})]})})})}),v&&J.jsxs("div",{style:{position:"absolute",left:"50%",top:"80px",transform:"translateX(-50%)",background:"white",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 2px 12px rgba(0,0,0,0.1)",padding:"8px",display:"flex",gap:"8px",alignItems:"center",zIndex:1e3},children:[J.jsx("button",{onClick:Qe,style:{width:"36px",height:"36px",padding:"6px",border:"none",borderRadius:"6px",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="white",title:"Duplicate (Ctrl+D)",children:""}),J.jsx("button",{onClick:St,style:{width:"36px",height:"36px",padding:"6px",border:"none",borderRadius:"6px",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"all 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#ffebee",onMouseLeave:x=>x.currentTarget.style.backgroundColor="white",title:"Delete",children:""}),(S.find(x=>x.id===v)||d.find(x=>x.id===v)||b.find(x=>x.id===v))&&J.jsxs(J.Fragment,{children:[J.jsx("div",{style:{width:"1px",background:"#e0e0e0",height:"24px",margin:"0 4px"}}),J.jsxs("div",{style:{position:"relative"},children:[J.jsxs("button",{"data-font-button":"true",onClick:()=>le(!oe),style:{padding:"4px 12px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px",background:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",minWidth:"140px",justifyContent:"space-between",transition:"all 0.2s",fontFamily:((An=S.find(x=>x.id===v))==null?void 0:An.fontFamily)||((ir=d.find(x=>x.id===v))==null?void 0:ir.fontFamily)||((hi=b.find(x=>x.id===v))==null?void 0:hi.fontFamily)||"Arial"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="white",children:[J.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((Vi=S.find(x=>x.id===v))==null?void 0:Vi.fontFamily)||((Wi=d.find(x=>x.id===v))==null?void 0:Wi.fontFamily)||((qi=b.find(x=>x.id===v))==null?void 0:qi.fontFamily)||"Arial"}),J.jsx("span",{style:{fontSize:"12px"},children:""})]}),oe&&J.jsxs("div",{"data-font-picker":"true",style:{position:"absolute",top:"38px",left:0,background:"white",border:"1px solid #ddd",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"220px",maxHeight:"400px",overflowY:"auto",zIndex:1002},children:[["sans-serif","serif","display","script","monospace"].map(x=>{const W=of(x);if(W.length===0)return null;const q={"sans-serif":"Sans Serif",serif:"Serif",display:"Display & Decorative",script:"Script & Handwriting",monospace:"Monospace"};return J.jsxs("div",{children:[J.jsx("div",{style:{padding:"8px 12px 4px",fontSize:"12px",fontWeight:"bold",color:"#666",borderBottom:"1px solid #eee",backgroundColor:"#f9f9f9"},children:q[x]}),W.map(Z=>{var X,fe,ke;return J.jsxs("button",{onClick:()=>{et(Z.family),le(!1)},style:{width:"100%",padding:"8px 12px",border:"none",background:"none",cursor:"pointer",textAlign:"left",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.2s",backgroundColor:((X=S.find(Ae=>Ae.id===v))==null?void 0:X.fontFamily)===Z.family||((fe=d.find(Ae=>Ae.id===v))==null?void 0:fe.fontFamily)===Z.family||((ke=b.find(Ae=>Ae.id===v))==null?void 0:ke.fontFamily)===Z.family?"#e3f2fd":"transparent"},onMouseEnter:Ae=>{Ae.currentTarget.style.backgroundColor!=="rgb(227, 242, 253)"&&(Ae.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:Ae=>{Ae.currentTarget.style.backgroundColor==="#f5f5f5"&&(Ae.currentTarget.style.backgroundColor="transparent")},children:[J.jsx("img",{src:Z.previewUrl,alt:Z.displayName,style:{height:"24px",maxWidth:"180px",objectFit:"contain",objectPosition:"left center"},onError:Ae=>{var dt;const Wt=Ae.target;Wt.style.display="none";const st=document.createElement("span");st.textContent=Z.displayName,st.style.fontFamily=Z.family,(dt=Wt.parentNode)==null||dt.appendChild(st)}}),J.jsx("span",{style:{fontSize:"12px",color:"#999",marginLeft:"auto"},children:ci.isFontLoaded(Z.family)?"":""})]},Z.id)})]},x)}),J.jsx("div",{style:{borderTop:"1px solid #eee",padding:"8px"},children:J.jsx("button",{onClick:()=>{le(!1),ve(!0)},style:{width:"100%",padding:"12px",border:"none",background:"#f0f0f0",cursor:"pointer",textAlign:"center",fontSize:"14px",fontWeight:500,color:"#0066ff",borderRadius:"6px",transition:"all 0.2s"},onMouseEnter:x=>{x.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="#f0f0f0"},children:"Browse All Fonts..."})})]})]}),J.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[J.jsx("span",{style:{fontSize:"14px"},children:"Size:"}),J.jsx("input",{type:"number",min:"8",max:"72",value:((Yi=S.find(x=>x.id===v))==null?void 0:Yi.fontSize)||((Xi=d.find(x=>x.id===v))==null?void 0:Xi.fontSize)||((Ki=b.find(x=>x.id===v))==null?void 0:Ki.fontSize)||24,onChange:x=>It(parseInt(x.target.value)||24),style:{width:"50px",padding:"4px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px"}})]}),J.jsx("button",{onClick:async()=>{const x=S.find(q=>q.id===v),W=b.find(q=>q.id===v);if(x){const q=x.fontWeight==="bold"?"normal":"bold";if(q==="bold"){const Z=dn.find(X=>X.family===x.fontFamily);Z&&Z.weights[700]&&await ci.loadFont(Z,700)}p(Z=>Z.map(X=>X.id===v?{...X,fontWeight:q}:X))}else if(W){const q=W.fontWeight==="bold"?"normal":"bold";if(q==="bold"){const Z=dn.find(X=>X.family===W.fontFamily);Z&&Z.weights[700]&&await ci.loadFont(Z,700)}I(Z=>Z.map(X=>X.id===v?{...X,fontWeight:q}:X))}setTimeout(()=>{if(H.current&&v){const Z=H.current.getStage().findOne("#"+v);Z&&(H.current.nodes([Z]),H.current.getLayer().batchDraw())}},50)},style:{width:"36px",height:"36px",padding:"6px",border:"1px solid #ddd",borderRadius:"6px",background:((fi=S.find(x=>x.id===v))==null?void 0:fi.fontWeight)==="bold"||((gi=b.find(x=>x.id===v))==null?void 0:gi.fontWeight)==="bold"?"#e3f2fd":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",transition:"all 0.2s"},onMouseEnter:x=>{x.currentTarget.style.backgroundColor!=="rgb(227, 242, 253)"&&(x.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:x=>{var q,Z;const W=((q=S.find(X=>X.id===v))==null?void 0:q.fontWeight)==="bold"||((Z=b.find(X=>X.id===v))==null?void 0:Z.fontWeight)==="bold";x.currentTarget.style.backgroundColor=W?"#e3f2fd":"white"},title:"Bold",children:"B"}),J.jsxs("div",{style:{position:"relative"},children:[J.jsx("button",{"data-color-button":"true",onClick:()=>ae(!ne),style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:(()=>{var W,q;const x=((W=S.find(Z=>Z.id===v))==null?void 0:W.fill)||((q=b.find(Z=>Z.id===v))==null?void 0:q.fill)||"#000000";return x==="gold-gradient"?"transparent":x})(),background:(()=>{var W,q;const x=((W=S.find(Z=>Z.id===v))==null?void 0:W.fill)||((q=b.find(Z=>Z.id===v))==null?void 0:q.fill)||"#000000";return x==="gold-gradient"?"linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #B8860B 100%)":x})(),border:"2px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s",boxShadow:ne?"0 0 0 2px #0066ff":"none"},title:"Text Color"}),ne&&J.jsxs("div",{"data-color-picker":"true",style:{position:"absolute",top:"36px",right:0,background:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"8px",display:"flex",gap:"6px",flexWrap:"wrap",width:"200px",zIndex:1001},children:[[{name:"White",hex:"#ffffff"},{name:"Red",hex:"#c8102e"},{name:"Blue",hex:"#0057b8"},{name:"Green",hex:"#009639"},{name:"Black",hex:"#000000"},{name:"Purple",hex:"#5f259f"},{name:"Yellow",hex:"#fff110"},{name:"Grey",hex:"#a2aaad"},{name:"Orange",hex:"#ff8200"},{name:"Ivory",hex:"#f1e6b2"},{name:"Light Blue",hex:"#71c5e8"},{name:"Pink",hex:"#f8a3bc"},{name:"Brown",hex:"#9e652e"}].map(x=>{var q,Z;const W=((q=S.find(X=>X.id===v))==null?void 0:q.fill)||((Z=b.find(X=>X.id===v))==null?void 0:Z.fill)||"#000000";return J.jsx("button",{onClick:()=>{tt(x.hex),ae(!1)},style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:x.hex,border:W===x.hex?"2px solid #0066ff":"1px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s",boxShadow:x.hex==="#ffffff"?"inset 0 0 0 1px #ddd":"none"},title:x.name,onMouseEnter:X=>{W!==x.hex&&(X.currentTarget.style.transform="scale(1.1)")},onMouseLeave:X=>{X.currentTarget.style.transform="scale(1)"}},x.hex)}),J.jsx("button",{onClick:()=>{tt("gold-gradient"),ae(!1)},style:{width:"24px",height:"24px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #B8860B 100%)",border:(((Qi=S.find(x=>x.id===v))==null?void 0:Qi.fill)||((sr=b.find(x=>x.id===v))==null?void 0:sr.fill))==="gold-gradient"?"2px solid #0066ff":"1px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s"},title:"Gold Gradient",onMouseEnter:x=>{var q,Z;(((q=S.find(X=>X.id===v))==null?void 0:q.fill)||((Z=b.find(X=>X.id===v))==null?void 0:Z.fill))!=="gold-gradient"&&(x.currentTarget.style.transform="scale(1.1)")},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)"}})]})]}),J.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[J.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Stroke:"}),J.jsxs("div",{style:{position:"relative"},children:[J.jsx("button",{"data-stroke-color-button":"true",onClick:()=>ee(!U),style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:(()=>{var W,q;const x=((W=S.find(Z=>Z.id===v))==null?void 0:W.stroke)||((q=b.find(Z=>Z.id===v))==null?void 0:q.stroke)||"transparent";return x==="transparent"?"#f0f0f0":x})(),backgroundImage:(()=>{var W,q;if((((W=S.find(Z=>Z.id===v))==null?void 0:W.stroke)||((q=b.find(Z=>Z.id===v))==null?void 0:q.stroke)||"transparent")==="transparent")return"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)"})(),backgroundSize:"6px 6px",backgroundPosition:"0 0, 3px 3px",border:"2px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s",boxShadow:U?"0 0 0 2px #0066ff":"none"},title:"Stroke Color"}),U&&J.jsxs("div",{"data-stroke-color-picker":"true",style:{position:"absolute",top:"36px",right:0,background:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"8px",display:"flex",gap:"6px",flexWrap:"wrap",width:"200px",zIndex:1001},children:[J.jsx("button",{onClick:()=>{Dt("transparent"),ee(!1)},style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#f0f0f0",backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px",border:(((pi=S.find(x=>x.id===v))==null?void 0:pi.stroke)||((mi=b.find(x=>x.id===v))==null?void 0:mi.stroke)||"transparent")==="transparent"?"2px solid #0066ff":"1px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s"},title:"No Stroke",onMouseEnter:x=>{var q,Z;(((q=S.find(X=>X.id===v))==null?void 0:q.stroke)||((Z=b.find(X=>X.id===v))==null?void 0:Z.stroke)||"transparent")!=="transparent"&&(x.currentTarget.style.transform="scale(1.1)")},onMouseLeave:x=>{x.currentTarget.style.transform="scale(1)"}}),[{name:"White",hex:"#ffffff"},{name:"Red",hex:"#c8102e"},{name:"Blue",hex:"#0057b8"},{name:"Green",hex:"#009639"},{name:"Black",hex:"#000000"},{name:"Purple",hex:"#5f259f"},{name:"Yellow",hex:"#fff110"},{name:"Grey",hex:"#a2aaad"},{name:"Orange",hex:"#ff8200"},{name:"Ivory",hex:"#f1e6b2"},{name:"Light Blue",hex:"#71c5e8"},{name:"Pink",hex:"#f8a3bc"},{name:"Brown",hex:"#9e652e"}].map(x=>{var q,Z;const W=((q=S.find(X=>X.id===v))==null?void 0:q.stroke)||((Z=b.find(X=>X.id===v))==null?void 0:Z.stroke)||"transparent";return J.jsx("button",{onClick:()=>{Dt(x.hex),ee(!1)},style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:x.hex,border:W===x.hex?"2px solid #0066ff":"1px solid #ccc",cursor:"pointer",padding:0,transition:"all 0.2s",boxShadow:x.hex==="#ffffff"?"inset 0 0 0 1px #ddd":"none"},title:x.name,onMouseEnter:X=>{W!==x.hex&&(X.currentTarget.style.transform="scale(1.1)")},onMouseLeave:X=>{X.currentTarget.style.transform="scale(1)"}},x.hex)})]})]})]})]}),b.find(x=>x.id===v)&&J.jsxs(J.Fragment,{children:[J.jsx("div",{style:{width:"1px",background:"#e0e0e0",height:"24px",margin:"0 4px"}}),J.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[J.jsx("span",{style:{fontSize:"14px"},children:"Curve:"}),J.jsx("input",{type:"range",min:"50",max:"300",value:((Ji=b.find(x=>x.id===v))==null?void 0:Ji.radius)||100,onChange:x=>Be(parseInt(x.target.value)),style:{width:"80px",cursor:"pointer"}}),J.jsx("span",{style:{fontSize:"12px",color:"#666",minWidth:"35px"},children:(((Zi=b.find(x=>x.id===v))==null?void 0:Zi.radius)||100)*2})]}),J.jsx("button",{onClick:gt,style:{width:"32px",height:"32px",padding:"4px",border:"none",borderRadius:"4px",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",transition:"background-color 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#e3f2fd",onMouseLeave:x=>x.currentTarget.style.backgroundColor="white",title:"Flip Text",children:""})]})]}),j&&v&&(S.find(x=>x.id===v)||d.find(x=>x.id===v)||b.find(x=>x.id===v))&&J.jsx("div",{style:{position:"fixed",left:j.x,top:j.y,transform:"translateX(-50%)",zIndex:1001},children:J.jsx("input",{type:"text",value:(($i=S.find(x=>x.id===v))==null?void 0:$i.text)||((yi=d.find(x=>x.id===v))==null?void 0:yi.text)||((ar=b.find(x=>x.id===v))==null?void 0:ar.text)||"",onChange:x=>{const W=x.target.value;S.find(q=>q.id===v)?p(q=>q.map(Z=>Z.id===v?{...Z,text:W}:Z)):b.find(q=>q.id===v)?I(q=>q.map(Z=>Z.id===v?{...Z,text:W}:Z)):d.find(q=>q.id===v)&&C(q=>q.map(Z=>Z.id===v?{...Z,text:W}:Z))},onKeyDown:x=>{x.key==="Escape"&&N(null)},style:{padding:"8px 12px",fontSize:"16px",width:"300px",border:"2px solid #0066ff",borderRadius:"6px",outline:"none",background:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontFamily:"Arial, sans-serif",textAlign:"center"},placeholder:"Enter text...",autoFocus:!0})}),J.jsx(df,{isOpen:ce,onClose:()=>ve(!1),onSelectFont:et,currentFont:((es=S.find(x=>x.id===v))==null?void 0:es.fontFamily)||((ts=d.find(x=>x.id===v))==null?void 0:ts.fontFamily)||((Wn=b.find(x=>x.id===v))==null?void 0:Wn.fontFamily)||"Arial",previewText:((ns=S.find(x=>x.id===v))==null?void 0:ns.text)||((rs=d.find(x=>x.id===v))==null?void 0:rs.text)||((is=b.find(x=>x.id===v))==null?void 0:is.text)||"The quick brown fox jumps over the lazy dog"}),J.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes slideDown {
          from {
            transform: translateX(-50%) translateY(-20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }
      `}})]})};function ff(){return J.jsxs("div",{style:{padding:0,margin:0},children:[J.jsx("h2",{style:{padding:"20px",fontFamily:"Arial"},children:"Standalone Designer Canvas (No Remix Hydration)"}),J.jsx(hf,{})]})}if(typeof window<"u"){const s=()=>{const f=document.getElementById("canvas-root");f&&lc.createRoot(f).render(J.jsx(ff,{}))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()}})(React,ReactDOM);
