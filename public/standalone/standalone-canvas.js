(function(Be,gh){"use strict";function ph(s){const p=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const L in s)if(L!=="default"){const O=Object.getOwnPropertyDescriptor(s,L);Object.defineProperty(p,L,O.get?O:{enumerable:!0,get:()=>s[L]})}}return p.default=s,Object.freeze(p)}const ot=ph(Be);var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var is={exports:{}},Xn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa;function mh(){if(qa)return Xn;qa=1;var s=Be,p=Symbol.for("react.element"),L=Symbol.for("react.fragment"),O=Object.prototype.hasOwnProperty,M=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function o(d,f,m){var v,P={},w=null,g=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(g=f.ref);for(v in f)O.call(f,v)&&!_.hasOwnProperty(v)&&(P[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)P[v]===void 0&&(P[v]=f[v]);return{$$typeof:p,type:d,key:w,ref:g,props:P,_owner:M.current}}return Xn.Fragment=L,Xn.jsx=o,Xn.jsxs=o,Xn}var Wa;function vh(){return Wa||(Wa=1,is.exports=mh()),is.exports}var an=vh(),si={},ja;function yh(){if(ja)return si;ja=1;var s=gh;return si.createRoot=s.createRoot,si.hydrateRoot=s.hydrateRoot,si}var _h=yh();const Sh=rs(_h);var ai={exports:{}},Qn={},ss={},as={},Ka;function ye(){return Ka||(Ka=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s._registerNode=s.Konva=s.glob=void 0;const p=Math.PI/180;function L(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}s.glob=typeof Ha<"u"?Ha:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},s.Konva={_global:s.glob,version:"9.3.20",isBrowser:L(),isUnminified:/param/.test((function(M){}).toString()),dblClickWindow:400,getAngle(M){return s.Konva.angleDeg?M*p:M},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return s.Konva.DD.isDragging},isTransforming(){var M;return(M=s.Konva.Transformer)===null||M===void 0?void 0:M.isTransforming()},isDragReady(){return!!s.Konva.DD.node},releaseCanvasOnDestroy:!0,document:s.glob.document,_injectGlobal(M){s.glob.Konva=M}};const O=M=>{s.Konva[M.prototype.getClassName()]=M};s._registerNode=O,s.Konva._injectGlobal(s.Konva)}(as)),as}var os={},Ya;function Ie(){return Ya||(Ya=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Util=s.Transform=void 0;const p=ye();class L{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new L(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){const k=this.m;return{x:k[0]*S.x+k[2]*S.y+k[4],y:k[1]*S.x+k[3]*S.y+k[5]}}translate(S,k){return this.m[4]+=this.m[0]*S+this.m[2]*k,this.m[5]+=this.m[1]*S+this.m[3]*k,this}scale(S,k){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=k,this.m[3]*=k,this}rotate(S){const k=Math.cos(S),N=Math.sin(S),B=this.m[0]*k+this.m[2]*N,F=this.m[1]*k+this.m[3]*N,T=this.m[0]*-N+this.m[2]*k,R=this.m[1]*-N+this.m[3]*k;return this.m[0]=B,this.m[1]=F,this.m[2]=T,this.m[3]=R,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,k){const N=this.m[0]+this.m[2]*k,B=this.m[1]+this.m[3]*k,F=this.m[2]+this.m[0]*S,T=this.m[3]+this.m[1]*S;return this.m[0]=N,this.m[1]=B,this.m[2]=F,this.m[3]=T,this}multiply(S){const k=this.m[0]*S.m[0]+this.m[2]*S.m[1],N=this.m[1]*S.m[0]+this.m[3]*S.m[1],B=this.m[0]*S.m[2]+this.m[2]*S.m[3],F=this.m[1]*S.m[2]+this.m[3]*S.m[3],T=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],R=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=k,this.m[1]=N,this.m[2]=B,this.m[3]=F,this.m[4]=T,this.m[5]=R,this}invert(){const S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),k=this.m[3]*S,N=-this.m[1]*S,B=-this.m[2]*S,F=this.m[0]*S,T=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),R=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=k,this.m[1]=N,this.m[2]=B,this.m[3]=F,this.m[4]=T,this.m[5]=R,this}getMatrix(){return this.m}decompose(){const S=this.m[0],k=this.m[1],N=this.m[2],B=this.m[3],F=this.m[4],T=this.m[5],R=S*B-k*N,D={x:F,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||k!=0){const V=Math.sqrt(S*S+k*k);D.rotation=k>0?Math.acos(S/V):-Math.acos(S/V),D.scaleX=V,D.scaleY=R/V,D.skewX=(S*N+k*B)/R,D.skewY=0}else if(N!=0||B!=0){const V=Math.sqrt(N*N+B*B);D.rotation=Math.PI/2-(B>0?Math.acos(-N/V):-Math.acos(N/V)),D.scaleX=R/V,D.scaleY=V,D.skewX=0,D.skewY=(S*N+k*B)/R}return D.rotation=s.Util._getRotation(D.rotation),D}}s.Transform=L;const O="[object Array]",M="[object Number]",_="[object String]",o="[object Boolean]",d=Math.PI/180,f=180/Math.PI,m="#",v="",P="0",w="Konva warning: ",g="Konva error: ",c="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},x=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let A=[];const l=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(a){setTimeout(a,60)};s.Util={_isElement(a){return!!(a&&a.nodeType==1)},_isFunction(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isPlainObject(a){return!!a&&a.constructor===Object},_isArray(a){return Object.prototype.toString.call(a)===O},_isNumber(a){return Object.prototype.toString.call(a)===M&&!isNaN(a)&&isFinite(a)},_isString(a){return Object.prototype.toString.call(a)===_},_isBoolean(a){return Object.prototype.toString.call(a)===o},isObject(a){return a instanceof Object},isValidSelector(a){if(typeof a!="string")return!1;const S=a[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(a){return a===0||a>0?1:-1},requestAnimFrame(a){A.push(a),A.length===1&&l(function(){const S=A;A=[],S.forEach(function(k){k()})})},createCanvasElement(){const a=document.createElement("canvas");try{a.style=a.style||{}}catch{}return a},createImageElement(){return document.createElement("img")},_isInDocument(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},_urlToImage(a,S){const k=s.Util.createImageElement();k.onload=function(){S(k)},k.src=a},_rgbToHex(a,S,k){return((1<<24)+(a<<16)+(S<<8)+k).toString(16).slice(1)},_hexToRgb(a){a=a.replace(m,v);const S=parseInt(a,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){let a=(Math.random()*16777215<<0).toString(16);for(;a.length<6;)a=P+a;return m+a},getRGB(a){let S;return a in y?(S=y[a],{r:S[0],g:S[1],b:S[2]}):a[0]===m?this._hexToRgb(a.substring(1)):a.substr(0,4)===c?(S=x.exec(a.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(a){return a=a||"black",s.Util._namedColorToRBA(a)||s.Util._hex3ColorToRGBA(a)||s.Util._hex4ColorToRGBA(a)||s.Util._hex6ColorToRGBA(a)||s.Util._hex8ColorToRGBA(a)||s.Util._rgbColorToRGBA(a)||s.Util._rgbaColorToRGBA(a)||s.Util._hslColorToRGBA(a)},_namedColorToRBA(a){const S=y[a.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(a){if(a.indexOf("rgb(")===0){a=a.match(/rgb\(([^)]+)\)/)[1];const S=a.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(a){if(a.indexOf("rgba(")===0){a=a.match(/rgba\(([^)]+)\)/)[1];const S=a.split(/ *, */).map((k,N)=>k.slice(-1)==="%"?N===3?parseInt(k)/100:parseInt(k)/100*255:Number(k));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(a){if(a[0]==="#"&&a.length===9)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:parseInt(a.slice(7,9),16)/255}},_hex6ColorToRGBA(a){if(a[0]==="#"&&a.length===7)return{r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16),a:1}},_hex4ColorToRGBA(a){if(a[0]==="#"&&a.length===5)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:parseInt(a[4]+a[4],16)/255}},_hex3ColorToRGBA(a){if(a[0]==="#"&&a.length===4)return{r:parseInt(a[1]+a[1],16),g:parseInt(a[2]+a[2],16),b:parseInt(a[3]+a[3],16),a:1}},_hslColorToRGBA(a){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(a)){const[S,...k]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a),N=Number(k[0])/360,B=Number(k[1])/100,F=Number(k[2])/100;let T,R,D;if(B===0)return D=F*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};F<.5?T=F*(1+B):T=F+B-F*B;const V=2*F-T,u=[0,0,0];for(let E=0;E<3;E++)R=N+1/3*-(E-1),R<0&&R++,R>1&&R--,6*R<1?D=V+(T-V)*6*R:2*R<1?D=T:3*R<2?D=V+(T-V)*(2/3-R)*6:D=V,u[E]=D*255;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection(a,S){return!(S.x>a.x+a.width||S.x+S.width<a.x||S.y>a.y+a.height||S.y+S.height<a.y)},cloneObject(a){const S={};for(const k in a)this._isPlainObject(a[k])?S[k]=this.cloneObject(a[k]):this._isArray(a[k])?S[k]=this.cloneArray(a[k]):S[k]=a[k];return S},cloneArray(a){return a.slice(0)},degToRad(a){return a*d},radToDeg(a){return a*f},_degToRad(a){return s.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),s.Util.degToRad(a)},_radToDeg(a){return s.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),s.Util.radToDeg(a)},_getRotation(a){return p.Konva.angleDeg?s.Util.radToDeg(a):a},_capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)},throw(a){throw new Error(g+a)},error(a){console.error(g+a)},warn(a){p.Konva.showWarnings&&console.warn(w+a)},each(a,S){for(const k in a)S(k,a[k])},_inRange(a,S,k){return S<=a&&a<k},_getProjectionToSegment(a,S,k,N,B,F){let T,R,D;const V=(a-k)*(a-k)+(S-N)*(S-N);if(V==0)T=a,R=S,D=(B-k)*(B-k)+(F-N)*(F-N);else{const u=((B-a)*(k-a)+(F-S)*(N-S))/V;u<0?(T=a,R=S,D=(a-B)*(a-B)+(S-F)*(S-F)):u>1?(T=k,R=N,D=(k-B)*(k-B)+(N-F)*(N-F)):(T=a+u*(k-a),R=S+u*(N-S),D=(T-B)*(T-B)+(R-F)*(R-F))}return[T,R,D]},_getProjectionToLine(a,S,k){const N=s.Util.cloneObject(a);let B=Number.MAX_VALUE;return S.forEach(function(F,T){if(!k&&T===S.length-1)return;const R=S[(T+1)%S.length],D=s.Util._getProjectionToSegment(F.x,F.y,R.x,R.y,a.x,a.y),V=D[0],u=D[1],E=D[2];E<B&&(N.x=V,N.y=u,B=E)}),N},_prepareArrayForTween(a,S,k){const N=[],B=[];if(a.length>S.length){const T=S;S=a,a=T}for(let T=0;T<a.length;T+=2)N.push({x:a[T],y:a[T+1]});for(let T=0;T<S.length;T+=2)B.push({x:S[T],y:S[T+1]});const F=[];return B.forEach(function(T){const R=s.Util._getProjectionToLine(T,N,k);F.push(R.x),F.push(R.y)}),F},_prepareToStringify(a){let S;a.visitedByCircularReferenceRemoval=!0;for(const k in a)if(a.hasOwnProperty(k)&&a[k]&&typeof a[k]=="object"){if(S=Object.getOwnPropertyDescriptor(a,k),a[k].visitedByCircularReferenceRemoval||s.Util._isElement(a[k]))if(S.configurable)delete a[k];else return null;else if(s.Util._prepareToStringify(a[k])===null)if(S.configurable)delete a[k];else return null}return delete a.visitedByCircularReferenceRemoval,a},_assign(a,S){for(const k in S)a[k]=S[k];return a},_getFirstPointerId(a){return a.touches?a.changedTouches[0].identifier:a.pointerId||999},releaseCanvas(...a){p.Konva.releaseCanvasOnDestroy&&a.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(a,S,k,N){let B=0,F=0,T=0,R=0;typeof N=="number"?B=F=T=R=Math.min(N,S/2,k/2):(B=Math.min(N[0]||0,S/2,k/2),F=Math.min(N[1]||0,S/2,k/2),R=Math.min(N[2]||0,S/2,k/2),T=Math.min(N[3]||0,S/2,k/2)),a.moveTo(B,0),a.lineTo(S-F,0),a.arc(S-F,F,F,Math.PI*3/2,0,!1),a.lineTo(S,k-R),a.arc(S-R,k-R,R,0,Math.PI/2,!1),a.lineTo(T,k),a.arc(T,k-T,T,Math.PI/2,Math.PI,!1),a.lineTo(0,B),a.arc(B,B,B,Math.PI,Math.PI*3/2,!1)}}}(os)),os}var Jn={},ls={},lt={},Xa;function Ce(){if(Xa)return lt;Xa=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.RGBComponent=O,lt.alphaComponent=M,lt.getNumberValidator=_,lt.getNumberOrArrayOfNumbersValidator=o,lt.getNumberOrAutoValidator=d,lt.getStringValidator=f,lt.getStringOrGradientValidator=m,lt.getFunctionValidator=v,lt.getNumberArrayValidator=P,lt.getBooleanValidator=w,lt.getComponentValidator=g;const s=ye(),p=Ie();function L(c){return p.Util._isString(c)?'"'+c+'"':Object.prototype.toString.call(c)==="[object Number]"||p.Util._isBoolean(c)?c:Object.prototype.toString.call(c)}function O(c){return c>255?255:c<0?0:Math.round(c)}function M(c){return c>1?1:c<1e-4?1e-4:c}function _(){if(s.Konva.isUnminified)return function(c,y){return p.Util._isNumber(c)||p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),c}}function o(c){if(s.Konva.isUnminified)return function(y,x){let A=p.Util._isNumber(y),l=p.Util._isArray(y)&&y.length==c;return!A&&!l&&p.Util.warn(L(y)+' is a not valid value for "'+x+'" attribute. The value should be a number or Array<number>('+c+")"),y}}function d(){if(s.Konva.isUnminified)return function(c,y){var x=p.Util._isNumber(c),A=c==="auto";return x||A||p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),c}}function f(){if(s.Konva.isUnminified)return function(c,y){return p.Util._isString(c)||p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),c}}function m(){if(s.Konva.isUnminified)return function(c,y){const x=p.Util._isString(c),A=Object.prototype.toString.call(c)==="[object CanvasGradient]"||c&&c.addColorStop;return x||A||p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),c}}function v(){if(s.Konva.isUnminified)return function(c,y){return p.Util._isFunction(c)||p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),c}}function P(){if(s.Konva.isUnminified)return function(c,y){const x=Int8Array?Object.getPrototypeOf(Int8Array):null;return x&&c instanceof x||(p.Util._isArray(c)?c.forEach(function(A){p.Util._isNumber(A)||p.Util.warn('"'+y+'" attribute has non numeric element '+A+". Make sure that all elements are numbers.")}):p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),c}}function w(){if(s.Konva.isUnminified)return function(c,y){var x=c===!0||c===!1;return x||p.Util.warn(L(c)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),c}}function g(c){if(s.Konva.isUnminified)return function(y,x){return y==null||p.Util.isObject(y)||p.Util.warn(L(y)+' is a not valid value for "'+x+'" attribute. The value should be an object with properties '+c),y}}return lt}var Qa;function Se(){return Qa||(Qa=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Factory=void 0;const p=Ie(),L=Ce(),O="get",M="set";s.Factory={addGetterSetter(_,o,d,f,m){s.Factory.addGetter(_,o,d),s.Factory.addSetter(_,o,f,m),s.Factory.addOverloadedGetterSetter(_,o)},addGetter(_,o,d){var f=O+p.Util._capitalize(o);_.prototype[f]=_.prototype[f]||function(){const m=this.attrs[o];return m===void 0?d:m}},addSetter(_,o,d,f){var m=M+p.Util._capitalize(o);_.prototype[m]||s.Factory.overWriteSetter(_,o,d,f)},overWriteSetter(_,o,d,f){var m=M+p.Util._capitalize(o);_.prototype[m]=function(v){return d&&v!==void 0&&v!==null&&(v=d.call(this,v,o)),this._setAttr(o,v),f&&f.call(this),this}},addComponentsGetterSetter(_,o,d,f,m){const v=d.length,P=p.Util._capitalize,w=O+P(o),g=M+P(o);_.prototype[w]=function(){const y={};for(let x=0;x<v;x++){const A=d[x];y[A]=this.getAttr(o+P(A))}return y};const c=(0,L.getComponentValidator)(d);_.prototype[g]=function(y){const x=this.attrs[o];f&&(y=f.call(this,y,o)),c&&c.call(this,y,o);for(const A in y)y.hasOwnProperty(A)&&this._setAttr(o+P(A),y[A]);return y||d.forEach(A=>{this._setAttr(o+P(A),void 0)}),this._fireChangeEvent(o,x,y),m&&m.call(this),this},s.Factory.addOverloadedGetterSetter(_,o)},addOverloadedGetterSetter(_,o){var d=p.Util._capitalize(o),f=M+d,m=O+d;_.prototype[o]=function(){return arguments.length?(this[f](arguments[0]),this):this[m]()}},addDeprecatedGetterSetter(_,o,d,f){p.Util.error("Adding deprecated "+o);const m=O+p.Util._capitalize(o),v=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";_.prototype[m]=function(){p.Util.error(v);const P=this.attrs[o];return P===void 0?d:P},s.Factory.addSetter(_,o,f,function(){p.Util.error(v)}),s.Factory.addOverloadedGetterSetter(_,o)},backCompat(_,o){p.Util.each(o,function(d,f){const m=_.prototype[f],v=O+p.Util._capitalize(d),P=M+p.Util._capitalize(d);function w(){m.apply(this,arguments),p.Util.error('"'+d+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}_.prototype[d]=w,_.prototype[v]=w,_.prototype[P]=w})},afterSetFilter(){this._filterUpToDate=!1}}}(ls)),ls}var Xt={},Qt={},Ja;function Za(){if(Ja)return Qt;Ja=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.HitContext=Qt.SceneContext=Qt.Context=void 0;const s=Ie(),p=ye();function L(A){const l=[],a=A.length,S=s.Util;for(let k=0;k<a;k++){let N=A[k];S._isNumber(N)?N=Math.round(N*1e3)/1e3:S._isString(N)||(N=N+""),l.push(N)}return l}const O=",",M="(",_=")",o="([",d="])",f=";",m="()",v="=",P=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],w=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let c=class{constructor(l){this.canvas=l,p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(l){l.fillEnabled()&&this._fill(l)}_fill(l){}strokeShape(l){l.hasStroke()&&this._stroke(l)}_stroke(l){}fillStrokeShape(l){l.attrs.fillAfterStrokeEnabled?(this.strokeShape(l),this.fillShape(l)):(this.fillShape(l),this.strokeShape(l))}getTrace(l,a){let S=this.traceArr,k=S.length,N="",B,F,T,R;for(B=0;B<k;B++)F=S[B],T=F.method,T?(R=F.args,N+=T,l?N+=m:s.Util._isArray(R[0])?N+=o+R.join(O)+d:(a&&(R=R.map(D=>typeof D=="number"?Math.floor(D):D)),N+=M+R.join(O)+_)):(N+=F.property,l||(N+=v+F.val)),N+=f;return N}clearTrace(){this.traceArr=[]}_trace(l){let a=this.traceArr,S;a.push(l),S=a.length,S>=g&&a.shift()}reset(){const l=this.getCanvas().getPixelRatio();this.setTransform(1*l,0,0,1*l,0,0)}getCanvas(){return this.canvas}clear(l){const a=this.getCanvas();l?this.clearRect(l.x||0,l.y||0,l.width||0,l.height||0):this.clearRect(0,0,a.getWidth()/a.pixelRatio,a.getHeight()/a.pixelRatio)}_applyLineCap(l){const a=l.attrs.lineCap;a&&this.setAttr("lineCap",a)}_applyOpacity(l){const a=l.getAbsoluteOpacity();a!==1&&this.setAttr("globalAlpha",a)}_applyLineJoin(l){const a=l.attrs.lineJoin;a&&this.setAttr("lineJoin",a)}setAttr(l,a){this._context[l]=a}arc(l,a,S,k,N,B){this._context.arc(l,a,S,k,N,B)}arcTo(l,a,S,k,N){this._context.arcTo(l,a,S,k,N)}beginPath(){this._context.beginPath()}bezierCurveTo(l,a,S,k,N,B){this._context.bezierCurveTo(l,a,S,k,N,B)}clearRect(l,a,S,k){this._context.clearRect(l,a,S,k)}clip(...l){this._context.clip.apply(this._context,l)}closePath(){this._context.closePath()}createImageData(l,a){const S=arguments;if(S.length===2)return this._context.createImageData(l,a);if(S.length===1)return this._context.createImageData(l)}createLinearGradient(l,a,S,k){return this._context.createLinearGradient(l,a,S,k)}createPattern(l,a){return this._context.createPattern(l,a)}createRadialGradient(l,a,S,k,N,B){return this._context.createRadialGradient(l,a,S,k,N,B)}drawImage(l,a,S,k,N,B,F,T,R){const D=arguments,V=this._context;D.length===3?V.drawImage(l,a,S):D.length===5?V.drawImage(l,a,S,k,N):D.length===9&&V.drawImage(l,a,S,k,N,B,F,T,R)}ellipse(l,a,S,k,N,B,F,T){this._context.ellipse(l,a,S,k,N,B,F,T)}isPointInPath(l,a,S,k){return S?this._context.isPointInPath(S,l,a,k):this._context.isPointInPath(l,a,k)}fill(...l){this._context.fill.apply(this._context,l)}fillRect(l,a,S,k){this._context.fillRect(l,a,S,k)}strokeRect(l,a,S,k){this._context.strokeRect(l,a,S,k)}fillText(l,a,S,k){k?this._context.fillText(l,a,S,k):this._context.fillText(l,a,S)}measureText(l){return this._context.measureText(l)}getImageData(l,a,S,k){return this._context.getImageData(l,a,S,k)}lineTo(l,a){this._context.lineTo(l,a)}moveTo(l,a){this._context.moveTo(l,a)}rect(l,a,S,k){this._context.rect(l,a,S,k)}roundRect(l,a,S,k,N){this._context.roundRect(l,a,S,k,N)}putImageData(l,a,S){this._context.putImageData(l,a,S)}quadraticCurveTo(l,a,S,k){this._context.quadraticCurveTo(l,a,S,k)}restore(){this._context.restore()}rotate(l){this._context.rotate(l)}save(){this._context.save()}scale(l,a){this._context.scale(l,a)}setLineDash(l){this._context.setLineDash?this._context.setLineDash(l):"mozDash"in this._context?this._context.mozDash=l:"webkitLineDash"in this._context&&(this._context.webkitLineDash=l)}getLineDash(){return this._context.getLineDash()}setTransform(l,a,S,k,N,B){this._context.setTransform(l,a,S,k,N,B)}stroke(l){l?this._context.stroke(l):this._context.stroke()}strokeText(l,a,S,k){this._context.strokeText(l,a,S,k)}transform(l,a,S,k,N,B){this._context.transform(l,a,S,k,N,B)}translate(l,a){this._context.translate(l,a)}_enableTrace(){let l=this,a=P.length,S=this.setAttr,k,N;const B=function(F){let T=l[F],R;l[F]=function(){return N=L(Array.prototype.slice.call(arguments,0)),R=T.apply(l,arguments),l._trace({method:F,args:N}),R}};for(k=0;k<a;k++)B(P[k]);l.setAttr=function(){S.apply(l,arguments);const F=arguments[0];let T=arguments[1];(F==="shadowOffsetX"||F==="shadowOffsetY"||F==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),l._trace({property:F,val:T})}}_applyGlobalCompositeOperation(l){const a=l.attrs.globalCompositeOperation;!a||a==="source-over"||this.setAttr("globalCompositeOperation",a)}};Qt.Context=c,w.forEach(function(A){Object.defineProperty(c.prototype,A,{get(){return this._context[A]},set(l){this._context[A]=l}})});class y extends c{constructor(l,{willReadFrequently:a=!1}={}){super(l),this._context=l._canvas.getContext("2d",{willReadFrequently:a})}_fillColor(l){const a=l.fill();this.setAttr("fillStyle",a),l._fillFunc(this)}_fillPattern(l){this.setAttr("fillStyle",l._getFillPattern()),l._fillFunc(this)}_fillLinearGradient(l){const a=l._getLinearGradient();a&&(this.setAttr("fillStyle",a),l._fillFunc(this))}_fillRadialGradient(l){const a=l._getRadialGradient();a&&(this.setAttr("fillStyle",a),l._fillFunc(this))}_fill(l){const a=l.fill(),S=l.getFillPriority();if(a&&S==="color"){this._fillColor(l);return}const k=l.getFillPatternImage();if(k&&S==="pattern"){this._fillPattern(l);return}const N=l.getFillLinearGradientColorStops();if(N&&S==="linear-gradient"){this._fillLinearGradient(l);return}const B=l.getFillRadialGradientColorStops();if(B&&S==="radial-gradient"){this._fillRadialGradient(l);return}a?this._fillColor(l):k?this._fillPattern(l):N?this._fillLinearGradient(l):B&&this._fillRadialGradient(l)}_strokeLinearGradient(l){const a=l.getStrokeLinearGradientStartPoint(),S=l.getStrokeLinearGradientEndPoint(),k=l.getStrokeLinearGradientColorStops(),N=this.createLinearGradient(a.x,a.y,S.x,S.y);if(k){for(let B=0;B<k.length;B+=2)N.addColorStop(k[B],k[B+1]);this.setAttr("strokeStyle",N)}}_stroke(l){const a=l.dash(),S=l.getStrokeScaleEnabled();if(l.hasStroke()){if(!S){this.save();const N=this.getCanvas().getPixelRatio();this.setTransform(N,0,0,N,0,0)}this._applyLineCap(l),a&&l.dashEnabled()&&(this.setLineDash(a),this.setAttr("lineDashOffset",l.dashOffset())),this.setAttr("lineWidth",l.strokeWidth()),l.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),l.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(l):this.setAttr("strokeStyle",l.stroke()),l._strokeFunc(this),S||this.restore()}}_applyShadow(l){var a,S,k;const N=(a=l.getShadowRGBA())!==null&&a!==void 0?a:"black",B=(S=l.getShadowBlur())!==null&&S!==void 0?S:5,F=(k=l.getShadowOffset())!==null&&k!==void 0?k:{x:0,y:0},T=l.getAbsoluteScale(),R=this.canvas.getPixelRatio(),D=T.x*R,V=T.y*R;this.setAttr("shadowColor",N),this.setAttr("shadowBlur",B*Math.min(Math.abs(D),Math.abs(V))),this.setAttr("shadowOffsetX",F.x*D),this.setAttr("shadowOffsetY",F.y*V)}}Qt.SceneContext=y;class x extends c{constructor(l){super(l),this._context=l._canvas.getContext("2d",{willReadFrequently:!0})}_fill(l){this.save(),this.setAttr("fillStyle",l.colorKey),l._fillFuncHit(this),this.restore()}strokeShape(l){l.hasHitStroke()&&this._stroke(l)}_stroke(l){if(l.hasHitStroke()){const a=l.getStrokeScaleEnabled();if(!a){this.save();const N=this.getCanvas().getPixelRatio();this.setTransform(N,0,0,N,0,0)}this._applyLineCap(l);const S=l.hitStrokeWidth(),k=S==="auto"?l.strokeWidth():S;this.setAttr("lineWidth",k),this.setAttr("strokeStyle",l.colorKey),l._strokeFuncHit(this),a||this.restore()}}}return Qt.HitContext=x,Qt}var $a;function oi(){if($a)return Xt;$a=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.HitCanvas=Xt.SceneCanvas=Xt.Canvas=void 0;const s=Ie(),p=Za(),L=ye();let O;function M(){if(O)return O;const f=s.Util.createCanvasElement(),m=f.getContext("2d");return O=function(){const v=L.Konva._global.devicePixelRatio||1,P=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return v/P}(),s.Util.releaseCanvas(f),O}let _=class{constructor(m){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const P=(m||{}).pixelRatio||L.Konva.pixelRatio||M();this.pixelRatio=P,this._canvas=s.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(m){const v=this.pixelRatio;this.pixelRatio=m,this.setSize(this.getWidth()/v,this.getHeight()/v)}setWidth(m){this.width=this._canvas.width=m*this.pixelRatio,this._canvas.style.width=m+"px";const v=this.pixelRatio;this.getContext()._context.scale(v,v)}setHeight(m){this.height=this._canvas.height=m*this.pixelRatio,this._canvas.style.height=m+"px";const v=this.pixelRatio;this.getContext()._context.scale(v,v)}getWidth(){return this.width}getHeight(){return this.height}setSize(m,v){this.setWidth(m||0),this.setHeight(v||0)}toDataURL(m,v){try{return this._canvas.toDataURL(m,v)}catch{try{return this._canvas.toDataURL()}catch(w){return s.Util.error("Unable to get data URL. "+w.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Xt.Canvas=_;class o extends _{constructor(m={width:0,height:0,willReadFrequently:!1}){super(m),this.context=new p.SceneContext(this,{willReadFrequently:m.willReadFrequently}),this.setSize(m.width,m.height)}}Xt.SceneCanvas=o;class d extends _{constructor(m={width:0,height:0}){super(m),this.hitCanvas=!0,this.context=new p.HitContext(this),this.setSize(m.width,m.height)}}return Xt.HitCanvas=d,Xt}var us={},eo;function hs(){return eo||(eo=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.DD=void 0;const p=ye(),L=Ie();s.DD={get isDragging(){let O=!1;return s.DD._dragElements.forEach(M=>{M.dragStatus==="dragging"&&(O=!0)}),O},justDragged:!1,get node(){let O;return s.DD._dragElements.forEach(M=>{O=M.node}),O},_dragElements:new Map,_drag(O){const M=[];s.DD._dragElements.forEach((_,o)=>{const{node:d}=_,f=d.getStage();f.setPointersPositions(O),_.pointerId===void 0&&(_.pointerId=L.Util._getFirstPointerId(O));const m=f._changedPointerPositions.find(v=>v.id===_.pointerId);if(m){if(_.dragStatus!=="dragging"){const v=d.dragDistance();if(Math.max(Math.abs(m.x-_.startPointerPos.x),Math.abs(m.y-_.startPointerPos.y))<v||(d.startDrag({evt:O}),!d.isDragging()))return}d._setDragPosition(O,_),M.push(d)}}),M.forEach(_=>{_.fire("dragmove",{type:"dragmove",target:_,evt:O},!0)})},_endDragBefore(O){const M=[];s.DD._dragElements.forEach(_=>{const{node:o}=_,d=o.getStage();if(O&&d.setPointersPositions(O),!d._changedPointerPositions.find(v=>v.id===_.pointerId))return;(_.dragStatus==="dragging"||_.dragStatus==="stopped")&&(s.DD.justDragged=!0,p.Konva._mouseListenClick=!1,p.Konva._touchListenClick=!1,p.Konva._pointerListenClick=!1,_.dragStatus="stopped");const m=_.node.getLayer()||_.node instanceof p.Konva.Stage&&_.node;m&&M.indexOf(m)===-1&&M.push(m)}),M.forEach(_=>{_.draw()})},_endDragAfter(O){s.DD._dragElements.forEach((M,_)=>{M.dragStatus==="stopped"&&M.node.fire("dragend",{type:"dragend",target:M.node,evt:O},!0),M.dragStatus!=="dragging"&&s.DD._dragElements.delete(_)})}},p.Konva.isBrowser&&(window.addEventListener("mouseup",s.DD._endDragBefore,!0),window.addEventListener("touchend",s.DD._endDragBefore,!0),window.addEventListener("touchcancel",s.DD._endDragBefore,!0),window.addEventListener("mousemove",s.DD._drag),window.addEventListener("touchmove",s.DD._drag),window.addEventListener("mouseup",s.DD._endDragAfter,!1),window.addEventListener("touchend",s.DD._endDragAfter,!1),window.addEventListener("touchcancel",s.DD._endDragAfter,!1))}(us)),us}var to;function Ge(){if(to)return Jn;to=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Node=void 0;const s=Ie(),p=Se(),L=oi(),O=ye(),M=hs(),_=Ce(),o="absoluteOpacity",d="allEventListeners",f="absoluteTransform",m="absoluteScale",v="canvas",P="Change",w="children",g="konva",c="listening",y="mouseenter",x="mouseleave",A="set",l="Shape",a=" ",S="stage",k="transform",N="Stage",B="visible",F=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(a);let T=1,R=class Va{constructor(u){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(u),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(u){(u===k||u===f)&&this._cache.get(u)?this._cache.get(u).dirty=!0:u?this._cache.delete(u):this._cache.clear()}_getCache(u,E){let C=this._cache.get(u);return(C===void 0||(u===k||u===f)&&C.dirty===!0)&&(C=E.call(this),this._cache.set(u,C)),C}_calculate(u,E,C){if(!this._attachedDepsListeners.get(u)){const I=E.map(G=>G+"Change.konva").join(a);this.on(I,()=>{this._clearCache(u)}),this._attachedDepsListeners.set(u,!0)}return this._getCache(u,C)}_getCanvasCache(){return this._cache.get(v)}_clearSelfAndDescendantCache(u){this._clearCache(u),u===f&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(v)){const{scene:u,filter:E,hit:C}=this._cache.get(v);s.Util.releaseCanvas(u,E,C),this._cache.delete(v)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(u){const E=u||{};let C={};(E.x===void 0||E.y===void 0||E.width===void 0||E.height===void 0)&&(C=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let I=Math.ceil(E.width||C.width),G=Math.ceil(E.height||C.height),z=E.pixelRatio,j=E.x===void 0?Math.floor(C.x):E.x,q=E.y===void 0?Math.floor(C.y):E.y,J=E.offset||0,ee=E.drawBorder||!1,Z=E.hitCanvasPixelRatio||1;if(!I||!G){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const $=Math.abs(Math.round(C.x)-j)>.5?1:0,se=Math.abs(Math.round(C.y)-q)>.5?1:0;I+=J*2+$,G+=J*2+se,j-=J,q-=J;const ae=new L.SceneCanvas({pixelRatio:z,width:I,height:G}),U=new L.SceneCanvas({pixelRatio:z,width:0,height:0,willReadFrequently:!0}),X=new L.HitCanvas({pixelRatio:Z,width:I,height:G}),te=ae.getContext(),re=X.getContext();return X.isCache=!0,ae.isCache=!0,this._cache.delete(v),this._filterUpToDate=!1,E.imageSmoothingEnabled===!1&&(ae.getContext()._context.imageSmoothingEnabled=!1,U.getContext()._context.imageSmoothingEnabled=!1),te.save(),re.save(),te.translate(-j,-q),re.translate(-j,-q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(m),this.drawScene(ae,this),this.drawHit(X,this),this._isUnderCache=!1,te.restore(),re.restore(),ee&&(te.save(),te.beginPath(),te.rect(0,0,I,G),te.closePath(),te.setAttr("strokeStyle","red"),te.setAttr("lineWidth",5),te.stroke(),te.restore()),this._cache.set(v,{scene:ae,filter:U,hit:X,x:j,y:q}),this._requestDraw(),this}isCached(){return this._cache.has(v)}getClientRect(u){throw new Error('abstract "getClientRect" method call')}_transformedRect(u,E){const C=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}];let I=1/0,G=1/0,z=-1/0,j=-1/0;const q=this.getAbsoluteTransform(E);return C.forEach(function(J){const ee=q.point(J);I===void 0&&(I=z=ee.x,G=j=ee.y),I=Math.min(I,ee.x),G=Math.min(G,ee.y),z=Math.max(z,ee.x),j=Math.max(j,ee.y)}),{x:I,y:G,width:z-I,height:j-G}}_drawCachedSceneCanvas(u){u.save(),u._applyOpacity(this),u._applyGlobalCompositeOperation(this);const E=this._getCanvasCache();u.translate(E.x,E.y);const C=this._getCachedSceneCanvas(),I=C.pixelRatio;u.drawImage(C._canvas,0,0,C.width/I,C.height/I),u.restore()}_drawCachedHitCanvas(u){const E=this._getCanvasCache(),C=E.hit;u.save(),u.translate(E.x,E.y),u.drawImage(C._canvas,0,0,C.width/C.pixelRatio,C.height/C.pixelRatio),u.restore()}_getCachedSceneCanvas(){let u=this.filters(),E=this._getCanvasCache(),C=E.scene,I=E.filter,G=I.getContext(),z,j,q,J;if(u){if(!this._filterUpToDate){const ee=C.pixelRatio;I.setSize(C.width/C.pixelRatio,C.height/C.pixelRatio);try{for(z=u.length,G.clear(),G.drawImage(C._canvas,0,0,C.getWidth()/ee,C.getHeight()/ee),j=G.getImageData(0,0,I.getWidth(),I.getHeight()),q=0;q<z;q++){if(J=u[q],typeof J!="function"){s.Util.error("Filter should be type of function, but got "+typeof J+" instead. Please check correct filters");continue}J.call(this,j),G.putImageData(j,0,0)}}catch(Z){s.Util.error("Unable to apply filter. "+Z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return I}return C}on(u,E){if(this._cache&&this._cache.delete(d),arguments.length===3)return this._delegate.apply(this,arguments);let C=u.split(a),I=C.length,G,z,j,q,J;for(G=0;G<I;G++)z=C[G],j=z.split("."),q=j[0],J=j[1]||"",this.eventListeners[q]||(this.eventListeners[q]=[]),this.eventListeners[q].push({name:J,handler:E});return this}off(u,E){let C=(u||"").split(a),I=C.length,G,z,j,q,J,ee;if(this._cache&&this._cache.delete(d),!u)for(z in this.eventListeners)this._off(z);for(G=0;G<I;G++)if(j=C[G],q=j.split("."),J=q[0],ee=q[1],J)this.eventListeners[J]&&this._off(J,ee,E);else for(z in this.eventListeners)this._off(z,ee,E);return this}dispatchEvent(u){const E={target:this,type:u.type,evt:u};return this.fire(u.type,E),this}addEventListener(u,E){return this.on(u,function(C){E.call(this,C.evt)}),this}removeEventListener(u){return this.off(u),this}_delegate(u,E,C){const I=this;this.on(u,function(G){const z=G.target.findAncestors(E,!0,I);for(let j=0;j<z.length;j++)G=s.Util.cloneObject(G),G.currentTarget=z[j],C.call(z[j],G)})}remove(){return this.isDragging()&&this.stopDrag(),M.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(S),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(c)}_remove(){this._clearCaches();const u=this.getParent();u&&u.children&&(u.children.splice(this.index,1),u._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(u){const E="get"+s.Util._capitalize(u);return s.Util._isFunction(this[E])?this[E]():this.attrs[u]}getAncestors(){let u=this.getParent(),E=[];for(;u;)E.push(u),u=u.getParent();return E}getAttrs(){return this.attrs||{}}setAttrs(u){return this._batchTransformChanges(()=>{let E,C;if(!u)return this;for(E in u)E!==w&&(C=A+s.Util._capitalize(E),s.Util._isFunction(this[C])?this[C](u[E]):this._setAttr(E,u[E]))}),this}isListening(){return this._getCache(c,this._isListening)}_isListening(u){if(!this.listening())return!1;const C=this.getParent();return C&&C!==u&&this!==u?C._isListening(u):!0}isVisible(){return this._getCache(B,this._isVisible)}_isVisible(u){if(!this.visible())return!1;const C=this.getParent();return C&&C!==u&&this!==u?C._isVisible(u):!0}shouldDrawHit(u,E=!1){if(u)return this._isVisible(u)&&this._isListening(u);const C=this.getLayer();let I=!1;M.DD._dragElements.forEach(z=>{z.dragStatus==="dragging"&&(z.node.nodeType==="Stage"||z.node.getLayer()===C)&&(I=!0)});const G=!E&&!O.Konva.hitOnDragEnabled&&(I||O.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!G}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let u=this.getDepth(),E=this,C=0,I,G,z,j;function q(ee){for(I=[],G=ee.length,z=0;z<G;z++)j=ee[z],C++,j.nodeType!==l&&(I=I.concat(j.getChildren().slice())),j._id===E._id&&(z=G);I.length>0&&I[0].getDepth()<=u&&q(I)}const J=this.getStage();return E.nodeType!==N&&J&&q(J.getChildren()),C}getDepth(){let u=0,E=this.parent;for(;E;)u++,E=E.parent;return u}_batchTransformChanges(u){this._batchingTransformChange=!0,u(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(k),this._clearSelfAndDescendantCache(f)),this._needClearTransformCache=!1}setPosition(u){return this._batchTransformChanges(()=>{this.x(u.x),this.y(u.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const u=this.getStage();if(!u)return null;const E=u.getPointerPosition();if(!E)return null;const C=this.getAbsoluteTransform().copy();return C.invert(),C.point(E)}getAbsolutePosition(u){let E=!1,C=this.parent;for(;C;){if(C.isCached()){E=!0;break}C=C.parent}E&&!u&&(u=!0);const I=this.getAbsoluteTransform(u).getMatrix(),G=new s.Transform,z=this.offset();return G.m=I.slice(),G.translate(z.x,z.y),G.getTranslation()}setAbsolutePosition(u){const{x:E,y:C,...I}=this._clearTransform();this.attrs.x=E,this.attrs.y=C,this._clearCache(k);const G=this._getAbsoluteTransform().copy();return G.invert(),G.translate(u.x,u.y),u={x:this.attrs.x+G.getTranslation().x,y:this.attrs.y+G.getTranslation().y},this._setTransform(I),this.setPosition({x:u.x,y:u.y}),this._clearCache(k),this._clearSelfAndDescendantCache(f),this}_setTransform(u){let E;for(E in u)this.attrs[E]=u[E]}_clearTransform(){const u={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,u}move(u){let E=u.x,C=u.y,I=this.x(),G=this.y();return E!==void 0&&(I+=E),C!==void 0&&(G+=C),this.setPosition({x:I,y:G}),this}_eachAncestorReverse(u,E){let C=[],I=this.getParent(),G,z;if(!(E&&E._id===this._id)){for(C.unshift(this);I&&(!E||I._id!==E._id);)C.unshift(I),I=I.parent;for(G=C.length,z=0;z<G;z++)u(C[z])}}rotate(u){return this.rotation(this.rotation()+u),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const u=this.index,E=this.parent.getChildren().length;return u<E-1?(this.parent.children.splice(u,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const u=this.index,E=this.parent.getChildren().length;return u<E-1?(this.parent.children.splice(u,1),this.parent.children.splice(u+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const u=this.index;return u>0?(this.parent.children.splice(u,1),this.parent.children.splice(u-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const u=this.index;return u>0?(this.parent.children.splice(u,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(u){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(u<0||u>=this.parent.children.length)&&s.Util.warn("Unexpected value "+u+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const E=this.index;return this.parent.children.splice(E,1),this.parent.children.splice(u,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let u=this.opacity();const E=this.getParent();return E&&!E._isUnderCache&&(u*=E.getAbsoluteOpacity()),u}moveTo(u){return this.getParent()!==u&&(this._remove(),u.add(this)),this}toObject(){let u=this.getAttrs(),E,C,I,G,z;const j={attrs:{},className:this.getClassName()};for(E in u)C=u[E],z=s.Util.isObject(C)&&!s.Util._isPlainObject(C)&&!s.Util._isArray(C),!z&&(I=typeof this[E]=="function"&&this[E],delete u[E],G=I?I.call(this):null,u[E]=C,G!==C&&(j.attrs[E]=C));return s.Util._prepareToStringify(j)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(u,E,C){const I=[];E&&this._isMatch(u)&&I.push(this);let G=this.parent;for(;G;){if(G===C)return I;G._isMatch(u)&&I.push(G),G=G.parent}return I}isAncestorOf(u){return!1}findAncestor(u,E,C){return this.findAncestors(u,E,C)[0]}_isMatch(u){if(!u)return!1;if(typeof u=="function")return u(this);let E=u.replace(/ /g,"").split(","),C=E.length,I,G;for(I=0;I<C;I++)if(G=E[I],s.Util.isValidSelector(G)||(s.Util.warn('Selector "'+G+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),G.charAt(0)==="#"){if(this.id()===G.slice(1))return!0}else if(G.charAt(0)==="."){if(this.hasName(G.slice(1)))return!0}else if(this.className===G||this.nodeType===G)return!0;return!1}getLayer(){const u=this.getParent();return u?u.getLayer():null}getStage(){return this._getCache(S,this._getStage)}_getStage(){const u=this.getParent();return u?u.getStage():null}fire(u,E={},C){return E.target=E.target||this,C?this._fireAndBubble(u,E):this._fire(u,E),this}getAbsoluteTransform(u){return u?this._getAbsoluteTransform(u):this._getCache(f,this._getAbsoluteTransform)}_getAbsoluteTransform(u){let E;if(u)return E=new s.Transform,this._eachAncestorReverse(function(C){const I=C.transformsEnabled();I==="all"?E.multiply(C.getTransform()):I==="position"&&E.translate(C.x()-C.offsetX(),C.y()-C.offsetY())},u),E;{E=this._cache.get(f)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(E):E.reset();const C=this.transformsEnabled();if(C==="all")E.multiply(this.getTransform());else if(C==="position"){const I=this.attrs.x||0,G=this.attrs.y||0,z=this.attrs.offsetX||0,j=this.attrs.offsetY||0;E.translate(I-z,G-j)}return E.dirty=!1,E}}getAbsoluteScale(u){let E=this;for(;E;)E._isUnderCache&&(u=E),E=E.getParent();const I=this.getAbsoluteTransform(u).decompose();return{x:I.scaleX,y:I.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(k,this._getTransform)}_getTransform(){var u,E;const C=this._cache.get(k)||new s.Transform;C.reset();const I=this.x(),G=this.y(),z=O.Konva.getAngle(this.rotation()),j=(u=this.attrs.scaleX)!==null&&u!==void 0?u:1,q=(E=this.attrs.scaleY)!==null&&E!==void 0?E:1,J=this.attrs.skewX||0,ee=this.attrs.skewY||0,Z=this.attrs.offsetX||0,$=this.attrs.offsetY||0;return(I!==0||G!==0)&&C.translate(I,G),z!==0&&C.rotate(z),(J!==0||ee!==0)&&C.skew(J,ee),(j!==1||q!==1)&&C.scale(j,q),(Z!==0||$!==0)&&C.translate(-1*Z,-1*$),C.dirty=!1,C}clone(u){let E=s.Util.cloneObject(this.attrs),C,I,G,z,j;for(C in u)E[C]=u[C];const q=new this.constructor(E);for(C in this.eventListeners)for(I=this.eventListeners[C],G=I.length,z=0;z<G;z++)j=I[z],j.name.indexOf(g)<0&&(q.eventListeners[C]||(q.eventListeners[C]=[]),q.eventListeners[C].push(j));return q}_toKonvaCanvas(u){u=u||{};const E=this.getClientRect(),C=this.getStage(),I=u.x!==void 0?u.x:Math.floor(E.x),G=u.y!==void 0?u.y:Math.floor(E.y),z=u.pixelRatio||1,j=new L.SceneCanvas({width:u.width||Math.ceil(E.width)||(C?C.width():0),height:u.height||Math.ceil(E.height)||(C?C.height():0),pixelRatio:z}),q=j.getContext(),J=new L.SceneCanvas({width:j.width/j.pixelRatio+Math.abs(I),height:j.height/j.pixelRatio+Math.abs(G),pixelRatio:j.pixelRatio});return u.imageSmoothingEnabled===!1&&(q._context.imageSmoothingEnabled=!1),q.save(),(I||G)&&q.translate(-1*I,-1*G),this.drawScene(j,void 0,J),q.restore(),j}toCanvas(u){return this._toKonvaCanvas(u)._canvas}toDataURL(u){u=u||{};const E=u.mimeType||null,C=u.quality||null,I=this._toKonvaCanvas(u).toDataURL(E,C);return u.callback&&u.callback(I),I}toImage(u){return new Promise((E,C)=>{try{const I=u==null?void 0:u.callback;I&&delete u.callback,s.Util._urlToImage(this.toDataURL(u),function(G){E(G),I==null||I(G)})}catch(I){C(I)}})}toBlob(u){return new Promise((E,C)=>{try{const I=u==null?void 0:u.callback;I&&delete u.callback,this.toCanvas(u).toBlob(G=>{E(G),I==null||I(G)},u==null?void 0:u.mimeType,u==null?void 0:u.quality)}catch(I){C(I)}})}setSize(u){return this.width(u.width),this.height(u.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():O.Konva.dragDistance}_off(u,E,C){let I=this.eventListeners[u],G,z,j;for(G=0;G<I.length;G++)if(z=I[G].name,j=I[G].handler,(z!=="konva"||E==="konva")&&(!E||z===E)&&(!C||C===j)){if(I.splice(G,1),I.length===0){delete this.eventListeners[u];break}G--}}_fireChangeEvent(u,E,C){this._fire(u+P,{oldVal:E,newVal:C})}addName(u){if(!this.hasName(u)){const E=this.name(),C=E?E+" "+u:u;this.name(C)}return this}hasName(u){if(!u)return!1;const E=this.name();return E?(E||"").split(/\s/g).indexOf(u)!==-1:!1}removeName(u){const E=(this.name()||"").split(/\s/g),C=E.indexOf(u);return C!==-1&&(E.splice(C,1),this.name(E.join(" "))),this}setAttr(u,E){const C=this[A+s.Util._capitalize(u)];return s.Util._isFunction(C)?C.call(this,E):this._setAttr(u,E),this}_requestDraw(){if(O.Konva.autoDrawEnabled){const u=this.getLayer()||this.getStage();u==null||u.batchDraw()}}_setAttr(u,E){const C=this.attrs[u];C===E&&!s.Util.isObject(E)||(E==null?delete this.attrs[u]:this.attrs[u]=E,this._shouldFireChangeEvents&&this._fireChangeEvent(u,C,E),this._requestDraw())}_setComponentAttr(u,E,C){let I;C!==void 0&&(I=this.attrs[u],I||(this.attrs[u]=this.getAttr(u)),this.attrs[u][E]=C,this._fireChangeEvent(u,I,C))}_fireAndBubble(u,E,C){if(E&&this.nodeType===l&&(E.target=this),!((u===y||u===x)&&(C&&(this===C||this.isAncestorOf&&this.isAncestorOf(C))||this.nodeType==="Stage"&&!C))){this._fire(u,E);const G=(u===y||u===x)&&C&&C.isAncestorOf&&C.isAncestorOf(this)&&!C.isAncestorOf(this.parent);(E&&!E.cancelBubble||!E)&&this.parent&&this.parent.isListening()&&!G&&(C&&C.parent?this._fireAndBubble.call(this.parent,u,E,C):this._fireAndBubble.call(this.parent,u,E))}}_getProtoListeners(u){var E,C,I;const G=(E=this._cache.get(d))!==null&&E!==void 0?E:{};let z=G==null?void 0:G[u];if(z===void 0){z=[];let j=Object.getPrototypeOf(this);for(;j;){const q=(I=(C=j.eventListeners)===null||C===void 0?void 0:C[u])!==null&&I!==void 0?I:[];z.push(...q),j=Object.getPrototypeOf(j)}G[u]=z,this._cache.set(d,G)}return z}_fire(u,E){E=E||{},E.currentTarget=this,E.type=u;const C=this._getProtoListeners(u);if(C)for(var I=0;I<C.length;I++)C[I].handler.call(this,E);const G=this.eventListeners[u];if(G)for(var I=0;I<G.length;I++)G[I].handler.call(this,E)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(u){const E=u?u.pointerId:void 0,C=this.getStage(),I=this.getAbsolutePosition();if(!C)return;const G=C._getPointerById(E)||C._changedPointerPositions[0]||I;M.DD._dragElements.set(this._id,{node:this,startPointerPos:G,offset:{x:G.x-I.x,y:G.y-I.y},dragStatus:"ready",pointerId:E})}startDrag(u,E=!0){M.DD._dragElements.has(this._id)||this._createDragElement(u);const C=M.DD._dragElements.get(this._id);C.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:u&&u.evt},E)}_setDragPosition(u,E){const C=this.getStage()._getPointerById(E.pointerId);if(!C)return;let I={x:C.x-E.offset.x,y:C.y-E.offset.y};const G=this.dragBoundFunc();if(G!==void 0){const z=G.call(this,I,u);z?I=z:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==I.x||this._lastPos.y!==I.y)&&(this.setAbsolutePosition(I),this._requestDraw()),this._lastPos=I}stopDrag(u){const E=M.DD._dragElements.get(this._id);E&&(E.dragStatus="stopped"),M.DD._endDragBefore(u),M.DD._endDragAfter(u)}setDraggable(u){this._setAttr("draggable",u),this._dragChange()}isDragging(){const u=M.DD._dragElements.get(this._id);return u?u.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(u){if(!(!(u.evt.button!==void 0)||O.Konva.dragButtons.indexOf(u.evt.button)>=0)||this.isDragging())return;let I=!1;M.DD._dragElements.forEach(G=>{this.isAncestorOf(G.node)&&(I=!0)}),I||this._createDragElement(u)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const E=M.DD._dragElements.get(this._id),C=E&&E.dragStatus==="dragging",I=E&&E.dragStatus==="ready";C?this.stopDrag():I&&M.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(u={x:0,y:0}){const E=this.getStage();if(!E)return!1;const C={x:-u.x,y:-u.y,width:E.width()+2*u.x,height:E.height()+2*u.y};return s.Util.haveIntersection(C,this.getClientRect())}static create(u,E){return s.Util._isString(u)&&(u=JSON.parse(u)),this._createNode(u,E)}static _createNode(u,E){let C=Va.prototype.getClassName.call(u),I=u.children,G,z,j;E&&(u.attrs.container=E),O.Konva[C]||(s.Util.warn('Can not find a node with class name "'+C+'". Fallback to "Shape".'),C="Shape");const q=O.Konva[C];if(G=new q(u.attrs),I)for(z=I.length,j=0;j<z;j++)G.add(Va._createNode(I[j]));return G}};Jn.Node=R,R.prototype.nodeType="Node",R.prototype._attrsAffectingSize=[],R.prototype.eventListeners={},R.prototype.on.call(R.prototype,F,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(k),this._clearSelfAndDescendantCache(f)}),R.prototype.on.call(R.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(B)}),R.prototype.on.call(R.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(c)}),R.prototype.on.call(R.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const D=p.Factory.addGetterSetter;return D(R,"zIndex"),D(R,"absolutePosition"),D(R,"position"),D(R,"x",0,(0,_.getNumberValidator)()),D(R,"y",0,(0,_.getNumberValidator)()),D(R,"globalCompositeOperation","source-over",(0,_.getStringValidator)()),D(R,"opacity",1,(0,_.getNumberValidator)()),D(R,"name","",(0,_.getStringValidator)()),D(R,"id","",(0,_.getStringValidator)()),D(R,"rotation",0,(0,_.getNumberValidator)()),p.Factory.addComponentsGetterSetter(R,"scale",["x","y"]),D(R,"scaleX",1,(0,_.getNumberValidator)()),D(R,"scaleY",1,(0,_.getNumberValidator)()),p.Factory.addComponentsGetterSetter(R,"skew",["x","y"]),D(R,"skewX",0,(0,_.getNumberValidator)()),D(R,"skewY",0,(0,_.getNumberValidator)()),p.Factory.addComponentsGetterSetter(R,"offset",["x","y"]),D(R,"offsetX",0,(0,_.getNumberValidator)()),D(R,"offsetY",0,(0,_.getNumberValidator)()),D(R,"dragDistance",void 0,(0,_.getNumberValidator)()),D(R,"width",0,(0,_.getNumberValidator)()),D(R,"height",0,(0,_.getNumberValidator)()),D(R,"listening",!0,(0,_.getBooleanValidator)()),D(R,"preventDefault",!0,(0,_.getBooleanValidator)()),D(R,"filters",void 0,function(V){return this._filterUpToDate=!1,V}),D(R,"visible",!0,(0,_.getBooleanValidator)()),D(R,"transformsEnabled","all",(0,_.getStringValidator)()),D(R,"size"),D(R,"dragBoundFunc"),D(R,"draggable",!1,(0,_.getBooleanValidator)()),p.Factory.backCompat(R,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Jn}var Zn={},no;function li(){if(no)return Zn;no=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.Container=void 0;const s=Se(),p=Ge(),L=Ce();let O=class extends p.Node{constructor(){super(...arguments),this.children=[]}getChildren(_){if(!_)return this.children||[];const o=this.children||[],d=[];return o.forEach(function(f){_(f)&&d.push(f)}),d}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(_=>{_.parent=null,_.index=0,_.destroy()}),this.children=[],this._requestDraw(),this}add(..._){if(_.length===0)return this;if(_.length>1){for(let d=0;d<_.length;d++)this.add(_[d]);return this}const o=_[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(_){return this._generalFind(_,!1)}findOne(_){const o=this._generalFind(_,!0);return o.length>0?o[0]:void 0}_generalFind(_,o){const d=[];return this._descendants(f=>{const m=f._isMatch(_);return m&&d.push(f),!!(m&&o)}),d}_descendants(_){let o=!1;const d=this.getChildren();for(const f of d){if(o=_(f),o)return!0;if(f.hasChildren()&&(o=f._descendants(_),o))return!0}return!1}toObject(){const _=p.Node.prototype.toObject.call(this);return _.children=[],this.getChildren().forEach(o=>{_.children.push(o.toObject())}),_}isAncestorOf(_){let o=_.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(_){const o=p.Node.prototype.clone.call(this,_);return this.getChildren().forEach(function(d){o.add(d.clone())}),o}getAllIntersections(_){const o=[];return this.find("Shape").forEach(d=>{d.isVisible()&&d.intersects(_)&&o.push(d)}),o}_clearSelfAndDescendantCache(_){var o;super._clearSelfAndDescendantCache(_),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(d){d._clearSelfAndDescendantCache(_)}))}_setChildrenIndices(){var _;(_=this.children)===null||_===void 0||_.forEach(function(o,d){o.index=d}),this._requestDraw()}drawScene(_,o,d){const f=this.getLayer(),m=_||f&&f.getCanvas(),v=m&&m.getContext(),P=this._getCanvasCache(),w=P&&P.scene,g=m&&m.isCache;if(!this.isVisible()&&!g)return this;if(w){v.save();const c=this.getAbsoluteTransform(o).getMatrix();v.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(v),v.restore()}else this._drawChildren("drawScene",m,o,d);return this}drawHit(_,o){if(!this.shouldDrawHit(o))return this;const d=this.getLayer(),f=_||d&&d.hitCanvas,m=f&&f.getContext(),v=this._getCanvasCache();if(v&&v.hit){m.save();const w=this.getAbsoluteTransform(o).getMatrix();m.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(m),m.restore()}else this._drawChildren("drawHit",f,o);return this}_drawChildren(_,o,d,f){var m;const v=o&&o.getContext(),P=this.clipWidth(),w=this.clipHeight(),g=this.clipFunc(),c=typeof P=="number"&&typeof w=="number"||g,y=d===this;if(c){v.save();const A=this.getAbsoluteTransform(d);let l=A.getMatrix();v.transform(l[0],l[1],l[2],l[3],l[4],l[5]),v.beginPath();let a;if(g)a=g.call(this,v,this);else{const S=this.clipX(),k=this.clipY();v.rect(S||0,k||0,P,w)}v.clip.apply(v,a),l=A.copy().invert().getMatrix(),v.transform(l[0],l[1],l[2],l[3],l[4],l[5])}const x=!y&&this.globalCompositeOperation()!=="source-over"&&_==="drawScene";x&&(v.save(),v._applyGlobalCompositeOperation(this)),(m=this.children)===null||m===void 0||m.forEach(function(A){A[_](o,d,f)}),x&&v.restore(),c&&v.restore()}getClientRect(_={}){var o;const d=_.skipTransform,f=_.relativeTo;let m,v,P,w,g={x:1/0,y:1/0,width:0,height:0};const c=this;(o=this.children)===null||o===void 0||o.forEach(function(A){if(!A.visible())return;const l=A.getClientRect({relativeTo:c,skipShadow:_.skipShadow,skipStroke:_.skipStroke});l.width===0&&l.height===0||(m===void 0?(m=l.x,v=l.y,P=l.x+l.width,w=l.y+l.height):(m=Math.min(m,l.x),v=Math.min(v,l.y),P=Math.max(P,l.x+l.width),w=Math.max(w,l.y+l.height)))});const y=this.find("Shape");let x=!1;for(let A=0;A<y.length;A++)if(y[A]._isVisible(this)){x=!0;break}return x&&m!==void 0?g={x:m,y:v,width:P-m,height:w-v}:g={x:0,y:0,width:0,height:0},d?g:this._transformedRect(g,f)}};return Zn.Container=O,s.Factory.addComponentsGetterSetter(O,"clip",["x","y","width","height"]),s.Factory.addGetterSetter(O,"clipX",void 0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(O,"clipY",void 0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(O,"clipWidth",void 0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(O,"clipHeight",void 0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(O,"clipFunc"),Zn}var cs={},on={},ro;function io(){if(ro)return on;ro=1,Object.defineProperty(on,"__esModule",{value:!0}),on.getCapturedShape=O,on.createEvent=M,on.hasPointerCapture=_,on.setPointerCapture=o,on.releaseCapture=d;const s=ye(),p=new Map,L=s.Konva._global.PointerEvent!==void 0;function O(f){return p.get(f)}function M(f){return{evt:f,pointerId:f.pointerId}}function _(f,m){return p.get(f)===m}function o(f,m){d(f),m.getStage()&&(p.set(f,m),L&&m._fire("gotpointercapture",M(new PointerEvent("gotpointercapture"))))}function d(f,m){const v=p.get(f);if(!v)return;const P=v.getStage();P&&P.content,p.delete(f),L&&v._fire("lostpointercapture",M(new PointerEvent("lostpointercapture")))}return on}var so;function Ch(){return so||(so=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Stage=s.stages=void 0;const p=Ie(),L=Se(),O=li(),M=ye(),_=oi(),o=hs(),d=ye(),f=io(),m="Stage",v="string",P="px",w="mouseout",g="mouseleave",c="mouseover",y="mouseenter",x="mousemove",A="mousedown",l="mouseup",a="pointermove",S="pointerdown",k="pointerup",N="pointercancel",B="lostpointercapture",F="pointerout",T="pointerleave",R="pointerover",D="pointerenter",V="contextmenu",u="touchstart",E="touchend",C="touchmove",I="touchcancel",G="wheel",z=5,j=[[y,"_pointerenter"],[A,"_pointerdown"],[x,"_pointermove"],[l,"_pointerup"],[g,"_pointerleave"],[u,"_pointerdown"],[C,"_pointermove"],[E,"_pointerup"],[I,"_pointercancel"],[c,"_pointerover"],[G,"_wheel"],[V,"_contextmenu"],[S,"_pointerdown"],[a,"_pointermove"],[k,"_pointerup"],[N,"_pointercancel"],[B,"_lostpointercapture"]],q={mouse:{[F]:w,[T]:g,[R]:c,[D]:y,[a]:x,[S]:A,[k]:l,[N]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[F]:"touchout",[T]:"touchleave",[R]:"touchover",[D]:"touchenter",[a]:C,[S]:u,[k]:E,[N]:I,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[F]:F,[T]:T,[R]:R,[D]:D,[a]:a,[S]:S,[k]:k,[N]:N,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},J=ae=>ae.indexOf("pointer")>=0?"pointer":ae.indexOf("touch")>=0?"touch":"mouse",ee=ae=>{const U=J(ae);if(U==="pointer")return M.Konva.pointerEventsEnabled&&q.pointer;if(U==="touch")return q.touch;if(U==="mouse")return q.mouse};function Z(ae={}){return(ae.clipFunc||ae.clipWidth||ae.clipHeight)&&p.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ae}const $="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";s.stages=[];class se extends O.Container{constructor(U){super(Z(U)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),s.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Z(this.attrs)}),this._checkVisibility()}_validateAdd(U){const X=U.getType()==="Layer",te=U.getType()==="FastLayer";X||te||p.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const U=this.visible()?"":"none";this.content.style.display=U}setContainer(U){if(typeof U===v){if(U.charAt(0)==="."){const te=U.slice(1);U=document.getElementsByClassName(te)[0]}else{var X;U.charAt(0)!=="#"?X=U:X=U.slice(1),U=document.getElementById(X)}if(!U)throw"Can not find container in document with id "+X}return this._setAttr("container",U),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),U.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const U=this.children,X=U.length;for(let te=0;te<X;te++)U[te].clear();return this}clone(U){return U||(U={}),U.container=typeof document<"u"&&document.createElement("div"),O.Container.prototype.clone.call(this,U)}destroy(){super.destroy();const U=this.content;U&&p.Util._isInDocument(U)&&this.container().removeChild(U);const X=s.stages.indexOf(this);return X>-1&&s.stages.splice(X,1),p.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const U=this._pointerPositions[0]||this._changedPointerPositions[0];return U?{x:U.x,y:U.y}:(p.Util.warn($),null)}_getPointerById(U){return this._pointerPositions.find(X=>X.id===U)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(U){U=U||{},U.x=U.x||0,U.y=U.y||0,U.width=U.width||this.width(),U.height=U.height||this.height();const X=new _.SceneCanvas({width:U.width,height:U.height,pixelRatio:U.pixelRatio||1}),te=X.getContext()._context,re=this.children;return(U.x||U.y)&&te.translate(-1*U.x,-1*U.y),re.forEach(function(ie){if(!ie.isVisible())return;const ce=ie._toKonvaCanvas(U);te.drawImage(ce._canvas,U.x,U.y,ce.getWidth()/ce.getPixelRatio(),ce.getHeight()/ce.getPixelRatio())}),X}getIntersection(U){if(!U)return null;const X=this.children,te=X.length,re=te-1;for(let ie=re;ie>=0;ie--){const ce=X[ie].getIntersection(U);if(ce)return ce}return null}_resizeDOM(){const U=this.width(),X=this.height();this.content&&(this.content.style.width=U+P,this.content.style.height=X+P),this.bufferCanvas.setSize(U,X),this.bufferHitCanvas.setSize(U,X),this.children.forEach(te=>{te.setSize({width:U,height:X}),te.draw()})}add(U,...X){if(arguments.length>1){for(let re=0;re<arguments.length;re++)this.add(arguments[re]);return this}super.add(U);const te=this.children.length;return te>z&&p.Util.warn("The stage has "+te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),U.setSize({width:this.width(),height:this.height()}),U.draw(),M.Konva.isBrowser&&this.content.appendChild(U.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(U){return f.hasPointerCapture(U,this)}setPointerCapture(U){f.setPointerCapture(U,this)}releaseCapture(U){f.releaseCapture(U,this)}getLayers(){return this.children}_bindContentEvents(){M.Konva.isBrowser&&j.forEach(([U,X])=>{this.content.addEventListener(U,te=>{this[X](te)},{passive:!1})})}_pointerenter(U){this.setPointersPositions(U);const X=ee(U.type);X&&this._fire(X.pointerenter,{evt:U,target:this,currentTarget:this})}_pointerover(U){this.setPointersPositions(U);const X=ee(U.type);X&&this._fire(X.pointerover,{evt:U,target:this,currentTarget:this})}_getTargetShape(U){let X=this[U+"targetShape"];return X&&!X.getStage()&&(X=null),X}_pointerleave(U){const X=ee(U.type),te=J(U.type);if(!X)return;this.setPointersPositions(U);const re=this._getTargetShape(te),ie=!(M.Konva.isDragging()||M.Konva.isTransforming())||M.Konva.hitOnDragEnabled;re&&ie?(re._fireAndBubble(X.pointerout,{evt:U}),re._fireAndBubble(X.pointerleave,{evt:U}),this._fire(X.pointerleave,{evt:U,target:this,currentTarget:this}),this[te+"targetShape"]=null):ie&&(this._fire(X.pointerleave,{evt:U,target:this,currentTarget:this}),this._fire(X.pointerout,{evt:U,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(U){const X=ee(U.type),te=J(U.type);if(!X)return;this.setPointersPositions(U);let re=!1;this._changedPointerPositions.forEach(ie=>{const ce=this.getIntersection(ie);if(o.DD.justDragged=!1,M.Konva["_"+te+"ListenClick"]=!0,!ce||!ce.isListening()){this[te+"ClickStartShape"]=void 0;return}M.Konva.capturePointerEventsEnabled&&ce.setPointerCapture(ie.id),this[te+"ClickStartShape"]=ce,ce._fireAndBubble(X.pointerdown,{evt:U,pointerId:ie.id}),re=!0;const pe=U.type.indexOf("touch")>=0;ce.preventDefault()&&U.cancelable&&pe&&U.preventDefault()}),re||this._fire(X.pointerdown,{evt:U,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(U){const X=ee(U.type),te=J(U.type);if(!X||(M.Konva.isDragging()&&o.DD.node.preventDefault()&&U.cancelable&&U.preventDefault(),this.setPointersPositions(U),!(!(M.Konva.isDragging()||M.Konva.isTransforming())||M.Konva.hitOnDragEnabled)))return;const ie={};let ce=!1;const pe=this._getTargetShape(te);this._changedPointerPositions.forEach(Ee=>{const me=f.getCapturedShape(Ee.id)||this.getIntersection(Ee),We=Ee.id,ke={evt:U,pointerId:We},Le=pe!==me;if(Le&&pe&&(pe._fireAndBubble(X.pointerout,{...ke},me),pe._fireAndBubble(X.pointerleave,{...ke},me)),me){if(ie[me._id])return;ie[me._id]=!0}me&&me.isListening()?(ce=!0,Le&&(me._fireAndBubble(X.pointerover,{...ke},pe),me._fireAndBubble(X.pointerenter,{...ke},pe),this[te+"targetShape"]=me),me._fireAndBubble(X.pointermove,{...ke})):pe&&(this._fire(X.pointerover,{evt:U,target:this,currentTarget:this,pointerId:We}),this[te+"targetShape"]=null)}),ce||this._fire(X.pointermove,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(U){const X=ee(U.type),te=J(U.type);if(!X)return;this.setPointersPositions(U);const re=this[te+"ClickStartShape"],ie=this[te+"ClickEndShape"],ce={};let pe=!1;this._changedPointerPositions.forEach(Ee=>{const me=f.getCapturedShape(Ee.id)||this.getIntersection(Ee);if(me){if(me.releaseCapture(Ee.id),ce[me._id])return;ce[me._id]=!0}const We=Ee.id,ke={evt:U,pointerId:We};let Le=!1;M.Konva["_"+te+"InDblClickWindow"]?(Le=!0,clearTimeout(this[te+"DblTimeout"])):o.DD.justDragged||(M.Konva["_"+te+"InDblClickWindow"]=!0,clearTimeout(this[te+"DblTimeout"])),this[te+"DblTimeout"]=setTimeout(function(){M.Konva["_"+te+"InDblClickWindow"]=!1},M.Konva.dblClickWindow),me&&me.isListening()?(pe=!0,this[te+"ClickEndShape"]=me,me._fireAndBubble(X.pointerup,{...ke}),M.Konva["_"+te+"ListenClick"]&&re&&re===me&&(me._fireAndBubble(X.pointerclick,{...ke}),Le&&ie&&ie===me&&me._fireAndBubble(X.pointerdblclick,{...ke}))):(this[te+"ClickEndShape"]=null,M.Konva["_"+te+"ListenClick"]&&this._fire(X.pointerclick,{evt:U,target:this,currentTarget:this,pointerId:We}),Le&&this._fire(X.pointerdblclick,{evt:U,target:this,currentTarget:this,pointerId:We}))}),pe||this._fire(X.pointerup,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),M.Konva["_"+te+"ListenClick"]=!1,U.cancelable&&te!=="touch"&&te!=="pointer"&&U.preventDefault()}_contextmenu(U){this.setPointersPositions(U);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(V,{evt:U}):this._fire(V,{evt:U,target:this,currentTarget:this})}_wheel(U){this.setPointersPositions(U);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(G,{evt:U}):this._fire(G,{evt:U,target:this,currentTarget:this})}_pointercancel(U){this.setPointersPositions(U);const X=f.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());X&&X._fireAndBubble(k,f.createEvent(U)),f.releaseCapture(U.pointerId)}_lostpointercapture(U){f.releaseCapture(U.pointerId)}setPointersPositions(U){const X=this._getContentPosition();let te=null,re=null;U=U||window.event,U.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(U.touches,ie=>{this._pointerPositions.push({id:ie.identifier,x:(ie.clientX-X.left)/X.scaleX,y:(ie.clientY-X.top)/X.scaleY})}),Array.prototype.forEach.call(U.changedTouches||U.touches,ie=>{this._changedPointerPositions.push({id:ie.identifier,x:(ie.clientX-X.left)/X.scaleX,y:(ie.clientY-X.top)/X.scaleY})})):(te=(U.clientX-X.left)/X.scaleX,re=(U.clientY-X.top)/X.scaleY,this.pointerPos={x:te,y:re},this._pointerPositions=[{x:te,y:re,id:p.Util._getFirstPointerId(U)}],this._changedPointerPositions=[{x:te,y:re,id:p.Util._getFirstPointerId(U)}])}_setPointerPosition(U){p.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(U)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const U=this.content.getBoundingClientRect();return{top:U.top,left:U.left,scaleX:U.width/this.content.clientWidth||1,scaleY:U.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new _.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new _.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!M.Konva.isBrowser)return;const U=this.container();if(!U)throw"Stage has no container. A container is required.";U.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),U.appendChild(this.content),this._resizeDOM()}cache(){return p.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(U){U.batchDraw()}),this}}s.Stage=se,se.prototype.nodeType=m,(0,d._registerNode)(se),L.Factory.addGetterSetter(se,"container"),M.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{s.stages.forEach(ae=>{ae.batchDraw()})})}(cs)),cs}var $n={},ds={},ao;function qe(){return ao||(ao=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Shape=s.shapes=void 0;const p=ye(),L=Ie(),O=Se(),M=Ge(),_=Ce(),o=ye(),d=io(),f="hasShadow",m="shadowRGBA",v="patternImage",P="linearGradient",w="radialGradient";let g;function c(){return g||(g=L.Util.createCanvasElement().getContext("2d"),g)}s.shapes={};function y(T){const R=this.attrs.fillRule;R?T.fill(R):T.fill()}function x(T){T.stroke()}function A(T){const R=this.attrs.fillRule;R?T.fill(R):T.fill()}function l(T){T.stroke()}function a(){this._clearCache(f)}function S(){this._clearCache(m)}function k(){this._clearCache(v)}function N(){this._clearCache(P)}function B(){this._clearCache(w)}class F extends M.Node{constructor(R){super(R);let D;for(;D=L.Util.getRandomColor(),!(D&&!(D in s.shapes)););this.colorKey=D,s.shapes[D]=this}getContext(){return L.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return L.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(v,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const D=c().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const V=new L.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(p.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const u=V.getMatrix(),E=typeof DOMMatrix>"u"?{a:u[0],b:u[1],c:u[2],d:u[3],e:u[4],f:u[5]}:new DOMMatrix(u);D.setTransform(E)}return D}}_getLinearGradient(){return this._getCache(P,this.__getLinearGradient)}__getLinearGradient(){const R=this.fillLinearGradientColorStops();if(R){const D=c(),V=this.fillLinearGradientStartPoint(),u=this.fillLinearGradientEndPoint(),E=D.createLinearGradient(V.x,V.y,u.x,u.y);for(let C=0;C<R.length;C+=2)E.addColorStop(R[C],R[C+1]);return E}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){const R=this.fillRadialGradientColorStops();if(R){const D=c(),V=this.fillRadialGradientStartPoint(),u=this.fillRadialGradientEndPoint(),E=D.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),u.x,u.y,this.fillRadialGradientEndRadius());for(let C=0;C<R.length;C+=2)E.addColorStop(R[C],R[C+1]);return E}}getShadowRGBA(){return this._getCache(m,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const R=L.Util.colorToRGBA(this.shadowColor());if(R)return"rgba("+R.r+","+R.g+","+R.b+","+R.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const R=this.hitStrokeWidth();return R==="auto"?this.hasStroke():this.strokeEnabled()&&!!R}intersects(R){const D=this.getStage();if(!D)return!1;const V=D.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(R.x),Math.round(R.y),1,1).data[3]>0}destroy(){return M.Node.prototype.destroy.call(this),delete s.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(R){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const u=R||this.hasFill(),E=this.hasStroke(),C=this.getAbsoluteOpacity()!==1;if(u&&E&&C)return!0;const I=this.hasShadow(),G=this.shadowForStrokeEnabled();return!!(u&&E&&I&&G)}setStrokeHitEnabled(R){L.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),R?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const R=this.size();return{x:this._centroid?-R.width/2:0,y:this._centroid?-R.height/2:0,width:R.width,height:R.height}}getClientRect(R={}){let D=!1,V=this.getParent();for(;V;){if(V.isCached()){D=!0;break}V=V.getParent()}const u=R.skipTransform,E=R.relativeTo||D&&this.getStage()||void 0,C=this.getSelfRect(),G=!R.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,z=C.width+G,j=C.height+G,q=!R.skipShadow&&this.hasShadow(),J=q?this.shadowOffsetX():0,ee=q?this.shadowOffsetY():0,Z=z+Math.abs(J),$=j+Math.abs(ee),se=q&&this.shadowBlur()||0,ae=Z+se*2,U=$+se*2,X={width:ae,height:U,x:-(G/2+se)+Math.min(J,0)+C.x,y:-(G/2+se)+Math.min(ee,0)+C.y};return u?X:this._transformedRect(X,E)}drawScene(R,D,V){const u=this.getLayer();let E=R||u.getCanvas(),C=E.getContext(),I=this._getCanvasCache(),G=this.getSceneFunc(),z=this.hasShadow(),j,q;const J=E.isCache,ee=D===this;if(!this.isVisible()&&!ee)return this;if(I){C.save();const $=this.getAbsoluteTransform(D).getMatrix();return C.transform($[0],$[1],$[2],$[3],$[4],$[5]),this._drawCachedSceneCanvas(C),C.restore(),this}if(!G)return this;if(C.save(),this._useBufferCanvas()&&!J){j=this.getStage();const $=V||j.bufferCanvas;q=$.getContext(),q.clear(),q.save(),q._applyLineJoin(this);var Z=this.getAbsoluteTransform(D).getMatrix();q.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),G.call(this,q,this),q.restore();const se=$.pixelRatio;z&&C._applyShadow(this),C._applyOpacity(this),C._applyGlobalCompositeOperation(this),C.drawImage($._canvas,0,0,$.width/se,$.height/se)}else{if(C._applyLineJoin(this),!ee){var Z=this.getAbsoluteTransform(D).getMatrix();C.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),C._applyOpacity(this),C._applyGlobalCompositeOperation(this)}z&&C._applyShadow(this),G.call(this,C,this)}return C.restore(),this}drawHit(R,D,V=!1){if(!this.shouldDrawHit(D,V))return this;const u=this.getLayer(),E=R||u.hitCanvas,C=E&&E.getContext(),I=this.hitFunc()||this.sceneFunc(),G=this._getCanvasCache(),z=G&&G.hit;if(this.colorKey||L.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),z){C.save();const q=this.getAbsoluteTransform(D).getMatrix();return C.transform(q[0],q[1],q[2],q[3],q[4],q[5]),this._drawCachedHitCanvas(C),C.restore(),this}if(!I)return this;if(C.save(),C._applyLineJoin(this),!(this===D)){const q=this.getAbsoluteTransform(D).getMatrix();C.transform(q[0],q[1],q[2],q[3],q[4],q[5])}return I.call(this,C,this),C.restore(),this}drawHitFromCache(R=0){const D=this._getCanvasCache(),V=this._getCachedSceneCanvas(),u=D.hit,E=u.getContext(),C=u.getWidth(),I=u.getHeight();E.clear(),E.drawImage(V._canvas,0,0,C,I);try{const G=E.getImageData(0,0,C,I),z=G.data,j=z.length,q=L.Util._hexToRgb(this.colorKey);for(let J=0;J<j;J+=4)z[J+3]>R?(z[J]=q.r,z[J+1]=q.g,z[J+2]=q.b,z[J+3]=255):z[J+3]=0;E.putImageData(G,0,0)}catch(G){L.Util.error("Unable to draw hit graph from cached scene canvas. "+G.message)}return this}hasPointerCapture(R){return d.hasPointerCapture(R,this)}setPointerCapture(R){d.setPointerCapture(R,this)}releaseCapture(R){d.releaseCapture(R,this)}}s.Shape=F,F.prototype._fillFunc=y,F.prototype._strokeFunc=x,F.prototype._fillFuncHit=A,F.prototype._strokeFuncHit=l,F.prototype._centroid=!1,F.prototype.nodeType="Shape",(0,o._registerNode)(F),F.prototype.eventListeners={},F.prototype.on.call(F.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",a),F.prototype.on.call(F.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),F.prototype.on.call(F.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",k),F.prototype.on.call(F.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",N),F.prototype.on.call(F.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",B),O.Factory.addGetterSetter(F,"stroke",void 0,(0,_.getStringOrGradientValidator)()),O.Factory.addGetterSetter(F,"strokeWidth",2,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"fillAfterStrokeEnabled",!1),O.Factory.addGetterSetter(F,"hitStrokeWidth","auto",(0,_.getNumberOrAutoValidator)()),O.Factory.addGetterSetter(F,"strokeHitEnabled",!0,(0,_.getBooleanValidator)()),O.Factory.addGetterSetter(F,"perfectDrawEnabled",!0,(0,_.getBooleanValidator)()),O.Factory.addGetterSetter(F,"shadowForStrokeEnabled",!0,(0,_.getBooleanValidator)()),O.Factory.addGetterSetter(F,"lineJoin"),O.Factory.addGetterSetter(F,"lineCap"),O.Factory.addGetterSetter(F,"sceneFunc"),O.Factory.addGetterSetter(F,"hitFunc"),O.Factory.addGetterSetter(F,"dash"),O.Factory.addGetterSetter(F,"dashOffset",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"shadowColor",void 0,(0,_.getStringValidator)()),O.Factory.addGetterSetter(F,"shadowBlur",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"shadowOpacity",1,(0,_.getNumberValidator)()),O.Factory.addComponentsGetterSetter(F,"shadowOffset",["x","y"]),O.Factory.addGetterSetter(F,"shadowOffsetX",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"shadowOffsetY",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"fillPatternImage"),O.Factory.addGetterSetter(F,"fill",void 0,(0,_.getStringOrGradientValidator)()),O.Factory.addGetterSetter(F,"fillPatternX",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"fillPatternY",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"fillLinearGradientColorStops"),O.Factory.addGetterSetter(F,"strokeLinearGradientColorStops"),O.Factory.addGetterSetter(F,"fillRadialGradientStartRadius",0),O.Factory.addGetterSetter(F,"fillRadialGradientEndRadius",0),O.Factory.addGetterSetter(F,"fillRadialGradientColorStops"),O.Factory.addGetterSetter(F,"fillPatternRepeat","repeat"),O.Factory.addGetterSetter(F,"fillEnabled",!0),O.Factory.addGetterSetter(F,"strokeEnabled",!0),O.Factory.addGetterSetter(F,"shadowEnabled",!0),O.Factory.addGetterSetter(F,"dashEnabled",!0),O.Factory.addGetterSetter(F,"strokeScaleEnabled",!0),O.Factory.addGetterSetter(F,"fillPriority","color"),O.Factory.addComponentsGetterSetter(F,"fillPatternOffset",["x","y"]),O.Factory.addGetterSetter(F,"fillPatternOffsetX",0,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"fillPatternOffsetY",0,(0,_.getNumberValidator)()),O.Factory.addComponentsGetterSetter(F,"fillPatternScale",["x","y"]),O.Factory.addGetterSetter(F,"fillPatternScaleX",1,(0,_.getNumberValidator)()),O.Factory.addGetterSetter(F,"fillPatternScaleY",1,(0,_.getNumberValidator)()),O.Factory.addComponentsGetterSetter(F,"fillLinearGradientStartPoint",["x","y"]),O.Factory.addComponentsGetterSetter(F,"strokeLinearGradientStartPoint",["x","y"]),O.Factory.addGetterSetter(F,"fillLinearGradientStartPointX",0),O.Factory.addGetterSetter(F,"strokeLinearGradientStartPointX",0),O.Factory.addGetterSetter(F,"fillLinearGradientStartPointY",0),O.Factory.addGetterSetter(F,"strokeLinearGradientStartPointY",0),O.Factory.addComponentsGetterSetter(F,"fillLinearGradientEndPoint",["x","y"]),O.Factory.addComponentsGetterSetter(F,"strokeLinearGradientEndPoint",["x","y"]),O.Factory.addGetterSetter(F,"fillLinearGradientEndPointX",0),O.Factory.addGetterSetter(F,"strokeLinearGradientEndPointX",0),O.Factory.addGetterSetter(F,"fillLinearGradientEndPointY",0),O.Factory.addGetterSetter(F,"strokeLinearGradientEndPointY",0),O.Factory.addComponentsGetterSetter(F,"fillRadialGradientStartPoint",["x","y"]),O.Factory.addGetterSetter(F,"fillRadialGradientStartPointX",0),O.Factory.addGetterSetter(F,"fillRadialGradientStartPointY",0),O.Factory.addComponentsGetterSetter(F,"fillRadialGradientEndPoint",["x","y"]),O.Factory.addGetterSetter(F,"fillRadialGradientEndPointX",0),O.Factory.addGetterSetter(F,"fillRadialGradientEndPointY",0),O.Factory.addGetterSetter(F,"fillPatternRotation",0),O.Factory.addGetterSetter(F,"fillRule",void 0,(0,_.getStringValidator)()),O.Factory.backCompat(F,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(ds)),ds}var oo;function lo(){if(oo)return $n;oo=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.Layer=void 0;const s=Ie(),p=li(),L=Ge(),O=Se(),M=oi(),_=Ce(),o=qe(),d=ye(),f="#",m="beforeDraw",v="draw",P=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],w=P.length;class g extends p.Container{constructor(y){super(y),this.canvas=new M.SceneCanvas,this.hitCanvas=new M.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const x=this.getStage();return x&&x.content&&(x.content.removeChild(this.getNativeCanvasElement()),y<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[y+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){L.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!L.Node.prototype.moveUp.call(this))return!1;const x=this.getStage();return!x||!x.content?!1:(x.content.removeChild(this.getNativeCanvasElement()),this.index<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[this.index+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(L.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const x=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),x[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(L.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const x=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),x[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return L.Node.prototype.remove.call(this),y&&y.parentNode&&s.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:x}){return this.canvas.setSize(y,x),this.hitCanvas.setSize(y,x),this._setSmoothEnabled(),this}_validateAdd(y){const x=y.getType();x!=="Group"&&x!=="Shape"&&s.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),L.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){s.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){s.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,s.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let x=1,A=!1;for(;;){for(let l=0;l<w;l++){const a=P[l],S=this._getIntersection({x:y.x+a.x*x,y:y.y+a.y*x}),k=S.shape;if(k)return k;if(A=!!S.antialiased,!S.antialiased)break}if(A)x+=1;else return null}}_getIntersection(y){const x=this.hitCanvas.pixelRatio,A=this.hitCanvas.context.getImageData(Math.round(y.x*x),Math.round(y.y*x),1,1).data,l=A[3];if(l===255){const a=s.Util._rgbToHex(A[0],A[1],A[2]),S=o.shapes[f+a];return S?{shape:S}:{antialiased:!0}}else if(l>0)return{antialiased:!0};return{}}drawScene(y,x){const A=this.getLayer(),l=y||A&&A.getCanvas();return this._fire(m,{node:this}),this.clearBeforeDraw()&&l.getContext().clear(),p.Container.prototype.drawScene.call(this,l,x),this._fire(v,{node:this}),this}drawHit(y,x){const A=this.getLayer(),l=y||A&&A.hitCanvas;return A&&A.clearBeforeDraw()&&A.getHitCanvas().getContext().clear(),p.Container.prototype.drawHit.call(this,l,x),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return s.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return $n.Layer=g,g.prototype.nodeType="Layer",(0,d._registerNode)(g),O.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),O.Factory.addGetterSetter(g,"clearBeforeDraw",!0),O.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,_.getBooleanValidator)()),$n}var er={},uo;function wh(){if(uo)return er;uo=1,Object.defineProperty(er,"__esModule",{value:!0}),er.FastLayer=void 0;const s=Ie(),p=lo(),L=ye();let O=class extends p.Layer{constructor(_){super(_),this.listening(!1),s.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return er.FastLayer=O,O.prototype.nodeType="FastLayer",(0,L._registerNode)(O),er}var tr={},ho;function fs(){if(ho)return tr;ho=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.Group=void 0;const s=Ie(),p=li(),L=ye();let O=class extends p.Container{_validateAdd(_){const o=_.getType();o!=="Group"&&o!=="Shape"&&s.Util.throw("You may only add groups and shapes to groups.")}};return tr.Group=O,O.prototype.nodeType="Group",(0,L._registerNode)(O),tr}var nr={},co;function gs(){if(co)return nr;co=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.Animation=void 0;const s=ye(),p=Ie(),L=function(){return s.glob.performance&&s.glob.performance.now?function(){return s.glob.performance.now()}:function(){return new Date().getTime()}}();let O=class Yn{constructor(_,o){this.id=Yn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:L(),frameRate:0},this.func=_,this.setLayers(o)}setLayers(_){let o=[];return _&&(o=Array.isArray(_)?_:[_]),this.layers=o,this}getLayers(){return this.layers}addLayer(_){const o=this.layers,d=o.length;for(let f=0;f<d;f++)if(o[f]._id===_._id)return!1;return this.layers.push(_),!0}isRunning(){const o=Yn.animations,d=o.length;for(let f=0;f<d;f++)if(o[f].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=L(),Yn._addAnimation(this),this}stop(){return Yn._removeAnimation(this),this}_updateFrameObject(_){this.frame.timeDiff=_-this.frame.lastTime,this.frame.lastTime=_,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(_){this.animations.push(_),this._handleAnimation()}static _removeAnimation(_){const o=_.id,d=this.animations,f=d.length;for(let m=0;m<f;m++)if(d[m].id===o){this.animations.splice(m,1);break}}static _runFrames(){const _={},o=this.animations;for(let d=0;d<o.length;d++){const f=o[d],m=f.layers,v=f.func;f._updateFrameObject(L());const P=m.length;let w;if(v?w=v.call(f,f.frame)!==!1:w=!0,!!w)for(let g=0;g<P;g++){const c=m[g];c._id!==void 0&&(_[c._id]=c)}}for(const d in _)_.hasOwnProperty(d)&&_[d].batchDraw()}static _animationLoop(){const _=Yn;_.animations.length?(_._runFrames(),p.Util.requestAnimFrame(_._animationLoop)):_.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,p.Util.requestAnimFrame(this._animationLoop))}};return nr.Animation=O,O.animations=[],O.animIdCounter=0,O.animRunning=!1,nr}var ps={},fo;function xh(){return fo||(fo=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Easings=s.Tween=void 0;const p=Ie(),L=gs(),O=Ge(),M=ye(),_={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,d=2,f=3,m=["fill","stroke","shadowColor"];let v=0;class P{constructor(c,y,x,A,l,a,S){this.prop=c,this.propFunc=y,this.begin=A,this._pos=A,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=l-this.begin,this.pause()}fire(c){const y=this[c];y&&y()}setTime(c){c>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():c<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=c,this.update())}getTime(){return this._time}setPosition(c){this.prevPos=this._pos,this.propFunc(c),this._pos=c}getPosition(c){return c===void 0&&(c=this._time),this.func(c,this.begin,this._change,this.duration)}play(){this.state=d,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(c){this.pause(),this._time=c,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const c=this.getTimer()-this._startTime;this.state===d?this.setTime(c):this.state===f&&this.setTime(this.duration-c)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(c){const y=this,x=c.node,A=x._id,l=c.easing||s.Easings.Linear,a=!!c.yoyo;let S,k;typeof c.duration>"u"?S=.3:c.duration===0?S=.001:S=c.duration,this.node=x,this._id=v++;const N=x.getLayer()||(x instanceof M.Konva.Stage?x.getLayers():null);N||p.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new L.Animation(function(){y.tween.onEnterFrame()},N),this.tween=new P(k,function(B){y._tweenFunc(B)},l,0,1,S*1e3,a),this._addListeners(),w.attrs[A]||(w.attrs[A]={}),w.attrs[A][this._id]||(w.attrs[A][this._id]={}),w.tweens[A]||(w.tweens[A]={});for(k in c)_[k]===void 0&&this._addAttr(k,c[k]);this.reset(),this.onFinish=c.onFinish,this.onReset=c.onReset,this.onUpdate=c.onUpdate}_addAttr(c,y){const x=this.node,A=x._id;let l,a,S,k,N;const B=w.tweens[A][c];B&&delete w.attrs[A][B][c];let F=x.getAttr(c);if(p.Util._isArray(y))if(l=[],a=Math.max(y.length,F.length),c==="points"&&y.length!==F.length&&(y.length>F.length?(k=F,F=p.Util._prepareArrayForTween(F,y,x.closed())):(S=y,y=p.Util._prepareArrayForTween(y,F,x.closed()))),c.indexOf("fill")===0)for(let T=0;T<a;T++)if(T%2===0)l.push(y[T]-F[T]);else{const R=p.Util.colorToRGBA(F[T]);N=p.Util.colorToRGBA(y[T]),F[T]=R,l.push({r:N.r-R.r,g:N.g-R.g,b:N.b-R.b,a:N.a-R.a})}else for(let T=0;T<a;T++)l.push(y[T]-F[T]);else m.indexOf(c)!==-1?(F=p.Util.colorToRGBA(F),N=p.Util.colorToRGBA(y),l={r:N.r-F.r,g:N.g-F.g,b:N.b-F.b,a:N.a-F.a}):l=y-F;w.attrs[A][this._id][c]={start:F,diff:l,end:y,trueEnd:S,trueStart:k},w.tweens[A][c]=this._id}_tweenFunc(c){const y=this.node,x=w.attrs[y._id][this._id];let A,l,a,S,k,N,B,F;for(A in x){if(l=x[A],a=l.start,S=l.diff,F=l.end,p.Util._isArray(a))if(k=[],B=Math.max(a.length,F.length),A.indexOf("fill")===0)for(N=0;N<B;N++)N%2===0?k.push((a[N]||0)+S[N]*c):k.push("rgba("+Math.round(a[N].r+S[N].r*c)+","+Math.round(a[N].g+S[N].g*c)+","+Math.round(a[N].b+S[N].b*c)+","+(a[N].a+S[N].a*c)+")");else for(N=0;N<B;N++)k.push((a[N]||0)+S[N]*c);else m.indexOf(A)!==-1?k="rgba("+Math.round(a.r+S.r*c)+","+Math.round(a.g+S.g*c)+","+Math.round(a.b+S.b*c)+","+(a.a+S.a*c)+")":k=a+S*c;y.setAttr(A,k)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const c=this.node,y=w.attrs[c._id][this._id];y.points&&y.points.trueEnd&&c.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const c=this.node,y=w.attrs[c._id][this._id];y.points&&y.points.trueStart&&c.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(c){return this.tween.seek(c*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const c=this.node._id,y=this._id,x=w.tweens[c];this.pause();for(const A in x)delete w.tweens[c][A];delete w.attrs[c][y]}}s.Tween=w,w.attrs={},w.tweens={},O.Node.prototype.to=function(g){const c=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),c&&c()},new w(g).play()},s.Easings={BackEaseIn(g,c,y,x){return y*(g/=x)*g*((1.70158+1)*g-1.70158)+c},BackEaseOut(g,c,y,x){return y*((g=g/x-1)*g*((1.70158+1)*g+1.70158)+1)+c},BackEaseInOut(g,c,y,x){let A=1.70158;return(g/=x/2)<1?y/2*(g*g*(((A*=1.525)+1)*g-A))+c:y/2*((g-=2)*g*(((A*=1.525)+1)*g+A)+2)+c},ElasticEaseIn(g,c,y,x,A,l){let a=0;return g===0?c:(g/=x)===1?c+y:(l||(l=x*.3),!A||A<Math.abs(y)?(A=y,a=l/4):a=l/(2*Math.PI)*Math.asin(y/A),-(A*Math.pow(2,10*(g-=1))*Math.sin((g*x-a)*(2*Math.PI)/l))+c)},ElasticEaseOut(g,c,y,x,A,l){let a=0;return g===0?c:(g/=x)===1?c+y:(l||(l=x*.3),!A||A<Math.abs(y)?(A=y,a=l/4):a=l/(2*Math.PI)*Math.asin(y/A),A*Math.pow(2,-10*g)*Math.sin((g*x-a)*(2*Math.PI)/l)+y+c)},ElasticEaseInOut(g,c,y,x,A,l){let a=0;return g===0?c:(g/=x/2)===2?c+y:(l||(l=x*(.3*1.5)),!A||A<Math.abs(y)?(A=y,a=l/4):a=l/(2*Math.PI)*Math.asin(y/A),g<1?-.5*(A*Math.pow(2,10*(g-=1))*Math.sin((g*x-a)*(2*Math.PI)/l))+c:A*Math.pow(2,-10*(g-=1))*Math.sin((g*x-a)*(2*Math.PI)/l)*.5+y+c)},BounceEaseOut(g,c,y,x){return(g/=x)<1/2.75?y*(7.5625*g*g)+c:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+c:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+c:y*(7.5625*(g-=2.625/2.75)*g+.984375)+c},BounceEaseIn(g,c,y,x){return y-s.Easings.BounceEaseOut(x-g,0,y,x)+c},BounceEaseInOut(g,c,y,x){return g<x/2?s.Easings.BounceEaseIn(g*2,0,y,x)*.5+c:s.Easings.BounceEaseOut(g*2-x,0,y,x)*.5+y*.5+c},EaseIn(g,c,y,x){return y*(g/=x)*g+c},EaseOut(g,c,y,x){return-y*(g/=x)*(g-2)+c},EaseInOut(g,c,y,x){return(g/=x/2)<1?y/2*g*g+c:-y/2*(--g*(g-2)-1)+c},StrongEaseIn(g,c,y,x){return y*(g/=x)*g*g*g*g+c},StrongEaseOut(g,c,y,x){return y*((g=g/x-1)*g*g*g*g+1)+c},StrongEaseInOut(g,c,y,x){return(g/=x/2)<1?y/2*g*g*g*g*g+c:y/2*((g-=2)*g*g*g*g+2)+c},Linear(g,c,y,x){return y*g/x+c}}}(ps)),ps}var go;function ms(){return go||(go=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Konva=void 0;const p=ye(),L=Ie(),O=Ge(),M=li(),_=Ch(),o=lo(),d=wh(),f=fs(),m=hs(),v=qe(),P=gs(),w=xh(),g=Za(),c=oi();s.Konva=L.Util._assign(p.Konva,{Util:L.Util,Transform:L.Transform,Node:O.Node,Container:M.Container,Stage:_.Stage,stages:_.stages,Layer:o.Layer,FastLayer:d.FastLayer,Group:f.Group,DD:m.DD,Shape:v.Shape,shapes:v.shapes,Animation:P.Animation,Tween:w.Tween,Easings:w.Easings,Context:g.Context,Canvas:c.Canvas}),s.default=s.Konva}(ss)),ss}var rr={},po;function Ph(){if(po)return rr;po=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.Arc=void 0;const s=Se(),p=qe(),L=ye(),O=Ce(),M=ye();let _=class extends p.Shape{_sceneFunc(d){const f=L.Konva.getAngle(this.angle()),m=this.clockwise();d.beginPath(),d.arc(0,0,this.outerRadius(),0,f,m),d.arc(0,0,this.innerRadius(),f,0,!m),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}getSelfRect(){const d=this.innerRadius(),f=this.outerRadius(),m=this.clockwise(),v=L.Konva.getAngle(m?360-this.angle():this.angle()),P=Math.cos(Math.min(v,Math.PI)),w=1,g=Math.sin(Math.min(Math.max(Math.PI,v),3*Math.PI/2)),c=Math.sin(Math.min(v,Math.PI/2)),y=P*(P>0?d:f),x=w*f,A=g*(g>0?d:f),l=c*(c>0?f:d);return{x:y,y:m?-1*l:A,width:x-y,height:l-A}}};return rr.Arc=_,_.prototype._centroid=!0,_.prototype.className="Arc",_.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,M._registerNode)(_),s.Factory.addGetterSetter(_,"innerRadius",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(_,"outerRadius",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(_,"angle",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(_,"clockwise",!1,(0,O.getBooleanValidator)()),rr}var ir={},sr={},mo;function vo(){if(mo)return sr;mo=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.Line=void 0;const s=Se(),p=ye(),L=qe(),O=Ce();function M(d,f,m,v,P,w,g){const c=Math.sqrt(Math.pow(m-d,2)+Math.pow(v-f,2)),y=Math.sqrt(Math.pow(P-m,2)+Math.pow(w-v,2)),x=g*c/(c+y),A=g*y/(c+y),l=m-x*(P-d),a=v-x*(w-f),S=m+A*(P-d),k=v+A*(w-f);return[l,a,S,k]}function _(d,f){const m=d.length,v=[];for(let P=2;P<m-2;P+=2){const w=M(d[P-2],d[P-1],d[P],d[P+1],d[P+2],d[P+3],f);isNaN(w[0])||(v.push(w[0]),v.push(w[1]),v.push(d[P]),v.push(d[P+1]),v.push(w[2]),v.push(w[3]))}return v}let o=class extends L.Shape{constructor(f){super(f),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(f){let m=this.points(),v=m.length,P=this.tension(),w=this.closed(),g=this.bezier(),c,y,x;if(v){if(f.beginPath(),f.moveTo(m[0],m[1]),P!==0&&v>4){for(c=this.getTensionPoints(),y=c.length,x=w?0:4,w||f.quadraticCurveTo(c[0],c[1],c[2],c[3]);x<y-2;)f.bezierCurveTo(c[x++],c[x++],c[x++],c[x++],c[x++],c[x++]);w||f.quadraticCurveTo(c[y-2],c[y-1],m[v-2],m[v-1])}else if(g)for(x=2;x<v;)f.bezierCurveTo(m[x++],m[x++],m[x++],m[x++],m[x++],m[x++]);else for(x=2;x<v;x+=2)f.lineTo(m[x],m[x+1]);w?(f.closePath(),f.fillStrokeShape(this)):f.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_(this.points(),this.tension())}_getTensionPointsClosed(){const f=this.points(),m=f.length,v=this.tension(),P=M(f[m-2],f[m-1],f[0],f[1],f[2],f[3],v),w=M(f[m-4],f[m-3],f[m-2],f[m-1],f[0],f[1],v),g=_(f,v);return[P[2],P[3]].concat(g).concat([w[0],w[1],f[m-2],f[m-1],w[2],w[3],P[0],P[1],f[0],f[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let f=this.points();if(f.length<4)return{x:f[0]||0,y:f[1]||0,width:0,height:0};this.tension()!==0?f=[f[0],f[1],...this._getTensionPoints(),f[f.length-2],f[f.length-1]]:f=this.points();let m=f[0],v=f[0],P=f[1],w=f[1],g,c;for(let y=0;y<f.length/2;y++)g=f[y*2],c=f[y*2+1],m=Math.min(m,g),v=Math.max(v,g),P=Math.min(P,c),w=Math.max(w,c);return{x:m,y:P,width:v-m,height:w-P}}};return sr.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,p._registerNode)(o),s.Factory.addGetterSetter(o,"closed",!1),s.Factory.addGetterSetter(o,"bezier",!1),s.Factory.addGetterSetter(o,"tension",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(o,"points",[],(0,O.getNumberArrayValidator)()),sr}var ar={},vs={},yo;function Eh(){return yo||(yo=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.t2length=s.getQuadraticArcLength=s.getCubicArcLength=s.binomialCoefficients=s.cValues=s.tValues=void 0,s.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],s.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],s.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const p=(o,d,f)=>{let m,v;const w=f/2;m=0;for(let g=0;g<20;g++)v=w*s.tValues[20][g]+w,m+=s.cValues[20][g]*O(o,d,v);return w*m};s.getCubicArcLength=p;const L=(o,d,f)=>{f===void 0&&(f=1);const m=o[0]-2*o[1]+o[2],v=d[0]-2*d[1]+d[2],P=2*o[1]-2*o[0],w=2*d[1]-2*d[0],g=4*(m*m+v*v),c=4*(m*P+v*w),y=P*P+w*w;if(g===0)return f*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(d[2]-d[0],2));const x=c/(2*g),A=y/g,l=f+x,a=A-x*x,S=l*l+a>0?Math.sqrt(l*l+a):0,k=x*x+a>0?Math.sqrt(x*x+a):0,N=x+Math.sqrt(x*x+a)!==0?a*Math.log(Math.abs((l+S)/(x+k))):0;return Math.sqrt(g)/2*(l*S-x*k+N)};s.getQuadraticArcLength=L;function O(o,d,f){const m=M(1,f,o),v=M(1,f,d),P=m*m+v*v;return Math.sqrt(P)}const M=(o,d,f)=>{const m=f.length-1;let v,P;if(m===0)return 0;if(o===0){P=0;for(let w=0;w<=m;w++)P+=s.binomialCoefficients[m][w]*Math.pow(1-d,m-w)*Math.pow(d,w)*f[w];return P}else{v=new Array(m);for(let w=0;w<m;w++)v[w]=m*(f[w+1]-f[w]);return M(o-1,d,v)}},_=(o,d,f)=>{let m=1,v=o/d,P=(o-f(v))/d,w=0;for(;m>.001;){const g=f(v+P),c=Math.abs(o-g)/d;if(c<m)m=c,v+=P;else{const y=f(v-P),x=Math.abs(o-y)/d;x<m?(m=x,v-=P):P/=2}if(w++,w>500)break}return v};s.t2length=_}(vs)),vs}var _o;function ys(){if(_o)return ar;_o=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.Path=void 0;const s=Se(),p=qe(),L=ye(),O=Eh();let M=class mt extends p.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=mt.parsePathData(this.data()),this.pathLength=mt.getPathLength(this.dataArray)}_sceneFunc(o){const d=this.dataArray;o.beginPath();let f=!1;for(let S=0;S<d.length;S++){const k=d[S].command,N=d[S].points;switch(k){case"L":o.lineTo(N[0],N[1]);break;case"M":o.moveTo(N[0],N[1]);break;case"C":o.bezierCurveTo(N[0],N[1],N[2],N[3],N[4],N[5]);break;case"Q":o.quadraticCurveTo(N[0],N[1],N[2],N[3]);break;case"A":var m=N[0],v=N[1],P=N[2],w=N[3],g=N[4],c=N[5],y=N[6],x=N[7],A=P>w?P:w,l=P>w?1:P/w,a=P>w?w/P:1;o.translate(m,v),o.rotate(y),o.scale(l,a),o.arc(0,0,A,g,g+c,1-x),o.scale(1/l,1/a),o.rotate(-y),o.translate(-m,-v);break;case"z":f=!0,o.closePath();break}}!f&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(g){if(g.command==="A"){const c=g.points[4],y=g.points[5],x=g.points[4]+y;let A=Math.PI/180;if(Math.abs(c-x)<A&&(A=Math.abs(c-x)),y<0)for(let l=c-A;l>x;l-=A){const a=mt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],l,0);o.push(a.x,a.y)}else for(let l=c+A;l<x;l+=A){const a=mt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],l,0);o.push(a.x,a.y)}}else if(g.command==="C")for(let c=0;c<=1;c+=.01){const y=mt.getPointOnCubicBezier(c,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);o.push(y.x,y.y)}else o=o.concat(g.points)});let d=o[0],f=o[0],m=o[1],v=o[1],P,w;for(let g=0;g<o.length/2;g++)P=o[g*2],w=o[g*2+1],isNaN(P)||(d=Math.min(d,P),f=Math.max(f,P)),isNaN(w)||(m=Math.min(m,w),v=Math.max(v,w));return{x:d,y:m,width:f-d,height:v-m}}getLength(){return this.pathLength}getPointAtLength(o){return mt.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,d,f,m){return Math.sqrt((f-o)*(f-o)+(m-d)*(m-d))}static getPathLength(o){let d=0;for(let f=0;f<o.length;++f)d+=o[f].pathLength;return d}static getPointAtLengthOfDataArray(o,d){let f,m=0,v=d.length;if(!v)return null;for(;m<v&&o>d[m].pathLength;)o-=d[m].pathLength,++m;if(m===v)return f=d[m-1].points.slice(-2),{x:f[0],y:f[1]};if(o<.01)return f=d[m].points.slice(0,2),{x:f[0],y:f[1]};const P=d[m],w=P.points;switch(P.command){case"L":return mt.getPointOnLine(o,P.start.x,P.start.y,w[0],w[1]);case"C":return mt.getPointOnCubicBezier((0,O.t2length)(o,mt.getPathLength(d),S=>(0,O.getCubicArcLength)([P.start.x,w[0],w[2],w[4]],[P.start.y,w[1],w[3],w[5]],S)),P.start.x,P.start.y,w[0],w[1],w[2],w[3],w[4],w[5]);case"Q":return mt.getPointOnQuadraticBezier((0,O.t2length)(o,mt.getPathLength(d),S=>(0,O.getQuadraticArcLength)([P.start.x,w[0],w[2]],[P.start.y,w[1],w[3]],S)),P.start.x,P.start.y,w[0],w[1],w[2],w[3]);case"A":var g=w[0],c=w[1],y=w[2],x=w[3],A=w[4],l=w[5],a=w[6];return A+=l*o/P.pathLength,mt.getPointOnEllipticalArc(g,c,y,x,A,a)}return null}static getPointOnLine(o,d,f,m,v,P,w){P=P??d,w=w??f;const g=this.getLineLength(d,f,m,v);if(g<1e-10)return{x:d,y:f};if(m===d)return{x:P,y:w+(v>f?o:-o)};const c=(v-f)/(m-d),y=Math.sqrt(o*o/(1+c*c))*(m<d?-1:1),x=c*y;if(Math.abs(w-f-c*(P-d))<1e-10)return{x:P+y,y:w+x};const A=((P-d)*(m-d)+(w-f)*(v-f))/(g*g),l=d+A*(m-d),a=f+A*(v-f),S=this.getLineLength(P,w,l,a),k=Math.sqrt(o*o-S*S),N=Math.sqrt(k*k/(1+c*c))*(m<d?-1:1),B=c*N;return{x:l+N,y:a+B}}static getPointOnCubicBezier(o,d,f,m,v,P,w,g,c){function y(k){return k*k*k}function x(k){return 3*k*k*(1-k)}function A(k){return 3*k*(1-k)*(1-k)}function l(k){return(1-k)*(1-k)*(1-k)}const a=g*y(o)+P*x(o)+m*A(o)+d*l(o),S=c*y(o)+w*x(o)+v*A(o)+f*l(o);return{x:a,y:S}}static getPointOnQuadraticBezier(o,d,f,m,v,P,w){function g(l){return l*l}function c(l){return 2*l*(1-l)}function y(l){return(1-l)*(1-l)}const x=P*g(o)+m*c(o)+d*y(o),A=w*g(o)+v*c(o)+f*y(o);return{x,y:A}}static getPointOnEllipticalArc(o,d,f,m,v,P){const w=Math.cos(P),g=Math.sin(P),c={x:f*Math.cos(v),y:m*Math.sin(v)};return{x:o+(c.x*w-c.y*g),y:d+(c.x*g+c.y*w)}}static parsePathData(o){if(!o)return[];let d=o;const f=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];d=d.replace(new RegExp(" ","g"),",");for(var m=0;m<f.length;m++)d=d.replace(new RegExp(f[m],"g"),"|"+f[m]);const v=d.split("|"),P=[],w=[];let g=0,c=0;const y=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let x;for(m=1;m<v.length;m++){let u=v[m],E=u.charAt(0);for(u=u.slice(1),w.length=0;x=y.exec(u);)w.push(x[0]);const C=[];for(let I=0,G=w.length;I<G;I++){if(w[I]==="00"){C.push(0,0);continue}const z=parseFloat(w[I]);isNaN(z)?C.push(0):C.push(z)}for(;C.length>0&&!isNaN(C[0]);){let I="",G=[];const z=g,j=c;var A,l,a,S,k,N,B,F,T,R;switch(E){case"l":g+=C.shift(),c+=C.shift(),I="L",G.push(g,c);break;case"L":g=C.shift(),c=C.shift(),G.push(g,c);break;case"m":var D=C.shift(),V=C.shift();if(g+=D,c+=V,I="M",P.length>2&&P[P.length-1].command==="z"){for(let q=P.length-2;q>=0;q--)if(P[q].command==="M"){g=P[q].points[0]+D,c=P[q].points[1]+V;break}}G.push(g,c),E="l";break;case"M":g=C.shift(),c=C.shift(),I="M",G.push(g,c),E="L";break;case"h":g+=C.shift(),I="L",G.push(g,c);break;case"H":g=C.shift(),I="L",G.push(g,c);break;case"v":c+=C.shift(),I="L",G.push(g,c);break;case"V":c=C.shift(),I="L",G.push(g,c);break;case"C":G.push(C.shift(),C.shift(),C.shift(),C.shift()),g=C.shift(),c=C.shift(),G.push(g,c);break;case"c":G.push(g+C.shift(),c+C.shift(),g+C.shift(),c+C.shift()),g+=C.shift(),c+=C.shift(),I="C",G.push(g,c);break;case"S":l=g,a=c,A=P[P.length-1],A.command==="C"&&(l=g+(g-A.points[2]),a=c+(c-A.points[3])),G.push(l,a,C.shift(),C.shift()),g=C.shift(),c=C.shift(),I="C",G.push(g,c);break;case"s":l=g,a=c,A=P[P.length-1],A.command==="C"&&(l=g+(g-A.points[2]),a=c+(c-A.points[3])),G.push(l,a,g+C.shift(),c+C.shift()),g+=C.shift(),c+=C.shift(),I="C",G.push(g,c);break;case"Q":G.push(C.shift(),C.shift()),g=C.shift(),c=C.shift(),G.push(g,c);break;case"q":G.push(g+C.shift(),c+C.shift()),g+=C.shift(),c+=C.shift(),I="Q",G.push(g,c);break;case"T":l=g,a=c,A=P[P.length-1],A.command==="Q"&&(l=g+(g-A.points[0]),a=c+(c-A.points[1])),g=C.shift(),c=C.shift(),I="Q",G.push(l,a,g,c);break;case"t":l=g,a=c,A=P[P.length-1],A.command==="Q"&&(l=g+(g-A.points[0]),a=c+(c-A.points[1])),g+=C.shift(),c+=C.shift(),I="Q",G.push(l,a,g,c);break;case"A":S=C.shift(),k=C.shift(),N=C.shift(),B=C.shift(),F=C.shift(),T=g,R=c,g=C.shift(),c=C.shift(),I="A",G=this.convertEndpointToCenterParameterization(T,R,g,c,B,F,S,k,N);break;case"a":S=C.shift(),k=C.shift(),N=C.shift(),B=C.shift(),F=C.shift(),T=g,R=c,g+=C.shift(),c+=C.shift(),I="A",G=this.convertEndpointToCenterParameterization(T,R,g,c,B,F,S,k,N);break}P.push({command:I||E,points:G,start:{x:z,y:j},pathLength:this.calcLength(z,j,I||E,G)})}(E==="z"||E==="Z")&&P.push({command:"z",points:[],start:void 0,pathLength:0})}return P}static calcLength(o,d,f,m){let v,P,w,g;const c=mt;switch(f){case"L":return c.getLineLength(o,d,m[0],m[1]);case"C":return(0,O.getCubicArcLength)([o,m[0],m[2],m[4]],[d,m[1],m[3],m[5]],1);case"Q":return(0,O.getQuadraticArcLength)([o,m[0],m[2]],[d,m[1],m[3]],1);case"A":v=0;var y=m[4],x=m[5],A=m[4]+x,l=Math.PI/180;if(Math.abs(y-A)<l&&(l=Math.abs(y-A)),P=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],y,0),x<0)for(g=y-l;g>A;g-=l)w=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],g,0),v+=c.getLineLength(P.x,P.y,w.x,w.y),P=w;else for(g=y+l;g<A;g+=l)w=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],g,0),v+=c.getLineLength(P.x,P.y,w.x,w.y),P=w;return w=c.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],A,0),v+=c.getLineLength(P.x,P.y,w.x,w.y),v}return 0}static convertEndpointToCenterParameterization(o,d,f,m,v,P,w,g,c){const y=c*(Math.PI/180),x=Math.cos(y)*(o-f)/2+Math.sin(y)*(d-m)/2,A=-1*Math.sin(y)*(o-f)/2+Math.cos(y)*(d-m)/2,l=x*x/(w*w)+A*A/(g*g);l>1&&(w*=Math.sqrt(l),g*=Math.sqrt(l));let a=Math.sqrt((w*w*(g*g)-w*w*(A*A)-g*g*(x*x))/(w*w*(A*A)+g*g*(x*x)));v===P&&(a*=-1),isNaN(a)&&(a=0);const S=a*w*A/g,k=a*-g*x/w,N=(o+f)/2+Math.cos(y)*S-Math.sin(y)*k,B=(d+m)/2+Math.sin(y)*S+Math.cos(y)*k,F=function(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])},T=function(C,I){return(C[0]*I[0]+C[1]*I[1])/(F(C)*F(I))},R=function(C,I){return(C[0]*I[1]<C[1]*I[0]?-1:1)*Math.acos(T(C,I))},D=R([1,0],[(x-S)/w,(A-k)/g]),V=[(x-S)/w,(A-k)/g],u=[(-1*x-S)/w,(-1*A-k)/g];let E=R(V,u);return T(V,u)<=-1&&(E=Math.PI),T(V,u)>=1&&(E=0),P===0&&E>0&&(E=E-2*Math.PI),P===1&&E<0&&(E=E+2*Math.PI),[N,B,w,g,D,E,y,P]}};return ar.Path=M,M.prototype.className="Path",M.prototype._attrsAffectingSize=["data"],(0,L._registerNode)(M),s.Factory.addGetterSetter(M,"data"),ar}var So;function kh(){if(So)return ir;So=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.Arrow=void 0;const s=Se(),p=vo(),L=Ce(),O=ye(),M=ys();let _=class extends p.Line{_sceneFunc(d){super._sceneFunc(d);const f=Math.PI*2,m=this.points();let v=m;const P=this.tension()!==0&&m.length>4;P&&(v=this.getTensionPoints());const w=this.pointerLength(),g=m.length;let c,y;if(P){const l=[v[v.length-4],v[v.length-3],v[v.length-2],v[v.length-1],m[g-2],m[g-1]],a=M.Path.calcLength(v[v.length-4],v[v.length-3],"C",l),S=M.Path.getPointOnQuadraticBezier(Math.min(1,1-w/a),l[0],l[1],l[2],l[3],l[4],l[5]);c=m[g-2]-S.x,y=m[g-1]-S.y}else c=m[g-2]-m[g-4],y=m[g-1]-m[g-3];const x=(Math.atan2(y,c)+f)%f,A=this.pointerWidth();this.pointerAtEnding()&&(d.save(),d.beginPath(),d.translate(m[g-2],m[g-1]),d.rotate(x),d.moveTo(0,0),d.lineTo(-w,A/2),d.lineTo(-w,-A/2),d.closePath(),d.restore(),this.__fillStroke(d)),this.pointerAtBeginning()&&(d.save(),d.beginPath(),d.translate(m[0],m[1]),P?(c=(v[0]+v[2])/2-m[0],y=(v[1]+v[3])/2-m[1]):(c=m[2]-m[0],y=m[3]-m[1]),d.rotate((Math.atan2(-y,-c)+f)%f),d.moveTo(0,0),d.lineTo(-w,A/2),d.lineTo(-w,-A/2),d.closePath(),d.restore(),this.__fillStroke(d))}__fillStroke(d){const f=this.dashEnabled();f&&(this.attrs.dashEnabled=!1,d.setLineDash([])),d.fillStrokeShape(this),f&&(this.attrs.dashEnabled=!0)}getSelfRect(){const d=super.getSelfRect(),f=this.pointerWidth()/2;return{x:d.x,y:d.y-f,width:d.width,height:d.height+f*2}}};return ir.Arrow=_,_.prototype.className="Arrow",(0,O._registerNode)(_),s.Factory.addGetterSetter(_,"pointerLength",10,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"pointerWidth",10,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"pointerAtBeginning",!1),s.Factory.addGetterSetter(_,"pointerAtEnding",!0),ir}var or={},Co;function Rh(){if(Co)return or;Co=1,Object.defineProperty(or,"__esModule",{value:!0}),or.Circle=void 0;const s=Se(),p=qe(),L=Ce(),O=ye();class M extends p.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}return or.Circle=M,M.prototype._centroid=!0,M.prototype.className="Circle",M.prototype._attrsAffectingSize=["radius"],(0,O._registerNode)(M),s.Factory.addGetterSetter(M,"radius",0,(0,L.getNumberValidator)()),or}var lr={},wo;function Th(){if(wo)return lr;wo=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.Ellipse=void 0;const s=Se(),p=qe(),L=Ce(),O=ye();let M=class extends p.Shape{_sceneFunc(o){const d=this.radiusX(),f=this.radiusY();o.beginPath(),o.save(),d!==f&&o.scale(1,f/d),o.arc(0,0,d,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return lr.Ellipse=M,M.prototype.className="Ellipse",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,O._registerNode)(M),s.Factory.addComponentsGetterSetter(M,"radius",["x","y"]),s.Factory.addGetterSetter(M,"radiusX",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(M,"radiusY",0,(0,L.getNumberValidator)()),lr}var ur={},xo;function Nh(){if(xo)return ur;xo=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.Image=void 0;const s=Ie(),p=Se(),L=qe(),O=ye(),M=Ce();let _=class fh extends L.Shape{constructor(d){super(d),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",f=>{this._removeImageLoad(f.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const d=this.image();d&&d.complete||d&&d.readyState===4||d&&d.addEventListener&&d.addEventListener("load",this._loadListener)}_removeImageLoad(d){d&&d.removeEventListener&&d.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const d=!!this.cornerRadius(),f=this.hasShadow();return d&&f?!0:super._useBufferCanvas(!0)}_sceneFunc(d){const f=this.getWidth(),m=this.getHeight(),v=this.cornerRadius(),P=this.attrs.image;let w;if(P){const g=this.attrs.cropWidth,c=this.attrs.cropHeight;g&&c?w=[P,this.cropX(),this.cropY(),g,c,0,0,f,m]:w=[P,0,0,f,m]}(this.hasFill()||this.hasStroke()||v)&&(d.beginPath(),v?s.Util.drawRoundedRectPath(d,f,m,v):d.rect(0,0,f,m),d.closePath(),d.fillStrokeShape(this)),P&&(v&&d.clip(),d.drawImage.apply(d,w))}_hitFunc(d){const f=this.width(),m=this.height(),v=this.cornerRadius();d.beginPath(),v?s.Util.drawRoundedRectPath(d,f,m,v):d.rect(0,0,f,m),d.closePath(),d.fillStrokeShape(this)}getWidth(){var d,f;return(d=this.attrs.width)!==null&&d!==void 0?d:(f=this.image())===null||f===void 0?void 0:f.width}getHeight(){var d,f;return(d=this.attrs.height)!==null&&d!==void 0?d:(f=this.image())===null||f===void 0?void 0:f.height}static fromURL(d,f,m=null){const v=s.Util.createImageElement();v.onload=function(){const P=new fh({image:v});f(P)},v.onerror=m,v.crossOrigin="Anonymous",v.src=d}};return ur.Image=_,_.prototype.className="Image",(0,O._registerNode)(_),p.Factory.addGetterSetter(_,"cornerRadius",0,(0,M.getNumberOrArrayOfNumbersValidator)(4)),p.Factory.addGetterSetter(_,"image"),p.Factory.addComponentsGetterSetter(_,"crop",["x","y","width","height"]),p.Factory.addGetterSetter(_,"cropX",0,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(_,"cropY",0,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(_,"cropWidth",0,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(_,"cropHeight",0,(0,M.getNumberValidator)()),ur}var Cn={},Po;function Fh(){if(Po)return Cn;Po=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Tag=Cn.Label=void 0;const s=Se(),p=qe(),L=fs(),O=Ce(),M=ye(),_=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",d="none",f="up",m="right",v="down",P="left",w=_.length;let g=class extends L.Group{constructor(x){super(x),this.on("add.konva",function(A){this._addListeners(A.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(x){let A=this,l;const a=function(){A._sync()};for(l=0;l<w;l++)x.on(_[l]+o,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let x=this.getText(),A=this.getTag(),l,a,S,k,N,B,F;if(x&&A){switch(l=x.width(),a=x.height(),S=A.pointerDirection(),k=A.pointerWidth(),F=A.pointerHeight(),N=0,B=0,S){case f:N=l/2,B=-1*F;break;case m:N=l+k,B=a/2;break;case v:N=l/2,B=a+F;break;case P:N=-1*k,B=a/2;break}A.setAttrs({x:-1*N,y:-1*B,width:l,height:a}),x.setAttrs({x:-1*N,y:-1*B})}}};Cn.Label=g,g.prototype.className="Label",(0,M._registerNode)(g);class c extends p.Shape{_sceneFunc(x){const A=this.width(),l=this.height(),a=this.pointerDirection(),S=this.pointerWidth(),k=this.pointerHeight(),N=this.cornerRadius();let B=0,F=0,T=0,R=0;typeof N=="number"?B=F=T=R=Math.min(N,A/2,l/2):(B=Math.min(N[0]||0,A/2,l/2),F=Math.min(N[1]||0,A/2,l/2),R=Math.min(N[2]||0,A/2,l/2),T=Math.min(N[3]||0,A/2,l/2)),x.beginPath(),x.moveTo(B,0),a===f&&(x.lineTo((A-S)/2,0),x.lineTo(A/2,-1*k),x.lineTo((A+S)/2,0)),x.lineTo(A-F,0),x.arc(A-F,F,F,Math.PI*3/2,0,!1),a===m&&(x.lineTo(A,(l-k)/2),x.lineTo(A+S,l/2),x.lineTo(A,(l+k)/2)),x.lineTo(A,l-R),x.arc(A-R,l-R,R,0,Math.PI/2,!1),a===v&&(x.lineTo((A+S)/2,l),x.lineTo(A/2,l+k),x.lineTo((A-S)/2,l)),x.lineTo(T,l),x.arc(T,l-T,T,Math.PI/2,Math.PI,!1),a===P&&(x.lineTo(0,(l+k)/2),x.lineTo(-1*S,l/2),x.lineTo(0,(l-k)/2)),x.lineTo(0,B),x.arc(B,B,B,Math.PI,Math.PI*3/2,!1),x.closePath(),x.fillStrokeShape(this)}getSelfRect(){let x=0,A=0,l=this.pointerWidth(),a=this.pointerHeight(),S=this.pointerDirection(),k=this.width(),N=this.height();return S===f?(A-=a,N+=a):S===v?N+=a:S===P?(x-=l*1.5,k+=l):S===m&&(k+=l*1.5),{x,y:A,width:k,height:N}}}return Cn.Tag=c,c.prototype.className="Tag",(0,M._registerNode)(c),s.Factory.addGetterSetter(c,"pointerDirection",d),s.Factory.addGetterSetter(c,"pointerWidth",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(c,"pointerHeight",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(c,"cornerRadius",0,(0,O.getNumberOrArrayOfNumbersValidator)(4)),Cn}var hr={},Eo;function ko(){if(Eo)return hr;Eo=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.Rect=void 0;const s=Se(),p=qe(),L=ye(),O=Ie(),M=Ce();let _=class extends p.Shape{_sceneFunc(d){const f=this.cornerRadius(),m=this.width(),v=this.height();d.beginPath(),f?O.Util.drawRoundedRectPath(d,m,v,f):d.rect(0,0,m,v),d.closePath(),d.fillStrokeShape(this)}};return hr.Rect=_,_.prototype.className="Rect",(0,L._registerNode)(_),s.Factory.addGetterSetter(_,"cornerRadius",0,(0,M.getNumberOrArrayOfNumbersValidator)(4)),hr}var cr={},Ro;function Ah(){if(Ro)return cr;Ro=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.RegularPolygon=void 0;const s=Se(),p=qe(),L=Ce(),O=ye();let M=class extends p.Shape{_sceneFunc(o){const d=this._getPoints();o.beginPath(),o.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++)o.lineTo(d[f].x,d[f].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,d=this.attrs.radius||0,f=[];for(let m=0;m<o;m++)f.push({x:d*Math.sin(m*2*Math.PI/o),y:-1*d*Math.cos(m*2*Math.PI/o)});return f}getSelfRect(){const o=this._getPoints();let d=o[0].x,f=o[0].y,m=o[0].x,v=o[0].y;return o.forEach(P=>{d=Math.min(d,P.x),f=Math.max(f,P.x),m=Math.min(m,P.y),v=Math.max(v,P.y)}),{x:d,y:m,width:f-d,height:v-m}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return cr.RegularPolygon=M,M.prototype.className="RegularPolygon",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["radius"],(0,O._registerNode)(M),s.Factory.addGetterSetter(M,"radius",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(M,"sides",0,(0,L.getNumberValidator)()),cr}var dr={},To;function Mh(){if(To)return dr;To=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.Ring=void 0;const s=Se(),p=qe(),L=Ce(),O=ye(),M=Math.PI*2;let _=class extends p.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.innerRadius(),0,M,!1),d.moveTo(this.outerRadius(),0),d.arc(0,0,this.outerRadius(),M,0,!0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return dr.Ring=_,_.prototype.className="Ring",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,O._registerNode)(_),s.Factory.addGetterSetter(_,"innerRadius",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(_,"outerRadius",0,(0,L.getNumberValidator)()),dr}var fr={},No;function bh(){if(No)return fr;No=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.Sprite=void 0;const s=Se(),p=qe(),L=gs(),O=Ce(),M=ye();let _=class extends p.Shape{constructor(d){super(d),this._updated=!0,this.anim=new L.Animation(()=>{const f=this._updated;return this._updated=!1,f}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(d){const f=this.animation(),m=this.frameIndex(),v=m*4,P=this.animations()[f],w=this.frameOffsets(),g=P[v+0],c=P[v+1],y=P[v+2],x=P[v+3],A=this.image();if((this.hasFill()||this.hasStroke())&&(d.beginPath(),d.rect(0,0,y,x),d.closePath(),d.fillStrokeShape(this)),A)if(w){const l=w[f],a=m*2;d.drawImage(A,g,c,y,x,l[a+0],l[a+1],y,x)}else d.drawImage(A,g,c,y,x,0,0,y,x)}_hitFunc(d){const f=this.animation(),m=this.frameIndex(),v=m*4,P=this.animations()[f],w=this.frameOffsets(),g=P[v+2],c=P[v+3];if(d.beginPath(),w){const y=w[f],x=m*2;d.rect(y[x+0],y[x+1],g,c)}else d.rect(0,0,g,c);d.closePath(),d.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const d=this;this.interval=setInterval(function(){d._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const d=this.getLayer();this.anim.setLayers(d),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const d=this.frameIndex(),f=this.animation(),m=this.animations(),v=m[f],P=v.length/4;d<P-1?this.frameIndex(d+1):this.frameIndex(0)}};return fr.Sprite=_,_.prototype.className="Sprite",(0,M._registerNode)(_),s.Factory.addGetterSetter(_,"animation"),s.Factory.addGetterSetter(_,"animations"),s.Factory.addGetterSetter(_,"frameOffsets"),s.Factory.addGetterSetter(_,"image"),s.Factory.addGetterSetter(_,"frameIndex",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(_,"frameRate",17,(0,O.getNumberValidator)()),s.Factory.backCompat(_,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),fr}var gr={},Fo;function Lh(){if(Fo)return gr;Fo=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Star=void 0;const s=Se(),p=qe(),L=Ce(),O=ye();let M=class extends p.Shape{_sceneFunc(o){const d=this.innerRadius(),f=this.outerRadius(),m=this.numPoints();o.beginPath(),o.moveTo(0,0-f);for(let v=1;v<m*2;v++){const P=v%2===0?f:d,w=P*Math.sin(v*Math.PI/m),g=-1*P*Math.cos(v*Math.PI/m);o.lineTo(w,g)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return gr.Star=M,M.prototype.className="Star",M.prototype._centroid=!0,M.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,O._registerNode)(M),s.Factory.addGetterSetter(M,"numPoints",5,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(M,"innerRadius",0,(0,L.getNumberValidator)()),s.Factory.addGetterSetter(M,"outerRadius",0,(0,L.getNumberValidator)()),gr}var bn={},Ao;function Mo(){if(Ao)return bn;Ao=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.Text=void 0,bn.stringToArray=o;const s=Ie(),p=Se(),L=qe(),O=ye(),M=Ce(),_=ye();function o(ee){return[...ee].reduce((Z,$,se,ae)=>{if(new RegExp("\\p{Emoji}","u").test($)){const U=ae[se+1];U&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(U)?(Z.push($+U),ae[se+1]=""):Z.push($)}else new RegExp("\\p{Regional_Indicator}{2}","u").test($+(ae[se+1]||""))?Z.push($+ae[se+1]):se>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test($)?Z[Z.length-1]+=$:$&&Z.push($);return Z},[])}const d="auto",f="center",m="inherit",v="justify",P="Change.konva",w="2d",g="-",c="left",y="text",x="Text",A="top",l="bottom",a="middle",S="normal",k="px ",N=" ",B="right",F="rtl",T="word",R="char",D="none",V="…",u=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],E=u.length;function C(ee){return ee.split(",").map(Z=>{Z=Z.trim();const $=Z.indexOf(" ")>=0,se=Z.indexOf('"')>=0||Z.indexOf("'")>=0;return $&&!se&&(Z=`"${Z}"`),Z}).join(", ")}let I;function G(){return I||(I=s.Util.createCanvasElement().getContext(w),I)}function z(ee){ee.fillText(this._partialText,this._partialTextX,this._partialTextY)}function j(ee){ee.setAttr("miterLimit",2),ee.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function q(ee){return ee=ee||{},!ee.fillLinearGradientColorStops&&!ee.fillRadialGradientColorStops&&!ee.fillPatternImage&&(ee.fill=ee.fill||"black"),ee}class J extends L.Shape{constructor(Z){super(q(Z)),this._partialTextX=0,this._partialTextY=0;for(let $=0;$<E;$++)this.on(u[$]+P,this._setTextData);this._setTextData()}_sceneFunc(Z){const $=this.textArr,se=$.length;if(!this.text())return;let ae=this.padding(),U=this.fontSize(),X=this.lineHeight()*U,te=this.verticalAlign(),re=this.direction(),ie=0,ce=this.align(),pe=this.getWidth(),Ee=this.letterSpacing(),me=this.fill(),We=this.textDecoration(),ke=We.indexOf("underline")!==-1,Le=We.indexOf("line-through")!==-1,hn;re=re===m?Z.direction:re;let je=X/2,wn=a;if(O.Konva._fixTextRendering){const Ut=this.measureSize("M");wn="alphabetic",je=(Ut.fontBoundingBoxAscent-Ut.fontBoundingBoxDescent)/2+X/2}var Ae=0,ut=0;for(re===F&&Z.setAttr("direction",re),Z.setAttr("font",this._getContextFont()),Z.setAttr("textBaseline",wn),Z.setAttr("textAlign",c),te===a?ie=(this.getHeight()-se*X-ae*2)/2:te===l&&(ie=this.getHeight()-se*X-ae*2),Z.translate(ae,ie+ae),hn=0;hn<se;hn++){var Ae=0,ut=0,$e=$[hn],Ft=$e.text,et=$e.width,Gt=$e.lastInParagraph,At,Jt;if(Z.save(),ce===B?Ae+=pe-et-ae*2:ce===f&&(Ae+=(pe-et-ae*2)/2),ke){Z.save(),Z.beginPath();const vt=O.Konva._fixTextRendering?Math.round(U/4):Math.round(U/2),yt=Ae,_t=je+ut+vt;Z.moveTo(yt,_t),At=Ft.split(" ").length-1,Jt=ce===v&&!Gt?pe-ae*2:et,Z.lineTo(yt+Math.round(Jt),_t),Z.lineWidth=U/15;const Ur=this._getLinearGradient();Z.strokeStyle=Ur||me,Z.stroke(),Z.restore()}if(Le){Z.save(),Z.beginPath();const vt=O.Konva._fixTextRendering?-Math.round(U/4):0;Z.moveTo(Ae,je+ut+vt),At=Ft.split(" ").length-1,Jt=ce===v&&!Gt?pe-ae*2:et,Z.lineTo(Ae+Math.round(Jt),je+ut+vt),Z.lineWidth=U/15;const yt=this._getLinearGradient();Z.strokeStyle=yt||me,Z.stroke(),Z.restore()}if(re!==F&&(Ee!==0||ce===v)){At=Ft.split(" ").length-1;const vt=o(Ft);for(let yt=0;yt<vt.length;yt++){const _t=vt[yt];_t===" "&&!Gt&&ce===v&&(Ae+=(pe-ae*2-et)/At),this._partialTextX=Ae,this._partialTextY=je+ut,this._partialText=_t,Z.fillStrokeShape(this),Ae+=this.measureSize(_t).width+Ee}}else Ee!==0&&Z.setAttr("letterSpacing",`${Ee}px`),this._partialTextX=Ae,this._partialTextY=je+ut,this._partialText=Ft,Z.fillStrokeShape(this);Z.restore(),se>1&&(je+=X)}}_hitFunc(Z){const $=this.getWidth(),se=this.getHeight();Z.beginPath(),Z.rect(0,0,$,se),Z.closePath(),Z.fillStrokeShape(this)}setText(Z){const $=s.Util._isString(Z)?Z:Z==null?"":Z+"";return this._setAttr(y,$),this}getWidth(){return this.attrs.width===d||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===d||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(Z){var $,se,ae,U,X,te,re,ie,ce,pe,Ee;let me=G(),We=this.fontSize(),ke;me.save(),me.font=this._getContextFont(),ke=me.measureText(Z),me.restore();const Le=We/100;return{actualBoundingBoxAscent:($=ke.actualBoundingBoxAscent)!==null&&$!==void 0?$:71.58203125*Le,actualBoundingBoxDescent:(se=ke.actualBoundingBoxDescent)!==null&&se!==void 0?se:0,actualBoundingBoxLeft:(ae=ke.actualBoundingBoxLeft)!==null&&ae!==void 0?ae:-7.421875*Le,actualBoundingBoxRight:(U=ke.actualBoundingBoxRight)!==null&&U!==void 0?U:75.732421875*Le,alphabeticBaseline:(X=ke.alphabeticBaseline)!==null&&X!==void 0?X:0,emHeightAscent:(te=ke.emHeightAscent)!==null&&te!==void 0?te:100*Le,emHeightDescent:(re=ke.emHeightDescent)!==null&&re!==void 0?re:-20*Le,fontBoundingBoxAscent:(ie=ke.fontBoundingBoxAscent)!==null&&ie!==void 0?ie:91*Le,fontBoundingBoxDescent:(ce=ke.fontBoundingBoxDescent)!==null&&ce!==void 0?ce:21*Le,hangingBaseline:(pe=ke.hangingBaseline)!==null&&pe!==void 0?pe:72.80000305175781*Le,ideographicBaseline:(Ee=ke.ideographicBaseline)!==null&&Ee!==void 0?Ee:-21*Le,width:ke.width,height:We}}_getContextFont(){return this.fontStyle()+N+this.fontVariant()+N+(this.fontSize()+k)+C(this.fontFamily())}_addTextLine(Z){this.align()===v&&(Z=Z.trim());const se=this._getTextWidth(Z);return this.textArr.push({text:Z,width:se,lastInParagraph:!1})}_getTextWidth(Z){const $=this.letterSpacing(),se=Z.length;return G().measureText(Z).width+$*se}_setTextData(){let Z=this.text().split(`
`),$=+this.fontSize(),se=0,ae=this.lineHeight()*$,U=this.attrs.width,X=this.attrs.height,te=U!==d&&U!==void 0,re=X!==d&&X!==void 0,ie=this.padding(),ce=U-ie*2,pe=X-ie*2,Ee=0,me=this.wrap(),We=me!==D,ke=me!==R&&We,Le=this.ellipsis();this.textArr=[],G().font=this._getContextFont();const hn=Le?this._getTextWidth(V):0;for(let je=0,wn=Z.length;je<wn;++je){let Ae=Z[je],ut=this._getTextWidth(Ae);if(te&&ut>ce)for(;Ae.length>0;){let $e=0,Ft=o(Ae).length,et="",Gt=0;for(;$e<Ft;){const At=$e+Ft>>>1,Jt=o(Ae),Ut=Jt.slice(0,At+1).join(""),zt=this._getTextWidth(Ut);(Le&&re&&Ee+ae>pe?zt+hn:zt)<=ce?($e=At+1,et=Ut,Gt=zt):Ft=At}if(et){if(ke){const Ut=o(Ae),zt=o(et),vt=Ut[zt.length],yt=vt===N||vt===g;let _t;if(yt&&Gt<=ce)_t=zt.length;else{const Ur=zt.lastIndexOf(N),Rs=zt.lastIndexOf(g);_t=Math.max(Ur,Rs)+1}_t>0&&($e=_t,et=Ut.slice(0,$e).join(""),Gt=this._getTextWidth(et))}if(et=et.trimRight(),this._addTextLine(et),se=Math.max(se,Gt),Ee+=ae,this._shouldHandleEllipsis(Ee)){this._tryToAddEllipsisToLastLine();break}if(Ae=o(Ae).slice($e).join("").trimLeft(),Ae.length>0&&(ut=this._getTextWidth(Ae),ut<=ce)){this._addTextLine(Ae),Ee+=ae,se=Math.max(se,ut);break}}else break}else this._addTextLine(Ae),Ee+=ae,se=Math.max(se,ut),this._shouldHandleEllipsis(Ee)&&je<wn-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),re&&Ee+ae>pe)break}this.textHeight=$,this.textWidth=se}_shouldHandleEllipsis(Z){const $=+this.fontSize(),se=this.lineHeight()*$,ae=this.attrs.height,U=ae!==d&&ae!==void 0,X=this.padding(),te=ae-X*2;return!(this.wrap()!==D)||U&&Z+se>te}_tryToAddEllipsisToLastLine(){const Z=this.attrs.width,$=Z!==d&&Z!==void 0,se=this.padding(),ae=Z-se*2,U=this.ellipsis(),X=this.textArr[this.textArr.length-1];!X||!U||($&&(this._getTextWidth(X.text+V)<ae||(X.text=X.text.slice(0,X.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(X.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const Z=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,$=this.hasShadow();return Z&&$?!0:super._useBufferCanvas()}}return bn.Text=J,J.prototype._fillFunc=z,J.prototype._strokeFunc=j,J.prototype.className=x,J.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,_._registerNode)(J),p.Factory.overWriteSetter(J,"width",(0,M.getNumberOrAutoValidator)()),p.Factory.overWriteSetter(J,"height",(0,M.getNumberOrAutoValidator)()),p.Factory.addGetterSetter(J,"direction",m),p.Factory.addGetterSetter(J,"fontFamily","Arial"),p.Factory.addGetterSetter(J,"fontSize",12,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(J,"fontStyle",S),p.Factory.addGetterSetter(J,"fontVariant",S),p.Factory.addGetterSetter(J,"padding",0,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(J,"align",c),p.Factory.addGetterSetter(J,"verticalAlign",A),p.Factory.addGetterSetter(J,"lineHeight",1,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(J,"wrap",T),p.Factory.addGetterSetter(J,"ellipsis",!1,(0,M.getBooleanValidator)()),p.Factory.addGetterSetter(J,"letterSpacing",0,(0,M.getNumberValidator)()),p.Factory.addGetterSetter(J,"text","",(0,M.getStringValidator)()),p.Factory.addGetterSetter(J,"textDecoration",""),bn}var pr={},bo;function Oh(){if(bo)return pr;bo=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.TextPath=void 0;const s=Ie(),p=Se(),L=qe(),O=ys(),M=Mo(),_=Ce(),o=ye(),d="",f="normal";function m(w){w.fillText(this.partialText,0,0)}function v(w){w.strokeText(this.partialText,0,0)}let P=class extends L.Shape{constructor(g){super(g),this.dummyCanvas=s.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return O.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const c=this.pathLength;return g-1>c?null:O.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=O.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const c=this.textDecoration(),y=this.fill(),x=this.fontSize(),A=this.glyphInfo;c==="underline"&&g.beginPath();for(let l=0;l<A.length;l++){g.save();const a=A[l].p0;g.translate(a.x,a.y),g.rotate(A[l].rotation),this.partialText=A[l].text,g.fillStrokeShape(this),c==="underline"&&(l===0&&g.moveTo(0,x/2+1),g.lineTo(x,x/2+1)),g.restore()}c==="underline"&&(g.strokeStyle=y,g.lineWidth=x/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const c=this.glyphInfo;if(c.length>=1){const y=c[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<c.length;y++){const x=c[y].p1;g.lineTo(x.x,x.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return M.Text.prototype.setText.call(this,g)}_getContextFont(){return M.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const x=y.measureText(g);return y.restore(),{width:x.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:c}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=c,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),x=this.align(),A=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let a=0;x==="center"&&(a=Math.max(0,this.pathLength/2-l/2)),x==="right"&&(a=Math.max(0,this.pathLength-l));const S=(0,M.stringToArray)(this.text());let k=a;for(let N=0;N<S.length;N++){const B=this._getPointAtLength(k);if(!B)return;let F=this._getTextSize(S[N]).width+y;if(S[N]===" "&&x==="justify"){const E=this.text().split(" ").length-1;F+=(this.pathLength-l)/E}const T=this._getPointAtLength(k+F);if(!T)return;const R=O.Path.getLineLength(B.x,B.y,T.x,T.y);let D=0;if(A)try{D=A(S[N-1],S[N])*this.fontSize()}catch{D=0}B.x+=D,T.x+=D,this.textWidth+=D;const V=O.Path.getPointOnLine(D+R/2,B.x,B.y,T.x,T.y),u=Math.atan2(T.y-B.y,T.x-B.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:S[N],rotation:u,p0:B,p1:T}),k+=F}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(k){g.push(k.p0.x),g.push(k.p0.y),g.push(k.p1.x),g.push(k.p1.y)});let c=g[0]||0,y=g[0]||0,x=g[1]||0,A=g[1]||0,l,a;for(let k=0;k<g.length/2;k++)l=g[k*2],a=g[k*2+1],c=Math.min(c,l),y=Math.max(y,l),x=Math.min(x,a),A=Math.max(A,a);const S=this.fontSize();return{x:c-S/2,y:x-S/2,width:y-c+S,height:A-x+S}}destroy(){return s.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return pr.TextPath=P,P.prototype._fillFunc=m,P.prototype._strokeFunc=v,P.prototype._fillFuncHit=m,P.prototype._strokeFuncHit=v,P.prototype.className="TextPath",P.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(P),p.Factory.addGetterSetter(P,"data"),p.Factory.addGetterSetter(P,"fontFamily","Arial"),p.Factory.addGetterSetter(P,"fontSize",12,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(P,"fontStyle",f),p.Factory.addGetterSetter(P,"align","left"),p.Factory.addGetterSetter(P,"letterSpacing",0,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(P,"textBaseline","middle"),p.Factory.addGetterSetter(P,"fontVariant",f),p.Factory.addGetterSetter(P,"text",d),p.Factory.addGetterSetter(P,"textDecoration",""),p.Factory.addGetterSetter(P,"kerningFunc",void 0),pr}var mr={},Lo;function Dh(){if(Lo)return mr;Lo=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.Transformer=void 0;const s=Ie(),p=Se(),L=Ge(),O=qe(),M=ko(),_=fs(),o=ye(),d=Ce(),f=ye(),m="tr-konva",v=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(F=>F+`.${m}`).join(" "),P="nodesRect",w=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},c="ontouchstart"in o.Konva._global;function y(F,T,R){if(F==="rotater")return R;T+=s.Util.degToRad(g[F]||0);const D=(s.Util.radToDeg(T)%360+360)%360;return s.Util._inRange(D,315+22.5,360)||s.Util._inRange(D,0,22.5)?"ns-resize":s.Util._inRange(D,45-22.5,45+22.5)?"nesw-resize":s.Util._inRange(D,90-22.5,90+22.5)?"ew-resize":s.Util._inRange(D,135-22.5,135+22.5)?"nwse-resize":s.Util._inRange(D,180-22.5,180+22.5)?"ns-resize":s.Util._inRange(D,225-22.5,225+22.5)?"nesw-resize":s.Util._inRange(D,270-22.5,270+22.5)?"ew-resize":s.Util._inRange(D,315-22.5,315+22.5)?"nwse-resize":(s.Util.error("Transformer has unknown angle for cursor detection: "+D),"pointer")}const x=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function A(F){return{x:F.x+F.width/2*Math.cos(F.rotation)+F.height/2*Math.sin(-F.rotation),y:F.y+F.height/2*Math.cos(F.rotation)+F.width/2*Math.sin(F.rotation)}}function l(F,T,R){const D=R.x+(F.x-R.x)*Math.cos(T)-(F.y-R.y)*Math.sin(T),V=R.y+(F.x-R.x)*Math.sin(T)+(F.y-R.y)*Math.cos(T);return{...F,rotation:F.rotation+T,x:D,y:V}}function a(F,T){const R=A(F);return l(F,T,R)}function S(F,T,R){let D=T;for(let V=0;V<F.length;V++){const u=o.Konva.getAngle(F[V]),E=Math.abs(u-T)%(Math.PI*2);Math.min(E,Math.PI*2-E)<R&&(D=u)}return D}let k=0,N=class extends _.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(v,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return s.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return m+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const R=T.filter(V=>V.isAncestorOf(this)?(s.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=R,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const u=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(V._attrsAffectingSize.length){const E=V._attrsAffectingSize.map(C=>C+"Change."+this._getEventNamespace()).join(" ");V.on(E,u)}V.on(w.map(E=>E+`.${this._getEventNamespace()}`).join(" "),u),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,u),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let R;T.on(`dragstart.${this._getEventNamespace()}`,D=>{R=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(D,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,D=>{if(!R)return;const V=T.getAbsolutePosition(),u=V.x-R.x,E=V.y-R.y;this.nodes().forEach(C=>{if(C===T||C.isDragging())return;const I=C.getAbsolutePosition();C.setAbsolutePosition({x:I.x+u,y:I.y+E}),C.startDrag(D)}),R=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(P),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(P,this.__getNodeRect)}__getNodeShape(T,R=this.rotation(),D){const V=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=T.getAbsoluteScale(D),E=T.getAbsolutePosition(D),C=V.x*u.x-T.offsetX()*u.x,I=V.y*u.y-T.offsetY()*u.y,G=(o.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),z={x:E.x+C*Math.cos(G)+I*Math.sin(-G),y:E.y+I*Math.cos(G)+C*Math.sin(G),width:V.width*u.x,height:V.height*u.y,rotation:G};return l(z,-o.Konva.getAngle(R),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const R=[];this.nodes().map(G=>{const z=G.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),j=[{x:z.x,y:z.y},{x:z.x+z.width,y:z.y},{x:z.x+z.width,y:z.y+z.height},{x:z.x,y:z.y+z.height}],q=G.getAbsoluteTransform();j.forEach(function(J){const ee=q.point(J);R.push(ee)})});const D=new s.Transform;D.rotate(-o.Konva.getAngle(this.rotation()));let V=1/0,u=1/0,E=-1/0,C=-1/0;R.forEach(function(G){const z=D.point(G);V===void 0&&(V=E=z.x,u=C=z.y),V=Math.min(V,z.x),u=Math.min(u,z.y),E=Math.max(E,z.x),C=Math.max(C,z.y)}),D.invert();const I=D.point({x:V,y:u});return{x:I.x,y:I.y,width:E-V,height:C-u,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),x.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const R=new M.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:c?10:"auto"}),D=this;R.on("mousedown touchstart",function(V){D._handleMouseDown(V)}),R.on("dragstart",V=>{R.stopDrag(),V.cancelBubble=!0}),R.on("dragend",V=>{V.cancelBubble=!0}),R.on("mouseenter",()=>{const V=o.Konva.getAngle(this.rotation()),u=this.rotateAnchorCursor(),E=y(T,V,u);R.getStage().content&&(R.getStage().content.style.cursor=E),this._cursorChange=!0}),R.on("mouseout",()=>{R.getStage().content&&(R.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(R)}_createBack(){const T=new O.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(R,D){const V=D.getParent(),u=V.padding();R.beginPath(),R.rect(-u,-u,D.width()+u*2,D.height()+u*2),R.moveTo(D.width()/2,-u),V.rotateEnabled()&&V.rotateLineVisible()&&R.lineTo(D.width()/2,-V.rotateAnchorOffset()*s.Util._sign(D.height())-u),R.fillStrokeShape(D)},hitFunc:(R,D)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();R.beginPath(),R.rect(-V,-V,D.width()+V*2,D.height()+V*2),R.fillStrokeShape(D)}});this.add(T),this._proxyDrag(T),T.on("dragstart",R=>{R.cancelBubble=!0}),T.on("dragmove",R=>{R.cancelBubble=!0}),T.on("dragend",R=>{R.cancelBubble=!0}),this.on("dragmove",R=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const R=this._getNodeRect(),D=R.width,V=R.height,u=Math.sqrt(Math.pow(D,2)+Math.pow(V,2));this.sin=Math.abs(V/u),this.cos=Math.abs(D/u),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const E=T.target.getAbsolutePosition(),C=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:C.x-E.x,y:C.y-E.y},k++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(I=>{I._fire("transformstart",{evt:T.evt,target:I})})}_handleMouseMove(T){let R,D,V;const u=this.findOne("."+this._movingAnchorName),E=u.getStage();E.setPointersPositions(T);const C=E.getPointerPosition();let I={x:C.x-this._anchorDragOffset.x,y:C.y-this._anchorDragOffset.y};const G=u.getAbsolutePosition();this.anchorDragBoundFunc()&&(I=this.anchorDragBoundFunc()(G,I,T)),u.setAbsolutePosition(I);const z=u.getAbsolutePosition();if(G.x===z.x&&G.y===z.y)return;if(this._movingAnchorName==="rotater"){const te=this._getNodeRect();R=u.x()-te.width/2,D=-u.y()+te.height/2;let re=Math.atan2(-D,R)+Math.PI/2;te.height<0&&(re-=Math.PI);const ce=o.Konva.getAngle(this.rotation())+re,pe=o.Konva.getAngle(this.rotationSnapTolerance()),me=S(this.rotationSnaps(),ce,pe)-te.rotation,We=a(te,me);this._fitNodesInto(We,T);return}const j=this.shiftBehavior();let q;j==="inverted"?q=this.keepRatio()&&!T.shiftKey:j==="none"?q=this.keepRatio():q=this.keepRatio()||T.shiftKey;var se=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(q){var J=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(J.x-u.x(),2)+Math.pow(J.y-u.y(),2));var ee=this.findOne(".top-left").x()>J.x?-1:1,Z=this.findOne(".top-left").y()>J.y?-1:1;R=V*this.cos*ee,D=V*this.sin*Z,this.findOne(".top-left").x(J.x-R),this.findOne(".top-left").y(J.y-D)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(u.y());else if(this._movingAnchorName==="top-right"){if(q){var J=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(u.x()-J.x,2)+Math.pow(J.y-u.y(),2));var ee=this.findOne(".top-right").x()<J.x?-1:1,Z=this.findOne(".top-right").y()>J.y?-1:1;R=V*this.cos*ee,D=V*this.sin*Z,this.findOne(".top-right").x(J.x+R),this.findOne(".top-right").y(J.y-D)}var $=u.position();this.findOne(".top-left").y($.y),this.findOne(".bottom-right").x($.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(u.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(u.x());else if(this._movingAnchorName==="bottom-left"){if(q){var J=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(J.x-u.x(),2)+Math.pow(u.y()-J.y,2));var ee=J.x<u.x()?-1:1,Z=u.y()<J.y?-1:1;R=V*this.cos*ee,D=V*this.sin*Z,u.x(J.x-R),u.y(J.y+D)}$=u.position(),this.findOne(".top-left").x($.x),this.findOne(".bottom-right").y($.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(u.y());else if(this._movingAnchorName==="bottom-right"){if(q){var J=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(u.x()-J.x,2)+Math.pow(u.y()-J.y,2));var ee=this.findOne(".bottom-right").x()<J.x?-1:1,Z=this.findOne(".bottom-right").y()<J.y?-1:1;R=V*this.cos*ee,D=V*this.sin*Z,this.findOne(".bottom-right").x(J.x+R),this.findOne(".bottom-right").y(J.y+D)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var se=this.centeredScaling()||T.altKey;if(se){const te=this.findOne(".top-left"),re=this.findOne(".bottom-right"),ie=te.x(),ce=te.y(),pe=this.getWidth()-re.x(),Ee=this.getHeight()-re.y();re.move({x:-ie,y:-ce}),te.move({x:pe,y:Ee})}const ae=this.findOne(".top-left").getAbsolutePosition();R=ae.x,D=ae.y;const U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:R,y:D,width:U,height:X,rotation:o.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var R;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const D=this.getNode();k--,this._fire("transformend",{evt:T,target:D}),(R=this.getLayer())===null||R===void 0||R.batchDraw(),D&&this._nodes.forEach(V=>{var u;V._fire("transformend",{evt:T,target:V}),(u=V.getLayer())===null||u===void 0||u.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,R){const D=this._getNodeRect(),V=1;if(s.Util._inRange(T.width,-this.padding()*2-V,V)){this.update();return}if(s.Util._inRange(T.height,-this.padding()*2-V,V)){this.update();return}const u=new s.Transform;if(u.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const q=u.point({x:-this.padding()*2,y:0});T.x+=q.x,T.y+=q.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const q=u.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const q=u.point({x:0,y:-this.padding()*2});T.x+=q.x,T.y+=q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const q=u.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const q=this.boundBoxFunc()(D,T);q?T=q:s.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const E=1e7,C=new s.Transform;C.translate(D.x,D.y),C.rotate(D.rotation),C.scale(D.width/E,D.height/E);const I=new s.Transform,G=T.width/E,z=T.height/E;this.flipEnabled()===!1?(I.translate(T.x,T.y),I.rotate(T.rotation),I.translate(T.width<0?T.width:0,T.height<0?T.height:0),I.scale(Math.abs(G),Math.abs(z))):(I.translate(T.x,T.y),I.rotate(T.rotation),I.scale(G,z));const j=I.multiply(C.invert());this._nodes.forEach(q=>{var J;const ee=q.getParent().getAbsoluteTransform(),Z=q.getTransform().copy();Z.translate(q.offsetX(),q.offsetY());const $=new s.Transform;$.multiply(ee.copy().invert()).multiply(j).multiply(ee).multiply(Z);const se=$.decompose();q.setAttrs(se),(J=q.getLayer())===null||J===void 0||J.batchDraw()}),this.rotation(s.Util._getRotation(T.rotation)),this._nodes.forEach(q=>{this._fire("transform",{evt:R,target:q}),q._fire("transform",{evt:R,target:q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,R){this.findOne(T).setAttrs(R)}update(){var T;const R=this._getNodeRect();this.rotation(s.Util._getRotation(R.rotation));const D=R.width,V=R.height,u=this.enabledAnchors(),E=this.resizeEnabled(),C=this.padding(),I=this.anchorSize(),G=this.find("._anchor");G.forEach(j=>{j.setAttrs({width:I,height:I,offsetX:I/2,offsetY:I/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:I/2+C,offsetY:I/2+C,visible:E&&u.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:D/2,y:0,offsetY:I/2+C,visible:E&&u.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:D,y:0,offsetX:I/2-C,offsetY:I/2+C,visible:E&&u.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:I/2+C,visible:E&&u.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:D,y:V/2,offsetX:I/2-C,visible:E&&u.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:I/2+C,offsetY:I/2-C,visible:E&&u.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:D/2,y:V,offsetY:I/2-C,visible:E&&u.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:D,y:V,offsetX:I/2-C,offsetY:I/2-C,visible:E&&u.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:D/2,y:-this.rotateAnchorOffset()*s.Util._sign(V)-C,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:D,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const z=this.anchorStyleFunc();z&&G.forEach(j=>{z(j)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),_.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return L.Node.prototype.toObject.call(this)}clone(T){return L.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};mr.Transformer=N,N.isTransforming=()=>k>0;function B(F){return F instanceof Array||s.Util.warn("enabledAnchors value should be an array"),F instanceof Array&&F.forEach(function(T){x.indexOf(T)===-1&&s.Util.warn("Unknown anchor name: "+T+". Available names are: "+x.join(", "))}),F||[]}return N.prototype.className="Transformer",(0,f._registerNode)(N),p.Factory.addGetterSetter(N,"enabledAnchors",x,B),p.Factory.addGetterSetter(N,"flipEnabled",!0,(0,d.getBooleanValidator)()),p.Factory.addGetterSetter(N,"resizeEnabled",!0),p.Factory.addGetterSetter(N,"anchorSize",10,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"rotateEnabled",!0),p.Factory.addGetterSetter(N,"rotateLineVisible",!0),p.Factory.addGetterSetter(N,"rotationSnaps",[]),p.Factory.addGetterSetter(N,"rotateAnchorOffset",50,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"rotateAnchorCursor","crosshair"),p.Factory.addGetterSetter(N,"rotationSnapTolerance",5,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"borderEnabled",!0),p.Factory.addGetterSetter(N,"anchorStroke","rgb(0, 161, 255)"),p.Factory.addGetterSetter(N,"anchorStrokeWidth",1,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"anchorFill","white"),p.Factory.addGetterSetter(N,"anchorCornerRadius",0,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"borderStroke","rgb(0, 161, 255)"),p.Factory.addGetterSetter(N,"borderStrokeWidth",1,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"borderDash"),p.Factory.addGetterSetter(N,"keepRatio",!0),p.Factory.addGetterSetter(N,"shiftBehavior","default"),p.Factory.addGetterSetter(N,"centeredScaling",!1),p.Factory.addGetterSetter(N,"ignoreStroke",!1),p.Factory.addGetterSetter(N,"padding",0,(0,d.getNumberValidator)()),p.Factory.addGetterSetter(N,"nodes"),p.Factory.addGetterSetter(N,"node"),p.Factory.addGetterSetter(N,"boundBoxFunc"),p.Factory.addGetterSetter(N,"anchorDragBoundFunc"),p.Factory.addGetterSetter(N,"anchorStyleFunc"),p.Factory.addGetterSetter(N,"shouldOverdrawWholeArea",!1),p.Factory.addGetterSetter(N,"useSingleNodeRotation",!0),p.Factory.backCompat(N,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),mr}var vr={},Oo;function Ih(){if(Oo)return vr;Oo=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.Wedge=void 0;const s=Se(),p=qe(),L=ye(),O=Ce(),M=ye();let _=class extends p.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.radius(),0,L.Konva.getAngle(this.angle()),this.clockwise()),d.lineTo(0,0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return vr.Wedge=_,_.prototype.className="Wedge",_.prototype._centroid=!0,_.prototype._attrsAffectingSize=["radius"],(0,M._registerNode)(_),s.Factory.addGetterSetter(_,"radius",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(_,"angle",0,(0,O.getNumberValidator)()),s.Factory.addGetterSetter(_,"clockwise",!1),s.Factory.backCompat(_,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),vr}var yr={},Do;function Gh(){if(Do)return yr;Do=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.Blur=void 0;const s=Se(),p=Ge(),L=Ce();function O(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const M=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(f,m){const v=f.data,P=f.width,w=f.height;let g,c,y,x,A,l,a,S,k,N,B,F,T,R,D,V,u,E,C,I,G,z,j,q;const J=m+m+1,ee=P-1,Z=w-1,$=m+1,se=$*($+1)/2,ae=new O,U=M[m],X=_[m];let te=null,re=ae,ie=null,ce=null;for(y=1;y<J;y++)re=re.next=new O,y===$&&(te=re);for(re.next=ae,a=l=0,c=0;c<w;c++){for(V=u=E=C=S=k=N=B=0,F=$*(I=v[l]),T=$*(G=v[l+1]),R=$*(z=v[l+2]),D=$*(j=v[l+3]),S+=se*I,k+=se*G,N+=se*z,B+=se*j,re=ae,y=0;y<$;y++)re.r=I,re.g=G,re.b=z,re.a=j,re=re.next;for(y=1;y<$;y++)x=l+((ee<y?ee:y)<<2),S+=(re.r=I=v[x])*(q=$-y),k+=(re.g=G=v[x+1])*q,N+=(re.b=z=v[x+2])*q,B+=(re.a=j=v[x+3])*q,V+=I,u+=G,E+=z,C+=j,re=re.next;for(ie=ae,ce=te,g=0;g<P;g++)v[l+3]=j=B*U>>X,j!==0?(j=255/j,v[l]=(S*U>>X)*j,v[l+1]=(k*U>>X)*j,v[l+2]=(N*U>>X)*j):v[l]=v[l+1]=v[l+2]=0,S-=F,k-=T,N-=R,B-=D,F-=ie.r,T-=ie.g,R-=ie.b,D-=ie.a,x=a+((x=g+m+1)<ee?x:ee)<<2,V+=ie.r=v[x],u+=ie.g=v[x+1],E+=ie.b=v[x+2],C+=ie.a=v[x+3],S+=V,k+=u,N+=E,B+=C,ie=ie.next,F+=I=ce.r,T+=G=ce.g,R+=z=ce.b,D+=j=ce.a,V-=I,u-=G,E-=z,C-=j,ce=ce.next,l+=4;a+=P}for(g=0;g<P;g++){for(u=E=C=V=k=N=B=S=0,l=g<<2,F=$*(I=v[l]),T=$*(G=v[l+1]),R=$*(z=v[l+2]),D=$*(j=v[l+3]),S+=se*I,k+=se*G,N+=se*z,B+=se*j,re=ae,y=0;y<$;y++)re.r=I,re.g=G,re.b=z,re.a=j,re=re.next;for(A=P,y=1;y<=m;y++)l=A+g<<2,S+=(re.r=I=v[l])*(q=$-y),k+=(re.g=G=v[l+1])*q,N+=(re.b=z=v[l+2])*q,B+=(re.a=j=v[l+3])*q,V+=I,u+=G,E+=z,C+=j,re=re.next,y<Z&&(A+=P);for(l=g,ie=ae,ce=te,c=0;c<w;c++)x=l<<2,v[x+3]=j=B*U>>X,j>0?(j=255/j,v[x]=(S*U>>X)*j,v[x+1]=(k*U>>X)*j,v[x+2]=(N*U>>X)*j):v[x]=v[x+1]=v[x+2]=0,S-=F,k-=T,N-=R,B-=D,F-=ie.r,T-=ie.g,R-=ie.b,D-=ie.a,x=g+((x=c+$)<Z?x:Z)*P<<2,S+=V+=ie.r=v[x],k+=u+=ie.g=v[x+1],N+=E+=ie.b=v[x+2],B+=C+=ie.a=v[x+3],ie=ie.next,F+=I=ce.r,T+=G=ce.g,R+=z=ce.b,D+=j=ce.a,V-=I,u-=G,E-=z,C-=j,ce=ce.next,l+=P}}const d=function(m){const v=Math.round(this.blurRadius());v>0&&o(m,v)};return yr.Blur=d,s.Factory.addGetterSetter(p.Node,"blurRadius",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),yr}var _r={},Io;function Uh(){if(Io)return _r;Io=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Brighten=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=this.brightness()*255,o=M.data,d=o.length;for(let f=0;f<d;f+=4)o[f]+=_,o[f+1]+=_,o[f+2]+=_};return _r.Brighten=O,s.Factory.addGetterSetter(p.Node,"brightness",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),_r}var Sr={},Go;function zh(){if(Go)return Sr;Go=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Contrast=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=Math.pow((this.contrast()+100)/100,2),o=M.data,d=o.length;let f=150,m=150,v=150;for(let P=0;P<d;P+=4)f=o[P],m=o[P+1],v=o[P+2],f/=255,f-=.5,f*=_,f+=.5,f*=255,m/=255,m-=.5,m*=_,m+=.5,m*=255,v/=255,v-=.5,v*=_,v+=.5,v*=255,f=f<0?0:f>255?255:f,m=m<0?0:m>255?255:m,v=v<0?0:v>255?255:v,o[P]=f,o[P+1]=m,o[P+2]=v};return Sr.Contrast=O,s.Factory.addGetterSetter(p.Node,"contrast",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),Sr}var Cr={},Uo;function Bh(){if(Uo)return Cr;Uo=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Emboss=void 0;const s=Se(),p=Ge(),L=Ie(),O=Ce(),M=function(_){const o=this.embossStrength()*10,d=this.embossWhiteLevel()*255,f=this.embossDirection(),m=this.embossBlend(),v=_.data,P=_.width,w=_.height,g=P*4;let c=0,y=0,x=w;switch(f){case"top-left":c=-1,y=-1;break;case"top":c=-1,y=0;break;case"top-right":c=-1,y=1;break;case"right":c=0,y=1;break;case"bottom-right":c=1,y=1;break;case"bottom":c=1,y=0;break;case"bottom-left":c=1,y=-1;break;case"left":c=0,y=-1;break;default:L.Util.error("Unknown emboss direction: "+f)}do{const A=(x-1)*g;let l=c;x+l<1&&(l=0),x+l>w&&(l=0);const a=(x-1+l)*P*4;let S=P;do{const k=A+(S-1)*4;let N=y;S+N<1&&(N=0),S+N>P&&(N=0);const B=a+(S-1+N)*4,F=v[k]-v[B],T=v[k+1]-v[B+1],R=v[k+2]-v[B+2];let D=F;const V=D>0?D:-D,u=T>0?T:-T,E=R>0?R:-R;if(u>V&&(D=T),E>V&&(D=R),D*=o,m){const C=v[k]+D,I=v[k+1]+D,G=v[k+2]+D;v[k]=C>255?255:C<0?0:C,v[k+1]=I>255?255:I<0?0:I,v[k+2]=G>255?255:G<0?0:G}else{let C=d-D;C<0?C=0:C>255&&(C=255),v[k]=v[k+1]=v[k+2]=C}}while(--S)}while(--x)};return Cr.Emboss=M,s.Factory.addGetterSetter(p.Node,"embossStrength",.5,(0,O.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"embossWhiteLevel",.5,(0,O.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"embossDirection","top-left",void 0,s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"embossBlend",!1,void 0,s.Factory.afterSetFilter),Cr}var wr={},zo;function Vh(){if(zo)return wr;zo=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.Enhance=void 0;const s=Se(),p=Ge(),L=Ce();function O(_,o,d,f,m){const v=d-o,P=m-f;if(v===0)return f+P/2;if(P===0)return f;let w=(_-o)/v;return w=P*w+f,w}const M=function(_){const o=_.data,d=o.length;let f=o[0],m=f,v,P=o[1],w=P,g,c=o[2],y=c,x;const A=this.enhance();if(A===0)return;for(let D=0;D<d;D+=4)v=o[D+0],v<f?f=v:v>m&&(m=v),g=o[D+1],g<P?P=g:g>w&&(w=g),x=o[D+2],x<c?c=x:x>y&&(y=x);m===f&&(m=255,f=0),w===P&&(w=255,P=0),y===c&&(y=255,c=0);let l,a,S,k,N,B,F,T,R;A>0?(a=m+A*(255-m),S=f-A*(f-0),N=w+A*(255-w),B=P-A*(P-0),T=y+A*(255-y),R=c-A*(c-0)):(l=(m+f)*.5,a=m+A*(m-l),S=f+A*(f-l),k=(w+P)*.5,N=w+A*(w-k),B=P+A*(P-k),F=(y+c)*.5,T=y+A*(y-F),R=c+A*(c-F));for(let D=0;D<d;D+=4)o[D+0]=O(o[D+0],f,m,S,a),o[D+1]=O(o[D+1],P,w,B,N),o[D+2]=O(o[D+2],c,y,R,T)};return wr.Enhance=M,s.Factory.addGetterSetter(p.Node,"enhance",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),wr}var xr={},Bo;function Hh(){if(Bo)return xr;Bo=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.Grayscale=void 0;const s=function(p){const L=p.data,O=L.length;for(let M=0;M<O;M+=4){const _=.34*L[M]+.5*L[M+1]+.16*L[M+2];L[M]=_,L[M+1]=_,L[M+2]=_}};return xr.Grayscale=s,xr}var Pr={},Vo;function qh(){if(Vo)return Pr;Vo=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.HSL=void 0;const s=Se(),p=Ge(),L=Ce();s.Factory.addGetterSetter(p.Node,"hue",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"saturation",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"luminance",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter);const O=function(M){const _=M.data,o=_.length,d=1,f=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,v=this.luminance()*127,P=d*f*Math.cos(m*Math.PI/180),w=d*f*Math.sin(m*Math.PI/180),g=.299*d+.701*P+.167*w,c=.587*d-.587*P+.33*w,y=.114*d-.114*P-.497*w,x=.299*d-.299*P-.328*w,A=.587*d+.413*P+.035*w,l=.114*d-.114*P+.293*w,a=.299*d-.3*P+1.25*w,S=.587*d-.586*P-1.05*w,k=.114*d+.886*P-.2*w;let N,B,F,T;for(let R=0;R<o;R+=4)N=_[R+0],B=_[R+1],F=_[R+2],T=_[R+3],_[R+0]=g*N+c*B+y*F+v,_[R+1]=x*N+A*B+l*F+v,_[R+2]=a*N+S*B+k*F+v,_[R+3]=T};return Pr.HSL=O,Pr}var Er={},Ho;function Wh(){if(Ho)return Er;Ho=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.HSV=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=M.data,o=_.length,d=Math.pow(2,this.value()),f=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,v=d*f*Math.cos(m*Math.PI/180),P=d*f*Math.sin(m*Math.PI/180),w=.299*d+.701*v+.167*P,g=.587*d-.587*v+.33*P,c=.114*d-.114*v-.497*P,y=.299*d-.299*v-.328*P,x=.587*d+.413*v+.035*P,A=.114*d-.114*v+.293*P,l=.299*d-.3*v+1.25*P,a=.587*d-.586*v-1.05*P,S=.114*d+.886*v-.2*P;let k,N,B,F;for(let T=0;T<o;T+=4)k=_[T+0],N=_[T+1],B=_[T+2],F=_[T+3],_[T+0]=w*k+g*N+c*B,_[T+1]=y*k+x*N+A*B,_[T+2]=l*k+a*N+S*B,_[T+3]=F};return Er.HSV=O,s.Factory.addGetterSetter(p.Node,"hue",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"saturation",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"value",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),Er}var kr={},qo;function jh(){if(qo)return kr;qo=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.Invert=void 0;const s=function(p){const L=p.data,O=L.length;for(let M=0;M<O;M+=4)L[M]=255-L[M],L[M+1]=255-L[M+1],L[M+2]=255-L[M+2]};return kr.Invert=s,kr}var Rr={},Wo;function Kh(){if(Wo)return Rr;Wo=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Kaleidoscope=void 0;const s=Se(),p=Ge(),L=Ie(),O=Ce(),M=function(d,f,m){const v=d.data,P=f.data,w=d.width,g=d.height,c=m.polarCenterX||w/2,y=m.polarCenterY||g/2;let x=Math.sqrt(c*c+y*y),A=w-c,l=g-y;const a=Math.sqrt(A*A+l*l);x=a>x?a:x;const S=g,k=w,N=360/k*Math.PI/180;for(let B=0;B<k;B+=1){const F=Math.sin(B*N),T=Math.cos(B*N);for(let R=0;R<S;R+=1){A=Math.floor(c+x*R/S*T),l=Math.floor(y+x*R/S*F);let D=(l*w+A)*4;const V=v[D+0],u=v[D+1],E=v[D+2],C=v[D+3];D=(B+R*w)*4,P[D+0]=V,P[D+1]=u,P[D+2]=E,P[D+3]=C}}},_=function(d,f,m){const v=d.data,P=f.data,w=d.width,g=d.height,c=m.polarCenterX||w/2,y=m.polarCenterY||g/2;let x=Math.sqrt(c*c+y*y),A=w-c,l=g-y;const a=Math.sqrt(A*A+l*l);x=a>x?a:x;const S=g,k=w,N=0;let B,F;for(A=0;A<w;A+=1)for(l=0;l<g;l+=1){const T=A-c,R=l-y,D=Math.sqrt(T*T+R*R)*S/x;let V=(Math.atan2(R,T)*180/Math.PI+360+N)%360;V=V*k/360,B=Math.floor(V),F=Math.floor(D);let u=(F*w+B)*4;const E=v[u+0],C=v[u+1],I=v[u+2],G=v[u+3];u=(l*w+A)*4,P[u+0]=E,P[u+1]=C,P[u+2]=I,P[u+3]=G}},o=function(d){const f=d.width,m=d.height;let v,P,w,g,c,y,x,A,l,a,S=Math.round(this.kaleidoscopePower());const k=Math.round(this.kaleidoscopeAngle()),N=Math.floor(f*(k%360)/360);if(S<1)return;const B=L.Util.createCanvasElement();B.width=f,B.height=m;const F=B.getContext("2d").getImageData(0,0,f,m);L.Util.releaseCanvas(B),M(d,F,{polarCenterX:f/2,polarCenterY:m/2});let T=f/Math.pow(2,S);for(;T<=8;)T=T*2,S-=1;T=Math.ceil(T);let R=T,D=0,V=R,u=1;for(N+T>f&&(D=R,V=0,u=-1),P=0;P<m;P+=1)for(v=D;v!==V;v+=u)w=Math.round(v+N)%f,l=(f*P+w)*4,c=F.data[l+0],y=F.data[l+1],x=F.data[l+2],A=F.data[l+3],a=(f*P+v)*4,F.data[a+0]=c,F.data[a+1]=y,F.data[a+2]=x,F.data[a+3]=A;for(P=0;P<m;P+=1)for(R=Math.floor(T),g=0;g<S;g+=1){for(v=0;v<R+1;v+=1)l=(f*P+v)*4,c=F.data[l+0],y=F.data[l+1],x=F.data[l+2],A=F.data[l+3],a=(f*P+R*2-v-1)*4,F.data[a+0]=c,F.data[a+1]=y,F.data[a+2]=x,F.data[a+3]=A;R*=2}_(F,d,{})};return Rr.Kaleidoscope=o,s.Factory.addGetterSetter(p.Node,"kaleidoscopePower",2,(0,O.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"kaleidoscopeAngle",0,(0,O.getNumberValidator)(),s.Factory.afterSetFilter),Rr}var Tr={},jo;function Yh(){if(jo)return Tr;jo=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Mask=void 0;const s=Se(),p=Ge(),L=Ce();function O(w,g,c){let y=(c*w.width+g)*4;const x=[];return x.push(w.data[y++],w.data[y++],w.data[y++],w.data[y++]),x}function M(w,g){return Math.sqrt(Math.pow(w[0]-g[0],2)+Math.pow(w[1]-g[1],2)+Math.pow(w[2]-g[2],2))}function _(w){const g=[0,0,0];for(let c=0;c<w.length;c++)g[0]+=w[c][0],g[1]+=w[c][1],g[2]+=w[c][2];return g[0]/=w.length,g[1]/=w.length,g[2]/=w.length,g}function o(w,g){const c=O(w,0,0),y=O(w,w.width-1,0),x=O(w,0,w.height-1),A=O(w,w.width-1,w.height-1),l=g||10;if(M(c,y)<l&&M(y,A)<l&&M(A,x)<l&&M(x,c)<l){const a=_([y,c,A,x]),S=[];for(let k=0;k<w.width*w.height;k++){const N=M(a,[w.data[k*4],w.data[k*4+1],w.data[k*4+2]]);S[k]=N<l?0:255}return S}}function d(w,g){for(let c=0;c<w.width*w.height;c++)w.data[4*c+3]=g[c]}function f(w,g,c){const y=[1,1,1,1,0,1,1,1,1],x=Math.round(Math.sqrt(y.length)),A=Math.floor(x/2),l=[];for(let a=0;a<c;a++)for(let S=0;S<g;S++){const k=a*g+S;let N=0;for(let B=0;B<x;B++)for(let F=0;F<x;F++){const T=a+B-A,R=S+F-A;if(T>=0&&T<c&&R>=0&&R<g){const D=T*g+R,V=y[B*x+F];N+=w[D]*V}}l[k]=N===255*8?255:0}return l}function m(w,g,c){const y=[1,1,1,1,1,1,1,1,1],x=Math.round(Math.sqrt(y.length)),A=Math.floor(x/2),l=[];for(let a=0;a<c;a++)for(let S=0;S<g;S++){const k=a*g+S;let N=0;for(let B=0;B<x;B++)for(let F=0;F<x;F++){const T=a+B-A,R=S+F-A;if(T>=0&&T<c&&R>=0&&R<g){const D=T*g+R,V=y[B*x+F];N+=w[D]*V}}l[k]=N>=255*4?255:0}return l}function v(w,g,c){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],x=Math.round(Math.sqrt(y.length)),A=Math.floor(x/2),l=[];for(let a=0;a<c;a++)for(let S=0;S<g;S++){const k=a*g+S;let N=0;for(let B=0;B<x;B++)for(let F=0;F<x;F++){const T=a+B-A,R=S+F-A;if(T>=0&&T<c&&R>=0&&R<g){const D=T*g+R,V=y[B*x+F];N+=w[D]*V}}l[k]=N}return l}const P=function(w){const g=this.threshold();let c=o(w,g);return c&&(c=f(c,w.width,w.height),c=m(c,w.width,w.height),c=v(c,w.width,w.height),d(w,c)),w};return Tr.Mask=P,s.Factory.addGetterSetter(p.Node,"threshold",0,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),Tr}var Nr={},Ko;function Xh(){if(Ko)return Nr;Ko=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Noise=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=this.noise()*255,o=M.data,d=o.length,f=_/2;for(let m=0;m<d;m+=4)o[m+0]+=f-2*f*Math.random(),o[m+1]+=f-2*f*Math.random(),o[m+2]+=f-2*f*Math.random()};return Nr.Noise=O,s.Factory.addGetterSetter(p.Node,"noise",.2,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),Nr}var Fr={},Yo;function Qh(){if(Yo)return Fr;Yo=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Pixelate=void 0;const s=Se(),p=Ie(),L=Ge(),O=Ce(),M=function(_){let o=Math.ceil(this.pixelSize()),d=_.width,f=_.height,m,v,P,w,g,c,y,x=Math.ceil(d/o),A=Math.ceil(f/o),l,a,S,k,N,B,F,T=_.data;if(o<=0){p.Util.error("pixelSize value can not be <= 0");return}for(N=0;N<x;N+=1)for(B=0;B<A;B+=1){for(w=0,g=0,c=0,y=0,l=N*o,a=l+o,S=B*o,k=S+o,F=0,m=l;m<a;m+=1)if(!(m>=d))for(v=S;v<k;v+=1)v>=f||(P=(d*v+m)*4,w+=T[P+0],g+=T[P+1],c+=T[P+2],y+=T[P+3],F+=1);for(w=w/F,g=g/F,c=c/F,y=y/F,m=l;m<a;m+=1)if(!(m>=d))for(v=S;v<k;v+=1)v>=f||(P=(d*v+m)*4,T[P+0]=w,T[P+1]=g,T[P+2]=c,T[P+3]=y)}};return Fr.Pixelate=M,s.Factory.addGetterSetter(L.Node,"pixelSize",8,(0,O.getNumberValidator)(),s.Factory.afterSetFilter),Fr}var Ar={},Xo;function Jh(){if(Xo)return Ar;Xo=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Posterize=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=Math.round(this.levels()*254)+1,o=M.data,d=o.length,f=255/_;for(let m=0;m<d;m+=1)o[m]=Math.floor(o[m]/f)*f};return Ar.Posterize=O,s.Factory.addGetterSetter(p.Node,"levels",.5,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),Ar}var Mr={},Qo;function Zh(){if(Qo)return Mr;Qo=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.RGB=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=M.data,o=_.length,d=this.red(),f=this.green(),m=this.blue();for(let v=0;v<o;v+=4){const P=(.34*_[v]+.5*_[v+1]+.16*_[v+2])/255;_[v]=P*d,_[v+1]=P*f,_[v+2]=P*m,_[v+3]=_[v+3]}};return Mr.RGB=O,s.Factory.addGetterSetter(p.Node,"red",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(p.Node,"green",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(p.Node,"blue",0,L.RGBComponent,s.Factory.afterSetFilter),Mr}var br={},Jo;function $h(){if(Jo)return br;Jo=1,Object.defineProperty(br,"__esModule",{value:!0}),br.RGBA=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=M.data,o=_.length,d=this.red(),f=this.green(),m=this.blue(),v=this.alpha();for(let P=0;P<o;P+=4){const w=1-v;_[P]=d*v+_[P]*w,_[P+1]=f*v+_[P+1]*w,_[P+2]=m*v+_[P+2]*w}};return br.RGBA=O,s.Factory.addGetterSetter(p.Node,"red",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(p.Node,"green",0,function(M){return this._filterUpToDate=!1,M>255?255:M<0?0:Math.round(M)}),s.Factory.addGetterSetter(p.Node,"blue",0,L.RGBComponent,s.Factory.afterSetFilter),s.Factory.addGetterSetter(p.Node,"alpha",1,function(M){return this._filterUpToDate=!1,M>1?1:M<0?0:M}),br}var Lr={},Zo;function ec(){if(Zo)return Lr;Zo=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Sepia=void 0;const s=function(p){const L=p.data,O=L.length;for(let M=0;M<O;M+=4){const _=L[M+0],o=L[M+1],d=L[M+2];L[M+0]=Math.min(255,_*.393+o*.769+d*.189),L[M+1]=Math.min(255,_*.349+o*.686+d*.168),L[M+2]=Math.min(255,_*.272+o*.534+d*.131)}};return Lr.Sepia=s,Lr}var Or={},$o;function tc(){if($o)return Or;$o=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Solarize=void 0;const s=function(p){const L=p.data,O=p.width,M=p.height,_=O*4;let o=M;do{const d=(o-1)*_;let f=O;do{const m=d+(f-1)*4;let v=L[m],P=L[m+1],w=L[m+2];v>127&&(v=255-v),P>127&&(P=255-P),w>127&&(w=255-w),L[m]=v,L[m+1]=P,L[m+2]=w}while(--f)}while(--o)};return Or.Solarize=s,Or}var Dr={},el;function nc(){if(el)return Dr;el=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Threshold=void 0;const s=Se(),p=Ge(),L=Ce(),O=function(M){const _=this.threshold()*255,o=M.data,d=o.length;for(let f=0;f<d;f+=1)o[f]=o[f]<_?0:255};return Dr.Threshold=O,s.Factory.addGetterSetter(p.Node,"threshold",.5,(0,L.getNumberValidator)(),s.Factory.afterSetFilter),Dr}var tl;function rc(){if(tl)return Qn;tl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.Konva=void 0;const s=ms(),p=Ph(),L=kh(),O=Rh(),M=Th(),_=Nh(),o=Fh(),d=vo(),f=ys(),m=ko(),v=Ah(),P=Mh(),w=bh(),g=Lh(),c=Mo(),y=Oh(),x=Dh(),A=Ih(),l=Gh(),a=Uh(),S=zh(),k=Bh(),N=Vh(),B=Hh(),F=qh(),T=Wh(),R=jh(),D=Kh(),V=Yh(),u=Xh(),E=Qh(),C=Jh(),I=Zh(),G=$h(),z=ec(),j=tc(),q=nc();return Qn.Konva=s.Konva.Util._assign(s.Konva,{Arc:p.Arc,Arrow:L.Arrow,Circle:O.Circle,Ellipse:M.Ellipse,Image:_.Image,Label:o.Label,Tag:o.Tag,Line:d.Line,Path:f.Path,Rect:m.Rect,RegularPolygon:v.RegularPolygon,Ring:P.Ring,Sprite:w.Sprite,Star:g.Star,Text:c.Text,TextPath:y.TextPath,Transformer:x.Transformer,Wedge:A.Wedge,Filters:{Blur:l.Blur,Brighten:a.Brighten,Contrast:S.Contrast,Emboss:k.Emboss,Enhance:N.Enhance,Grayscale:B.Grayscale,HSL:F.HSL,HSV:T.HSV,Invert:R.Invert,Kaleidoscope:D.Kaleidoscope,Mask:V.Mask,Noise:u.Noise,Pixelate:E.Pixelate,Posterize:C.Posterize,RGB:I.RGB,RGBA:G.RGBA,Sepia:z.Sepia,Solarize:j.Solarize,Threshold:q.Threshold}}),Qn}var ic=ai.exports,nl;function sc(){if(nl)return ai.exports;nl=1,Object.defineProperty(ic,"__esModule",{value:!0});const s=rc();return ai.exports=s.Konva,ai.exports}sc();var ui={exports:{}},rl;function ac(){return rl||(rl=1,function(s,p){Object.defineProperty(p,"__esModule",{value:!0}),p.Konva=void 0;var L=ms();Object.defineProperty(p,"Konva",{enumerable:!0,get:function(){return L.Konva}});const O=ms();s.exports=O.Konva}(ui,ui.exports)),ui.exports}var oc=ac();const Ir=rs(oc);var _s={exports:{}},Ss={exports:{}},Cs={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var il;function lc(){return il||(il=1,function(s){function p(z,j){var q=z.length;z.push(j);e:for(;0<q;){var J=q-1>>>1,ee=z[J];if(0<M(ee,j))z[J]=j,z[q]=ee,q=J;else break e}}function L(z){return z.length===0?null:z[0]}function O(z){if(z.length===0)return null;var j=z[0],q=z.pop();if(q!==j){z[0]=q;e:for(var J=0,ee=z.length,Z=ee>>>1;J<Z;){var $=2*(J+1)-1,se=z[$],ae=$+1,U=z[ae];if(0>M(se,q))ae<ee&&0>M(U,se)?(z[J]=U,z[ae]=q,J=ae):(z[J]=se,z[$]=q,J=$);else if(ae<ee&&0>M(U,q))z[J]=U,z[ae]=q,J=ae;else break e}}return j}function M(z,j){var q=z.sortIndex-j.sortIndex;return q!==0?q:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;s.unstable_now=function(){return _.now()}}else{var o=Date,d=o.now();s.unstable_now=function(){return o.now()-d}}var f=[],m=[],v=1,P=null,w=3,g=!1,c=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function a(z){for(var j=L(m);j!==null;){if(j.callback===null)O(m);else if(j.startTime<=z)O(m),j.sortIndex=j.expirationTime,p(f,j);else break;j=L(m)}}function S(z){if(y=!1,a(z),!c)if(L(f)!==null)c=!0,I(k);else{var j=L(m);j!==null&&G(S,j.startTime-z)}}function k(z,j){c=!1,y&&(y=!1,A(F),F=-1),g=!0;var q=w;try{for(a(j),P=L(f);P!==null&&(!(P.expirationTime>j)||z&&!D());){var J=P.callback;if(typeof J=="function"){P.callback=null,w=P.priorityLevel;var ee=J(P.expirationTime<=j);j=s.unstable_now(),typeof ee=="function"?P.callback=ee:P===L(f)&&O(f),a(j)}else O(f);P=L(f)}if(P!==null)var Z=!0;else{var $=L(m);$!==null&&G(S,$.startTime-j),Z=!1}return Z}finally{P=null,w=q,g=!1}}var N=!1,B=null,F=-1,T=5,R=-1;function D(){return!(s.unstable_now()-R<T)}function V(){if(B!==null){var z=s.unstable_now();R=z;var j=!0;try{j=B(!0,z)}finally{j?u():(N=!1,B=null)}}else N=!1}var u;if(typeof l=="function")u=function(){l(V)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,C=E.port2;E.port1.onmessage=V,u=function(){C.postMessage(null)}}else u=function(){x(V,0)};function I(z){B=z,N||(N=!0,u())}function G(z,j){F=x(function(){z(s.unstable_now())},j)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_continueExecution=function(){c||g||(c=!0,I(k))},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return L(f)},s.unstable_next=function(z){switch(w){case 1:case 2:case 3:var j=3;break;default:j=w}var q=w;w=j;try{return z()}finally{w=q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=w;w=z;try{return j()}finally{w=q}},s.unstable_scheduleCallback=function(z,j,q){var J=s.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=q+ee,z={id:v++,callback:j,priorityLevel:z,startTime:q,expirationTime:ee,sortIndex:-1},q>J?(z.sortIndex=q,p(m,z),L(f)===null&&z===L(m)&&(y?(A(F),F=-1):y=!0,G(S,q-J))):(z.sortIndex=ee,p(f,z),c||g||(c=!0,I(k))),z},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(z){var j=w;return function(){var q=w;w=j;try{return z.apply(this,arguments)}finally{w=q}}}}(Cs)),Cs}var sl;function al(){return sl||(sl=1,Ss.exports=lc()),Ss.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws,ol;function uc(){return ol||(ol=1,ws=function(p){var L={},O=Be,M=al(),_=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),c=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),l=Symbol.for("react.memo"),a=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),k=Symbol.iterator;function N(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}function B(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case v:return"Fragment";case m:return"Portal";case w:return"Profiler";case P:return"StrictMode";case x:return"Suspense";case A:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case c:return(e.displayName||"Context")+".Consumer";case g:return(e._context.displayName||"Context")+".Provider";case y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case l:return t=e.displayName||null,t!==null?t:B(e.type)||"Memo";case a:t=e._payload,e=e._init;try{return B(e(t))}catch{}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function T(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function R(e){if(T(e)!==e)throw Error(o(188))}function D(e){var t=e.alternate;if(!t){if(t=T(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var h=i.alternate;if(h===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===h.child){for(h=i.child;h;){if(h===n)return R(i),e;if(h===r)return R(i),t;h=h.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=h;else{for(var b=!1,H=i.child;H;){if(H===n){b=!0,n=i,r=h;break}if(H===r){b=!0,r=i,n=h;break}H=H.sibling}if(!b){for(H=h.child;H;){if(H===n){b=!0,n=h,r=i;break}if(H===r){b=!0,r=h,n=i;break}H=H.sibling}if(!b)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function V(e){return e=D(e),e!==null?u(e):null}function u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=u(e);if(t!==null)return t;e=e.sibling}return null}function E(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=E(e);if(t!==null)return t}e=e.sibling}return null}var C=Array.isArray,I=p.getPublicInstance,G=p.getRootHostContext,z=p.getChildHostContext,j=p.prepareForCommit,q=p.resetAfterCommit,J=p.createInstance,ee=p.appendInitialChild,Z=p.finalizeInitialChildren,$=p.prepareUpdate,se=p.shouldSetTextContent,ae=p.createTextInstance,U=p.scheduleTimeout,X=p.cancelTimeout,te=p.noTimeout,re=p.isPrimaryRenderer,ie=p.supportsMutation,ce=p.supportsPersistence,pe=p.supportsHydration,Ee=p.getInstanceFromNode,me=p.preparePortalMount,We=p.getCurrentEventPriority,ke=p.detachDeletedInstance,Le=p.supportsMicrotasks,hn=p.scheduleMicrotask,je=p.supportsTestSelectors,wn=p.findFiberRoot,Ae=p.getBoundingRect,ut=p.getTextContent,$e=p.isHiddenSubtree,Ft=p.matchAccessibilityRole,et=p.setFocusIfFocusable,Gt=p.setupIntersectionObserver,At=p.appendChild,Jt=p.appendChildToContainer,Ut=p.commitTextUpdate,zt=p.commitMount,vt=p.commitUpdate,yt=p.insertBefore,_t=p.insertInContainerBefore,Ur=p.removeChild,Rs=p.removeChildFromContainer,kl=p.resetTextContent,vd=p.hideInstance,yd=p.hideTextInstance,_d=p.unhideInstance,Sd=p.unhideTextInstance,Cd=p.clearContainer,wd=p.cloneInstance,Rl=p.createContainerChildSet,Tl=p.appendChildToContainerChildSet,xd=p.finalizeContainerChildren,Ts=p.replaceContainerChildren,Nl=p.cloneHiddenInstance,Fl=p.cloneHiddenTextInstance,Pd=p.canHydrateInstance,Ed=p.canHydrateTextInstance,kd=p.canHydrateSuspenseInstance,Al=p.isSuspenseInstancePending,Ns=p.isSuspenseInstanceFallback,Rd=p.getSuspenseInstanceFallbackErrorDetails,Td=p.registerSuspenseInstanceRetry,ci=p.getNextHydratableSibling,Nd=p.getFirstHydratableChild,Fd=p.getFirstHydratableChildWithinContainer,Ad=p.getFirstHydratableChildWithinSuspenseInstance,Md=p.hydrateInstance,bd=p.hydrateTextInstance,Ld=p.hydrateSuspenseInstance,Od=p.getNextHydratableInstanceAfterSuspenseInstance,Dd=p.commitHydratedContainer,Id=p.commitHydratedSuspenseInstance,Gd=p.clearSuspenseBoundary,Ud=p.clearSuspenseBoundaryFromContainer,zd=p.shouldDeleteUnhydratedTailInstances,Bd=p.didNotMatchHydratedContainerTextInstance,Vd=p.didNotMatchHydratedTextInstance,Fs;function zr(e){if(Fs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fs=t&&t[1]||""}return`
`+Fs+e}var As=!1;function Ms(e,t){if(!e||As)return"";As=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(ne){var r=ne}Reflect.construct(e,[],t)}else{try{t.call()}catch(ne){r=ne}e.call(t.prototype)}else{try{throw Error()}catch(ne){r=ne}e()}}catch(ne){if(ne&&r&&typeof ne.stack=="string"){for(var i=ne.stack.split(`
`),h=r.stack.split(`
`),b=i.length-1,H=h.length-1;1<=b&&0<=H&&i[b]!==h[H];)H--;for(;1<=b&&0<=H;b--,H--)if(i[b]!==h[H]){if(b!==1||H!==1)do if(b--,H--,0>H||i[b]!==h[H]){var Y=`
`+i[b].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=b&&0<=H);break}}}finally{As=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zr(e):""}var Hd=Object.prototype.hasOwnProperty,bs=[],Ln=-1;function cn(e){return{current:e}}function Ne(e){0>Ln||(e.current=bs[Ln],bs[Ln]=null,Ln--)}function Te(e,t){Ln++,bs[Ln]=e.current,e.current=t}var dn={},tt=cn(dn),ht=cn(!1),xn=dn;function On(e,t){var n=e.type.contextTypes;if(!n)return dn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},h;for(h in n)i[h]=t[h];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ct(e){return e=e.childContextTypes,e!=null}function di(){Ne(ht),Ne(tt)}function Ml(e,t,n){if(tt.current!==dn)throw Error(o(168));Te(tt,t),Te(ht,n)}function bl(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(o(108,F(e)||"Unknown",i));return _({},n,r)}function fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dn,xn=tt.current,Te(tt,e),Te(ht,ht.current),!0}function Ll(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bl(e,t,xn),r.__reactInternalMemoizedMergedChildContext=e,Ne(ht),Ne(tt),Te(tt,e)):Ne(ht),Te(ht,n)}var Mt=Math.clz32?Math.clz32:jd,qd=Math.log,Wd=Math.LN2;function jd(e){return e>>>=0,e===0?32:31-(qd(e)/Wd|0)|0}var gi=64,pi=4194304;function Br(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,h=e.pingedLanes,b=n&268435455;if(b!==0){var H=b&~i;H!==0?r=Br(H):(h&=b,h!==0&&(r=Br(h)))}else b=n&~i,b!==0?r=Br(b):h!==0&&(r=Br(h));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,h=t&-t,i>=h||i===16&&(h&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mt(t),i=1<<n,r|=e[n],t&=~i;return r}function Kd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,h=e.pendingLanes;0<h;){var b=31-Mt(h),H=1<<b,Y=i[b];Y===-1?((H&n)===0||(H&r)!==0)&&(i[b]=Kd(H,t)):Y<=t&&(e.expiredLanes|=H),h&=~H}}function Ls(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ol(){var e=gi;return gi<<=1,(gi&4194240)===0&&(gi=64),e}function Os(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=n}function Xd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Mt(n),h=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~h}}function Ds(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var we=0;function Dl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Is=M.unstable_scheduleCallback,Il=M.unstable_cancelCallback,Qd=M.unstable_shouldYield,Jd=M.unstable_requestPaint,Ke=M.unstable_now,Gs=M.unstable_ImmediatePriority,Zd=M.unstable_UserBlockingPriority,Us=M.unstable_NormalPriority,$d=M.unstable_IdlePriority,vi=null,Bt=null;function e0(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(vi,e,void 0,(e.current.flags&128)===128)}catch{}}function t0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:t0,Zt=null,yi=!1,zs=!1;function Gl(e){Zt===null?Zt=[e]:Zt.push(e)}function n0(e){yi=!0,Gl(e)}function Vt(){if(!zs&&Zt!==null){zs=!0;var e=0,t=we;try{var n=Zt;for(we=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zt=null,yi=!1}catch(i){throw Zt!==null&&(Zt=Zt.slice(e+1)),Is(Gs,Vt),i}finally{we=t,zs=!1}}return null}var Dn=[],In=0,_i=null,Si=0,wt=[],xt=0,Pn=null,$t=1,en="";function En(e,t){Dn[In++]=Si,Dn[In++]=_i,_i=e,Si=t}function Ul(e,t,n){wt[xt++]=$t,wt[xt++]=en,wt[xt++]=Pn,Pn=e;var r=$t;e=en;var i=32-Mt(r)-1;r&=~(1<<i),n+=1;var h=32-Mt(t)+i;if(30<h){var b=i-i%5;h=(r&(1<<b)-1).toString(32),r>>=b,i-=b,$t=1<<32-Mt(t)+i|n<<i|r,en=h+e}else $t=1<<h|n<<i|r,en=e}function Bs(e){e.return!==null&&(En(e,1),Ul(e,1,0))}function Vs(e){for(;e===_i;)_i=Dn[--In],Dn[In]=null,Si=Dn[--In],Dn[In]=null;for(;e===Pn;)Pn=wt[--xt],wt[xt]=null,en=wt[--xt],wt[xt]=null,$t=wt[--xt],wt[xt]=null}var St=null,Pt=null,Me=!1,Hr=!1,Lt=null;function zl(e,t){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bl(e,t){switch(e.tag){case 5:return t=Pd(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,St=e,Pt=Nd(t),!0):!1;case 6:return t=Ed(t,e.pendingProps),t!==null?(e.stateNode=t,St=e,Pt=null,!0):!1;case 13:if(t=kd(t),t!==null){var n=Pn!==null?{id:$t,overflow:en}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,Pt=null,!0}return!1;default:return!1}}function Hs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qs(e){if(Me){var t=Pt;if(t){var n=t;if(!Bl(e,t)){if(Hs(e))throw Error(o(418));t=ci(n);var r=St;t&&Bl(e,t)?zl(r,n):(e.flags=e.flags&-4097|2,Me=!1,St=e)}}else{if(Hs(e))throw Error(o(418));e.flags=e.flags&-4097|2,Me=!1,St=e}}}function Vl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Ci(e){if(!pe||e!==St)return!1;if(!Me)return Vl(e),Me=!0,!1;if(e.tag!==3&&(e.tag!==5||zd(e.type)&&!se(e.type,e.memoizedProps))){var t=Pt;if(t){if(Hs(e))throw Hl(),Error(o(418));for(;t;)zl(e,t),t=ci(t)}}if(Vl(e),e.tag===13){if(!pe)throw Error(o(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Pt=Od(e)}else Pt=St?ci(e.stateNode):null;return!0}function Hl(){for(var e=Pt;e;)e=ci(e)}function Gn(){pe&&(Pt=St=null,Hr=Me=!1)}function Ws(e){Lt===null?Lt=[e]:Lt.push(e)}var r0=d.ReactCurrentBatchConfig;function wi(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hd.call(t,i)||!bt(e[i],t[i]))return!1}return!0}function i0(e){switch(e.tag){case 5:return zr(e.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 2:case 15:return e=Ms(e.type,!1),e;case 11:return e=Ms(e.type.render,!1),e;case 1:return e=Ms(e.type,!0),e;default:return""}}function qr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(b){var H=i.refs;b===null?delete H[h]:H[h]=b},t._stringRef=h,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xi(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ql(e){var t=e._init;return t(e._payload)}function Wl(e){function t(K,W){if(e){var Q=K.deletions;Q===null?(K.deletions=[W],K.flags|=16):Q.push(W)}}function n(K,W){if(!e)return null;for(;W!==null;)t(K,W),W=W.sibling;return null}function r(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function i(K,W){return K=_n(K,W),K.index=0,K.sibling=null,K}function h(K,W,Q){return K.index=Q,e?(Q=K.alternate,Q!==null?(Q=Q.index,Q<W?(K.flags|=2,W):Q):(K.flags|=2,W)):(K.flags|=1048576,W)}function b(K){return e&&K.alternate===null&&(K.flags|=2),K}function H(K,W,Q,le){return W===null||W.tag!==6?(W=za(Q,K.mode,le),W.return=K,W):(W=i(W,Q),W.return=K,W)}function Y(K,W,Q,le){var de=Q.type;return de===v?he(K,W,Q.props.children,le,Q.key):W!==null&&(W.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===a&&ql(de)===W.type)?(le=i(W,Q.props),le.ref=qr(K,W,Q),le.return=K,le):(le=es(Q.type,Q.key,Q.props,null,K.mode,le),le.ref=qr(K,W,Q),le.return=K,le)}function ne(K,W,Q,le){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=Ba(Q,K.mode,le),W.return=K,W):(W=i(W,Q.children||[]),W.return=K,W)}function he(K,W,Q,le,de){return W===null||W.tag!==7?(W=Mn(Q,K.mode,le,de),W.return=K,W):(W=i(W,Q),W.return=K,W)}function fe(K,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return W=za(""+W,K.mode,Q),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case f:return Q=es(W.type,W.key,W.props,null,K.mode,Q),Q.ref=qr(K,null,W),Q.return=K,Q;case m:return W=Ba(W,K.mode,Q),W.return=K,W;case a:var le=W._init;return fe(K,le(W._payload),Q)}if(C(W)||N(W))return W=Mn(W,K.mode,Q,null),W.return=K,W;xi(K,W)}return null}function oe(K,W,Q,le){var de=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return de!==null?null:H(K,W,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case f:return Q.key===de?Y(K,W,Q,le):null;case m:return Q.key===de?ne(K,W,Q,le):null;case a:return de=Q._init,oe(K,W,de(Q._payload),le)}if(C(Q)||N(Q))return de!==null?null:he(K,W,Q,le,null);xi(K,Q)}return null}function Fe(K,W,Q,le,de){if(typeof le=="string"&&le!==""||typeof le=="number")return K=K.get(Q)||null,H(W,K,""+le,de);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case f:return K=K.get(le.key===null?Q:le.key)||null,Y(W,K,le,de);case m:return K=K.get(le.key===null?Q:le.key)||null,ne(W,K,le,de);case a:var ve=le._init;return Fe(K,W,Q,ve(le._payload),de)}if(C(le)||N(le))return K=K.get(Q)||null,he(W,K,le,de,null);xi(W,le)}return null}function Re(K,W,Q,le){for(var de=null,ve=null,ge=W,xe=W=0,Qe=null;ge!==null&&xe<Q.length;xe++){ge.index>xe?(Qe=ge,ge=null):Qe=ge.sibling;var Pe=oe(K,ge,Q[xe],le);if(Pe===null){ge===null&&(ge=Qe);break}e&&ge&&Pe.alternate===null&&t(K,ge),W=h(Pe,W,xe),ve===null?de=Pe:ve.sibling=Pe,ve=Pe,ge=Qe}if(xe===Q.length)return n(K,ge),Me&&En(K,xe),de;if(ge===null){for(;xe<Q.length;xe++)ge=fe(K,Q[xe],le),ge!==null&&(W=h(ge,W,xe),ve===null?de=ge:ve.sibling=ge,ve=ge);return Me&&En(K,xe),de}for(ge=r(K,ge);xe<Q.length;xe++)Qe=Fe(ge,K,xe,Q[xe],le),Qe!==null&&(e&&Qe.alternate!==null&&ge.delete(Qe.key===null?xe:Qe.key),W=h(Qe,W,xe),ve===null?de=Qe:ve.sibling=Qe,ve=Qe);return e&&ge.forEach(function(Sn){return t(K,Sn)}),Me&&En(K,xe),de}function pt(K,W,Q,le){var de=N(Q);if(typeof de!="function")throw Error(o(150));if(Q=de.call(Q),Q==null)throw Error(o(151));for(var ve=de=null,ge=W,xe=W=0,Qe=null,Pe=Q.next();ge!==null&&!Pe.done;xe++,Pe=Q.next()){ge.index>xe?(Qe=ge,ge=null):Qe=ge.sibling;var Sn=oe(K,ge,Pe.value,le);if(Sn===null){ge===null&&(ge=Qe);break}e&&ge&&Sn.alternate===null&&t(K,ge),W=h(Sn,W,xe),ve===null?de=Sn:ve.sibling=Sn,ve=Sn,ge=Qe}if(Pe.done)return n(K,ge),Me&&En(K,xe),de;if(ge===null){for(;!Pe.done;xe++,Pe=Q.next())Pe=fe(K,Pe.value,le),Pe!==null&&(W=h(Pe,W,xe),ve===null?de=Pe:ve.sibling=Pe,ve=Pe);return Me&&En(K,xe),de}for(ge=r(K,ge);!Pe.done;xe++,Pe=Q.next())Pe=Fe(ge,K,xe,Pe.value,le),Pe!==null&&(e&&Pe.alternate!==null&&ge.delete(Pe.key===null?xe:Pe.key),W=h(Pe,W,xe),ve===null?de=Pe:ve.sibling=Pe,ve=Pe);return e&&ge.forEach(function(L0){return t(K,L0)}),Me&&En(K,xe),de}function sn(K,W,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===v&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case f:e:{for(var de=Q.key,ve=W;ve!==null;){if(ve.key===de){if(de=Q.type,de===v){if(ve.tag===7){n(K,ve.sibling),W=i(ve,Q.props.children),W.return=K,K=W;break e}}else if(ve.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===a&&ql(de)===ve.type){n(K,ve.sibling),W=i(ve,Q.props),W.ref=qr(K,ve,Q),W.return=K,K=W;break e}n(K,ve);break}else t(K,ve);ve=ve.sibling}Q.type===v?(W=Mn(Q.props.children,K.mode,le,Q.key),W.return=K,K=W):(le=es(Q.type,Q.key,Q.props,null,K.mode,le),le.ref=qr(K,W,Q),le.return=K,K=le)}return b(K);case m:e:{for(ve=Q.key;W!==null;){if(W.key===ve)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){n(K,W.sibling),W=i(W,Q.children||[]),W.return=K,K=W;break e}else{n(K,W);break}else t(K,W);W=W.sibling}W=Ba(Q,K.mode,le),W.return=K,K=W}return b(K);case a:return ve=Q._init,sn(K,W,ve(Q._payload),le)}if(C(Q))return Re(K,W,Q,le);if(N(Q))return pt(K,W,Q,le);xi(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,W!==null&&W.tag===6?(n(K,W.sibling),W=i(W,Q),W.return=K,K=W):(n(K,W),W=za(Q,K.mode,le),W.return=K,K=W),b(K)):n(K,W)}return sn}var Un=Wl(!0),jl=Wl(!1),Pi=cn(null),Ei=null,zn=null,js=null;function Ks(){js=zn=Ei=null}function Kl(e,t,n){re?(Te(Pi,t._currentValue),t._currentValue=n):(Te(Pi,t._currentValue2),t._currentValue2=n)}function Ys(e){var t=Pi.current;Ne(Pi),re?e._currentValue=t:e._currentValue2=t}function Xs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bn(e,t){Ei=e,js=zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(dt=!0),e.firstContext=null)}function Et(e){var t=re?e._currentValue:e._currentValue2;if(js!==e)if(e={context:e,memoizedValue:t,next:null},zn===null){if(Ei===null)throw Error(o(308));zn=e,Ei.dependencies={lanes:0,firstContext:e}}else zn=zn.next=e;return t}var kn=null;function Qs(e){kn===null?kn=[e]:kn.push(e)}function Yl(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Qs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ht(e,r)}function Ht(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fn=!1;function Js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(_e&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ht(e,n)}return i=r.interleaved,i===null?(t.next=t,Qs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ht(e,n)}function ki(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ds(e,n)}}function Ql(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var b={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?i=h=b:h=h.next=b,n=n.next}while(n!==null);h===null?i=h=t:h=h.next=t}else i=h=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:h,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ri(e,t,n,r){var i=e.updateQueue;fn=!1;var h=i.firstBaseUpdate,b=i.lastBaseUpdate,H=i.shared.pending;if(H!==null){i.shared.pending=null;var Y=H,ne=Y.next;Y.next=null,b===null?h=ne:b.next=ne,b=Y;var he=e.alternate;he!==null&&(he=he.updateQueue,H=he.lastBaseUpdate,H!==b&&(H===null?he.firstBaseUpdate=ne:H.next=ne,he.lastBaseUpdate=Y))}if(h!==null){var fe=i.baseState;b=0,he=ne=Y=null,H=h;do{var oe=H.lane,Fe=H.eventTime;if((r&oe)===oe){he!==null&&(he=he.next={eventTime:Fe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Re=e,pt=H;switch(oe=t,Fe=n,pt.tag){case 1:if(Re=pt.payload,typeof Re=="function"){fe=Re.call(Fe,fe,oe);break e}fe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=pt.payload,oe=typeof Re=="function"?Re.call(Fe,fe,oe):Re,oe==null)break e;fe=_({},fe,oe);break e;case 2:fn=!0}}H.callback!==null&&H.lane!==0&&(e.flags|=64,oe=i.effects,oe===null?i.effects=[H]:oe.push(H))}else Fe={eventTime:Fe,lane:oe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},he===null?(ne=he=Fe,Y=fe):he=he.next=Fe,b|=oe;if(H=H.next,H===null){if(H=i.shared.pending,H===null)break;oe=H,H=oe.next,oe.next=null,i.lastBaseUpdate=oe,i.shared.pending=null}}while(!0);if(he===null&&(Y=fe),i.baseState=Y,i.firstBaseUpdate=ne,i.lastBaseUpdate=he,t=i.shared.interleaved,t!==null){i=t;do b|=i.lane,i=i.next;while(i!==t)}else h===null&&(i.shared.lanes=0);Tn|=b,e.lanes=b,e.memoizedState=fe}}function Jl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(o(191,i));i.call(r)}}}var Wr={},kt=cn(Wr),jr=cn(Wr),Vn=cn(Wr);function qt(e){if(e===Wr)throw Error(o(174));return e}function Zs(e,t){Te(Vn,t),Te(jr,e),Te(kt,Wr),e=G(t),Ne(kt),Te(kt,e)}function Hn(){Ne(kt),Ne(jr),Ne(Vn)}function Zl(e){var t=qt(Vn.current),n=qt(kt.current);t=z(n,e.type,t),n!==t&&(Te(jr,e),Te(kt,t))}function $s(e){jr.current===e&&(Ne(kt),Ne(jr))}var Oe=cn(0);function Ti(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Al(n)||Ns(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function ta(){for(var e=0;e<ea.length;e++){var t=ea[e];re?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}ea.length=0}var Ni=d.ReactCurrentDispatcher,na=d.ReactCurrentBatchConfig,Rn=0,De=null,Ve=null,Ye=null,Fi=!1,Kr=!1,Yr=0,s0=0;function nt(){throw Error(o(321))}function ra(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function ia(e,t,n,r,i,h){if(Rn=h,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ni.current=e===null||e.memoizedState===null?u0:h0,e=n(r,i),Kr){h=0;do{if(Kr=!1,Yr=0,25<=h)throw Error(o(301));h+=1,Ye=Ve=null,t.updateQueue=null,Ni.current=c0,e=n(r,i)}while(Kr)}if(Ni.current=bi,t=Ve!==null&&Ve.next!==null,Rn=0,Ye=Ve=De=null,Fi=!1,t)throw Error(o(300));return e}function sa(){var e=Yr!==0;return Yr=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?De.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Rt(){if(Ve===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Ye===null?De.memoizedState:Ye.next;if(t!==null)Ye=t,Ve=e;else{if(e===null)throw Error(o(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ye===null?De.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Xr(e,t){return typeof t=="function"?t(e):t}function aa(e){var t=Rt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=Ve,i=r.baseQueue,h=n.pending;if(h!==null){if(i!==null){var b=i.next;i.next=h.next,h.next=b}r.baseQueue=i=h,n.pending=null}if(i!==null){h=i.next,r=r.baseState;var H=b=null,Y=null,ne=h;do{var he=ne.lane;if((Rn&he)===he)Y!==null&&(Y=Y.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),r=ne.hasEagerState?ne.eagerState:e(r,ne.action);else{var fe={lane:he,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};Y===null?(H=Y=fe,b=r):Y=Y.next=fe,De.lanes|=he,Tn|=he}ne=ne.next}while(ne!==null&&ne!==h);Y===null?b=r:Y.next=H,bt(r,t.memoizedState)||(dt=!0),t.memoizedState=r,t.baseState=b,t.baseQueue=Y,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do h=i.lane,De.lanes|=h,Tn|=h,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oa(e){var t=Rt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,h=t.memoizedState;if(i!==null){n.pending=null;var b=i=i.next;do h=e(h,b.action),b=b.next;while(b!==i);bt(h,t.memoizedState)||(dt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,r]}function $l(){}function eu(e,t){var n=De,r=Rt(),i=t(),h=!bt(r.memoizedState,i);if(h&&(r.memoizedState=i,dt=!0),r=r.queue,la(ru.bind(null,n,r,e),[e]),r.getSnapshot!==t||h||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Qr(9,nu.bind(null,n,r,i,t),void 0,null),Xe===null)throw Error(o(349));(Rn&30)!==0||tu(n,t,i)}return i}function tu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nu(e,t,n,r){t.value=n,t.getSnapshot=r,iu(t)&&su(e)}function ru(e,t,n){return n(function(){iu(t)&&su(e)})}function iu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function su(e){var t=Ht(e,1);t!==null&&Tt(t,e,1,-1)}function au(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:e},t.queue=e,e=e.dispatch=l0.bind(null,De,e),[t.memoizedState,e]}function Qr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ou(){return Rt().memoizedState}function Ai(e,t,n,r){var i=Wt();De.flags|=e,i.memoizedState=Qr(1|t,n,void 0,r===void 0?null:r)}function Mi(e,t,n,r){var i=Rt();r=r===void 0?null:r;var h=void 0;if(Ve!==null){var b=Ve.memoizedState;if(h=b.destroy,r!==null&&ra(r,b.deps)){i.memoizedState=Qr(t,n,h,r);return}}De.flags|=e,i.memoizedState=Qr(1|t,n,h,r)}function lu(e,t){return Ai(8390656,8,e,t)}function la(e,t){return Mi(2048,8,e,t)}function uu(e,t){return Mi(4,2,e,t)}function hu(e,t){return Mi(4,4,e,t)}function cu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function du(e,t,n){return n=n!=null?n.concat([e]):null,Mi(4,4,cu.bind(null,t,e),n)}function ua(){}function fu(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function gu(e,t){var n=Rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ra(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pu(e,t,n){return(Rn&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=n):(bt(n,t)||(n=Ol(),De.lanes|=n,Tn|=n,e.baseState=!0),t)}function a0(e,t){var n=we;we=n!==0&&4>n?n:4,e(!0);var r=na.transition;na.transition={};try{e(!1),t()}finally{we=n,na.transition=r}}function mu(){return Rt().memoizedState}function o0(e,t,n){var r=vn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vu(e))yu(t,n);else if(n=Yl(e,t,n,r),n!==null){var i=st();Tt(n,e,r,i),_u(n,t,r)}}function l0(e,t,n){var r=vn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vu(e))yu(t,i);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var b=t.lastRenderedState,H=h(b,n);if(i.hasEagerState=!0,i.eagerState=H,bt(H,b)){var Y=t.interleaved;Y===null?(i.next=i,Qs(t)):(i.next=Y.next,Y.next=i),t.interleaved=i;return}}catch{}finally{}n=Yl(e,t,i,r),n!==null&&(i=st(),Tt(n,e,r,i),_u(n,t,r))}}function vu(e){var t=e.alternate;return e===De||t!==null&&t===De}function yu(e,t){Kr=Fi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _u(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ds(e,n)}}var bi={readContext:Et,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},u0={readContext:Et,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:lu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ai(4194308,4,cu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var n=Wt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=o0.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:au,useDebugValue:ua,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=au(!1),t=e[0];return e=a0.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,i=Wt();if(Me){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),Xe===null)throw Error(o(349));(Rn&30)!==0||tu(r,t,n)}i.memoizedState=n;var h={value:n,getSnapshot:t};return i.queue=h,lu(ru.bind(null,r,h,e),[e]),r.flags|=2048,Qr(9,nu.bind(null,r,h,n,t),void 0,null),n},useId:function(){var e=Wt(),t=Xe.identifierPrefix;if(Me){var n=en,r=$t;n=(r&~(1<<32-Mt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=s0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},h0={readContext:Et,useCallback:fu,useContext:Et,useEffect:la,useImperativeHandle:du,useInsertionEffect:uu,useLayoutEffect:hu,useMemo:gu,useReducer:aa,useRef:ou,useState:function(){return aa(Xr)},useDebugValue:ua,useDeferredValue:function(e){var t=Rt();return pu(t,Ve.memoizedState,e)},useTransition:function(){var e=aa(Xr)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:$l,useSyncExternalStore:eu,useId:mu,unstable_isNewReconciler:!1},c0={readContext:Et,useCallback:fu,useContext:Et,useEffect:la,useImperativeHandle:du,useInsertionEffect:uu,useLayoutEffect:hu,useMemo:gu,useReducer:oa,useRef:ou,useState:function(){return oa(Xr)},useDebugValue:ua,useDeferredValue:function(e){var t=Rt();return Ve===null?t.memoizedState=e:pu(t,Ve.memoizedState,e)},useTransition:function(){var e=oa(Xr)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:$l,useSyncExternalStore:eu,useId:mu,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=_({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ha(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Li={isMounted:function(e){return(e=e._reactInternals)?T(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=st(),i=vn(e),h=tn(r,i);h.payload=t,n!=null&&(h.callback=n),t=gn(e,h,i),t!==null&&(Tt(t,e,i,r),ki(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=st(),i=vn(e),h=tn(r,i);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=gn(e,h,i),t!==null&&(Tt(t,e,i,r),ki(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),r=vn(e),i=tn(n,r);i.tag=2,t!=null&&(i.callback=t),t=gn(e,i,r),t!==null&&(Tt(t,e,r,n),ki(t,e,r))}};function Su(e,t,n,r,i,h,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,h,b):t.prototype&&t.prototype.isPureReactComponent?!wi(n,r)||!wi(i,h):!0}function Cu(e,t,n){var r=!1,i=dn,h=t.contextType;return typeof h=="object"&&h!==null?h=Et(h):(i=ct(t)?xn:tt.current,r=t.contextTypes,h=(r=r!=null)?On(e,i):dn),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Li,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=h),t}function wu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Li.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Js(e);var h=t.contextType;typeof h=="object"&&h!==null?i.context=Et(h):(h=ct(t)?xn:tt.current,i.context=On(e,h)),i.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(ha(e,t,h,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Li.enqueueReplaceState(i,i.state,null),Ri(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qn(e,t){try{var n="",r=t;do n+=i0(r),r=r.return;while(r);var i=n}catch(h){i=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var d0=typeof WeakMap=="function"?WeakMap:Map;function xu(e,t,n){n=tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yi||(Yi=!0,ba=r),fa(e,t)},n}function Pu(e,t,n){n=tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fa(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){fa(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var b=t.stack;this.componentDidCatch(t.value,{componentStack:b!==null?b:""})}),n}function Eu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new d0;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=k0.bind(null,e,t,n),t.then(e,e))}function ku(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ru(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tn(-1,1),t.tag=2,gn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var f0=d.ReactCurrentOwner,dt=!1;function at(e,t,n,r){t.child=e===null?jl(t,null,n,r):Un(t,e.child,n,r)}function Tu(e,t,n,r,i){n=n.render;var h=t.ref;return Bn(t,i),r=ia(e,t,n,r,h,i),n=sa(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nn(e,t,i)):(Me&&n&&Bs(t),t.flags|=1,at(e,t,r,i),t.child)}function Nu(e,t,n,r,i){if(e===null){var h=n.type;return typeof h=="function"&&!Ua(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,Fu(e,t,h,r,i)):(e=es(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&i)===0){var b=h.memoizedProps;if(n=n.compare,n=n!==null?n:wi,n(b,r)&&e.ref===t.ref)return nn(e,t,i)}return t.flags|=1,e=_n(h,r),e.ref=t.ref,e.return=t,t.child=e}function Fu(e,t,n,r,i){if(e!==null){var h=e.memoizedProps;if(wi(h,r)&&e.ref===t.ref)if(dt=!1,t.pendingProps=r=h,(e.lanes&i)!==0)(e.flags&131072)!==0&&(dt=!0);else return t.lanes=e.lanes,nn(e,t,i)}return ga(e,t,n,r,i)}function Au(e,t,n){var r=t.pendingProps,i=r.children,h=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(jn,Ct),Ct|=n;else{if((n&1073741824)===0)return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(jn,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=h!==null?h.baseLanes:n,Te(jn,Ct),Ct|=r}else h!==null?(r=h.baseLanes|n,t.memoizedState=null):r=n,Te(jn,Ct),Ct|=r;return at(e,t,i,n),t.child}function Mu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ga(e,t,n,r,i){var h=ct(n)?xn:tt.current;return h=On(t,h),Bn(t,i),n=ia(e,t,n,r,h,i),r=sa(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nn(e,t,i)):(Me&&r&&Bs(t),t.flags|=1,at(e,t,n,i),t.child)}function bu(e,t,n,r,i){if(ct(n)){var h=!0;fi(t)}else h=!1;if(Bn(t,i),t.stateNode===null)Di(e,t),Cu(t,n,r),ca(t,n,r,i),r=!0;else if(e===null){var b=t.stateNode,H=t.memoizedProps;b.props=H;var Y=b.context,ne=n.contextType;typeof ne=="object"&&ne!==null?ne=Et(ne):(ne=ct(n)?xn:tt.current,ne=On(t,ne));var he=n.getDerivedStateFromProps,fe=typeof he=="function"||typeof b.getSnapshotBeforeUpdate=="function";fe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(H!==r||Y!==ne)&&wu(t,b,r,ne),fn=!1;var oe=t.memoizedState;b.state=oe,Ri(t,r,b,i),Y=t.memoizedState,H!==r||oe!==Y||ht.current||fn?(typeof he=="function"&&(ha(t,n,he,r),Y=t.memoizedState),(H=fn||Su(t,n,H,r,oe,Y,ne))?(fe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(t.flags|=4194308)):(typeof b.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=Y),b.props=r,b.state=Y,b.context=ne,r=H):(typeof b.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{b=t.stateNode,Xl(e,t),H=t.memoizedProps,ne=t.type===t.elementType?H:Ot(t.type,H),b.props=ne,fe=t.pendingProps,oe=b.context,Y=n.contextType,typeof Y=="object"&&Y!==null?Y=Et(Y):(Y=ct(n)?xn:tt.current,Y=On(t,Y));var Fe=n.getDerivedStateFromProps;(he=typeof Fe=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(H!==fe||oe!==Y)&&wu(t,b,r,Y),fn=!1,oe=t.memoizedState,b.state=oe,Ri(t,r,b,i);var Re=t.memoizedState;H!==fe||oe!==Re||ht.current||fn?(typeof Fe=="function"&&(ha(t,n,Fe,r),Re=t.memoizedState),(ne=fn||Su(t,n,ne,r,oe,Re,Y)||!1)?(he||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(r,Re,Y),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(r,Re,Y)),typeof b.componentDidUpdate=="function"&&(t.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof b.componentDidUpdate!="function"||H===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||H===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=Re),b.props=r,b.state=Re,b.context=Y,r=ne):(typeof b.componentDidUpdate!="function"||H===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||H===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),r=!1)}return pa(e,t,n,r,h,i)}function pa(e,t,n,r,i,h){Mu(e,t);var b=(t.flags&128)!==0;if(!r&&!b)return i&&Ll(t,n,!1),nn(e,t,h);r=t.stateNode,f0.current=t;var H=b&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&b?(t.child=Un(t,e.child,null,h),t.child=Un(t,null,H,h)):at(e,t,H,h),t.memoizedState=r.state,i&&Ll(t,n,!0),t.child}function Lu(e){var t=e.stateNode;t.pendingContext?Ml(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ml(e,t.context,!1),Zs(e,t.containerInfo)}function Ou(e,t,n,r,i){return Gn(),Ws(i),t.flags|=256,at(e,t,n,r),t.child}var ma={dehydrated:null,treeContext:null,retryLane:0};function va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Du(e,t,n){var r=t.pendingProps,i=Oe.current,h=!1,b=(t.flags&128)!==0,H;if((H=b)||(H=e!==null&&e.memoizedState===null?!1:(i&2)!==0),H?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Te(Oe,i&1),e===null)return qs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:Ns(e)?t.lanes=8:t.lanes=1073741824,null):(b=r.children,e=r.fallback,h?(r=t.mode,h=t.child,b={mode:"hidden",children:b},(r&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=b):h=ts(b,r,0,null),e=Mn(e,r,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=va(n),t.memoizedState=ma,e):ya(t,b));if(i=e.memoizedState,i!==null&&(H=i.dehydrated,H!==null))return g0(e,t,b,r,H,i,n);if(h){h=r.fallback,b=t.mode,i=e.child,H=i.sibling;var Y={mode:"hidden",children:r.children};return(b&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=Y,t.deletions=null):(r=_n(i,Y),r.subtreeFlags=i.subtreeFlags&14680064),H!==null?h=_n(H,h):(h=Mn(h,b,n,null),h.flags|=2),h.return=t,r.return=t,r.sibling=h,t.child=r,r=h,h=t.child,b=e.child.memoizedState,b=b===null?va(n):{baseLanes:b.baseLanes|n,cachePool:null,transitions:b.transitions},h.memoizedState=b,h.childLanes=e.childLanes&~n,t.memoizedState=ma,r}return h=e.child,e=h.sibling,r=_n(h,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ya(e,t){return t=ts({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oi(e,t,n,r){return r!==null&&Ws(r),Un(t,e.child,null,n),e=ya(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g0(e,t,n,r,i,h,b){if(n)return t.flags&256?(t.flags&=-257,r=da(Error(o(422))),Oi(e,t,b,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=r.fallback,i=t.mode,r=ts({mode:"visible",children:r.children},i,0,null),h=Mn(h,i,b,null),h.flags|=2,r.return=t,h.return=t,r.sibling=h,t.child=r,(t.mode&1)!==0&&Un(t,e.child,null,b),t.child.memoizedState=va(b),t.memoizedState=ma,h);if((t.mode&1)===0)return Oi(e,t,b,null);if(Ns(i))return r=Rd(i).digest,h=Error(o(419)),r=da(h,r,void 0),Oi(e,t,b,r);if(n=(b&e.childLanes)!==0,dt||n){if(r=Xe,r!==null){switch(b&-b){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|b))!==0?0:i,i!==0&&i!==h.retryLane&&(h.retryLane=i,Ht(e,i),Tt(r,e,i,-1))}return Ga(),r=da(Error(o(421))),Oi(e,t,b,r)}return Al(i)?(t.flags|=128,t.child=e.child,t=R0.bind(null,e),Td(i,t),null):(e=h.treeContext,pe&&(Pt=Ad(i),St=t,Me=!0,Lt=null,Hr=!1,e!==null&&(wt[xt++]=$t,wt[xt++]=en,wt[xt++]=Pn,$t=e.id,en=e.overflow,Pn=t)),t=ya(t,r.children),t.flags|=4096,t)}function Iu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xs(e.return,t,n)}function _a(e,t,n,r,i){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=n,h.tailMode=i)}function Gu(e,t,n){var r=t.pendingProps,i=r.revealOrder,h=r.tail;if(at(e,t,r.children,n),r=Oe.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iu(e,n,t);else if(e.tag===19)Iu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Oe,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ti(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),_a(t,!1,i,n,h);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ti(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}_a(t,!0,n,null,h);break;case"together":_a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Di(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=_n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function p0(e,t,n){switch(t.tag){case 3:Lu(t),Gn();break;case 5:Zl(t);break;case 1:ct(t.type)&&fi(t);break;case 4:Zs(t,t.stateNode.containerInfo);break;case 10:Kl(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Te(Oe,Oe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Du(e,t,n):(Te(Oe,Oe.current&1),e=nn(e,t,n),e!==null?e.sibling:null);Te(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Gu(e,t,n);t.flags|=128}var i=t.memoizedState;if(i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,Au(e,t,n)}return nn(e,t,n)}function jt(e){e.flags|=4}function Uu(e,t){if(e!==null&&e.child===t.child)return!0;if((t.flags&16)!==0)return!1;for(e=t.child;e!==null;){if((e.flags&12854)!==0||(e.subtreeFlags&12854)!==0)return!1;e=e.sibling}return!0}var Jr,Zr,Ii,Gi;if(ie)Jr=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)ee(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Zr=function(){},Ii=function(e,t,n,r,i){if(e=e.memoizedProps,e!==r){var h=t.stateNode,b=qt(kt.current);n=$(h,n,e,r,i,b),(t.updateQueue=n)&&jt(t)}},Gi=function(e,t,n,r){n!==r&&jt(t)};else if(ce){Jr=function(e,t,n,r){for(var i=t.child;i!==null;){if(i.tag===5){var h=i.stateNode;n&&r&&(h=Nl(h,i.type,i.memoizedProps,i)),ee(e,h)}else if(i.tag===6)h=i.stateNode,n&&r&&(h=Fl(h,i.memoizedProps,i)),ee(e,h);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)h=i.child,h!==null&&(h.return=i),Jr(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var zu=function(e,t,n,r){for(var i=t.child;i!==null;){if(i.tag===5){var h=i.stateNode;n&&r&&(h=Nl(h,i.type,i.memoizedProps,i)),Tl(e,h)}else if(i.tag===6)h=i.stateNode,n&&r&&(h=Fl(h,i.memoizedProps,i)),Tl(e,h);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)h=i.child,h!==null&&(h.return=i),zu(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Zr=function(e,t){var n=t.stateNode;if(!Uu(e,t)){e=n.containerInfo;var r=Rl(e);zu(r,t,!1,!1),n.pendingChildren=r,jt(t),xd(e,r)}},Ii=function(e,t,n,r,i){var h=e.stateNode,b=e.memoizedProps;if((e=Uu(e,t))&&b===r)t.stateNode=h;else{var H=t.stateNode,Y=qt(kt.current),ne=null;b!==r&&(ne=$(H,n,b,r,i,Y)),e&&ne===null?t.stateNode=h:(h=wd(h,ne,n,b,r,t,e,H),Z(h,n,r,i,Y)&&jt(t),t.stateNode=h,e?jt(t):Jr(h,t,!1,!1))}},Gi=function(e,t,n,r){n!==r?(e=qt(Vn.current),n=qt(kt.current),t.stateNode=ae(r,e,n,t),jt(t)):t.stateNode=e.stateNode}}else Zr=function(){},Ii=function(){},Gi=function(){};function $r(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function m0(e,t,n){var r=t.pendingProps;switch(Vs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return ct(t.type)&&di(),rt(t),null;case 3:return n=t.stateNode,Hn(),Ne(ht),Ne(tt),ta(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ci(t)?jt(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lt!==null&&(Da(Lt),Lt=null))),Zr(e,t),rt(t),null;case 5:$s(t),n=qt(Vn.current);var i=t.type;if(e!==null&&t.stateNode!=null)Ii(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(o(166));return rt(t),null}if(e=qt(kt.current),Ci(t)){if(!pe)throw Error(o(175));e=Md(t.stateNode,t.type,t.memoizedProps,n,e,t,!Hr),t.updateQueue=e,e!==null&&jt(t)}else{var h=J(i,r,n,e,t);Jr(h,t,!1,!1),t.stateNode=h,Z(h,i,r,n,e)&&jt(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)Gi(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(e=qt(Vn.current),n=qt(kt.current),Ci(t)){if(!pe)throw Error(o(176));if(e=t.stateNode,n=t.memoizedProps,(r=bd(e,n,t,!Hr))&&(i=St,i!==null))switch(i.tag){case 3:Bd(i.stateNode.containerInfo,e,n,(i.mode&1)!==0);break;case 5:Vd(i.type,i.memoizedProps,i.stateNode,e,n,(i.mode&1)!==0)}r&&jt(t)}else t.stateNode=ae(r,e,n,t)}return rt(t),null;case 13:if(Ne(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&Pt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Hl(),Gn(),t.flags|=98560,i=!1;else if(i=Ci(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(!pe)throw Error(o(344));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Ld(i,t)}else Gn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),i=!1}else Lt!==null&&(Da(Lt),Lt=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(n=r!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Oe.current&1)!==0?He===0&&(He=3):Ga())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return Hn(),Zr(e,t),e===null&&me(t.stateNode.containerInfo),rt(t),null;case 10:return Ys(t.type._context),rt(t),null;case 17:return ct(t.type)&&di(),rt(t),null;case 19:if(Ne(Oe),i=t.memoizedState,i===null)return rt(t),null;if(r=(t.flags&128)!==0,h=i.rendering,h===null)if(r)$r(i,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Ti(e),h!==null){for(t.flags|=128,$r(i,!1),e=h.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,n=t.child;n!==null;)r=n,i=e,r.flags&=14680066,h=r.alternate,h===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,i=h.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Te(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ke()>Ma&&(t.flags|=128,r=!0,$r(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ti(h),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Me)return rt(t),null}else 2*Ke()-i.renderingStartTime>Ma&&n!==1073741824&&(t.flags|=128,r=!0,$r(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,e=Oe.current,Te(Oe,r?e&1|2:e&1),t):(rt(t),null);case 22:case 23:return Ia(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Ct&1073741824)!==0&&(rt(t),ie&&t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function v0(e,t){switch(Vs(t),t.tag){case 1:return ct(t.type)&&di(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hn(),Ne(ht),Ne(tt),ta(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return $s(t),null;case 13:if(Ne(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Gn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Oe),null;case 4:return Hn(),null;case 10:return Ys(t.type._context),null;case 22:case 23:return Ia(),null;case 24:return null;default:return null}}var Ui=!1,it=!1,y0=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Wn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(e,t,r)}else n.current=null}function Sa(e,t,n){try{n()}catch(r){be(e,t,r)}}var Bu=!1;function _0(e,t){for(j(e.containerInfo),ue=t;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var n=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,i=n.memoizedState,h=e.stateNode,b=h.getSnapshotBeforeUpdate(e.elementType===e.type?r:Ot(e.type,r),i);h.__reactInternalSnapshotBeforeUpdate=b}break;case 3:ie&&Cd(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(H){be(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return n=Bu,Bu=!1,n}function ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var h=i.destroy;i.destroy=void 0,h!==void 0&&Sa(t,n,h)}i=i.next}while(i!==r)}}function zi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ca(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=I(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Vu(e){var t=e.alternate;t!==null&&(e.alternate=null,Vu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ke(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hu(e){return e.tag===5||e.tag===3||e.tag===4}function qu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?_t(n,e,t):Jt(n,e);else if(r!==4&&(e=e.child,e!==null))for(wa(e,t,n),e=e.sibling;e!==null;)wa(e,t,n),e=e.sibling}function xa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?yt(n,e,t):At(n,e);else if(r!==4&&(e=e.child,e!==null))for(xa(e,t,n),e=e.sibling;e!==null;)xa(e,t,n),e=e.sibling}var Je=null,Dt=!1;function Kt(e,t,n){for(n=n.child;n!==null;)Pa(e,t,n),n=n.sibling}function Pa(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(vi,n)}catch{}switch(n.tag){case 5:it||Wn(n,t);case 6:if(ie){var r=Je,i=Dt;Je=null,Kt(e,t,n),Je=r,Dt=i,Je!==null&&(Dt?Rs(Je,n.stateNode):Ur(Je,n.stateNode))}else Kt(e,t,n);break;case 18:ie&&Je!==null&&(Dt?Ud(Je,n.stateNode):Gd(Je,n.stateNode));break;case 4:ie?(r=Je,i=Dt,Je=n.stateNode.containerInfo,Dt=!0,Kt(e,t,n),Je=r,Dt=i):(ce&&(r=n.stateNode.containerInfo,i=Rl(r),Ts(r,i)),Kt(e,t,n));break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var h=i,b=h.destroy;h=h.tag,b!==void 0&&((h&2)!==0||(h&4)!==0)&&Sa(n,t,b),i=i.next}while(i!==r)}Kt(e,t,n);break;case 1:if(!it&&(Wn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(H){be(n,t,H)}Kt(e,t,n);break;case 21:Kt(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Kt(e,t,n),it=r):Kt(e,t,n);break;default:Kt(e,t,n)}}function Wu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new y0),t.forEach(function(r){var i=T0.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var h=e,b=t;if(ie){var H=b;e:for(;H!==null;){switch(H.tag){case 5:Je=H.stateNode,Dt=!1;break e;case 3:Je=H.stateNode.containerInfo,Dt=!0;break e;case 4:Je=H.stateNode.containerInfo,Dt=!0;break e}H=H.return}if(Je===null)throw Error(o(160));Pa(h,b,i),Je=null,Dt=!1}else Pa(h,b,i);var Y=i.alternate;Y!==null&&(Y.return=null),i.return=null}catch(ne){be(i,t,ne)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ju(t,e),t=t.sibling}function ju(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Yt(e),r&4){try{ei(3,e,e.return),zi(3,e)}catch(oe){be(e,e.return,oe)}try{ei(5,e,e.return)}catch(oe){be(e,e.return,oe)}}break;case 1:It(t,e),Yt(e),r&512&&n!==null&&Wn(n,n.return);break;case 5:if(It(t,e),Yt(e),r&512&&n!==null&&Wn(n,n.return),ie){if(e.flags&32){var i=e.stateNode;try{kl(i)}catch(oe){be(e,e.return,oe)}}if(r&4&&(i=e.stateNode,i!=null)){var h=e.memoizedProps;if(n=n!==null?n.memoizedProps:h,r=e.type,t=e.updateQueue,e.updateQueue=null,t!==null)try{vt(i,t,r,n,h,e)}catch(oe){be(e,e.return,oe)}}}break;case 6:if(It(t,e),Yt(e),r&4&&ie){if(e.stateNode===null)throw Error(o(162));i=e.stateNode,h=e.memoizedProps,n=n!==null?n.memoizedProps:h;try{Ut(i,n,h)}catch(oe){be(e,e.return,oe)}}break;case 3:if(It(t,e),Yt(e),r&4){if(ie&&pe&&n!==null&&n.memoizedState.isDehydrated)try{Dd(t.containerInfo)}catch(oe){be(e,e.return,oe)}if(ce){i=t.containerInfo,h=t.pendingChildren;try{Ts(i,h)}catch(oe){be(e,e.return,oe)}}}break;case 4:if(It(t,e),Yt(e),r&4&&ce){h=e.stateNode,i=h.containerInfo,h=h.pendingChildren;try{Ts(i,h)}catch(oe){be(e,e.return,oe)}}break;case 13:It(t,e),Yt(e),i=e.child,i.flags&8192&&(h=i.memoizedState!==null,i.stateNode.isHidden=h,!h||i.alternate!==null&&i.alternate.memoizedState!==null||(Aa=Ke())),r&4&&Wu(e);break;case 22:var b=n!==null&&n.memoizedState!==null;if(e.mode&1?(it=(n=it)||b,It(t,e),it=n):It(t,e),Yt(e),r&8192){if(n=e.memoizedState!==null,(e.stateNode.isHidden=n)&&!b&&(e.mode&1)!==0)for(ue=e,r=e.child;r!==null;){for(t=ue=r;ue!==null;){b=ue;var H=b.child;switch(b.tag){case 0:case 11:case 14:case 15:ei(4,b,b.return);break;case 1:Wn(b,b.return);var Y=b.stateNode;if(typeof Y.componentWillUnmount=="function"){var ne=b,he=b.return;try{var fe=ne;Y.props=fe.memoizedProps,Y.state=fe.memoizedState,Y.componentWillUnmount()}catch(oe){be(ne,he,oe)}}break;case 5:Wn(b,b.return);break;case 22:if(b.memoizedState!==null){Xu(t);continue}}H!==null?(H.return=b,ue=H):Xu(t)}r=r.sibling}if(ie){e:if(r=null,ie)for(t=e;;){if(t.tag===5){if(r===null){r=t;try{i=t.stateNode,n?vd(i):_d(t.stateNode,t.memoizedProps)}catch(oe){be(e,e.return,oe)}}}else if(t.tag===6){if(r===null)try{h=t.stateNode,n?yd(h):Sd(h,t.memoizedProps)}catch(oe){be(e,e.return,oe)}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}}}break;case 19:It(t,e),Yt(e),r&4&&Wu(e);break;case 21:break;default:It(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{if(ie){e:{for(var n=e.return;n!==null;){if(Hu(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kl(i),r.flags&=-33);var h=qu(e);xa(e,h,i);break;case 3:case 4:var b=r.stateNode.containerInfo,H=qu(e);wa(e,H,b);break;default:throw Error(o(161))}}}catch(Y){be(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function S0(e,t,n){ue=e,Ku(e)}function Ku(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var i=ue,h=i.child;if(i.tag===22&&r){var b=i.memoizedState!==null||Ui;if(!b){var H=i.alternate,Y=H!==null&&H.memoizedState!==null||it;H=Ui;var ne=it;if(Ui=b,(it=Y)&&!ne)for(ue=i;ue!==null;)b=ue,Y=b.child,b.tag===22&&b.memoizedState!==null?Qu(i):Y!==null?(Y.return=b,ue=Y):Qu(i);for(;h!==null;)ue=h,Ku(h),h=h.sibling;ue=i,Ui=H,it=ne}Yu(e)}else(i.subtreeFlags&8772)!==0&&h!==null?(h.return=i,ue=h):Yu(e)}}function Yu(e){for(;ue!==null;){var t=ue;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:it||zi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Jl(t,h,r);break;case 3:var b=t.updateQueue;if(b!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=I(t.child.stateNode);break;case 1:n=t.child.stateNode}Jl(t,b,n)}break;case 5:var H=t.stateNode;n===null&&t.flags&4&&zt(H,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&t.memoizedState===null){var Y=t.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var he=ne.dehydrated;he!==null&&Id(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}it||t.flags&512&&Ca(t)}catch(fe){be(t,t.return,fe)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Xu(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Qu(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zi(4,t)}catch(Y){be(t,n,Y)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(Y){be(t,i,Y)}}var h=t.return;try{Ca(t)}catch(Y){be(t,h,Y)}break;case 5:var b=t.return;try{Ca(t)}catch(Y){be(t,b,Y)}}}catch(Y){be(t,t.return,Y)}if(t===e){ue=null;break}var H=t.sibling;if(H!==null){H.return=t.return,ue=H;break}ue=t.return}}var Bi=0,Vi=1,Hi=2,qi=3,Wi=4;if(typeof Symbol=="function"&&Symbol.for){var ti=Symbol.for;Bi=ti("selector.component"),Vi=ti("selector.has_pseudo_class"),Hi=ti("selector.role"),qi=ti("selector.test_id"),Wi=ti("selector.text")}function Ea(e){var t=Ee(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(o(364));return t}if(e=wn(e),e===null)throw Error(o(362));return e.stateNode.current}function ka(e,t){switch(t.$$typeof){case Bi:if(e.type===t.value)return!0;break;case Vi:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],h=t[i];if(r.tag!==5||!$e(r)){for(;h!=null&&ka(r,h);)i++,h=t[i];if(i===t.length){t=!0;break e}else for(r=r.child;r!==null;)e.push(r,i),r=r.sibling}}t=!1}return t;case Hi:if(e.tag===5&&Ft(e.stateNode,t.value))return!0;break;case Wi:if((e.tag===5||e.tag===6)&&(e=ut(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case qi:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ra(e){switch(e.$$typeof){case Bi:return"<"+(B(e.value)||"Unknown")+">";case Vi:return":has("+(Ra(e)||"")+")";case Hi:return'[role="'+e.value+'"]';case Wi:return'"'+e.value+'"';case qi:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Ju(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],h=e[r++],b=t[h];if(i.tag!==5||!$e(i)){for(;b!=null&&ka(i,b);)h++,b=t[h];if(h===t.length)n.push(i);else for(i=i.child;i!==null;)e.push(i,h),i=i.sibling}}return n}function Ta(e,t){if(!je)throw Error(o(363));e=Ea(e),e=Ju(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(r.tag===5)$e(r)||t.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return t}var C0=Math.ceil,ji=d.ReactCurrentDispatcher,Na=d.ReactCurrentOwner,Ue=d.ReactCurrentBatchConfig,_e=0,Xe=null,ze=null,Ze=0,Ct=0,jn=cn(0),He=0,ni=null,Tn=0,Ki=0,Fa=0,ri=null,ft=null,Aa=0,Ma=1/0,rn=null;function Kn(){Ma=Ke()+500}var Yi=!1,ba=null,pn=null,Xi=!1,mn=null,Qi=0,ii=0,La=null,Ji=-1,Zi=0;function st(){return(_e&6)!==0?Ke():Ji!==-1?Ji:Ji=Ke()}function vn(e){return(e.mode&1)===0?1:(_e&2)!==0&&Ze!==0?Ze&-Ze:r0.transition!==null?(Zi===0&&(Zi=Ol()),Zi):(e=we,e!==0?e:We())}function Tt(e,t,n,r){if(50<ii)throw ii=0,La=null,Error(o(185));Vr(e,n,r),((_e&2)===0||e!==Xe)&&(e===Xe&&((_e&2)===0&&(Ki|=n),He===4&&yn(e,Ze)),gt(e,r),n===1&&_e===0&&(t.mode&1)===0&&(Kn(),yi&&Vt()))}function gt(e,t){var n=e.callbackNode;Yd(e,t);var r=mi(e,e===Xe?Ze:0);if(r===0)n!==null&&Il(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Il(n),t===1)e.tag===0?n0($u.bind(null,e)):Gl($u.bind(null,e)),Le?hn(function(){(_e&6)===0&&Vt()}):Is(Gs,Vt),n=null;else{switch(Dl(r)){case 1:n=Gs;break;case 4:n=Zd;break;case 16:n=Us;break;case 536870912:n=$d;break;default:n=Us}n=lh(n,Zu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zu(e,t){if(Ji=-1,Zi=0,(_e&6)!==0)throw Error(o(327));var n=e.callbackNode;if(An()&&e.callbackNode!==n)return null;var r=mi(e,e===Xe?Ze:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=$i(e,r);else{t=r;var i=_e;_e|=2;var h=nh();(Xe!==e||Ze!==t)&&(rn=null,Kn(),Nn(e,t));do try{P0();break}catch(H){th(e,H)}while(!0);Ks(),ji.current=h,_e=i,ze!==null?t=0:(Xe=null,Ze=0,t=He)}if(t!==0){if(t===2&&(i=Ls(e),i!==0&&(r=i,t=Oa(e,i))),t===1)throw n=ni,Nn(e,0),yn(e,r),gt(e,Ke()),n;if(t===6)yn(e,r);else{if(i=e.current.alternate,(r&30)===0&&!w0(i)&&(t=$i(e,r),t===2&&(h=Ls(e),h!==0&&(r=h,t=Oa(e,h))),t===1))throw n=ni,Nn(e,0),yn(e,r),gt(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:Fn(e,ft,rn);break;case 3:if(yn(e,r),(r&130023424)===r&&(t=Aa+500-Ke(),10<t)){if(mi(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){st(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=U(Fn.bind(null,e,ft,rn),t);break}Fn(e,ft,rn);break;case 4:if(yn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var b=31-Mt(r);h=1<<b,b=t[b],b>i&&(i=b),r&=~h}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*C0(r/1960))-r,10<r){e.timeoutHandle=U(Fn.bind(null,e,ft,rn),r);break}Fn(e,ft,rn);break;case 5:Fn(e,ft,rn);break;default:throw Error(o(329))}}}return gt(e,Ke()),e.callbackNode===n?Zu.bind(null,e):null}function Oa(e,t){var n=ri;return e.current.memoizedState.isDehydrated&&(Nn(e,t).flags|=256),e=$i(e,t),e!==2&&(t=ft,ft=n,t!==null&&Da(t)),e}function Da(e){ft===null?ft=e:ft.push.apply(ft,e)}function w0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],h=i.getSnapshot;i=i.value;try{if(!bt(h(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yn(e,t){for(t&=~Fa,t&=~Ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mt(t),r=1<<n;e[n]=-1,t&=~r}}function $u(e){if((_e&6)!==0)throw Error(o(327));An();var t=mi(e,0);if((t&1)===0)return gt(e,Ke()),null;var n=$i(e,t);if(e.tag!==0&&n===2){var r=Ls(e);r!==0&&(t=r,n=Oa(e,r))}if(n===1)throw n=ni,Nn(e,0),yn(e,t),gt(e,Ke()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,ft,rn),gt(e,Ke()),null}function eh(e){mn!==null&&mn.tag===0&&(_e&6)===0&&An();var t=_e;_e|=1;var n=Ue.transition,r=we;try{if(Ue.transition=null,we=1,e)return e()}finally{we=r,Ue.transition=n,_e=t,(_e&6)===0&&Vt()}}function Ia(){Ct=jn.current,Ne(jn)}function Nn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==te&&(e.timeoutHandle=te,X(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Vs(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&di();break;case 3:Hn(),Ne(ht),Ne(tt),ta();break;case 5:$s(r);break;case 4:Hn();break;case 13:Ne(Oe);break;case 19:Ne(Oe);break;case 10:Ys(r.type._context);break;case 22:case 23:Ia()}n=n.return}if(Xe=e,ze=e=_n(e.current,null),Ze=Ct=t,He=0,ni=null,Fa=Ki=Tn=0,ft=ri=null,kn!==null){for(t=0;t<kn.length;t++)if(n=kn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,h=n.pending;if(h!==null){var b=h.next;h.next=i,r.next=b}n.pending=r}kn=null}return e}function th(e,t){do{var n=ze;try{if(Ks(),Ni.current=bi,Fi){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fi=!1}if(Rn=0,Ye=Ve=De=null,Kr=!1,Yr=0,Na.current=null,n===null||n.return===null){He=1,ni=t,ze=null;break}e:{var h=e,b=n.return,H=n,Y=t;if(t=Ze,H.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ne=Y,he=H,fe=he.tag;if((he.mode&1)===0&&(fe===0||fe===11||fe===15)){var oe=he.alternate;oe?(he.updateQueue=oe.updateQueue,he.memoizedState=oe.memoizedState,he.lanes=oe.lanes):(he.updateQueue=null,he.memoizedState=null)}var Fe=ku(b);if(Fe!==null){Fe.flags&=-257,Ru(Fe,b,H,h,t),Fe.mode&1&&Eu(h,ne,t),t=Fe,Y=ne;var Re=t.updateQueue;if(Re===null){var pt=new Set;pt.add(Y),t.updateQueue=pt}else Re.add(Y);break e}else{if((t&1)===0){Eu(h,ne,t),Ga();break e}Y=Error(o(426))}}else if(Me&&H.mode&1){var sn=ku(b);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),Ru(sn,b,H,h,t),Ws(qn(Y,H));break e}}h=Y=qn(Y,H),He!==4&&(He=2),ri===null?ri=[h]:ri.push(h),h=b;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var K=xu(h,Y,t);Ql(h,K);break e;case 1:H=Y;var W=h.type,Q=h.stateNode;if((h.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(pn===null||!pn.has(Q)))){h.flags|=65536,t&=-t,h.lanes|=t;var le=Pu(h,H,t);Ql(h,le);break e}}h=h.return}while(h!==null)}ih(n)}catch(de){t=de,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function nh(){var e=ji.current;return ji.current=bi,e===null?bi:e}function Ga(){(He===0||He===3||He===2)&&(He=4),Xe===null||(Tn&268435455)===0&&(Ki&268435455)===0||yn(Xe,Ze)}function $i(e,t){var n=_e;_e|=2;var r=nh();(Xe!==e||Ze!==t)&&(rn=null,Nn(e,t));do try{x0();break}catch(i){th(e,i)}while(!0);if(Ks(),_e=n,ji.current=r,ze!==null)throw Error(o(261));return Xe=null,Ze=0,He}function x0(){for(;ze!==null;)rh(ze)}function P0(){for(;ze!==null&&!Qd();)rh(ze)}function rh(e){var t=oh(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?ih(e):ze=t,Na.current=null}function ih(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=m0(n,t,Ct),n!==null){ze=n;return}}else{if(n=v0(n,t),n!==null){n.flags&=32767,ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,ze=null;return}}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);He===0&&(He=5)}function Fn(e,t,n){var r=we,i=Ue.transition;try{Ue.transition=null,we=1,E0(e,t,n,r)}finally{Ue.transition=i,we=r}return null}function E0(e,t,n,r){do An();while(mn!==null);if((_e&6)!==0)throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(Xd(e,h),e===Xe&&(ze=Xe=null,Ze=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Xi||(Xi=!0,lh(Us,function(){return An(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=Ue.transition,Ue.transition=null;var b=we;we=1;var H=_e;_e|=4,Na.current=null,_0(e,n),ju(n,e),q(e.containerInfo),e.current=n,S0(n),Jd(),_e=H,we=b,Ue.transition=h}else e.current=n;if(Xi&&(Xi=!1,mn=e,Qi=i),h=e.pendingLanes,h===0&&(pn=null),e0(n.stateNode),gt(e,Ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yi)throw Yi=!1,e=ba,ba=null,e;return(Qi&1)!==0&&e.tag!==0&&An(),h=e.pendingLanes,(h&1)!==0?e===La?ii++:(ii=0,La=e):ii=0,Vt(),null}function An(){if(mn!==null){var e=Dl(Qi),t=Ue.transition,n=we;try{if(Ue.transition=null,we=16>e?16:e,mn===null)var r=!1;else{if(e=mn,mn=null,Qi=0,(_e&6)!==0)throw Error(o(331));var i=_e;for(_e|=4,ue=e.current;ue!==null;){var h=ue,b=h.child;if((ue.flags&16)!==0){var H=h.deletions;if(H!==null){for(var Y=0;Y<H.length;Y++){var ne=H[Y];for(ue=ne;ue!==null;){var he=ue;switch(he.tag){case 0:case 11:case 15:ei(8,he,h)}var fe=he.child;if(fe!==null)fe.return=he,ue=fe;else for(;ue!==null;){he=ue;var oe=he.sibling,Fe=he.return;if(Vu(he),he===ne){ue=null;break}if(oe!==null){oe.return=Fe,ue=oe;break}ue=Fe}}}var Re=h.alternate;if(Re!==null){var pt=Re.child;if(pt!==null){Re.child=null;do{var sn=pt.sibling;pt.sibling=null,pt=sn}while(pt!==null)}}ue=h}}if((h.subtreeFlags&2064)!==0&&b!==null)b.return=h,ue=b;else e:for(;ue!==null;){if(h=ue,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ei(9,h,h.return)}var K=h.sibling;if(K!==null){K.return=h.return,ue=K;break e}ue=h.return}}var W=e.current;for(ue=W;ue!==null;){b=ue;var Q=b.child;if((b.subtreeFlags&2064)!==0&&Q!==null)Q.return=b,ue=Q;else e:for(b=W;ue!==null;){if(H=ue,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:zi(9,H)}}catch(de){be(H,H.return,de)}if(H===b){ue=null;break e}var le=H.sibling;if(le!==null){le.return=H.return,ue=le;break e}ue=H.return}}if(_e=i,Vt(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(vi,e)}catch{}r=!0}return r}finally{we=n,Ue.transition=t}}return!1}function sh(e,t,n){t=qn(n,t),t=xu(e,t,1),e=gn(e,t,1),t=st(),e!==null&&(Vr(e,1,t),gt(e,t))}function be(e,t,n){if(e.tag===3)sh(e,e,n);else for(;t!==null;){if(t.tag===3){sh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=qn(n,e),e=Pu(t,e,1),t=gn(t,e,1),e=st(),t!==null&&(Vr(t,1,e),gt(t,e));break}}t=t.return}}function k0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,Xe===e&&(Ze&n)===n&&(He===4||He===3&&(Ze&130023424)===Ze&&500>Ke()-Aa?Nn(e,0):Fa|=n),gt(e,t)}function ah(e,t){t===0&&((e.mode&1)===0?t=1:(t=pi,pi<<=1,(pi&130023424)===0&&(pi=4194304)));var n=st();e=Ht(e,t),e!==null&&(Vr(e,t,n),gt(e,n))}function R0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ah(e,n)}function T0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}r!==null&&r.delete(t),ah(e,n)}var oh;oh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)dt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return dt=!1,p0(e,t,n);dt=(e.flags&131072)!==0}else dt=!1,Me&&(t.flags&1048576)!==0&&Ul(t,Si,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Di(e,t),e=t.pendingProps;var i=On(t,tt.current);Bn(t,n),i=ia(null,t,r,e,i,n);var h=sa();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(r)?(h=!0,fi(t)):h=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Js(t),i.updater=Li,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=pa(null,t,r,!0,h,n)):(t.tag=0,Me&&h&&Bs(t),at(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Di(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=F0(r),e=Ot(r,e),i){case 0:t=ga(null,t,r,e,n);break e;case 1:t=bu(null,t,r,e,n);break e;case 11:t=Tu(null,t,r,e,n);break e;case 14:t=Nu(null,t,r,Ot(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ot(r,i),ga(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ot(r,i),bu(e,t,r,i,n);case 3:e:{if(Lu(t),e===null)throw Error(o(387));r=t.pendingProps,h=t.memoizedState,i=h.element,Xl(e,t),Ri(t,r,null,n);var b=t.memoizedState;if(r=b.element,pe&&h.isDehydrated)if(h={element:r,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){i=qn(Error(o(423)),t),t=Ou(e,t,r,n,i);break e}else if(r!==i){i=qn(Error(o(424)),t),t=Ou(e,t,r,n,i);break e}else for(pe&&(Pt=Fd(t.stateNode.containerInfo),St=t,Me=!0,Lt=null,Hr=!1),n=jl(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gn(),r===i){t=nn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return Zl(t),e===null&&qs(t),r=t.type,i=t.pendingProps,h=e!==null?e.memoizedProps:null,b=i.children,se(r,i)?b=null:h!==null&&se(r,h)&&(t.flags|=32),Mu(e,t),at(e,t,b,n),t.child;case 6:return e===null&&qs(t),null;case 13:return Du(e,t,n);case 4:return Zs(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Un(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ot(r,i),Tu(e,t,r,i,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,h=t.memoizedProps,b=i.value,Kl(t,r,b),h!==null)if(bt(h.value,b)){if(h.children===i.children&&!ht.current){t=nn(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var H=h.dependencies;if(H!==null){b=h.child;for(var Y=H.firstContext;Y!==null;){if(Y.context===r){if(h.tag===1){Y=tn(-1,n&-n),Y.tag=2;var ne=h.updateQueue;if(ne!==null){ne=ne.shared;var he=ne.pending;he===null?Y.next=Y:(Y.next=he.next,he.next=Y),ne.pending=Y}}h.lanes|=n,Y=h.alternate,Y!==null&&(Y.lanes|=n),Xs(h.return,n,t),H.lanes|=n;break}Y=Y.next}}else if(h.tag===10)b=h.type===t.type?null:h.child;else if(h.tag===18){if(b=h.return,b===null)throw Error(o(341));b.lanes|=n,H=b.alternate,H!==null&&(H.lanes|=n),Xs(b,n,t),b=h.sibling}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}at(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Bn(t,n),i=Et(i),r=r(i),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,i=Ot(r,t.pendingProps),i=Ot(r.type,i),Nu(e,t,r,i,n);case 15:return Fu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ot(r,i),Di(e,t),t.tag=1,ct(r)?(e=!0,fi(t)):e=!1,Bn(t,n),Cu(t,r,i),ca(t,r,i,n),pa(null,t,r,!0,e,n);case 19:return Gu(e,t,n);case 22:return Au(e,t,n)}throw Error(o(156,t.tag))};function lh(e,t){return Is(e,t)}function N0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,n,r){return new N0(e,t,n,r)}function Ua(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F0(e){if(typeof e=="function")return Ua(e)?1:0;if(e!=null){if(e=e.$$typeof,e===y)return 11;if(e===l)return 14}return 2}function _n(e,t){var n=e.alternate;return n===null?(n=Nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function es(e,t,n,r,i,h){var b=2;if(r=e,typeof e=="function")Ua(e)&&(b=1);else if(typeof e=="string")b=5;else e:switch(e){case v:return Mn(n.children,i,h,t);case P:b=8,i|=8;break;case w:return e=Nt(12,n,t,i|2),e.elementType=w,e.lanes=h,e;case x:return e=Nt(13,n,t,i),e.elementType=x,e.lanes=h,e;case A:return e=Nt(19,n,t,i),e.elementType=A,e.lanes=h,e;case S:return ts(n,i,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case g:b=10;break e;case c:b=9;break e;case y:b=11;break e;case l:b=14;break e;case a:b=16,r=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=Nt(b,n,t,i),t.elementType=e,t.type=r,t.lanes=h,t}function Mn(e,t,n,r){return e=Nt(7,e,r,t),e.lanes=n,e}function ts(e,t,n,r){return e=Nt(22,e,r,t),e.elementType=S,e.lanes=n,e.stateNode={isHidden:!1},e}function za(e,t,n){return e=Nt(6,e,null,t),e.lanes=n,e}function Ba(e,t,n){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A0(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=te,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Os(0),this.expirationTimes=Os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.identifierPrefix=r,this.onRecoverableError=i,pe&&(this.mutableSourceEagerHydrationData=null)}function uh(e,t,n,r,i,h,b,H,Y){return e=new A0(e,t,n,H,Y),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Nt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Js(h),e}function hh(e){if(!e)return dn;e=e._reactInternals;e:{if(T(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if(ct(n))return bl(e,n,t)}return t}function ch(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=V(t),e===null?null:e.stateNode}function dh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ns(e,t){dh(e,t),(e=e.alternate)&&dh(e,t)}function M0(e){return e=V(e),e===null?null:e.stateNode}function b0(){return null}return L.attemptContinuousHydration=function(e){if(e.tag===13){var t=Ht(e,134217728);if(t!==null){var n=st();Tt(t,e,134217728,n)}ns(e,134217728)}},L.attemptDiscreteHydration=function(e){if(e.tag===13){var t=Ht(e,1);if(t!==null){var n=st();Tt(t,e,1,n)}ns(e,1)}},L.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=vn(e),n=Ht(e,t);if(n!==null){var r=st();Tt(n,e,t,r)}ns(e,t)}},L.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Br(t.pendingLanes);n!==0&&(Ds(t,n|1),gt(t,Ke()),(_e&6)===0&&(Kn(),Vt()))}break;case 13:eh(function(){var r=Ht(e,1);if(r!==null){var i=st();Tt(r,e,1,i)}}),ns(e,1)}},L.batchedUpdates=function(e,t){var n=_e;_e|=1;try{return e(t)}finally{_e=n,_e===0&&(Kn(),yi&&Vt())}},L.createComponentSelector=function(e){return{$$typeof:Bi,value:e}},L.createContainer=function(e,t,n,r,i,h,b){return uh(e,t,!1,null,n,r,i,h,b)},L.createHasPseudoClassSelector=function(e){return{$$typeof:Vi,value:e}},L.createHydrationContainer=function(e,t,n,r,i,h,b,H,Y){return e=uh(n,r,!0,e,i,h,b,H,Y),e.context=hh(null),n=e.current,r=st(),i=vn(n),h=tn(r,i),h.callback=t??null,gn(n,h,i),e.current.lanes=i,Vr(e,i,r),gt(e,r),e},L.createPortal=function(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}},L.createRoleSelector=function(e){return{$$typeof:Hi,value:e}},L.createTestNameSelector=function(e){return{$$typeof:qi,value:e}},L.createTextSelector=function(e){return{$$typeof:Wi,value:e}},L.deferredUpdates=function(e){var t=we,n=Ue.transition;try{return Ue.transition=null,we=16,e()}finally{we=t,Ue.transition=n}},L.discreteUpdates=function(e,t,n,r,i){var h=we,b=Ue.transition;try{return Ue.transition=null,we=1,e(t,n,r,i)}finally{we=h,Ue.transition=b,_e===0&&Kn()}},L.findAllNodes=Ta,L.findBoundingRects=function(e,t){if(!je)throw Error(o(363));t=Ta(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Ae(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,i=r+n.width,h=n.y,b=h+n.height,H=t-1;0<=H;H--)if(t!==H){var Y=e[H],ne=Y.x,he=ne+Y.width,fe=Y.y,oe=fe+Y.height;if(r>=ne&&h>=fe&&i<=he&&b<=oe){e.splice(t,1);break}else if(r!==ne||n.width!==Y.width||oe<h||fe>b){if(!(h!==fe||n.height!==Y.height||he<r||ne>i)){ne>r&&(Y.width+=ne-r,Y.x=r),he<i&&(Y.width=i-ne),e.splice(t,1);break}}else{fe>h&&(Y.height+=fe-h,Y.y=h),oe<b&&(Y.height=b-fe),e.splice(t,1);break}}}return e},L.findHostInstance=ch,L.findHostInstanceWithNoPortals=function(e){return e=D(e),e=e!==null?E(e):null,e===null?null:e.stateNode},L.findHostInstanceWithWarning=function(e){return ch(e)},L.flushControlled=function(e){var t=_e;_e|=1;var n=Ue.transition,r=we;try{Ue.transition=null,we=1,e()}finally{we=r,Ue.transition=n,_e=t,_e===0&&(Kn(),Vt())}},L.flushPassiveEffects=An,L.flushSync=eh,L.focusWithin=function(e,t){if(!je)throw Error(o(363));for(e=Ea(e),t=Ju(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!$e(n)){if(n.tag===5&&et(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},L.getCurrentUpdatePriority=function(){return we},L.getFindAllNodesFailureDescription=function(e,t){if(!je)throw Error(o(363));var n=0,r=[];e=[Ea(e),0];for(var i=0;i<e.length;){var h=e[i++],b=e[i++],H=t[b];if((h.tag!==5||!$e(h))&&(ka(h,H)&&(r.push(Ra(H)),b++,b>n&&(n=b)),b<t.length))for(h=h.child;h!==null;)e.push(h,b),h=h.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ra(t[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},L.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return I(e.child.stateNode);default:return e.child.stateNode}},L.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:M0,findFiberByHostInstance:e.findFiberByHostInstance||b0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{vi=t.inject(e),Bt=t}catch{}e=!!t.checkDCE}}return e},L.isAlreadyRendering=function(){return!1},L.observeVisibleRects=function(e,t,n,r){if(!je)throw Error(o(363));e=Ta(e,t);var i=Gt(e,n,r).disconnect;return{disconnect:function(){i()}}},L.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},L.runWithPriority=function(e,t){var n=we;try{return we=e,t()}finally{we=n}},L.shouldError=function(){return null},L.shouldSuspend=function(){return!1},L.updateContainer=function(e,t,n,r){var i=t.current,h=st(),b=vn(i);return n=hh(n),t.context===null?t.context=n:t.pendingContext=n,t=tn(h,b),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gn(i,t,b),e!==null&&(Tt(e,i,b,h),ki(e,i,b)),b},L}),ws}var ll;function hc(){return ll||(ll=1,_s.exports=uc()),_s.exports}var cc=hc();const dc=rs(cc);var xs={exports:{}},ln={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul;function fc(){return ul||(ul=1,ln.ConcurrentRoot=1,ln.ContinuousEventPriority=4,ln.DefaultEventPriority=16,ln.DiscreteEventPriority=1,ln.IdleEventPriority=536870912,ln.LegacyRoot=0),ln}var hl;function gc(){return hl||(hl=1,xs.exports=fc()),xs.exports}var cl=gc(),pc=ye();const dl={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let fl=!1,gl=!1;const Ps=".react-konva-event",mc=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,vc=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,yc={};function hi(s,p,L=yc){if(!fl&&"zIndex"in p&&(console.warn(vc),fl=!0),!gl&&p.draggable){var O=p.x!==void 0||p.y!==void 0,M=p.onDragEnd||p.onDragMove;O&&!M&&(console.warn(mc),gl=!0)}for(var _ in L)if(!dl[_]){var o=_.slice(0,2)==="on",d=L[_]!==p[_];if(o&&d){var f=_.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),s.off(f,L[_])}var m=!p.hasOwnProperty(_);m&&s.setAttr(_,void 0)}var v=p._useStrictMode,P={},w=!1;const g={};for(var _ in p)if(!dl[_]){var o=_.slice(0,2)==="on",c=L[_]!==p[_];if(o&&c){var f=_.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),p[_]&&(g[f]=p[_])}!o&&(p[_]!==L[_]||v&&p[_]!==s.getAttr(_))&&(w=!0,P[_]=p[_])}w&&(s.setAttrs(P),un(s));for(var f in g)s.on(f+Ps,g[f])}function un(s){if(!pc.Konva.autoDrawEnabled){var p=s.getLayer()||s.getStage();p&&p.batchDraw()}}var Es=al();const pl={},_c={};Ir.Node.prototype._applyProps=hi;function Sc(s,p){if(typeof p=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${p}`);return}s.add(p),un(s)}function Cc(s,p,L){let O=Ir[s];O||(console.error(`Konva has no node with the type ${s}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${s}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),O=Ir.Group);const M={},_={};for(var o in p){var d=o.slice(0,2)==="on";d?_[o]=p[o]:M[o]=p[o]}const f=new O(M);return hi(f,_),f}function wc(s,p,L){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${s}"`)}function xc(s,p,L){return!1}function Pc(s){return s}function Ec(){return null}function kc(){return null}function Rc(s,p,L,O){return _c}function Tc(){}function Nc(s){}function Fc(s,p){return!1}function Ac(){return pl}function Mc(){return pl}const bc=setTimeout,Lc=clearTimeout,Oc=-1;function Dc(s,p){return!1}const Ic=!1,Gc=!0,Uc=!0;function zc(s,p){p.parent===s?p.moveToTop():s.add(p),un(s)}function Bc(s,p){p.parent===s?p.moveToTop():s.add(p),un(s)}function ml(s,p,L){p._remove(),s.add(p),p.setZIndex(L.getZIndex()),un(s)}function Vc(s,p,L){ml(s,p,L)}function Hc(s,p){p.destroy(),p.off(Ps),un(s)}function qc(s,p){p.destroy(),p.off(Ps),un(s)}function Wc(s,p,L){console.error(`Text components are not yet supported in ReactKonva. You text is: "${L}"`)}function jc(s,p,L){}function Kc(s,p,L,O,M){hi(s,M,O)}function Yc(s){s.hide(),un(s)}function Xc(s){}function Qc(s,p){(p.visible==null||p.visible)&&s.show()}function Jc(s,p){}function Zc(s){}function $c(){}const ed=Object.freeze(Object.defineProperty({__proto__:null,appendChild:zc,appendChildToContainer:Bc,appendInitialChild:Sc,cancelTimeout:Lc,clearContainer:Zc,commitMount:jc,commitTextUpdate:Wc,commitUpdate:Kc,createInstance:Cc,createTextInstance:wc,detachDeletedInstance:$c,finalizeInitialChildren:xc,getChildHostContext:Mc,getCurrentEventPriority:()=>cl.DefaultEventPriority,getPublicInstance:Pc,getRootHostContext:Ac,hideInstance:Yc,hideTextInstance:Xc,idlePriority:Es.unstable_IdlePriority,insertBefore:ml,insertInContainerBefore:Vc,isPrimaryRenderer:Ic,noTimeout:Oc,now:Es.unstable_now,prepareForCommit:Ec,preparePortalMount:kc,prepareUpdate:Rc,removeChild:Hc,removeChildFromContainer:qc,resetAfterCommit:Tc,resetTextContent:Nc,run:Es.unstable_runWithPriority,scheduleTimeout:bc,shouldDeprioritizeSubtree:Fc,shouldSetTextContent:Dc,supportsMutation:Uc,unhideInstance:Qc,unhideTextInstance:Jc,warnsIfNotActing:Gc},Symbol.toStringTag,{value:"Module"}));var td=Object.defineProperty,nd=Object.defineProperties,rd=Object.getOwnPropertyDescriptors,vl=Object.getOwnPropertySymbols,id=Object.prototype.hasOwnProperty,sd=Object.prototype.propertyIsEnumerable,yl=(s,p,L)=>p in s?td(s,p,{enumerable:!0,configurable:!0,writable:!0,value:L}):s[p]=L,_l=(s,p)=>{for(var L in p||(p={}))id.call(p,L)&&yl(s,L,p[L]);if(vl)for(var L of vl(p))sd.call(p,L)&&yl(s,L,p[L]);return s},ad=(s,p)=>nd(s,rd(p)),Sl,Cl;typeof window<"u"&&((Sl=window.document)!=null&&Sl.createElement||((Cl=window.navigator)==null?void 0:Cl.product)==="ReactNative")?ot.useLayoutEffect:ot.useEffect;function wl(s,p,L){if(!s)return;if(L(s)===!0)return s;let O=s.child;for(;O;){const M=wl(O,p,L);if(M)return M;O=O.sibling}}function xl(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const Pl=console.error;console.error=function(){const s=[...arguments].join("");if(s!=null&&s.startsWith("Warning:")&&s.includes("useContext")){console.error=Pl;return}return Pl.apply(this,arguments)};const ks=xl(ot.createContext(null));class El extends ot.Component{render(){return ot.createElement(ks.Provider,{value:this._reactInternals},this.props.children)}}function od(){const s=ot.useContext(ks);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const p=ot.useId();return ot.useMemo(()=>{for(const O of[s,s==null?void 0:s.alternate]){if(!O)continue;const M=wl(O,!1,_=>{let o=_.memoizedState;for(;o;){if(o.memoizedState===p)return!0;o=o.next}});if(M)return M}},[s,p])}function ld(){const s=od(),[p]=ot.useState(()=>new Map);p.clear();let L=s;for(;L;){if(L.type&&typeof L.type=="object"){const M=L.type._context===void 0&&L.type.Provider===L.type?L.type:L.type._context;M&&M!==ks&&!p.has(M)&&p.set(M,ot.useContext(xl(M)))}L=L.return}return p}function ud(){const s=ld();return ot.useMemo(()=>Array.from(s.keys()).reduce((p,L)=>O=>ot.createElement(p,null,ot.createElement(L.Provider,ad(_l({},O),{value:s.get(L)}))),p=>ot.createElement(El,_l({},p))),[s])}function hd(s){const p=Be.useRef({});return Be.useLayoutEffect(()=>{p.current=s}),Be.useLayoutEffect(()=>()=>{p.current={}},[]),p.current}const cd=s=>{const p=Be.useRef(),L=Be.useRef(),O=Be.useRef(),M=hd(s),_=ud(),o=d=>{const{forwardedRef:f}=s;f&&(typeof f=="function"?f(d):f.current=d)};return Be.useLayoutEffect(()=>(L.current=new Ir.Stage({width:s.width,height:s.height,container:p.current}),o(L.current),O.current=Gr.createContainer(L.current,cl.LegacyRoot,!1,null),Gr.updateContainer(Be.createElement(_,{},s.children),O.current),()=>{Ir.isBrowser&&(o(null),Gr.updateContainer(null,O.current,null),L.current.destroy())}),[]),Be.useLayoutEffect(()=>{o(L.current),hi(L.current,s,M),Gr.updateContainer(Be.createElement(_,{},s.children),O.current,null)}),Be.createElement("div",{ref:p,id:s.id,accessKey:s.accessKey,className:s.className,role:s.role,style:s.style,tabIndex:s.tabIndex,title:s.title})},dd="Layer",fd="Circle",gd="Text",Gr=dc(ed);Gr.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Be.version,rendererPackageName:"react-konva"});const pd=Be.forwardRef((s,p)=>Be.createElement(El,{},Be.createElement(cd,{...s,forwardedRef:p})));function md(){const[s,p]=Be.useState(!1);return an.jsxs("div",{style:{padding:0,margin:0},children:[an.jsx("h1",{children:"React-Konva Standalone Test"}),an.jsx("p",{children:"Drag the circle below:"}),an.jsx(pd,{width:400,height:400,children:an.jsxs(dd,{children:[an.jsx(fd,{x:200,y:200,radius:50,fill:s?"green":"red",draggable:!0,onDragStart:()=>p(!0),onDragEnd:()=>p(!1)}),an.jsx(gd,{x:150,y:300,text:"Drag me!",fontSize:20,fontFamily:"Arial"})]})})]})}if(typeof window<"u"){const s=()=>{const p=document.getElementById("canvas-root");p&&window.Konva?Sh.createRoot(p).render(an.jsx(md,{})):setTimeout(s,100)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()}})(React,ReactDOM);
